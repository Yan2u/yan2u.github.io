<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>DFS | ä½è¿ç®— | ä½è¿ç®—ä¼˜åŒ–Nçš‡åé—®é¢˜</title>
      <link href="/2022/11/20/2022-11-20-DFS-%E4%BD%8D%E8%BF%90%E7%AE%97-%E4%BD%8D%E8%BF%90%E7%AE%97%E4%BC%98%E5%8C%96N%E7%9A%87%E5%90%8E%E9%97%AE%E9%A2%98/"/>
      <url>/2022/11/20/2022-11-20-DFS-%E4%BD%8D%E8%BF%90%E7%AE%97-%E4%BD%8D%E8%BF%90%E7%AE%97%E4%BC%98%E5%8C%96N%E7%9A%87%E5%90%8E%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<p>å€Ÿ LeetCode çš„æ¯æ—¥ä¸€é¢˜ <a href="https://leetcode.cn/problems/n-queens/">51. N çš‡å - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a> å­¦äº†ä¸€ä¸‹ä½¿ç”¨ä½è¿ç®—ä¼˜åŒ– N çš‡åé—®é¢˜çš„æ–¹æ³•ï¼Œä¸ç”±å¾—æ„Ÿå¹ä½è¿ç®—çœŸæ˜¯ä¸ªç¥å¥‡çš„ä¸œè¥¿ï¼Œæ•´ç†ä¸€ä¸‹ï¼š</p><h3 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h3><p>æŒ‰ç…§å›½é™…è±¡æ£‹çš„è§„åˆ™ï¼Œçš‡åå¯ä»¥æ”»å‡»ä¸ä¹‹å¤„åœ¨åŒä¸€è¡Œæˆ–åŒä¸€åˆ—æˆ–åŒä¸€æ–œçº¿ä¸Šçš„æ£‹å­ã€‚</p><p>n çš‡åé—®é¢˜ ç ”ç©¶çš„æ˜¯å¦‚ä½•å°† n ä¸ªçš‡åæ”¾ç½®åœ¨ nÃ—n çš„æ£‹ç›˜ä¸Šï¼Œå¹¶ä¸”ä½¿çš‡åå½¼æ­¤ä¹‹é—´ä¸èƒ½ç›¸äº’æ”»å‡»ã€‚</p><p>ç»™ä½ ä¸€ä¸ªæ•´æ•° n ï¼Œè¿”å›æ‰€æœ‰ä¸åŒçš„ n çš‡åé—®é¢˜ çš„è§£å†³æ–¹æ¡ˆã€‚</p><p>æ¯ä¸€ç§è§£æ³•åŒ…å«ä¸€ä¸ªä¸åŒçš„ n çš‡åé—®é¢˜ çš„æ£‹å­æ”¾ç½®æ–¹æ¡ˆï¼Œè¯¥æ–¹æ¡ˆä¸­ â€˜Qâ€™ å’Œ â€˜.â€™ åˆ†åˆ«ä»£è¡¨äº†çš‡åå’Œç©ºä½ã€‚</p><p><img src="https://assets.leetcode.com/uploads/2020/11/13/queens.jpg" alt="ç¤ºä¾‹1"></p><figure class="highlight plaintext"><figcaption><span>text</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥ï¼šn = 4</span><br><span class="line">è¾“å‡ºï¼š[[&quot;.Q..&quot;,&quot;...Q&quot;,&quot;Q...&quot;,&quot;..Q.&quot;],[&quot;..Q.&quot;,&quot;Q...&quot;,&quot;...Q&quot;,&quot;.Q..&quot;]]</span><br><span class="line">è§£é‡Šï¼šå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œ4 çš‡åé—®é¢˜å­˜åœ¨ä¸¤ä¸ªä¸åŒçš„è§£æ³•ã€‚</span><br></pre></td></tr></table></figure><p><strong>æç¤ºï¼š</strong><code>1 &lt;= n &lt;= 9</code></p><h3 id="DFS-ä½è¿ç®—ä¼˜åŒ–"><a href="#DFS-ä½è¿ç®—ä¼˜åŒ–" class="headerlink" title="DFS + ä½è¿ç®—ä¼˜åŒ–"></a>DFS + ä½è¿ç®—ä¼˜åŒ–</h3><p>é¦–å…ˆåŸºæœ¬çš„ DFS è§£æ³•å°±ä¸å¤šèµ˜è¿°äº†ï¼Œå®¹æ˜“å‘ç°ï¼šéšç€å·²ç»æ‘†æ”¾çš„çš‡åæ•°é‡å¢åŠ ï¼Œæ£‹ç›˜ä¸Šå‰©ä½™èƒ½æ‘†æ”¾çš„ä½ç½®ä¼šå¿«é€Ÿå‡å°‘ï¼Œè¿™æ—¶å¦‚æœä¸è¿›è¡Œä¼˜åŒ–ï¼Œæ™®é€š DFS å°±ä¼šè¿›è¡Œå¤§é‡æ— æ„ä¹‰çš„è¯•æ¢ï¼Œæµªè´¹æ—¶é—´ã€‚</p><p>ä¸€ä¸ªä¼˜åŒ–çš„å‡ºå‘ç‚¹æ˜¯ï¼Œä¸å»æ¯ä¸ªä½ç½®è¿›è¡Œè¯•æ¢ï¼Œè€Œæ˜¯åœ¨æ‘†æ”¾äº†æŸä¸ªçš‡åä¹‹åå°±æ›´æ–°ä¹‹åå¯ä»¥ç»§ç»­æ‘†æ”¾çš‡åçš„ä½ç½®ï¼ˆåˆ—ï¼Œå·¦å³å¯¹è§’çº¿ï¼‰ï¼Œå¯¹è¿™äº›ä½ç½®ç»§ç»­è¯•æ¢ï¼Œå¹¶åŠ¨æ€æ›´æ–°ï¼Œè¿™æ ·ä½¿å¾—è¯•æ¢çš„æ¬¡æ•°å¤§å¤§å‡å°‘ï¼Œä»è€ŒèŠ‚çº¦äº†æ—¶é—´</p><p>åœ¨è¿™ç§ä¼˜åŒ–æ€è·¯ä¹‹ä¸‹ï¼Œå¦‚ä½•å¿«é€Ÿçš„è¿›è¡ŒåŠ¨æ€æ›´æ–°ï¼Œå¦‚ä½•ä»å½“å‰çŠ¶æ€ä¸­å¿«é€Ÿå–å¾—å¯ä»¥ç»§ç»­æ”¾ç½®çš‡åçš„ä½ç½®éƒ½æ˜¯å…³é”®ã€‚è€ƒè™‘åˆ°é¢˜ç›®çš„æ•°æ®è§„æ¨¡ï¼Œç”¨çŠ¶å‹ DP çš„æ€è·¯ï¼Œé‡‡ç”¨ä½è¿ç®—æ­£å¥½å¯ä»¥å®Œç¾æ»¡è¶³è¿™äº›éœ€æ±‚ã€‚</p><h4 id="DFS-ä¼˜åŒ–"><a href="#DFS-ä¼˜åŒ–" class="headerlink" title="DFS ä¼˜åŒ–"></a>DFS ä¼˜åŒ–</h4><p>é¦–å…ˆå¯ä»¥å‘ç°ï¼Œåˆæ³•çŠ¶æ€çš„æ¯è¡Œæœ‰ä¸”ä»…æœ‰ä¸€ä¸ªçš‡åï¼Œå› æ­¤ DFS çš„å¯¹è±¡å¯ä»¥ç®€åŒ–ä¸ºæŸè¡Œ.</p><p>è®¾äºŒè¿›åˆ¶æ•°ç¬¬ $i$ ($i$ ä» 0 å¼€å§‹) ä½ä¸º 1 è¡¨ç¤ºå¯ä»¥æ”¾ç½®ï¼Œä¸º 0 è¡¨ç¤ºä¸èƒ½æ”¾ç½®ï¼Œè®¾ç½®ä¸‰ä¸ªçŠ¶æ€æ•°ï¼š</p><ul><li>$vis_C$ï¼š$n$ ä½äºŒè¿›åˆ¶ï¼Œè¡¨ç¤ºå¯ä»¥æ”¾ç½®çš‡åçš„åˆ—ç¼–å·</li><li>$vis_L$ï¼š$2n-1$ ä½äºŒè¿›åˆ¶ï¼Œè¡¨ç¤ºå¯ä»¥æ”¾ç½®çš‡åçš„ï¼Œ<strong>å·¦ä¸‹è‡³å³ä¸Š</strong>çš„æ–œçº¿ç¼–å·ï¼ˆç®€ç§°ä¸º $L$ æ–œçº¿ï¼‰</li><li>$vis_R$ï¼š$2n-1$ ä½äºŒè¿›åˆ¶ï¼Œè¡¨ç¤ºå¯ä»¥æ”¾ç½®çš‡åçš„ï¼Œ<strong>å·¦ä¸Šè‡³å³ä¸‹</strong>çš„æ–œçº¿ç¼–å·ï¼ˆç®€ç§°ä¸º $R$ æ–œçº¿ï¼‰</li></ul><p>ä»¥ $vis_L$ ä¸ºä¾‹ï¼Œèµ·å§‹ä½ç½®åœ¨æ•´ä¸ªæ£‹ç›˜å·¦ä¸Šè§’ï¼Œåœ¨ $4\times 4$ çš„æ£‹ç›˜ä¸­ï¼Œæ¯ä¸ªæ ¼å­å¯¹åº”çš„æ–œçº¿ç¼–å·å¦‚ä¸‹è¡¨</p><div class="table-container"><table><thead><tr><th style="text-align:center">0</th><th style="text-align:center">1</th><th style="text-align:center">2</th><th style="text-align:center">3</th></tr></thead><tbody><tr><td style="text-align:center">1</td><td style="text-align:center">2</td><td style="text-align:center">3</td><td style="text-align:center">4</td></tr><tr><td style="text-align:center">2</td><td style="text-align:center">3</td><td style="text-align:center">4</td><td style="text-align:center">5</td></tr><tr><td style="text-align:center">3</td><td style="text-align:center">4</td><td style="text-align:center">5</td><td style="text-align:center">6</td></tr></tbody></table></div><p>$vis_R$ çš„èµ·å§‹ä½ç½®åœ¨æ•´ä¸ªæ£‹ç›˜å·¦ä¸‹è§’</p><h4 id="ä½è¿ç®—ä¼˜åŒ–"><a href="#ä½è¿ç®—ä¼˜åŒ–" class="headerlink" title="ä½è¿ç®—ä¼˜åŒ–"></a>ä½è¿ç®—ä¼˜åŒ–</h4><p>é¦–å…ˆæ˜¯å‡ ä¸ªå¸¸ç”¨çš„ä½è¿ç®—æ“ä½œï¼šï¼ˆ$i$ éƒ½ä» 0 å¼€å§‹ç¼–å·ï¼‰</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">a |= (<span class="number">1</span> &lt;&lt; i) <span class="comment">// è®¾ç½®ç¬¬ i ä½ä¸º 1</span></span><br><span class="line">a &amp;= ~(<span class="number">1</span> &lt;&lt; i) <span class="comment">// è®¾ç½®ç¬¬ i ä½ä¸º 0</span></span><br><span class="line">a ^= (<span class="number">1</span> &lt;&lt; i) <span class="comment">// å–åç¬¬ i ä½</span></span><br><span class="line">(a &gt;&gt; i) &amp; <span class="number">1</span> <span class="comment">// å–ç¬¬ i ä½çš„å€¼</span></span><br><span class="line">a = a &amp; -a <span class="comment">// lowbit æ“ä½œï¼Œé™¤äº†æœ€å³è¾¹çš„ 1 ä¹‹å¤–å…¶ä½™å…¨éƒ¨ç½®ä¸º 0</span></span><br></pre></td></tr></table></figure><p>ç”±äºæŒ‰ä½è¿ç®—çš„ç‰¹æ€§ï¼Œå¯¹çŠ¶æ€æ•°è¿›è¡Œä½è¿ç®—å°±æ˜¯å¯¹æ•´ä¸ªçŠ¶æ€é›†åˆè¿›è¡Œä½è¿ç®—ï¼Œä¸ä½¿ç”¨æ•°ç»„æ¯”èµ·æ¥æ˜¯éå¸¸é«˜æ•ˆçš„</p><p>æ ¹æ®åˆšæ‰çš„ç¼–å·è§„åˆ™å®¹æ˜“å‘ç°ï¼Œç¬¬ $row$ è¡Œç¬¬ $i$ åˆ—æ ¼å­æ‰€åœ¨çš„ $L$ æ–œçº¿ç¼–å·ä¸º $i+row$ï¼Œæ‰€åœ¨çš„ $R$ æ–œçº¿ç¼–å·ä¸º $i+(n-row-1)$ï¼Œ $i$ æ¯å¢åŠ  $1$ï¼Œä¸¤ç§å¯¹è§’çº¿çš„ç¼–å·ä¹Ÿå¢åŠ  $1$</p><p>æ‰€ä»¥æŠŠçŠ¶æ€æ•° $vis_L$ï¼Œ$vis_R$ å‘å³ä½ç§»ä¸€äº›å•ä½å°±å¯ä»¥å¯¹åº”ä¸Šå½“å‰è¡Œçš„å„ä¸ªåˆ—ï¼ŒæŠŠåˆ—ç¼–å·å‘å·¦ä½ç§»ä¹Ÿå¯ä»¥å¯¹åº”æ–œçº¿çš„ç¼–å·ï¼Œä¸”ç”±äºæŒ‰ä½ä¸è¿ç®—çš„æ€§è´¨ï¼Œå¤šå‡ºæ¥çš„ 1 å’Œ 0 ä¸ä¼šå½±å“è¿ç®—ç»“æœ</p><p><strong>å…·ä½“åšæ³•ï¼š</strong></p><ol><li>è®¾ $row$ ä¸ºå½“å‰è¡Œç¼–å·ï¼Œ$bin(i)$ ä¸ºå½“å‰åˆ—ç¼–å· $i$ è¡¨ç¤ºçš„äºŒè¿›åˆ¶æ•° $1\ll i$ï¼Œéƒ½ä» 0 å¼€å§‹ç¼–å·</li><li>è®¾ç½®ç¬¬ $i$ åˆ—ä¸èƒ½æ”¾ç½®çš‡åï¼š$vis_C\; \&amp;=\; rev(bin(i))$</li><li>è®¾ç½®ç¬¬ $i$ åˆ—æ‰€åœ¨çš„ $L$ å¯¹è§’çº¿ä¸èƒ½æ”¾ç½®çš‡åï¼š$vis_L\; \&amp;=\;rev(bin(i)\ll row)$</li><li>è®¾ç½®ç¬¬ $i$ åˆ—æ‰€åœ¨çš„ $R$ å¯¹è§’çº¿ä¸èƒ½æ”¾ç½®çš‡åï¼š$vis_R\; \&amp;=\;rev(bin(i)\ll (n-row-1))$</li><li>è·å–å½“å‰çŠ¶æ€ï¼š$state = vis_C\; \&amp;\; (vis_L\gg row) \;\&amp;\; (vis_R\gg(n-row-1))$</li></ol><p>æ­¤æ—¶å¯¹äº $state$ï¼Œå…¶ç¬¬ $i$ ä½ä¸º 1 å°±è¡¨ç¤ºç¬¬ $i$ åˆ—å¯ä»¥æ”¾ç½®ï¼Œå¦åˆ™å°±ä¸èƒ½æ”¾ç½®ï¼Œä½¿ç”¨ $lowbit$ æ“ä½œä»ä½ä½å¾€é«˜ä½é€ä¸€è¯»å– $state$ï¼Œè¯»å–çš„ç»“æœå°±æ˜¯æ¯ä¸€ä¸ªå¯ä»¥æ”¾ç½®çš‡åçš„åˆ—ç¼–å· $x$ å¯¹åº”çš„äºŒè¿›åˆ¶æ•° $1\ll x$</p><h4 id="ä½è¿ç®—è·å–æ•°-x-äºŒè¿›åˆ¶è¡¨ç¤ºä¸‹æœ€ä½ä½-1-çš„ä½ç½®ï¼ˆä»-0-å¼€å§‹ï¼‰"><a href="#ä½è¿ç®—è·å–æ•°-x-äºŒè¿›åˆ¶è¡¨ç¤ºä¸‹æœ€ä½ä½-1-çš„ä½ç½®ï¼ˆä»-0-å¼€å§‹ï¼‰" class="headerlink" title="ä½è¿ç®—è·å–æ•° $x$ äºŒè¿›åˆ¶è¡¨ç¤ºä¸‹æœ€ä½ä½ 1 çš„ä½ç½®ï¼ˆä» 0 å¼€å§‹ï¼‰"></a>ä½è¿ç®—è·å–æ•° $x$ äºŒè¿›åˆ¶è¡¨ç¤ºä¸‹æœ€ä½ä½ 1 çš„ä½ç½®ï¼ˆä» 0 å¼€å§‹ï¼‰</h4><p>ç»è¿‡ä¸Šè¿°è¿ç®—ï¼Œæˆ‘ä»¬å¾—åˆ°çš„ $x$ æ˜¯ä¸€ä¸ªåªæœ‰ç¬¬ $i$ ä½ä¸º 1ï¼Œå…¶ä»–ä½å‡ä¸º 0 çš„æ•°ï¼Œè¡¨ç¤ºç¬¬ $i$ åˆ—å¯ä»¥æ”¾ç½®çš‡åã€‚è¦è¾“å‡ºå…·ä½“çš„è§£æ³•ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä»æ ¹æ® $x$ è®¡ç®—å‡º $i$</p><p>é™¤äº† $i=log_2{x}$ï¼Œè·å– $i$ ä¹Ÿå¯ä»¥ç”¨ä½è¿ç®—å®ç°ã€‚é€šè¿‡ $lowbit$ è¿ç®—æˆ‘ä»¬è·å¾—äº† $xâ€™=2^i$ï¼Œåªéœ€æ‰¾åˆ°ä¸€ç§æ˜ å°„å…³ç³» $f$ æ˜¯ ${ x\;|\;x=2^i }$ åˆ° ${y\;|\;y=i}$ çš„ä¸€ä¸ªåŒå°„å³å¯</p><p>è¿™æ®µä»£ç æ¥è‡ª <a href="https://github.com/erlang/otp/blob/master/erts/emulator/sys/common/erl_mseg.c">erl_mseg.c</a>ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">static</span> <span class="type">const</span> <span class="type">int</span> debruijn[<span class="number">32</span>] = &#123;</span><br><span class="line"><span class="number">0</span>, <span class="number">1</span>, <span class="number">28</span>, <span class="number">2</span>, <span class="number">29</span>, <span class="number">14</span>, <span class="number">24</span>, <span class="number">3</span>, <span class="number">30</span>, <span class="number">22</span>, <span class="number">20</span>, <span class="number">15</span>, <span class="number">25</span>, <span class="number">17</span>, <span class="number">4</span>, <span class="number">8</span>,</span><br><span class="line"><span class="number">31</span>, <span class="number">27</span>, <span class="number">13</span>, <span class="number">23</span>, <span class="number">21</span>, <span class="number">19</span>, <span class="number">16</span>, <span class="number">7</span>, <span class="number">26</span>, <span class="number">12</span>, <span class="number">18</span>, <span class="number">6</span>, <span class="number">11</span>, <span class="number">5</span>, <span class="number">10</span>, <span class="number">9</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> LOW1BIT(X) (debruijn[((unsigned int)(((X) &amp; -(X)) * 0x077CB531U)) &gt;&gt; 27])</span></span><br></pre></td></tr></table></figure><p>ä»£ç ä¸­çš„ $0x077CB531U$ ä¸æ˜¯å”¯ä¸€çš„ï¼Œä½†æ˜¯å½“å®ƒæ”¹å˜æ—¶æ•°ç»„å†…å®¹ä¹Ÿè¦éšä¹‹æ”¹å˜</p><h3 id="æ•ˆæœ"><a href="#æ•ˆæœ" class="headerlink" title="æ•ˆæœ"></a>æ•ˆæœ</h3><p>ä½è¿ç®—ä¼˜åŒ–åçš„æå‡æ˜¯éå¸¸æ˜¾è‘—çš„ï¼š</p><div class="table-container"><table><thead><tr><th style="text-align:center">ç®—æ³•</th><th style="text-align:center">æ—¶é—´</th><th style="text-align:center">ç©ºé—´</th></tr></thead><tbody><tr><td style="text-align:center">æ™®é€šDFS</td><td style="text-align:center">136 ms</td><td style="text-align:center">10.3 MB</td></tr><tr><td style="text-align:center">æ™®é€šDFS + çŠ¶æ€å‹ç¼©</td><td style="text-align:center">120 ms</td><td style="text-align:center">10.5 MB</td></tr><tr><td style="text-align:center">ä½ç§»è¿ç®—ä¼˜åŒ–DFS</td><td style="text-align:center">0 ms</td><td style="text-align:center">7.7 MB</td></tr></tbody></table></div><h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">char</span> board[<span class="number">10</span>][<span class="number">10</span>];</span><br><span class="line"><span class="type">int</span> debruijn[<span class="number">32</span>] = &#123;<span class="number">0</span>,  <span class="number">1</span>,  <span class="number">28</span>, <span class="number">2</span>,  <span class="number">29</span>, <span class="number">14</span>, <span class="number">24</span>, <span class="number">3</span>, <span class="number">30</span>, <span class="number">22</span>, <span class="number">20</span>, <span class="number">15</span>, <span class="number">25</span>, <span class="number">17</span>, <span class="number">4</span>,  <span class="number">8</span>,</span><br><span class="line">                    <span class="number">31</span>, <span class="number">27</span>, <span class="number">13</span>, <span class="number">23</span>, <span class="number">21</span>, <span class="number">19</span>, <span class="number">16</span>, <span class="number">7</span>, <span class="number">26</span>, <span class="number">12</span>, <span class="number">18</span>, <span class="number">6</span>,  <span class="number">11</span>, <span class="number">5</span>,  <span class="number">10</span>, <span class="number">9</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> low1bit(X) (debruijn[((unsigned int)(((X) &amp; -(X)) * 0x077CB531U)) &gt;&gt; 27])</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dfs</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> vis_col, <span class="type">int</span> vis_l, <span class="type">int</span> vis_r, <span class="type">int</span> n, vector&lt;vector&lt;string&gt;&gt;&amp; res)</span> </span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> lowbit(x) (x &amp; -x)</span></span><br><span class="line">    <span class="type">int</span> pos = vis_col &amp; (vis_l &gt;&gt; x) &amp; (vis_r &gt;&gt; (n - x - <span class="number">1</span>));</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="built_in">lowbit</span>(pos); i; pos ^= i, i = <span class="built_in">lowbit</span>(pos)) &#123;</span><br><span class="line">        board[x][<span class="built_in">low1bit</span>(i)] = <span class="string">&#x27;Q&#x27;</span>;</span><br><span class="line">        <span class="keyword">if</span> (x == n - <span class="number">1</span>) &#123;</span><br><span class="line">            vector&lt;string&gt; v&#123;&#125;;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">                v.<span class="built_in">push_back</span>(<span class="built_in">string</span>(board[i]));</span><br><span class="line">            &#125;</span><br><span class="line">            res.<span class="built_in">push_back</span>(v);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">dfs</span>(x + <span class="number">1</span>, vis_col &amp; (~i), vis_l &amp; (~(i &lt;&lt; x)), vis_r &amp; (~(i &lt;&lt; (n - x - <span class="number">1</span>))), n, res);</span><br><span class="line">        &#125;</span><br><span class="line">        board[x][<span class="built_in">low1bit</span>(i)] = <span class="string">&#x27;.&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    vector&lt;vector&lt;string&gt;&gt; <span class="built_in">solveNQueens</span>(<span class="type">int</span> n) &#123;</span><br><span class="line">        vector&lt;vector&lt;string&gt;&gt; result&#123;&#125;;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">                board[i][n] = <span class="string">&#x27;\0&#x27;</span>;</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; n; ++j) &#123;</span><br><span class="line">                    board[i][j] = <span class="string">&#x27;.&#x27;</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">dfs</span>(<span class="number">0</span>, (<span class="number">1</span> &lt;&lt; n) - <span class="number">1</span>, (<span class="number">1</span> &lt;&lt; ((n &lt;&lt; <span class="number">1</span>) - <span class="number">1</span>)) - <span class="number">1</span>, (<span class="number">1</span> &lt;&lt; ((n &lt;&lt; <span class="number">1</span>) - <span class="number">1</span>)) - <span class="number">1</span>, n, result);</span><br><span class="line">            <span class="keyword">return</span> result;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> LeetCode </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DFS </tag>
            
            <tag> ä½è¿ç®— </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å…³äºvectorçš„å°æµ‹è¯•</title>
      <link href="/2022/09/23/2022-09-23-%E5%85%B3%E4%BA%8Evector%E7%9A%84%E5%B0%8F%E6%B5%8B%E8%AF%95/"/>
      <url>/2022/09/23/2022-09-23-%E5%85%B3%E4%BA%8Evector%E7%9A%84%E5%B0%8F%E6%B5%8B%E8%AF%95/</url>
      
        <content type="html"><![CDATA[<p>ä»Šå¤©çªç„¶å‘ç°è‡ªå·±æ˜¯ä¸ªå¤§æ€è½¯ã€‚ã€‚ã€‚</p><h3 id="èµ·å› "><a href="#èµ·å› " class="headerlink" title="èµ·å› "></a>èµ·å› </h3><p>åœ¨LeetCodeä¸Šå†™é¢˜ï¼Œæƒ³äº†åŠå¤©æ¯«æ— å¤´ç»ªï¼Œé‚ç¿»é¢˜è§£ï¼Œæç„¶å¤§æ‚Ÿï¼Œç›´å‘¼å¦™å“‰ğŸ˜†</p><p>æŒ‰ç…§é¢˜è§£æ€è·¯å¿«é€Ÿå®Œæˆä»£ç å¹¶æäº¤ï¼Œå‡»è´¥äº†50%å¤šç‚¹çš„é€‰æ‰‹ğŸ¤¨</p><p>ç„¶è€Œç‚¹å¼€å‡»è´¥äº†99%é€‰æ‰‹çš„æäº¤ä»£ç ï¼Œå‘ç°å’Œé¢˜è§£ä¹Ÿæ˜¯ä¸€æ ·æ€è·¯ï¼Œé‚ç™¾æ€ä¸å¾—å…¶è§£ğŸ˜•</p><p>å‘ç°99%ä»£ç è¿˜ä½¿ç”¨äº†<strong>æˆ‘è®¤ä¸º</strong>å¥‡æ…¢æ— æ¯”çš„ä¸‹æ ‡ç›´æ¥è®¿é—®<code>vector</code>å…ƒç´ ï¼ï¼Ÿ</p><p>æƒ³å½“å¹´æˆ‘äº†è§£åˆ°ä½¿ç”¨<code>iterator</code>éå†<code>vector</code>åä¾¿ä¸ºè¿™ç§çœ‹èµ·æ¥å¾ˆé«˜å¤§ä¸Šçš„æ–¹æ³•æ‰€æŠ˜æœå¹¶æ²¿ç”¨è‡³ä»Šï¼Œé¢å¯¹ç€â€œä¸‰è§‚â€å°½ç¢çš„å¯èƒ½ï¼Œä¸Šç½‘æŸ¥èµ„æ–™å¾—çŸ¥ï¼š<strong>ä¸‹æ ‡ç›´æ¥è®¿é—®çš„ç¡®æ¯”<code>iterator</code>æ›´å¿«</strong>ï¼ï¼</p><p>ä½†æ˜¯ã€‚ã€‚ã€‚æ¯•ç«Ÿå®è·µæ˜¯æ£€éªŒçœŸç†çš„å”¯ä¸€æ ‡å‡†ï¼Œæˆ‘å†³å®šå†è‡ªå·±è¯•è¯•ï¼ˆä¸´æ­»æŒ£æ‰ï¼‰ã€‚ã€‚ã€‚</p><h3 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h3><p>åˆ†æˆ3ç»„ï¼š</p><ol><li>ç›´æ¥ç”¨ä¸‹æ ‡<code>index</code></li><li>è¿­ä»£å™¨<code>iterator</code></li><li>C++11ä¸­çš„æ–°ç‰¹æ€§<code>foreach</code></li></ol><p>ç½‘ä¸ŠæŸ¥é˜…èµ„æ–™å¾—çŸ¥ï¼Œ<code>iterator</code>è®¿é—®æœ‰å‡ ç§ä¼˜åŒ–æ–¹æ³•ï¼š</p><ol><li>ä½¿ç”¨åè‡ªå¢</li><li>å¸¸é‡è¿­ä»£å™¨</li><li>æå–<code>vector.end()</code></li></ol><p>é¦–å…ˆæ˜¯ä»£ç ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç¼–è¯‘å™¨å‘½ä»¤ -static-libgcc -lpsapi</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;Windows.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;math.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;psapi.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;time.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;random&gt;</span></span></span><br><span class="line">std::vector&lt;<span class="type">unsigned</span> <span class="type">int</span>&gt; arr;</span><br><span class="line">LARGE_INTEGER lstart, lend, lfreq;</span><br><span class="line">std::mt19937 mt;</span><br><span class="line"><span class="type">double</span> totIndex, totIter, totFor;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">QueryPerformanceFrequency</span>(&amp;lfreq);</span><br><span class="line">    mt = std::<span class="built_in">mt19937</span>(std::random_device&#123;&#125;());</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Count,Index,Iterator,ForEach\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">timerStart</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">QueryPerformanceCounter</span>(&amp;lstart);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">timerStop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">QueryPerformanceCounter</span>(&amp;lend);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">double</span> <span class="title">timerSpan</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (<span class="type">double</span>)(lend.QuadPart - lstart.QuadPart) / (<span class="type">double</span>)lfreq.QuadPart * <span class="number">1000.0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">randInit</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> n = <span class="built_in">mt</span>() % (<span class="type">long</span> <span class="type">long</span>)<span class="number">1e9</span>;</span><br><span class="line">    arr.<span class="built_in">clear</span>();</span><br><span class="line">    <span class="type">unsigned</span> <span class="type">int</span> u = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">long</span> <span class="type">long</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        arr.<span class="built_in">push_back</span>(++u);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%lld,&quot;</span>, n);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">byIndex</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> n = arr.<span class="built_in">size</span>();</span><br><span class="line">    <span class="type">unsigned</span> <span class="type">int</span> temp;</span><br><span class="line">    <span class="built_in">timerStart</span>();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        temp = arr[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">timerStop</span>();</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%g,&quot;</span>, <span class="built_in">timerSpan</span>());</span><br><span class="line">    totIndex += <span class="built_in">timerSpan</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æ­¤å¤„çš„ç‰ˆæœ¬ä¸ºæœ€ç»ˆä¼˜åŒ–ç‰ˆæœ¬</span></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">byIterator</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> n = arr.<span class="built_in">size</span>();</span><br><span class="line">    <span class="type">unsigned</span> <span class="type">int</span> temp;</span><br><span class="line">    std::vector&lt;<span class="type">unsigned</span> <span class="type">int</span>&gt;::iterator it = arr.<span class="built_in">begin</span>(), ed = arr.<span class="built_in">end</span>();</span><br><span class="line">    <span class="built_in">timerStart</span>();</span><br><span class="line">    <span class="keyword">for</span> (; it != ed; ++it) &#123;</span><br><span class="line">        temp = *it;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">timerStop</span>();</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%g,&quot;</span>, <span class="built_in">timerSpan</span>());</span><br><span class="line">    totIter += <span class="built_in">timerSpan</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">byForEach</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> n = arr.<span class="built_in">size</span>();</span><br><span class="line">    <span class="type">unsigned</span> <span class="type">int</span> temp;</span><br><span class="line">    <span class="built_in">timerStart</span>();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">unsigned</span> <span class="type">int</span> ui : arr) &#123;</span><br><span class="line">        temp = ui;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">timerStop</span>();</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%g\n&quot;</span>, <span class="built_in">timerSpan</span>());</span><br><span class="line">    totFor += <span class="built_in">timerSpan</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">init</span>();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">20</span>; i++) &#123;</span><br><span class="line">        <span class="built_in">randInit</span>();</span><br><span class="line">        <span class="built_in">byIndex</span>();</span><br><span class="line">        <span class="built_in">byIterator</span>();</span><br><span class="line">        <span class="built_in">byForEach</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Average:\n%g,%g,%g&quot;</span>, totIndex / <span class="number">20.0</span>, totIter / <span class="number">20.0</span>, totFor / <span class="number">20.0</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¯ç»„å®éªŒæµ‹20æ¬¡ï¼Œå–å¹³å‡å€¼</p><h3 id="ç»“æœ"><a href="#ç»“æœ" class="headerlink" title="ç»“æœ"></a>ç»“æœ</h3><p>æ—¶é—´å•ä½éƒ½æ˜¯æ¯«ç§’</p><blockquote><p>æ— ä¼˜åŒ–</p></blockquote><div class="table-container"><table><thead><tr><th style="text-align:left">Count</th><th style="text-align:left">Index</th><th style="text-align:left">Iterator</th><th style="text-align:left">ForEach</th></tr></thead><tbody><tr><td style="text-align:left">412496532</td><td style="text-align:left">437.699</td><td style="text-align:left">2162.42</td><td style="text-align:left">1989.42</td></tr><tr><td style="text-align:left">119216746</td><td style="text-align:left">179.232</td><td style="text-align:left">1095.75</td><td style="text-align:left">638.162</td></tr><tr><td style="text-align:left">495923606</td><td style="text-align:left">742.139</td><td style="text-align:left">4560.92</td><td style="text-align:left">2651.87</td></tr><tr><td style="text-align:left">931352601</td><td style="text-align:left">1391.1</td><td style="text-align:left">8568.66</td><td style="text-align:left">4993.88</td></tr><tr><td style="text-align:left">26313293</td><td style="text-align:left">39.5728</td><td style="text-align:left">241.531</td><td style="text-align:left">140.297</td></tr><tr><td style="text-align:left">552602825</td><td style="text-align:left">1135.94</td><td style="text-align:left">5075.68</td><td style="text-align:left">2957.53</td></tr><tr><td style="text-align:left">745457912</td><td style="text-align:left">1437.66</td><td style="text-align:left">6843.82</td><td style="text-align:left">3985.57</td></tr><tr><td style="text-align:left">213446826</td><td style="text-align:left">319.521</td><td style="text-align:left">1965.62</td><td style="text-align:left">1140.39</td></tr><tr><td style="text-align:left">119067789</td><td style="text-align:left">177.646</td><td style="text-align:left">1094.69</td><td style="text-align:left">635.889</td></tr><tr><td style="text-align:left">188234190</td><td style="text-align:left">280.416</td><td style="text-align:left">1733.99</td><td style="text-align:left">1007.83</td></tr><tr><td style="text-align:left">728322180</td><td style="text-align:left">1091.2</td><td style="text-align:left">6685.73</td><td style="text-align:left">3914.53</td></tr><tr><td style="text-align:left">841381042</td><td style="text-align:left">1265.75</td><td style="text-align:left">7732.66</td><td style="text-align:left">4507.66</td></tr><tr><td style="text-align:left">361173914</td><td style="text-align:left">542.042</td><td style="text-align:left">3323.2</td><td style="text-align:left">1935.33</td></tr><tr><td style="text-align:left">270545070</td><td style="text-align:left">403.941</td><td style="text-align:left">2487.95</td><td style="text-align:left">1447.04</td></tr><tr><td style="text-align:left">12213090</td><td style="text-align:left">18.1363</td><td style="text-align:left">114.191</td><td style="text-align:left">72.117</td></tr><tr><td style="text-align:left">386551741</td><td style="text-align:left">692.889</td><td style="text-align:left">3559.2</td><td style="text-align:left">2071.83</td></tr><tr><td style="text-align:left">96517083</td><td style="text-align:left">144.475</td><td style="text-align:left">887.358</td><td style="text-align:left">514.5</td></tr><tr><td style="text-align:left">318260028</td><td style="text-align:left">475.689</td><td style="text-align:left">2927.36</td><td style="text-align:left">1701.81</td></tr><tr><td style="text-align:left">467059067</td><td style="text-align:left">697.862</td><td style="text-align:left">4297.45</td><td style="text-align:left">2493.89</td></tr><tr><td style="text-align:left">416695198</td><td style="text-align:left">622.697</td><td style="text-align:left">3830.22</td><td style="text-align:left">2224.67</td></tr></tbody></table></div><p><strong>å¹³å‡å€¼</strong>ï¼š</p><div class="table-container"><table><thead><tr><th>Index</th><th>Interator</th><th>ForEach</th></tr></thead><tbody><tr><td>604.781</td><td>3459.42</td><td>2051.21</td></tr><tr><td>100%</td><td>572%</td><td>339%</td></tr></tbody></table></div><p>æ¯ç»„20æ¬¡çš„æ•°æ®é‡éƒ½æ˜¯ä¸€æ ·ï¼Œä¸‹é¢ç›´æ¥æ”¾å¹³å‡å€¼</p><blockquote><p>è¿­ä»£å™¨åè‡ªå¢ï¼ˆ++itï¼‰</p></blockquote><div class="table-container"><table><thead><tr><th>Index</th><th>Iterator</th><th>For</th></tr></thead><tbody><tr><td>675.051</td><td>3299.05</td><td>2428.63</td></tr><tr><td>100%</td><td>489%</td><td>360%</td></tr></tbody></table></div><blockquote><p>å¸¸è¿­ä»£å™¨åè‡ªå¢ï¼ˆconst_iteratorï¼Œ++itï¼‰</p></blockquote><div class="table-container"><table><thead><tr><th>Index</th><th>Iterator</th><th>For</th></tr></thead><tbody><tr><td>874.831</td><td>4232.79</td><td>2428.63</td></tr><tr><td>100%</td><td>539%</td><td>309%</td></tr></tbody></table></div><p>æˆ‘çš„è¯„ä»·æ˜¯ï¼Œæ²¡æ€è½¯ç”¨</p><blockquote><p>æå–<code>vector.end()</code>ï¼Œåè‡ªå¢</p></blockquote><div class="table-container"><table><thead><tr><th>Index</th><th>Iterator</th><th>For</th></tr></thead><tbody><tr><td>512.14</td><td>1625.49</td><td>1695.14</td></tr><tr><td>100%</td><td>317%</td><td>331%</td></tr></tbody></table></div><blockquote><p>æå–<code>vector.end()</code>ï¼Œåè‡ªå¢ + O3ä¼˜åŒ–</p></blockquote><div class="table-container"><table><thead><tr><th style="text-align:left">Index</th><th>Iterator</th><th>For</th></tr></thead><tbody><tr><td style="text-align:left">2e-5</td><td>1287.46</td><td>1430.17</td></tr><tr><td style="text-align:left">100%</td><td>6.4373e9%</td><td>7.15085e9%</td></tr></tbody></table></div><p><code>Index</code>æ€ç–¯äº†</p><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>æ²¡ä»€ä¹ˆå¥½è¯´çš„ï¼Œ<strong>æˆ‘æ˜¯å¤§æ€è½¯</strong>ï¼Œ<code>Index</code> è–„çº±å¥½å§ï¼Œæˆ‘çš„ <code>Iterator</code> ğŸ˜­ğŸ˜­ğŸ˜­</p><p>æ²¡ç»è¿‡ä¼˜åŒ–å‰ç›´æ¥è¢«<code>Index</code>å’Œ<code>ForEach</code>åŒåŒè–„çº±ï¼Œå¼€æ»¡ä¼˜åŒ–æ‰å’Œ<code>ForEach</code>å·®ä¸å¤šå¿«ğŸ˜­ğŸ˜­ğŸ˜­</p><p>ç„¶å<code>Index</code>ç»è¿‡O3ä¼˜åŒ–ç”šè‡³èƒ½ææ€–åˆ°0msï¼Ÿï¼Ÿï¼ğŸ˜²ğŸ˜²ğŸ˜²</p><p>æˆ‘çš„è¯„ä»·æ˜¯ï¼šwyxæ˜¯çº¯çº¯çš„å°ä¸‘ğŸ¤¡ğŸ¤¡ğŸ¤¡</p><p>wyxè‡ªä»å­¦äº†<code>iterator</code>ä¹‹åå¦‚å¾—çµä¸¹å¦™è¯ï¼Œåœ¨åšä¿¡ç”¨<code>iterator</code>é€Ÿåº¦è–„çº±ä¸‹æ ‡è®¿é—®çš„æ— å˜å¤´è‰¯å¥½è‡ªæˆ‘æ„Ÿè§‰çš„é™¶é†‰ä¸‹ï¼Œç›´åˆ°ä»Šå¤©ä¸ºæ­¢ä»–åªè¦ç”¨åˆ°<code>vector</code>å¿…ç”¨<code>iterator</code>ğŸ¤¡ğŸ¤¡ğŸ¤¡</p><p>ä¸è¯´äº†ï¼Œ<code>iterator</code>ï¼Œå†è§ï¼</p>]]></content>
      
      
      <categories>
          
          <category> LeetCode </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ€è½¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åˆ†æ²» | äºŒåˆ† | å¯»æ‰¾æ­£åºæ•°ç»„çš„ä¸­ä½æ•°</title>
      <link href="/2022/09/19/2022-09-19-LeetCode-%E5%AF%BB%E6%89%BE%E6%AD%A3%E5%BA%8F%E6%95%B0%E7%BB%84%E7%9A%84%E4%B8%AD%E4%BD%8D%E6%95%B0/"/>
      <url>/2022/09/19/2022-09-19-LeetCode-%E5%AF%BB%E6%89%BE%E6%AD%A3%E5%BA%8F%E6%95%B0%E7%BB%84%E7%9A%84%E4%B8%AD%E4%BD%8D%E6%95%B0/</url>
      
        <content type="html"><![CDATA[<p>æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰<br>é“¾æ¥ï¼š<a href="https://leetcode.cn/problems/median-of-two-sorted-arrays">https://leetcode.cn/problems/median-of-two-sorted-arrays</a></p><h2 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h2><p>ç»™å®šä¸¤ä¸ªå¤§å°åˆ†åˆ«ä¸º m å’Œ n çš„æ­£åºï¼ˆä»å°åˆ°å¤§ï¼‰æ•°ç»„ nums1 å’Œ nums2ã€‚è¯·ä½ æ‰¾å‡ºå¹¶è¿”å›è¿™ä¸¤ä¸ªæ­£åºæ•°ç»„çš„ ä¸­ä½æ•° ã€‚</p><p>ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦åº”è¯¥ä¸º O(log (m+n)) ã€‚</p><h2 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h2><p>ä¸¤ä¸ª <code>vector&lt;int&gt;</code>ï¼Œè¡¨ç¤ºä¸¤ä¸ªæ­£åºçš„æ•°ç»„</p><h2 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h2><p>ä¸¤ä¸ªæ•°ç»„åˆå¹¶åçš„ä¸­ä½æ•°ï¼ˆ<code>double</code> ç±»å‹ï¼‰</p><h2 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ç¤ºä¾‹1: nums1=[1,3], nums2=[2]</span><br><span class="line">ç¤ºä¾‹2: nums1=[1,2], nums2=[3,4]</span><br></pre></td></tr></table></figure><h2 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ç¤ºä¾‹1: 2</span><br><span class="line">ç¤ºä¾‹2: 2.5</span><br></pre></td></tr></table></figure><h2 id="Hint"><a href="#Hint" class="headerlink" title="Hint"></a>Hint</h2><p>nums1.length == m<br>nums2.length == n<br>0 &lt;= m &lt;= 1000<br>0 &lt;= n &lt;= 1000<br>1 &lt;= m + n &lt;= 2000<br>$-10^6\leq nums1[i],\;nums2[i]\leq 10^6$</p><h2 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><p>åšå®Œè¿™ä¸ªé¢˜æ‰çŸ¥é“è‡ªå·±OIæ°´å¹³ä¸‹æ»‘ç¡®å®å‰å®³ï¼Œä¸€å¼€å§‹å±…ç„¶æ²¡æƒ³åˆ°ç”¨äºŒåˆ†ã€‚ã€‚ã€‚</p><p><strong>é¦–å…ˆè¯´æš´åŠ›åšæ³•ï¼ˆæ—¶é—´å¤æ‚åº¦$O(m+n)$ï¼‰</strong></p><p><del>é¦–å…ˆæ’é™¤åˆå¹¶åæ’åºç„¶åç›´æ¥è¾“å‡ºä¸­ä½æ•°çš„åŸå§‹åšæ³•</del>ï¼Œå› ä¸ºä¸¤ä¸ªæ•°ç»„éƒ½æ˜¯æ­£åºçš„ï¼Œæ‰€ä»¥å¯ä»¥æƒ³åˆ°è®¾ä¸¤ä¸ªæŒ‡é’ˆåˆ†åˆ«æŒ‡å‘ä¸¤ä¸ªæ•°ç»„çš„å¤´éƒ¨ï¼ŒéšæŒ‡é’ˆçš„ç§»åŠ¨ç­›é€‰å‡ºè¾ƒå°çš„æ•°å­—ï¼Œä¸¤ä¸ªæŒ‡é’ˆä¸€å…±ç§»åŠ¨ $\frac{m+n}{2}$ æ¬¡çš„æ—¶å€™å°±å¯ä»¥ç»“æŸäº†ï¼Œæ­¤æ—¶æŒ‡é’ˆæŒ‡å‘çš„æ•°å­—å°±æ˜¯ä¸­ä½æ•°</p><p><strong>ç„¶åæ˜¯æ»¡è¶³é¢˜ç›®æ¡ä»¶çš„äºŒåˆ†åšæ³•</strong></p><p>æŠŠåŸé¢˜æ¨å¹¿è‡³æ±‚åˆå¹¶åæ•°ç»„ç¬¬ $k$ å°çš„æ•°ï¼Œé‚£ä¹ˆï¼š</p><p>ç”±äºä¸¤ä¸ªæ•°ç»„ï¼ˆè®¾ä¸º $A$ï¼Œ$B$ï¼‰å‡æ­£åºï¼Œåœ¨ä¸€æ¬¡äºŒåˆ†ä¸­ï¼Œè€ƒè™‘æ¯”è¾ƒ $A[\frac{k}{2}]$ å’Œ$B[\frac{k}{2}]$ çš„å¤§å°ï¼Œè‹¥ $A[\frac{k}{2}]\geq B[\frac{k}{2}]$ï¼Œåˆ™è¯´æ˜åˆå¹¶ä¹‹åçš„ç¬¬ $k$ å°ä¸å¯èƒ½æ˜¯ $B[\frac{k}{2}]$ åŠå…¶ä¹‹å‰çš„æ•°å­—ä¸­æŸä¸€ä¸ªï¼ˆ$B[\frac{k}{2}]$ æœ€å¤§ä¹Ÿåªèƒ½æ˜¯ç¬¬ $k-1$ å°ï¼‰ï¼Œæ‰€ä»¥æŠŠè¿™éƒ¨åˆ†æ•°å­—ï¼ˆè®¾æœ‰ $d$ ä¸ªï¼‰å‰”é™¤ï¼Œå‰©ä¸‹çš„æ•°ä¸­å¯»æ‰¾ç¬¬ $k-d$ å°ï¼Œå¦‚æ­¤é‡å¤ç›´åˆ°æŸä¸€ä¸ªæ•°ç»„ä¸ºç©ºï¼Œæˆ–è€… $k=1$ å³å¯ç›´æ¥åˆ¤æ–­ä¸­ä½æ•°</p><p>æ±‚ä¸­ä½æ•°ï¼Œä¹Ÿå°±æ˜¯ $k=\frac{m+n}{2}$ï¼Œæ—¶é—´å¤æ‚åº¦ç†è®º $O(log_2(m+n))$</p><p>è¯´å®è¯æ•°æ®é‡å¤ªå°ä½“ç°ä¸å‡ºå¤šå¤§å·®å¼‚ï¼Œè¦æ˜¯åƒOIé‚£ç§åŠ¨è¾„ä¸Šäº¿çš„é‡çº§å°±èƒ½çœ‹å‡ºæ¥äº†</p><h2 id="Codes"><a href="#Codes" class="headerlink" title="Codes"></a>Codes</h2><p><strong>æš´åŠ›è§£æ³•ï¼ˆ24msï¼‰</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">double</span> <span class="title">findMedianSortedArrays</span><span class="params">(std::vector&lt;<span class="type">int</span>&gt;&amp; nums1,</span></span></span><br><span class="line"><span class="params"><span class="function">                              std::vector&lt;<span class="type">int</span>&gt;&amp; nums2)</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> total = nums1.<span class="built_in">size</span>() + nums2.<span class="built_in">size</span>();</span><br><span class="line">    <span class="type">int</span> result, result_2, mid;</span><br><span class="line">    mid = total &amp; <span class="number">1</span> ? (total + <span class="number">1</span>) &gt;&gt; <span class="number">1</span> : total &gt;&gt; <span class="number">1</span>;</span><br><span class="line">    mid--;</span><br><span class="line">    <span class="keyword">if</span> (nums1.<span class="built_in">empty</span>())</span><br><span class="line">        <span class="keyword">return</span> total &amp; <span class="number">1</span> ? (<span class="type">double</span>)nums2[mid]</span><br><span class="line">                         : (<span class="type">double</span>)(nums2[mid] + nums2[mid + <span class="number">1</span>]) / <span class="number">2.0</span>;</span><br><span class="line">    <span class="keyword">if</span> (nums2.<span class="built_in">empty</span>())</span><br><span class="line">        <span class="keyword">return</span> total &amp; <span class="number">1</span> ? (<span class="type">double</span>)nums1[mid]</span><br><span class="line">                         : (<span class="type">double</span>)(nums1[mid] + nums1[mid + <span class="number">1</span>]) / <span class="number">2.0</span>;</span><br><span class="line">    std::vector&lt;<span class="type">int</span>&gt;::iterator it1 = nums1.<span class="built_in">begin</span>();</span><br><span class="line">    std::vector&lt;<span class="type">int</span>&gt;::iterator it2 = nums2.<span class="built_in">begin</span>();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt;= mid; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (it1 == nums1.<span class="built_in">end</span>())</span><br><span class="line">            result = *it2++;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (it2 == nums2.<span class="built_in">end</span>())</span><br><span class="line">            result = *it1++;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (*it1 &lt;= *it2)</span><br><span class="line">            result = *it1++;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            result = *it2++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (total &amp; <span class="number">1</span>)</span><br><span class="line">        <span class="keyword">return</span> (<span class="type">double</span>)result;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (it1 == nums1.<span class="built_in">end</span>())</span><br><span class="line">            result_2 = *it2++;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (it2 == nums2.<span class="built_in">end</span>())</span><br><span class="line">            result_2 = *it1++;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (*it1 &lt;= *it2)</span><br><span class="line">            result_2 = *it1++;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            result_2 = *it2++;</span><br><span class="line">        <span class="keyword">return</span> (<span class="type">double</span>)(result + result_2) / <span class="number">2.0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><strong>äºŒåˆ†è§£æ³•ï¼ˆ16msï¼‰</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">findKth</span><span class="params">(std::vector&lt;<span class="type">int</span>&gt;&amp; arr1, std::vector&lt;<span class="type">int</span>&gt;&amp; arr2, <span class="type">int</span> st1, <span class="type">int</span> st2,</span></span></span><br><span class="line"><span class="params"><span class="function">            <span class="type">int</span> len1, <span class="type">int</span> len2, <span class="type">int</span> k)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (st1 &gt; len1) <span class="keyword">return</span> arr2[st2 + k - <span class="number">2</span>];</span><br><span class="line">        <span class="keyword">if</span> (st2 &gt; len2) <span class="keyword">return</span> arr1[st1 + k - <span class="number">2</span>];</span><br><span class="line">        <span class="keyword">if</span> (k == <span class="number">1</span>) <span class="keyword">return</span> std::<span class="built_in">min</span>(arr1[st1 - <span class="number">1</span>], arr2[st2 - <span class="number">1</span>]);</span><br><span class="line">        <span class="type">int</span> next1 = std::<span class="built_in">min</span>(len1, st1 + (k &gt;&gt; <span class="number">1</span>) - <span class="number">1</span>);</span><br><span class="line">        <span class="type">int</span> next2 = std::<span class="built_in">min</span>(len2, st2 + (k &gt;&gt; <span class="number">1</span>) - <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">if</span> (arr1[next1 - <span class="number">1</span>] &gt;= arr2[next2 - <span class="number">1</span>])</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">findKth</span>(arr1, arr2, st1, next2 + <span class="number">1</span>, len1, len2,</span><br><span class="line">                           k - (next2 - st2 + <span class="number">1</span>));</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">findKth</span>(arr1, arr2, next1 + <span class="number">1</span>, st2, len1, len2,</span><br><span class="line">                           k - (next1 - st1 + <span class="number">1</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">double</span> <span class="title">findMedianSortedArrays</span><span class="params">(std::vector&lt;<span class="type">int</span>&gt;&amp; nums1,</span></span></span><br><span class="line"><span class="params"><span class="function">                                  std::vector&lt;<span class="type">int</span>&gt;&amp; nums2)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> len1 = nums1.<span class="built_in">size</span>(), len2 = nums2.<span class="built_in">size</span>();</span><br><span class="line">        <span class="type">int</span> total = len1 + len2;</span><br><span class="line">        <span class="keyword">if</span> (total &amp; <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="type">int</span> mid = (total + <span class="number">1</span>) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span> (nums1.<span class="built_in">empty</span>()) <span class="keyword">return</span> (<span class="type">double</span>)nums2[mid - <span class="number">1</span>];</span><br><span class="line">            <span class="keyword">if</span> (nums2.<span class="built_in">empty</span>()) <span class="keyword">return</span> (<span class="type">double</span>)nums1[mid - <span class="number">1</span>];</span><br><span class="line">            <span class="keyword">return</span> (<span class="type">double</span>)<span class="built_in">findKth</span>(nums1, nums2, <span class="number">1</span>, <span class="number">1</span>, len1, len2,</span><br><span class="line">                                   (total + <span class="number">1</span>) &gt;&gt; <span class="number">1</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="type">int</span> mid = total &gt;&gt; <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span> (nums1.<span class="built_in">empty</span>()) <span class="keyword">return</span> (<span class="type">double</span>)(nums2[mid - <span class="number">1</span>] + nums2[mid]) / <span class="number">2.0</span>;</span><br><span class="line">            <span class="keyword">if</span> (nums2.<span class="built_in">empty</span>()) <span class="keyword">return</span> (<span class="type">double</span>)(nums1[mid - <span class="number">1</span>] + nums1[mid]) / <span class="number">2.0</span>;</span><br><span class="line">            <span class="keyword">return</span> (<span class="type">double</span>)(<span class="built_in">findKth</span>(nums1, nums2, <span class="number">1</span>, <span class="number">1</span>, len1, len2, mid) +</span><br><span class="line">                            <span class="built_in">findKth</span>(nums1, nums2, <span class="number">1</span>, <span class="number">1</span>, len1, len2, mid + <span class="number">1</span>)) /</span><br><span class="line">                   <span class="number">2.0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> LeetCode </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åˆ†æ²» </tag>
            
            <tag> äºŒåˆ† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æš‘æœŸâ€œæ¯•è®¾â€ -- Contest Killer</title>
      <link href="/2022/08/19/2022-08-19-%E6%9A%91%E6%9C%9F%E6%AF%95%E8%AE%BE-Contest-Killer/"/>
      <url>/2022/08/19/2022-08-19-%E6%9A%91%E6%9C%9F%E6%AF%95%E8%AE%BE-Contest-Killer/</url>
      
        <content type="html"><![CDATA[<h3 id="æš‘æœŸ-â€œæ¯•è®¾â€-â€”â€”Contest-Killer"><a href="#æš‘æœŸ-â€œæ¯•è®¾â€-â€”â€”Contest-Killer" class="headerlink" title="æš‘æœŸ â€œæ¯•è®¾â€ â€”â€”Contest Killer"></a>æš‘æœŸ â€œæ¯•è®¾â€ â€”â€”Contest Killer</h3><h4 id="Contest-Killer"><a href="#Contest-Killer" class="headerlink" title="Contest Killer"></a>Contest Killer</h4><p>åˆå­¦WPFï¼Œå†™äº†è¿™ä¸ªOIç¦»çº¿æµ‹è¯„å™¨</p><p>å¯ä»¥æŠŠå®ƒçœ‹æˆæ˜¯CCR-Plusçš„æ¢çš®ç‰ˆï¼ˆæ¯•ç«Ÿè¯„æµ‹å™¨éƒ¨åˆ†çš„æºä»£ç éƒ½æ˜¯ç…§æ¬çš„â€¦â€¦â€¦â€¦ï¼‰</p><p>å› ä¸ºUIå­—ä½“æ™®éæ¯”è¾ƒå¤§ï¼Œé€‚åˆè¾ƒå¤§å¤§å±å¹•çš„ç©å®¶ä½¿ç”¨</p><p>å·²å¼€æºï¼Œ</p><p>Githubï¼š<a href="https://github.com/Yan2u/Contest_Killer">Yan2u/Contest_Killer: An offline judger for Olympiad in Informatics (github.com)</a></p><h4 id="è®°å½•"><a href="#è®°å½•" class="headerlink" title="è®°å½•"></a>è®°å½•</h4><p>æ–­æ–­ç»­ç»­å†™äº†ä¸¤ä¸ªæœˆâ€¦â€¦ä¸æ–­é‡å¤å‘ç°é—®é¢˜ + ä¸Šç½‘æŸ¥èµ„æ–™ + ç°åœºå­¦ä¹  + è§£å†³é—®é¢˜ï¼Œçº¯é¢å‘é—®é¢˜ç¼–ç¨‹äº†</p><p>è™½ç„¶ç”¨äº†<code>viewmodel</code>å’Œ<code>command</code>ï¼Œä½†æ˜¯æ„Ÿè§‰è‡ªå·±è¿˜ä¸æ˜¯å¾ˆæ‡‚MVVMï¼Œæ„Ÿè§‰ç”¨ç»‘å®šäº‹ä»¶æ¥å†™ä¹Ÿå·®ä¸å¤š</p><p>ä¸‹ä¸€ç›®æ ‡ï¼šç”¨ASP.NETæ­å»ºè‡ªå·±çš„åšå®¢</p><p>åŠ æ²¹ï¼šï¼‰</p><h4 id="ä¸€äº›æˆªå›¾"><a href="#ä¸€äº›æˆªå›¾" class="headerlink" title="ä¸€äº›æˆªå›¾"></a>ä¸€äº›æˆªå›¾</h4><p><img src="https://s1.ax1x.com/2022/08/19/vrxUzj.png" alt="vrxUzj.png (1688Ã—1125) (ax1x.com)"></p><p><img src="https://s1.ax1x.com/2022/08/19/vrxNWQ.png" alt="vrxNWQ.png (1688Ã—1125) (ax1x.com)"></p><p><img src="https://s1.ax1x.com/2022/08/19/vrxtJg.png" alt="vrxtJg.png (1688Ã—1125) (ax1x.com)"></p><p><img src="https://s1.ax1x.com/2022/08/19/vrxwyn.png" alt="vrxwyn.png (1688Ã—1125) (ax1x.com)"></p><p><img src="https://s1.ax1x.com/2022/08/19/vrxYFS.png" alt="vrxYFS.png (1688Ã—1125) (ax1x.com)"></p><p><img src="https://s1.ax1x.com/2022/08/19/vrxDe0.png" alt="vrxDe0.png (1688Ã—1125) (ax1x.com)"></p><p><img src="https://s1.ax1x.com/2022/08/19/vrx0Lq.png" alt="vrx0Lq.png (1688Ã—1125) (ax1x.com)"></p><p><img src="https://s1.ax1x.com/2022/08/19/vrxrwV.png" alt="vrxrwV.png (1688Ã—1125) (ax1x.com)"></p>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C#.NET </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Deepin åˆä½“éªŒ</title>
      <link href="/2020/03/19/2020-03-19-Deepin/"/>
      <url>/2020/03/19/2020-03-19-Deepin/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><h2 id="Deepin-åˆä½“éªŒ"><a href="#Deepin-åˆä½“éªŒ" class="headerlink" title="Deepin åˆä½“éªŒ"></a>Deepin åˆä½“éªŒ</h2><p>å®¶é‡Œçš„å¤è‘£ç¬”è®°æœ¬å¥½åƒå¸¦ä¸åŠ¨æœ€æ–°çš„ Windows10 äº†ï¼Œæœ€è¿‘ä½¿ç”¨ä½“éªŒæ¯”è¾ƒå·®ï¼Œä½†å¹³æ—¶åˆä¸æ€ä¹ˆç”¨å®ƒâ€¦â€¦</p><p>é‚£ä¹ˆï¼Œä½•ä¸æ‹¿è¿™å°ç¬”è®°æœ¬æç‚¹äº‹å„¿å‘¢ï¼Ÿï¼Ÿ</p><p>æƒ³èµ·ä»¥å‰åœ¨ç½‘ä¸Šçœ‹åˆ°åŸºäº Linux çš„ Deepin OS çš„æ—¶å€™ï¼Œè¢«å®ƒé«˜ç«¯å¤§æ°”ä¸Šæ¡£æ¬¡çš„ç•Œé¢å¸å¼•äº†ï¼ˆç„¶åå°è¯•ç”¨VMWareè£…ä½†æ˜¯å¤±è´¥â€¦â€¦ï¼‰ï¼Œäºæ˜¯è¿™æ¬¡æˆ‘æ‰“ç®—åŠ¨çœŸæ ¼ï¼Œç›´æ¥åœ¨ç¬”è®°æœ¬ä¸Šå®‰è£… Deepin OSï¼</p><h3 id="å®‰è£…-Deepin"><a href="#å®‰è£…-Deepin" class="headerlink" title="å®‰è£… Deepin"></a>å®‰è£… Deepin</h3><p>é¦–å…ˆ Deepin å®˜ç½‘æœ¬èº«çš„ä¸‹è½½é“¾æ¥é€Ÿåº¦å¥‡æ…¢ï¼Œè¿™é‡Œæ¨èä½¿ç”¨æ¸…åçš„é•œåƒæºä¸‹è½½ï¼š<a href="https://mirrors.tuna.tsinghua.edu.cn/deepin-cd/15.11/">Deepin-CD</a></p><p>æ‰“å¼€ä¹‹åé€‰æ‹© <a href="https://mirrors.tuna.tsinghua.edu.cn/deepin-cd/15.11/deepin-15.11-amd64.iso">Deepin-15.11-amd64.iso</a> ä¸‹è½½é•œåƒæ–‡ä»¶</p><p>ä¹‹åå°±æ˜¯ç”¨ UltraISO çƒ§å½•å¯åŠ¨ç›˜ï¼Œç„¶åå¼€æœº F2 è¿›å…¥ Boot ç•Œé¢ï¼Œé€‰æ‹© USB-HDD å¯åŠ¨</p><p>å¯åŠ¨ä¹‹åæˆåŠŸè¿›å…¥å®‰è£…ç•Œé¢ï¼ŒæŒ‰ç…§æç¤ºæ“ä½œä¸€æ³¢ä¹‹åï¼Œå®‰è£…æˆåŠŸ</p><blockquote><p><strong>å›¾æ˜¯ç½‘ä¸Šæ‰¾çš„ï¼š)</strong></p></blockquote><p><img src="https://img-blog.csdn.net/20180102133551043?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGliZXJhbGxpdXNoYWhl/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt="pic0"></p><h3 id="é…ç½®-Deepin"><a href="#é…ç½®-Deepin" class="headerlink" title="é…ç½® Deepin"></a>é…ç½® Deepin</h3><p>è¿›å…¥æ¡Œé¢ï¼Œå‘ç° Deepin å·²ç»è‡ªå¸¦äº† Chromeï¼ŒWPS Officeï¼Œæœç‹—è¾“å…¥æ³•ï¼Œå’Œè™½ç„¶æ˜¯ä¸Šå¤ç‰ˆæœ¬çš„ QQï¼Œæ„Ÿè§‰æ¯”å®‰è£… Manjaro çš„æ—¶å€™ä¸€ä¸ªä¸ªæ‰‹åŠ¨ <code>sudo pacman -S ...</code> æ–¹ä¾¿äº†è®¸å¤šï¼ˆæœ€è›‹ç–¼çš„æ˜¯è¾“å…¥æ³•é…ç½®ï¼‰</p><p>Deepin è¿˜æœ‰è‡ªå¸¦çš„åº”ç”¨å•†åº—ï¼Œä½ å¯ä»¥ç›´æ¥å»å•†åº—é‡Œå®‰è£…è€Œä¸æ˜¯ <code>sudo apt-get install ...</code> ï¼Œå»å•†åº—é‡Œçœ‹äº†çœ‹ï¼Œæ”¶å½•çš„åº”ç”¨è¿˜æ˜¯æŒºå¤šï¼Œè‡³å°‘å¸¸ç”¨çš„å‡ ä¸ªï¼ˆç½‘æ˜“äº‘éŸ³ä¹ï¼ŒVS Codeç­‰ï¼‰å¯ä»¥ç›´æ¥å®‰è£…äº†</p><p>é¡ºä¾¿è¯´ä¸€å¥ï¼Œè¿™ä¸ªçª—å£çš„æ ‡é¢˜æ æ˜¯çœŸçš„å®½ï¼Œç”¨ç½‘ä¸Šçš„æ–¹æ³•ä¿®æ”¹äº†é…ç½®æ–‡ä»¶ä¹‹åå¥½åƒä¹Ÿæ²¡ä»€ä¹ˆç”¨â€¦â€¦</p><p>ä¸è¿‡æ€»ä¹‹ï¼Œä¸ªäººè§‰å¾— Deepin OS çš„ç•Œé¢è¿˜æ˜¯è¦æ¯”åŸç”Ÿ Windows 10 å¥½çœ‹äº†ä¸€äº›ï¼Œä¸‹é¢æ˜¯ç»è¿‡äº†ä¸€äº›ç®€é™‹é…ç½®åçš„æ•ˆæœï¼š</p><p><img src="https://s1.ax1x.com/2020/03/20/8cl4Ag.png" alt="pic1"></p><h3 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h3><p>å…¶å®ï¼Œé€‰æ‹© Linuxï¼Œä¸€æ–¹é¢æ˜¯ä¸ºäº†æ–°é²œæ„Ÿï¼Œå¦ä¸€æ–¹é¢æ˜¯å› ä¸ºè¿™å°å¤è‘£ç¬”è®°æœ¬ä¹Ÿå¹³æ—¶ç¡®å®ä¹Ÿæ´¾ä¸ä¸Šä»€ä¹ˆç”¨åœºï¼Œæ‰€ä»¥æ•´ä¸ªæ–°ç³»ç»Ÿç©ç©ï¼Œç›®å‰æ¥çœ‹ï¼Œä½“éªŒä¹Ÿç¡®å®æŒºä¸é”™çš„ï¼Œå¯¹äºåªæœ‰åŠå…¬å’Œä¸Šç½‘éœ€æ±‚çš„ç”¨æˆ·æ¥è¯´ï¼Œæˆ‘è§‰å¾—è¿™æ¬¾ OS æ˜¯å¯ä»¥æ›¿ä»£ä¸€ä¸‹ Windows çš„ï¼šï¼‰</p><blockquote><p>ç”¨ VSCode å†™ C#</p></blockquote><p><img src="https://s1.ax1x.com/2020/03/20/8c12G9.png" alt="pic2"></p><p>Linux ä¸‹ C#.NET çš„ä»£ç å¯ä»¥ç”¨ä¸€ä¸ªå« MonoCompiler çš„ç¼–è¯‘å™¨ç¼–è¯‘ï¼Œä½†æ˜¯ç”Ÿæˆäº†æ˜¯ Windows çš„ exe æ–‡ä»¶ï¼Œè¿™ç§ exe åªèƒ½ç”¨ MonoCompiler è‡ªå·±æ‰“å¼€</p><p>é™¤æ­¤ä¹‹å¤–ï¼Œä¹Ÿå¯ä»¥åœ¨ VSCode å®‰è£… C# æ‰©å±•æ¥ç¼–è¯‘ ï¼Œä½†æ˜¯éœ€è¦æ‰‹åŠ¨å®‰è£… SDK</p><p>é¡ºæ‰‹å†™äº†ä¸€ä¸ª Hanoiï¼š</p><p><img src="https://s1.ax1x.com/2020/03/20/8cJb0P.png" alt="pich"></p><blockquote><p>Typora</p></blockquote><p>è¿™ç¯‡æ–‡ç« å°±æ˜¯åœ¨ Deepin OS ä¸‹ç”¨ Typora å†™çš„ï¼Œç”±äº Deepin OS è‡ªå¸¦æ€æºé»‘ä½“ï¼ŒåŸæœ¬çš„ Github ä¸»é¢˜å¥½çœ‹äº†å¾ˆå¤šï¼Œæ€æºé»‘ä½“æ˜¯ Deepin çš„é»˜è®¤å­—ä½“ï¼Œçœ‹èµ·æ¥è§‰å¾—æ¯” Windows çš„å¾®è½¯é›…é»‘è¦æ¸…æ™°ï¼Ÿï¼Ÿ</p><p><img src="https://s1.ax1x.com/2020/03/20/8c3PiQ.png" alt="pic3"></p><blockquote><p>QQ</p></blockquote><p>åœ¨åº”ç”¨å•†åº—å¯ä»¥æœç´¢åˆ°ï¼Œä¸è¿‡è¿™ä¸ª QQ å·²ç»æ˜¯ä¸Šå¤ç‰ˆæœ¬äº†â€¦â€¦</p><p>å¦‚æœæƒ³è¦ä¸‹è½½æœ€æ–°ç‰ˆçš„ï¼Œå¯ä»¥å» QQ å®˜ç½‘çœ‹ä¸€ä¸‹</p><p><img src="https://s1.ax1x.com/2020/03/20/8c3lW9.png" alt="pic4"></p><blockquote><p>é’‰é’‰ &amp; æ™ºå­¦ç½‘</p></blockquote><p>æ²¡æƒ³åˆ°é’‰é’‰è¿ Linux ç‰ˆçš„éƒ½åšäº†ï¼Œæœç„¶æ˜¯æ¢äº†ç³»ç»Ÿä¹Ÿä¸èƒ½å¿˜è®°å­¦ä¹ å•Šï¼</p><p><img src="https://s1.ax1x.com/2020/03/20/8c3zlR.png" alt="pic5"></p><p>æš‚æ—¶å°±å…ˆå†™åˆ°è¿™å„¿å§ï¼Œç­‰ä»¥åå†æ•´æ•´è¿™ä¸ªå¥‡å¦™çš„ OSâ€¦â€¦</p>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Neumorphism UIï¼š æ–°æ‹Ÿæ€è®¾è®¡</title>
      <link href="/2020/03/17/2020-03-17-Neumorphic/"/>
      <url>/2020/03/17/2020-03-17-Neumorphic/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><h2 id="æ–°æ‹Ÿæ€è®¾è®¡ï¼šNeumorphism-UI"><a href="#æ–°æ‹Ÿæ€è®¾è®¡ï¼šNeumorphism-UI" class="headerlink" title="æ–°æ‹Ÿæ€è®¾è®¡ï¼šNeumorphism UI"></a>æ–°æ‹Ÿæ€è®¾è®¡ï¼šNeumorphism UI</h2><h3 id="Neumorphism-UI"><a href="#Neumorphism-UI" class="headerlink" title="Neumorphism UI"></a>Neumorphism UI</h3><blockquote><p>æ–°æ‹Ÿæ€è®¾è®¡ï¼ˆNeumorphism UIï¼‰æ˜¯ 2020 å¹´ UI è®¾è®¡çš„ä¸»è¦è¶‹åŠ¿ä¹‹ä¸€ï¼Œä½ å¯ä»¥åœ¨ dribbble ä¸Šçœ‹åˆ°å¾ˆå¤šä½œå“ï¼Œæ–°æ‹Ÿæ€æ˜¯åŸºäºNew+Skeuomorphism è‹±æ–‡å•è¯çš„æ‹¼å†™ã€‚å®ƒæ˜¯ä¸€ç§ä½¿ç”¨å¯¹è±¡é˜´å½±çš„æ¨¡ç³Šã€è§’åº¦å’Œå¼ºåº¦æ¥çªæ˜¾å‡ºå¯¹è±¡çš„æ ·å¼ã€‚ç”±äºå…¶æŸ”å’Œçš„é˜´å½±å’Œæ•´ä½“çš„å¤–è§‚ï¼Œä½¿è¯¥è®¾è®¡çœ‹èµ·æ¥æ›´åŠ çš„é€¼çœŸã€æœªæ¥ã€ç°ä»£ã€çœŸå®ã€æœ‰å¸å¼•åŠ›ã€‚</p></blockquote><p>æ‹Ÿæ€ï¼Œåœ¨<a href="https://baike.baidu.com/item/æ‹Ÿæ€/472739">ç”Ÿç‰©å­¦</a>ä¸­æŒ‡çš„æ˜¯<strong>ä¸€ç§ç”Ÿç‰©æ¨¡æ‹Ÿå¦ä¸€ç§ç”Ÿç‰©æˆ–æ¨¡æ‹Ÿç¯å¢ƒä¸­çš„å…¶ä»–ç‰©ä½“ä»è€Œè·å¾—å¥½å¤„çš„ç°è±¡</strong>ï¼Œç”¨åœ¨ UI è®¾è®¡ä¸Šï¼Œå³æ˜¯è®© UI å…ƒç´ æ¨¡æ‹Ÿç”Ÿæ´»ä¸­çš„ç‰©ä½“çš„å½¢çŠ¶ä¸ç‰¹å¾ï¼ˆå°±åƒæ¡Œé¢çš„åƒåœ¾æ¡¶å›¾æ ‡é‚£æ ·ï¼‰ï¼Œä»è€Œè®© UI å…ƒç´ å…·æœ‰ç”Ÿæ´»ä¸­ç‰©ä½“çš„å±‚æ¬¡æ„Ÿå’Œè¾¨è¯†åº¦</p><p>æ–°æ‹Ÿæ€ç»“åˆç›®å‰æ¯”è¾ƒæµè¡Œçš„æ‰å¹³åŒ–è®¾è®¡å’Œå¡ç‰‡å¼è®¾è®¡å’Œæ‹Ÿæ€çš„è®¾è®¡é£æ ¼ï¼Œèµ·æºäºä¸€å¥—åœ¨ dribbble ä¸Šèµ°çº¢çš„è®¾è®¡æ–¹æ¡ˆï¼š</p><p><img src="http://image.woshipm.com/wp-files/2020/02/7xWL5aZvTPRPxHStcRP9.jpeg" alt="pic0"></p><p>è®¾è®¡å¸ˆ alexplyuto å‘è¡¨äº†è¿™å¥—è®¾è®¡æ–¹æ¡ˆï¼Œè·å¾—æ•°åƒç‚¹èµï¼Œä¹‹åç±»ä¼¼é£æ ¼çš„æ–°æ‹Ÿæ€è®¾è®¡å¤§é‡å‡ºç°ï¼Œå¯ä»¥è¯´ä»–çš„ä½œå“å¼€åˆ›äº† UI è®¾è®¡çš„ä¸€ä¸ªæ–°è¶‹åŠ¿</p><p>ä¸ªäººæ„Ÿè§‰è¿™å¥—è®¾è®¡æ–¹æ¡ˆå¾ˆæœ‰ç°ä»£æ„Ÿï¼Œç®€æ´çš„åŒæ—¶æœ‰å¯Œå«å±‚æ¬¡æ„Ÿï¼Œå¯ä»¥æ„Ÿè§‰åˆ°æ¯ä¸€ä¸ªå…ƒç´ ä»¿ä½›éƒ½æ˜¯é›•åˆ»åœ¨äº†èƒŒæ™¯ä¸Š</p><h3 id="Neumorphic-UI-amp-Modern-UI"><a href="#Neumorphic-UI-amp-Modern-UI" class="headerlink" title="Neumorphic UI &amp; Modern UI"></a>Neumorphic UI &amp; Modern UI</h3><p><img src="http://image.woshipm.com/wp-files/2020/02/GbiMEQ69KwHRIxL9vFZC.jpeg" alt="pic1"></p><p>ä¸Šå›¾ä½“ç°äº†æ–°æ‹Ÿæ€çš„å¡ç‰‡è®¾è®¡å’Œä¼ ç»Ÿçš„ Material å¡ç‰‡è®¾è®¡çš„å·®åˆ«ï¼Œå…¶ä¸­ Material çš„å¡ç‰‡é˜´å½±è®¾è®¡ï¼Œè®©äººæ„Ÿè§‰å®ƒæ˜¯æ¼‚æµ®åœ¨ç©ºä¸­ï¼Œä¸»è¦æ˜¯åœ¨å…ƒç´ ä¸‹æ–¹å‡ºç°é˜´å½±ï¼Œè¿™æ ·ä½¿å¾—å…ƒç´ ä¸èƒŒæ™¯ä¹‹é—´äº§ç”Ÿä¸€ç§ç©ºé—´çºµæ·±æ„Ÿï¼Œ<strong>è€Œæ–°æ‹Ÿæ€çš„å¡ç‰‡å¼è®¾è®¡é€šè¿‡2ä¸ªæ­£è´Ÿé˜´å½±å åŠ ï¼Œè®©å¡ç‰‡çœ‹èµ·æ¥æ›´åƒæ˜¯é›•åˆ»åœ¨äº†èƒŒæ™¯ä¸Šï¼Œæˆä¸ºèƒŒæ™¯çš„ä¸€å—çªèµ·</strong>ï¼Œä½†æ˜¯ä¸¤è€…åœ¨ä¸èƒŒæ™¯é¢œè‰²çš„å¯¹æ¯”ä¸Šéƒ½ä¸æ˜¯å¾ˆæ˜æ˜¾</p><h3 id="åªèƒ½ç”¨æ¥è®¾è®¡å¡ç‰‡å—ï¼Ÿ"><a href="#åªèƒ½ç”¨æ¥è®¾è®¡å¡ç‰‡å—ï¼Ÿ" class="headerlink" title="åªèƒ½ç”¨æ¥è®¾è®¡å¡ç‰‡å—ï¼Ÿ"></a>åªèƒ½ç”¨æ¥è®¾è®¡å¡ç‰‡å—ï¼Ÿ</h3><p>Neumorphic UI å¹¶ä¸ä»…é™äºå¡ç‰‡è®¾è®¡ï¼Œåªè¦æŠŠåŸæ¥æ­£è´Ÿçš„é˜´å½±å¯¹è°ƒï¼Œå¾ˆå®¹æ˜“å°±å¯ä»¥å®ç°ä¸€ä¸ªæŒ‰é’®è¢«ç‚¹å‡»çš„æ•ˆæœï¼š</p><p><img src="http://image.woshipm.com/wp-files/2020/02/zOgX616cuHwLoWl7L5j4.jpeg" alt="pic3"></p><p>ä½†æ˜¯è¿™æ ·ä¼šå……åˆ†æš´éœ²å‡º Neumorphic UI ä¸­å…ƒç´ å’ŒèƒŒæ™¯é¢œè‰²å¯¹æ¯”åº¦ä¸è¶³çš„é—®é¢˜ï¼Œä½¿å¾—ç‚¹å‡»æ•ˆæœçœ‹èµ·æ¥ä¸æ˜æ˜¾ï¼ŒUI é¦–å…ˆåº”ç¡®ä¿æ˜“ç”¨æ€§ï¼Œå› æ­¤å¯è€ƒè™‘ä»¥æ”¹ç”¨å¦‚ä¸‹è®¾è®¡ï¼š</p><p><img src="http://image.woshipm.com/wp-files/2020/02/BBOUvTfvqWGcZs3tevhf.jpeg" alt="pic4"></p><h3 id="ç¼–ç¨‹å®ç°"><a href="#ç¼–ç¨‹å®ç°" class="headerlink" title="ç¼–ç¨‹å®ç°"></a>ç¼–ç¨‹å®ç°</h3><p>Neumorphic UI ä¸»è¦é€šè¿‡æ§ä»¶å·¦ä¸Šè¾¹ç¼˜çš„æ­£é˜´å½±å’Œå³ä¸‹è¾¹ç¼˜çš„è´Ÿé˜´å½±å®ç°ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥æ”¹å˜æ­£è´Ÿé˜´å½±çš„ä½ç½®ï¼š</p><p><img src="http://image.woshipm.com/wp-files/2020/02/iVjcJsSflJkHLykgr07W.jpeg" alt="pic4"></p><p>å¦‚æœè¦è®¾è®¡ä¸€ä¸ªæŒ‰é’®ï¼Œåœ¨ hover æ ·å¼é‡Œï¼Œå¯¹è°ƒè¿™ä¸¤ä¸ªé˜´å½±å³å¯ï¼ˆæˆ–è€…åŠ ä¸Š insetï¼‰</p><p>ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">border-radius</span>: <span class="number">50px</span>;</span><br><span class="line"><span class="attribute">background</span>: <span class="number">#ffffff</span>;</span><br><span class="line"><span class="attribute">box-shadow</span>:  <span class="number">35px</span> <span class="number">35px</span> <span class="number">71px</span> <span class="number">#d9d9d9</span>, </span><br><span class="line">             -<span class="number">35px</span> -<span class="number">35px</span> <span class="number">71px</span> <span class="number">#ffffff</span>;</span><br></pre></td></tr></table></figure><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><blockquote><p>è¿™ä¸€è®¾è®¡è¶‹åŠ¿çš„å‡ºç°ï¼Œæ— ç–‘æ¿€å‘äº†è®¸å¤šè®¾è®¡å¸ˆçš„çµæ„Ÿï¼Œä¸ä»¥å‰ä½¿ç”¨çš„å¡ç‰‡ç»„ä»¶çš„å¯ç”¨æ€§é—®é¢˜ç›¸æ¯”ï¼Œå®ƒçš„é—®é¢˜å…¶å®å¹¶ä¸æ˜¯é‚£ä¹ˆä¸¥é‡ã€‚</p><p>æ‰€ä»¥ç–¯ç‹‚å¤§èƒ†çš„å»å°è¯•å§ï¼é¡ºåº”è¿™ä¸€è¶‹åŠ¿ï¼Œå¹¶å¯¹å…¶è¿›è¡Œè°ƒæ•´ï¼Œä½¿å®ƒæˆä¸ºä½ è‡ªå·±çš„é£æ ¼ã€‚UIè®¾è®¡å¸ˆçš„å·¥ä½œå°±æ˜¯åœ¨æ‹–åŠ¨æ–¹å—ï¼Œå› æ­¤æ¯æ¬¡æ–¹å—å‡ºç°â€œå·®å¼‚â€å’Œâ€œæ–°å¥‡â€æ—¶ï¼Œéƒ½ä¼šå¸¦æ¥ä¸€äº›å–œæ‚¦ä¹‹æ„Ÿã€‚å¦‚æœæ²¡æœ‰è¿™ç§ä¸æ–­çš„æ¢ç´¢çš„ç²¾ç¥ï¼Œé‚£ä¹ˆæ‰€æœ‰çš„äº§å“çœ‹èµ·æ¥éƒ½æ˜¯ä¸€æ¯›ä¸€æ ·ã€‚</p><p>è®©æˆ‘ä»¬æ‰¾ç‚¹ä¹å­ï¼</p><p>ä½†åŒæ—¶ä¹Ÿè¦è®°ä½ï¼Œæ¯ä¸ªæ–°è¶‹åŠ¿éƒ½æœ‰ä¸€äº›æ½œåœ¨çš„é™·é˜±ï¼Œå¿…é¡»è°¨æ…å¯¹å¾…ï¼Œæ‰èƒ½è®©å®ƒå¾—ä»¥ä½¿ç”¨ã€‚</p></blockquote><p>Neumorphic UI æ¯•ç«Ÿæ˜¯æ–°å‡ºç°çš„è®¾è®¡é£æ ¼ï¼Œè‚¯å®šè¿˜æœ‰ä¸æˆç†Ÿçš„åœ°æ–¹ï¼Œä½†æ˜¯å®ƒçš„ç®€æ´å’Œå±‚æ¬¡æ„Ÿçš„ç»“åˆä½¿å¾—æ•´ä¸ªç•Œé¢éå¸¸å…·æœ‰ç°ä»£æ„Ÿ</p><p>å¦ä¸€æ–¹é¢ï¼ŒNeumorphic UI çš„ç¼ºç‚¹å…¶å®ä¹Ÿæ¯”è¾ƒæ˜æ˜¾ï¼Œä¾‹å¦‚ï¼š</p><ul><li>è‰²è°ƒå•ä¸€ï¼Œå¯¹è§†åŠ›ä½ä¸‹ã€å¤±æ˜ã€è‰²ç›²çš„ç”¨æˆ·æ¥è¯´ï¼Œå¯è¾¨è¯†æ€§è¾ƒå·®</li><li>åŒºåˆ†åº¦è¾ƒå·®ï¼Œå¯ä»¥å‘ç° Neumorphic UI ä½œä¸ºåŒºåˆ†æ ‡å¿—çš„åªæœ‰é˜´å½±ï¼Œå› ä¸ºå®ƒå¡ç‰‡çš„æè´¨çº¹ç†å’ŒèƒŒæ™¯æ˜¯ä¸€æ ·çš„ï¼Œå¦‚æœå¤±å»äº†é˜´å½±æ•ˆæœï¼Œæ•´ä¸ªç•Œé¢å°±ä¼šå˜æˆä¸€ç‰‡</li><li>çªå‡ºçš„å…ƒç´ å¯†é›†ï¼ŒNeumorphic UI ä¸»è¦å‘ˆç°å…ƒç´ çš„æ–¹å¼ä¾¿æ˜¯ç±»ä¼¼äºçªå‡ºçš„ä¸¤ä¸ªé˜´å½±ï¼Œä½†è‹¥ç•Œé¢ä¸Šå…ƒç´ å¯†é›†ï¼Œè¿™æ ·çš„çªå‡ºæ•ˆæœä¼šä½¿å¾—å…ƒç´ ä¹‹é—´å¤±å»ä¸»æ¬¡æ€§ï¼Œå¯¼è‡´ç”¨æˆ·ä¸èƒ½æŠŠæ³¨æ„é›†ä¸­åˆ°æŸä¸ªéœ€è¦ä¸ä¹‹äº¤äº’çš„å…ƒç´ ä¸Š</li><li>é€ æˆä¸€å®šçš„æ··ä¹±ï¼Œåœ¨ Neumorphic UI è®¾è®¡ä¸‹ï¼Œè¢« Disable çš„å…ƒç´ å’Œè¢« Enable çš„å…ƒç´ å°†ä¸æ˜“äºåŒºåˆ†</li></ul><p>å¯¹æ­¤ï¼Œæˆ‘çš„ç†è§£æ˜¯ï¼Œå¦‚æœç•Œé¢ä¸Šçš„å…ƒç´ ç®€æ´å¤§æ°”ï¼Œå¯ä»¥è€ƒè™‘é‡‡ç”¨è¿™ç§è®¾è®¡æ–¹æ³•ï¼Œå¦‚æœç•Œé¢ä¸Šå…ƒç´ å¯†é›†ä¸°å¯Œï¼Œåˆ™åœ¨é‡‡ç”¨ä¹‹å‰éœ€è¦ä¼˜åŒ–æˆ–æ”¹è¿›</p><h3 id="æ ·å›¾"><a href="#æ ·å›¾" class="headerlink" title="æ ·å›¾"></a>æ ·å›¾</h3><p>ä»¥ä¸‹æ˜¯é‡‡ç”¨ Neumorphic UI è®¾è®¡çš„æ¦‚å¿µå›¾ï¼š</p><blockquote><p>ä¸ªäººç®€ä»‹é¡µé¢ &amp; èˆªç­æŸ¥è¯¢é¡µé¢</p></blockquote><p><img src="https://image.uisdc.com/wp-content/uploads/2020/02/uisdc-hw-20200222-4.jpg" alt="example0"></p><blockquote><p>æ‹Ÿé¥æ§å™¨ï¼Œè¿™åº”è¯¥æ˜¯æœ€èƒ½ä½“ç° Neumorphic UI è®¾è®¡é£æ ¼çš„äº†ï¼Œå®ƒçš„é˜´å½±æ•ˆæœå¥½åƒå°±æ˜¯åœ¨æ¨¡ä»¿é¥æ§å™¨æŒ‰é”®çš„æ•ˆæœ</p></blockquote><p><img src="https://image.uisdc.com/wp-content/uploads/2020/02/uisdc-hw-20200222-7.jpg" alt="example1"></p><blockquote><p>æ™ºèƒ½å®¶å±…ä»ªè¡¨ç›˜</p></blockquote><p><img src="https://image.uisdc.com/wp-content/uploads/2020/02/uisdc-hw-20200222-3.jpeg" alt="example2"></p><blockquote><p>æ™ºèƒ½å®¶å±…ä»ªè¡¨ç›˜ 2</p></blockquote><p><img src="https://image.uisdc.com/wp-content/uploads/2020/02/uisdc-hw-20200222-1.jpeg" alt="example3"></p><blockquote><p>æ™ºèƒ½å®¶å±…ä»ªè¡¨ç›˜ 3</p></blockquote><p><img src="https://image.uisdc.com/wp-content/uploads/2020/02/uisdc-hw-20200222-5.jpg" alt="example4"></p><blockquote><p>æ‹Ÿæ’­æ”¾å™¨</p></blockquote><p><img src="https://image.uisdc.com/wp-content/uploads/2020/02/uisdc-hw-20200222-6.jpg" alt="example 4"></p><h3 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h3><p>ç™½å«–äº† Neumorphic UI çš„ä¸€ç‚¹ç‚¹ä»£ç ï¼Œæˆ‘å†™äº†ä¸€ä¸ªèƒ½åœ¨ QQ éŸ³ä¹ä¸Šæœæ­Œçš„ç½‘é¡µï¼š<a href="http://wuyanxi.top/QQMusicSearch.html">QQMusicSearcher</a></p><p>ä¸ªäººæ„Ÿè§‰ï¼ŒNeumorphic UI åœ¨ç®€æ´çš„åœºåˆä¸‹ä½¿ç”¨ä¼šæœ‰æ„æƒ³ä¸åˆ°çš„æ•ˆæœï¼Œä¹Ÿå¸Œæœ›è¿™å¥—è®¾è®¡æ–¹æ¡ˆèƒ½é€æ¸æ”¹è¿›ï¼Œèµ°å‘æˆç†Ÿå¹¶æµè¡Œèµ·æ¥</p><p>2020 - 03 - 17</p><p>æ„Ÿè°¢é˜…è¯»~~</p><hr><p>æœ¬æ–‡ä¸­éƒ¨åˆ†å†…å®¹æ‘˜å–è‡ªï¼š</p><ol><li><a href="http://www.woshipm.com/pd/3386232.html">æ–°æ‹Ÿæ€â€”â€”å›½å¤–è®¾è®¡å¸ˆåˆ†æçš„å…¨æ–°UIè¶‹åŠ¿</a></li><li><a href="https://www.uisdc.com/neumorphism-ui">ä¸ºä»€ä¹ˆ2020å¹´åˆçˆ†ç«çš„æ–°æ‹Ÿç‰©åŒ–è®¾è®¡ï¼Œå®Œå…¨æ— æ³•è½åœ°ä½¿ç”¨ï¼Ÿ</a></li></ol><hr>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Web </tag>
            
            <tag> UI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>LrcEditorå¼€å‘è®°ï¼ˆä¸€ï¼‰apiæ¥å£</title>
      <link href="/2020/02/02/2020-02-02-LRCEditor01/"/>
      <url>/2020/02/02/2020-02-02-LRCEditor01/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>é¡¹ç›®åœ°å€ï¼š<a href="https://github.com/Yan2u/LrcEditor">Github</a></p><p>å‰ä¸€æ®µæ—¶é—´å°†æˆ‘å†™çš„æ­Œè¯ç¼–è¾‘å™¨ <code>LRCEditor</code> å®Œå–„äº†ä¸€ä¸‹ï¼Œæ·»åŠ äº†ä¸€ä¸ªæœç´¢æ­Œè¯çš„åŠŸèƒ½ï¼Œä½†æ˜¯ä»…é™äºç½‘æ˜“äº‘<del>ï¼ˆå› ä¸ºç½‘æ˜“äº‘éŸ³ä¹çš„APIæ˜¯æœ€å¥½æçš„ï¼‰</del>ï¼Œæœ‰ä¸€äº›ç½‘æ˜“äº‘ä¸Šé¢æ²¡æœ‰ç‰ˆæƒçš„æ­Œæ›²è‡ªç„¶å°±æœä¸åˆ°æ­Œè¯ï¼Œéå¸¸å½±å“ä½“éªŒ</p><p>äºæ˜¯å°±æƒ³åˆ°å°†å¦å¤–ä¸¤å®¶éŸ³ä¹è½¯ä»¶ï¼šQQéŸ³ä¹å’Œé…·ç‹—éŸ³ä¹çš„ API ä¹Ÿæè¿‡æ¥ï¼Œæ·»åŠ åˆ°æœç´¢åŠŸèƒ½é‡Œé¢å»ï¼Œè¿™æ ·åŸºæœ¬ä¸Šå°±ä¸ç”¨æ‹…å¿ƒæœä¸åˆ°æ­Œè¯äº†:)</p><p>ç„¶åå°±èŠ±äº†æ•´æ•´ä¸€å¤©æ—¶é—´ç ”ç©¶ä»–ä»¬çš„ APIâ€¦â€¦</p><p>è¿™é‡Œå°† QQ éŸ³ä¹å’Œé…·ç‹—éŸ³ä¹çš„ API æ¥å£ä½¿ç”¨æ•´ç†ä¸€ä¸‹ï¼Œçœ‹åˆ°è¿™ç¯‡æ–‡ç« å¹¶ä¸”æœ‰éœ€è¦çš„å°ä¼™ä¼´å°±å¯ä»¥ç›´æ¥æ‹¿å»ç”¨äº†:)</p><p><em>P.S.1 æ•´ç†çš„æ—¶é—´æ˜¯ 2020 å¹´ 2 æœˆï¼Œæœ‰äº›æ¥å£è¿‡äº†ä¸€æ®µæ—¶é—´å¯èƒ½å°±è¢«æ›´æ¢äº†ï¼Œæ‰€ä»¥çœ‹å®Œè¿˜è¯·è‡ªå·±å…ˆéªŒè¯ä¸€æ³¢â€¦â€¦</em></p><p><em>P.S.2 æœ¬æ–‡ä¸­æ¥å£ç½‘å€è¿”å›çš„æ•°æ®å‡ä¸º JSON å­—ç¬¦ä¸²</em></p><p><em>P.S.3 æœ‰å…³ç½‘æ˜“äº‘æ¥å£çš„æ•´ç†åœ¨å¦ä¸€ç¯‡åšæ–‡é‡Œï¼Œé“¾æ¥ï¼š<a href="http://wuyanxi.top/2019/09/13/OLGetLRC.html"><strong>VB.NET | åœ¨çº¿è·å–æ­Œè¯æ–¹æ³•çš„å°å°æ€»ç»“</strong></a></em></p><h2 id="1-QQ-éŸ³ä¹éƒ¨åˆ†"><a href="#1-QQ-éŸ³ä¹éƒ¨åˆ†" class="headerlink" title="1. QQ éŸ³ä¹éƒ¨åˆ†"></a>1. QQ éŸ³ä¹éƒ¨åˆ†</h2><h3 id="æœç´¢æ­Œæ›²"><a href="#æœç´¢æ­Œæ›²" class="headerlink" title="æœç´¢æ­Œæ›²"></a>æœç´¢æ­Œæ›²</h3><p><strong>ç½‘å€æ ¼å¼ï¼š</strong><code>https://c.y.qq.com/soso/fcgi-bin/client_search_cp?aggr=1&amp;cr=1&amp;flag_qc=0&amp;p=&#123;0&#125;&amp;n=20&amp;w=&#123;1&#125;</code></p><p><strong>å‚æ•°è¯´æ˜ï¼š</strong></p><ol><li><code>p=&#123;0&#125;</code> è¡¨ç¤ºè¿”å›æœç´¢ç»“æœä¸­çš„ç¬¬å‡ é¡µï¼Œå’Œ <code>n=20</code> ä¸€èµ·ç”¨</li><li><code>n=20</code> æ¯é¡µè¿”å›çš„ç»“æœæ•°é‡</li><li><code>w=&#123;1&#125;</code> è¦æœç´¢çš„å…³é”®å­—</li></ol><p><strong>è°ƒç”¨ä¾‹å­ï¼š</strong><code>https://c.y.qq.com/soso/fcgi-bin/client_search_cp?aggr=1&amp;cr=1&amp;flag_qc=0&amp;p=1&amp;n=20&amp;w=Faded</code></p><p>è¿™ä¸€æ­¥å¯ä»¥è·å–æ­Œæ›²çš„ä¸€äº›åŸºæœ¬ä¿¡æ¯ï¼ˆåå­—ï¼Œè‰ºæœ¯å®¶ï¼Œä¸“è¾‘ï¼Œæ—¶é•¿ç­‰ï¼‰ï¼ŒåŒæ—¶éœ€è¦åœ¨è¿”å›çš„ä¿¡æ¯é‡Œé¢è·å–æ­Œæ›²çš„ <code>mid</code>ï¼Œæ¥ä¸‹æ¥è·å–æ­Œè¯ï¼Œå°é¢å›¾ç‰‡ï¼Œæ’­æ”¾çš„æ–‡ä»¶éƒ½è¦ç”¨åˆ°</p><h3 id="è·å–æ­Œè¯"><a href="#è·å–æ­Œè¯" class="headerlink" title="è·å–æ­Œè¯"></a>è·å–æ­Œè¯</h3><p>è¿™ä¸€ä¸ªæ¥å£ç½‘å€å¥½åƒæ²¡æœ‰äººä»‹ç»è¿‡ï¼Ÿï¼Ÿï¼Ÿå°±æ˜¯ç›´æ¥æ‰“å¼€QQéŸ³ä¹ï¼ˆç½‘é¡µç‰ˆï¼‰çš„æ’­æ”¾ç•Œé¢ï¼Œç„¶åF12ï¼Œåœ¨Network é‡Œé¢ç­›é€‰XHRæ ¼å¼ä¸”å«æœ‰ Lyric å…³é”®è¯çš„æ–‡ä»¶ï¼Œå°±ä¼šå‘ç°æœ‰ä¸€ä¸ªæ–‡ä»¶æ˜¯æŒ‡å‘è¿™ä¸ªç½‘å€çš„</p><p><strong>ç½‘å€æ ¼å¼ï¼š</strong><code>https://c.y.qq.com/lyric/fcgi-bin/fcg_query_lyric_new.fcg?-=MusicJsonCallback_lrc&amp;songmid=&#123;0&#125;&amp;g_tk=758816886&amp;format=json&amp;inCharset=utf8&amp;outCharset=utf-8&amp;notice=0&amp;platform=yqq.json&amp;needNewCode=0</code></p><p><strong>å‚æ•°è¯´æ˜ï¼š</strong></p><ol><li><code>songmid=&#123;0&#125;</code> è¡¨ç¤ºä¸Šä¸€æ­¥ä¸­è·å–åˆ°çš„æ­Œæ›² <code>mid</code> å€¼</li></ol><p><strong>è°ƒç”¨ä¾‹å­ï¼š</strong><code>https://c.y.qq.com/lyric/fcgi-bin/fcg_query_lyric_new.fcg?-=MusicJsonCallback_lrc&amp;songmid=004QK3K60anL4V&amp;g_tk=758816886&amp;format=json&amp;inCharset=utf8&amp;outCharset=utf-8&amp;notice=0&amp;platform=yqq.json&amp;needNewCode=0</code></p><p>ç„¶åï¼Œä½ ä¼šå‘ç°è¿”å›çš„æ˜¯ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span><span class="attr">&quot;retcode&quot;</span><span class="punctuation">:</span><span class="number">-1310</span><span class="punctuation">,</span><span class="attr">&quot;code&quot;</span><span class="punctuation">:</span><span class="number">-1310</span><span class="punctuation">,</span><span class="attr">&quot;subcode&quot;</span><span class="punctuation">:</span><span class="number">-1310</span><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>åˆ«æ…Œï¼Œè¿™æ˜¯ QQ éŸ³ä¹é˜²æ­¢çˆ¬å–æ•°æ®è€Œè®¾ç½®çš„éšœç¢ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨ Request é‡Œé¢è®¾ç½®ä¸¤ä¸ªä¸œè¥¿ï¼š</p><ol><li><code>Referer = https://y.qq.com/portal/player.html</code></li><li><code>skey = ......</code></li></ol><p>ç¬¬äºŒä¸ª <code>skey</code> æ¯æ¬¡è®¿é—®éƒ½æ˜¯ä¼šå˜åŒ–çš„ï¼Œä½†æ˜¯æœåŠ¡å™¨ä¸ä¼šæ£€æµ‹å®ƒçš„æ­£ç¡®æ€§ï¼Œæ‰€ä»¥ç›´æ¥æ‹¿æµè§ˆå™¨è®¿é—®ä¸€æ¬¡ä¹‹åæŠŠ <code>skey</code> æ”¾åˆ°ä»£ç ä¸­å³å¯</p><p>ç„¶åå°±å¯ä»¥æ­£å¸¸è®¿é—®äº†ï¼Œç”¨ C# å®ç°çš„ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">HttpWebRequest req = (HttpWebRequest)WebRequest.Create(<span class="string">&quot;https://c.y.qq.com/lyric/fcgi-bin/fcg_query_lyric_new.fcg?-=MusicJsonCallback_lrc&amp;songmid=&#123;0&#125;&amp;g_tk=758816886&amp;format=json&amp;inCharset=utf8&amp;outCharset=utf-8&amp;notice=0&amp;platform=yqq.json&amp;needNewCode=0&quot;</span>);</span><br><span class="line">req.Headers.Add(<span class="string">&quot;Cookie&quot;</span>, <span class="string">&quot;skey=@Y3TD47qBo&quot;</span>);</span><br><span class="line">req.Referer = <span class="string">&quot;https://y.qq.com/portal/player.html&quot;</span>;</span><br><span class="line"><span class="comment">// æ³¨æ„è¿™é‡Œä¸èƒ½ req.Headers.Set(&quot;Referer&quot;,&quot;https://y.qq.com/portal/player.html&quot;);</span></span><br><span class="line">Stream stream = req.GetResponse().GetResponseStream();</span><br><span class="line">StreamReader sr = <span class="keyword">new</span> StreamReader(Encoding.UTF8, stream);</span><br><span class="line"><span class="built_in">string</span> lyric = sr.ReadToEnd();</span><br></pre></td></tr></table></figure><p>ç„¶è€Œï¼Œä½ ä¼šå‘ç°ï¼Œè¿”å›çš„å­—ç¬¦ä¸²æ˜¯è¿™ä¸ªæ ·å­çš„ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;W3RpOkxBU1QgU1RBUkRVU1QgKOOAikZhdGUvc3RheSBuaWdodCAoVW5saW1pdGVkIEJsYWRlIFdvcmtzKeOAi1RW5Yqo55S75o+S5puyKV0KW2FyOkFpbWVyICjjgqjjg6EpXQpbYWw6REFXTiAo6buO5piOKV0KW2J5Ol0KW29mZnNldDowXQpba2FuYToxMTExMeOBlzHjgY3jgofjgY8x44Go44GzMeOBquOBhDHjgb7jgZUx44Gy44KNMeOBpOOCiDHjgYLjgoEx44GI44GMMeOChjHjgoEx44GvMeOBteOCizHjgYvjgZ8x44GsMeOBguOCizHjgaTjgaUx44GZMeOBjTHjgaHjgYQx44GmMeOBmeOBjTHjgb4x44GGMeOBhOOCjTHjgY0x44GNMeOBiuOBjzHjgbLjgo0x44GC44GkMeOBhOOBqDHjg .....(åé¢å¾ˆå¤šå¾ˆå¤šå°±ä¸æ”¾å‡ºæ¥äº†)&quot;</span></span><br></pre></td></tr></table></figure><p>ä¹Ÿä¸è¦æ…Œï¼Œè¿™ä¸ªä¸€é•¿ä¸²æ˜æ˜¾æ˜¯ Base64 åŠ å¯†å¤„ç†è¿‡çš„ï¼Œæˆ‘ä»¬åªéœ€è¦ä¸€ä¸‹å°±èƒ½æŠŠå®ƒè¿˜åŸæˆæœ¬æ¥çš„æ ·å­ï¼š</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">string</span> new_lyric = Encoding.UTF8.GetString(Convert.FromBase64String(lyric));</span><br></pre></td></tr></table></figure><h3 id="è·å–ä¸“è¾‘çš„å°é¢"><a href="#è·å–ä¸“è¾‘çš„å°é¢" class="headerlink" title="è·å–ä¸“è¾‘çš„å°é¢"></a>è·å–ä¸“è¾‘çš„å°é¢</h3><p><strong>ç½‘å€æ ¼å¼ï¼š</strong><code>http://imgcache.qq.com/music/photo/album_500/17/500_albumpic_&#123;0&#125;_0.jpg</code></p><p><strong>å‚æ•°è¯´æ˜ï¼š</strong></p><ol><li><code>500_albumpic_&#123;0&#125;_0.jpg</code> åœ¨ <code>&#123;0&#125;</code> å¤„å¡«ä¸Šç¬¬ä¸€æ­¥è·å–çš„ä¸“è¾‘ <code>mid</code> å€¼ï¼ˆä¸æ˜¯æ­Œæ›² <code>mid</code>ï¼‰</li></ol><p><strong>è°ƒç”¨ä¾‹å­ï¼š</strong><code>http://imgcache.qq.com/music/photo/album_500/17/500_albumpic_8217_0.jpg</code></p><p>è¿™ä¸ªç½‘å€æ‰“å¼€äº†æ˜¯ 500Ã—500 çš„å°é¢å›¾ï¼Œå¦‚æœæƒ³è¦è‡ªå®šä¹‰å¤§å°ï¼ŒæŠŠåœ°å€ä¸­ä¸¤ä¸ª 500 éƒ½æ”¹æˆå¯¹åº”çš„å¤§å°å³å¯</p><h3 id="è·å–å¯ä»¥æ’­æ”¾çš„æ–‡ä»¶"><a href="#è·å–å¯ä»¥æ’­æ”¾çš„æ–‡ä»¶" class="headerlink" title="è·å–å¯ä»¥æ’­æ”¾çš„æ–‡ä»¶"></a>è·å–å¯ä»¥æ’­æ”¾çš„æ–‡ä»¶</h3><p>è¿™ä¸€æ­¥æ¯”è¾ƒå¤æ‚ï¼Œå¦‚æœä¸æ˜¯æ§åˆ¶å°ç¨‹åºå»ºè®®å¼„æˆå¼‚æ­¥</p><p>è·å–æ–‡ä»¶ï¼Œè¦å…ˆè·å–å®ƒçš„ Tokenï¼ˆå°±æ˜¯ä¸€ç§ç±»ä¼¼äºé€šè¡Œè¯çš„ä¸œè¥¿ï¼‰ï¼š</p><p><strong>ç½‘å€#1 æ ¼å¼ï¼š</strong><code>https://c.y.qq.com/base/fcgi-bin/fcg_music_express_mobile3.fcg?format=json205361747&amp;platform=yqq&amp;cid=205361747&amp;songmid=&#123;0&#125;&amp;filename=&#123;1&#125;&amp;guid=126548448</code></p><p><strong>å‚æ•°è¯´æ˜ï¼š</strong></p><ol><li><p><code>songmid=&#123;0&#125;</code> æ­Œæ›²çš„ <code>mid</code> å€¼</p></li><li><p><code>filename=&#123;1&#125;</code> ç”±æ­Œæ›²çš„ <code>mid</code> å€¼æ‹¼æ¥è€Œæ¥ï¼Œ<code>filename = &#39;C400&#39; + mid + &#39;.m4a&#39;</code></p><p>ä¾‹å¦‚ <code>mid</code> ä¸º <code>004QK3K60anL4V</code>ï¼Œæ–‡ä»¶åå°±æ˜¯ <code>C400004QK3K60anL4V.m4a</code></p></li></ol><p><strong>è°ƒç”¨ä¾‹å­ï¼š</strong><code>https://c.y.qq.com/base/fcgi-bin/fcg_music_express_mobile3.fcg?format=json205361747&amp;platform=yqq&amp;cid=205361747&amp;songmid=004QK3K60anL4V&amp;filename=C400004QK3K60anL4V.m4a&amp;guid=126548448</code></p><p>å¦å¤–çš„å‚æ•°ä¾‹å¦‚ <code>cid</code> å’Œ <code>guid</code> éƒ½æ˜¯å¯ä»¥å†™æ­»çš„ï¼Œæ‰€ä»¥å°±ä¸ç”¨ç®¡äº†</p><p>åœ¨è¿™ä¸€æ­¥çš„è¿”å›å€¼é‡Œé¢å¯ä»¥çœ‹åˆ° <code>&#123;&quot;vkey&quot; : &quot;...&quot;&#125;</code> çš„å­—æ®µï¼Œ<code>vkey</code> å°±æ˜¯ç”¨æ¥æ‹¼æˆè·å–æ’­æ”¾æ–‡ä»¶çš„ç½‘å€çš„ä¸œè¥¿</p><p><strong>ç½‘å€#2 æ ¼å¼ï¼š</strong><code>http://ws.stream.qqmusic.qq.com/&#123;0&#125;?fromtag=0&amp;guid=126548448&amp;vkey=&#123;1&#125;</code></p><p><strong>å‚æ•°è¯´æ˜ï¼š</strong></p><ol><li><code>&#123;0&#125;</code> ä¸Šä¸€æ­¥æåˆ°çš„ <code>filename</code>ï¼Œç”¨æ­Œæ›² <code>mid</code> å€¼åŠ å·¥è€Œæˆ</li><li><code>vkey=&#123;1&#125;</code> å¡«åˆšåˆšå¾—åˆ°çš„ <code>vkey</code></li></ol><p><strong>è°ƒç”¨ä¾‹å­ï¼š</strong><code>http://ws.stream.qqmusic.qq.com/C400004QK3K60anL4V.m4a?fromtag=0&amp;guid=126548448&amp;vkey=...</code>ï¼ˆvkeyå¾ˆé•¿å°±ä¸å†™å‡ºæ¥äº†ï¼‰</p><p>æ‰“å¼€ç½‘å€å°±æ˜¯ä¸€ä¸ª m4a æ–‡ä»¶ï¼Œå¤§åŠŸå‘Šæˆï¼</p><h2 id="2-é…·ç‹—éŸ³ä¹éƒ¨åˆ†"><a href="#2-é…·ç‹—éŸ³ä¹éƒ¨åˆ†" class="headerlink" title="2. é…·ç‹—éŸ³ä¹éƒ¨åˆ†"></a>2. é…·ç‹—éŸ³ä¹éƒ¨åˆ†</h2><p>ç›¸æ¯”èµ· QQ éŸ³ä¹ï¼Œé…·ç‹—éŸ³ä¹çš„ API æ¥å£çš„ç ´è§£è¦ç®€å•ä¸€äº›</p><h3 id="æœç´¢æ­Œæ›²-1"><a href="#æœç´¢æ­Œæ›²-1" class="headerlink" title="æœç´¢æ­Œæ›²"></a>æœç´¢æ­Œæ›²</h3><p><strong>ç½‘å€æ ¼å¼ï¼š</strong><code>http://mobilecdn.kugou.com/api/v3/search/song?format=json&amp;keyword=&#123;1&#125;&amp;page=&#123;0&#125;&amp;pagesize=20&amp;showtype=1</code></p><p><strong>å‚æ•°è¯´æ˜ï¼š</strong></p><ol><li><code>page</code> å’Œ <code>pagesize</code> é¡µæ•°å’Œæ¯é¡µè¿”å›çš„ç»“æœæ•°é‡</li><li><code>keyword</code> è¦æœç´¢çš„å…³é”®å­—</li></ol><p><strong>è°ƒç”¨ä¾‹å­ï¼š</strong><code>http://mobilecdn.kugou.com/api/v3/search/song?format=json&amp;keyword=Faded&amp;page=1&amp;pagesize=20&amp;showtype=1</code></p><p>è¿™ä¸€æ­¥å¯ä»¥è·å–æ­Œæ›²çš„ä¸€äº›åŸºæœ¬ä¿¡æ¯ï¼ˆåå­—ï¼Œè‰ºæœ¯å®¶ï¼Œä¸“è¾‘ï¼Œæ—¶é•¿ç­‰ï¼‰ï¼ŒåŒæ—¶éœ€è¦è®°å½•æ­Œæ›²çš„ <code>hash</code> å€¼ï¼Œæ¥ä¸‹æ¥ä¼šç”¨åˆ°</p><h3 id="è·å–ä¸“è¾‘å°é¢ï¼Œæ­Œè¯ï¼Œå’Œæ’­æ”¾æ–‡ä»¶"><a href="#è·å–ä¸“è¾‘å°é¢ï¼Œæ­Œè¯ï¼Œå’Œæ’­æ”¾æ–‡ä»¶" class="headerlink" title="è·å–ä¸“è¾‘å°é¢ï¼Œæ­Œè¯ï¼Œå’Œæ’­æ”¾æ–‡ä»¶"></a>è·å–ä¸“è¾‘å°é¢ï¼Œæ­Œè¯ï¼Œå’Œæ’­æ”¾æ–‡ä»¶</h3><p><strong>ç½‘å€æ ¼å¼ï¼š</strong><code>https://www.kugou.com/yy/index.php?r=play/getdata&amp;hash=&#123;0&#125;</code></p><p><strong>å‚æ•°è¯´æ˜ï¼š</strong></p><ol><li><code>hash=&#123;0&#125;</code> ä¸Šä¸€æ­¥å¾—åˆ°çš„æ­Œæ›² <code>hash</code> å€¼</li></ol><p><strong>è°ƒç”¨ä¾‹å­ï¼š</strong><code>https://www.kugou.com/yy/index.php?r=play/getdata&amp;hash=F139D898F1ED75CAD7B582BD1BAC0093</code></p><p>ç„¶åï¼Œä½ å¯èƒ½ä¼šå‘ç°ï¼Œè¿”å›çš„æ˜¯ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span><span class="attr">&quot;status&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;err_code&quot;</span><span class="punctuation">:</span><span class="number">20010</span><span class="punctuation">,</span><span class="attr">&quot;data&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>å¦‚æœä¸æ˜¯è¿™ä¸ªç»“æœï¼Œé‚£ä¹ˆå°†æµè§ˆå™¨çš„ <code>Cookie</code> æ¸…é™¤æ‰ï¼Œåˆ·æ–°ä¸€ä¸‹ï¼Œå°±ä¼šæ˜¯è¿™ä¸ªè¿”å›å€¼</p><p>ç„¶è€Œï¼Œå¦‚æœç”¨ä»£ç æ¥ç›´æ¥è®¿é—®çš„è¯ï¼Œç»“æœå°±ä¸€å®šä¼šå˜æˆè¿™æ ·</p><p>ä½†æˆ‘ä»¬è¿˜æ˜¯ä¸æ…Œï¼Œç°åœ¨å…ˆè¾“å…¥é…·ç‹—å®˜ç½‘çš„ç½‘å€ <code>www.kugou.com</code>ï¼Œéšä¾¿ç‚¹è¿›å»å¬ä¸€é¦–æ­Œï¼Œå†æŠŠè¿™ä¸ªç½‘å€è¾“è¿›å»ï¼Œä½ å°±ä¼šå‘ç°ï¼Œè¿”å›å€¼å˜å¾—æ­£å¸¸äº†</p><p>å†çœ‹è¿™ä¸ªç½‘å€ï¼Œä»–æœ‰ <code>www.kugou.com</code> çš„å‰ç¼€ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè®¿é—®è¿™ä¸ªç½‘å€æ—¶ï¼Œå’Œè®¿é—®å®˜ç½‘æ—¶ç”¨çš„æ˜¯åŒä¸€æ‰¹æ•°æ®ï¼Œé—®é¢˜è‚¯å®šå°±å‡ºåœ¨è¿™æ‰¹æ•°æ®ä¸Šäº†ï¼Œç»è¿‡åå¤å°è¯•ï¼Œæˆ‘å‘ç°æ˜¯ <code>Cookie</code> ä¸­çš„ ä¸€ä¸ª <code>kg_mid</code> å­—æ®µå†³å®šäº†è¿”å›å€¼æ­£å¸¸ä¸å¦</p><p>å…³äºè¿™ä¸ªå­—æ®µï¼Œç½‘ä¸Šæœ‰ä¸“é—¨è®¡ç®—çš„æ–¹æ³•å’Œç¨‹åºï¼š<a href="https://blog.csdn.net/ychgyyn/article/details/90110296"><strong>é…·ç‹—éŸ³ä¹ç½‘ç«™å‰ç«¯JSçš„é€†å‘ç ´è§£è¿‡ç¨‹</strong></a>ï¼Œä½†æ˜¯å®é™…ä¸Šæˆ‘ä»¬å¹¶ä¸éœ€è¦æ¯æ¬¡è®¿é—®æ—¶éƒ½è®¡ç®—ä¸€éï¼Œå°±åƒåˆšæ‰çš„ <code>skey</code>ï¼Œè¿™ä¸ª <code>kg_mid</code> ä¹Ÿæ˜¯å±äºæœ‰å°±è¡Œçš„é‚£ä¸€ç±»ï¼ŒæœåŠ¡å™¨å¹¶ä¸ä¼šæ£€æŸ¥å®ƒçš„æ­£ç¡®æ€§ï¼Œæ‰€ä»¥è¿˜æ˜¯æµè§ˆå™¨è®¿é—®ä¸€æ¬¡ï¼Œç„¶åå¤åˆ¶ç²˜è´´åˆ°ä»£ç å½“ä¸­å³å¯ï¼š</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">HttpWebRequest req = (HttpWebRequest)WebRequest.Create(<span class="keyword">new</span> Uri(LInterface.KuGouMusic_Detail(QMid)));</span><br><span class="line">CookieContainer cookie = <span class="keyword">new</span> CookieContainer();</span><br><span class="line">cookie.Add(<span class="keyword">new</span> Cookie(<span class="string">&quot;kg_mid&quot;</span>, <span class="string">&quot;c8c679b1e10cd05ed4d0e55dc2da4b0a&quot;</span>, <span class="string">&quot;/&quot;</span>, <span class="string">&quot;.kugou.com&quot;</span>));</span><br><span class="line"><span class="comment">// è¿™é‡Œçš„ new æ–¹æ³•å¿…é¡»å†™å››ä¸ªå‚æ•°ï¼Œå¦åˆ™è¿è¡Œé”™è¯¯</span></span><br><span class="line">req.CookieContainer = cookie;</span><br><span class="line">HttpWebResponse resp = (HttpWebResponse)req.GetResponse();</span><br></pre></td></tr></table></figure><p>ä¸“è¾‘å°é¢ï¼Œæ’­æ”¾æ–‡ä»¶çš„ç½‘å€å’Œæ­Œè¯éƒ½åœ¨è¿”å›å€¼é‡Œé¢äº†ï¼Œçœ‹è‹±æ–‡å°±å¯ä»¥åˆ¤æ–­å‡ºæ¥ï¼Œäºæ˜¯é…·ç‹—çš„ API æ¥å£ç ´è§£æˆåŠŸï¼</p><p>ä½†æ˜¯ï¼Œæˆ‘ä»¬æ³¨æ„åˆ°é…·ç‹— API ä¸­è¿”å›çš„æ­Œè¯æ˜¯æ²¡æœ‰ç¿»è¯‘çš„ï¼ï¼ï¼<del>ä¸æ˜¯ä¸­æ–‡æ­Œæœæ²¡æœ‰ç¿»è¯‘çš„æ­Œè¯è¿˜æœ‰ä»€ä¹ˆç”¨</del>ï¼Œæœ¬ç€ä¸€æ¡é¾™æœåŠ¡çš„åŸåˆ™ï¼Œæˆ‘å†³å®šå†åšä¸€ä¸ª API ç”¨æ¥ç¿»è¯‘â€¦â€¦</p><h2 id="3-Googleç¿»è¯‘-API"><a href="#3-Googleç¿»è¯‘-API" class="headerlink" title="3. Googleç¿»è¯‘ API"></a>3. Googleç¿»è¯‘ API</h2><p>è¿™éƒ¨åˆ†çš„å¤§å¤šæ•°å†…å®¹è½¬è½½è‡ªï¼š<a href="https://www.cnblogs.com/marso/p/google_translate_api.html"><strong>C#å®ç°è°·æ­Œç¿»è¯‘API</strong></a>ï¼Œä¸åŒçš„åœ°æ–¹åœ¨äºè¿™ç¯‡æ–‡ç« ç”¨çš„æ˜¯ <code>www.translate.google.com</code> è¿™ä¸ªç½‘å€ï¼Œç°åœ¨å·²ç»è®¿é—®ä¸åˆ°äº†ï¼Œä¸è¿‡æˆ‘ä»¬è¿˜æœ‰ <code>www.translate.google.cn</code> è¿™ä¸ªå›½å†…ç‰ˆçš„ç¿»è¯‘ç½‘å€ï¼Œè·å– API çš„æ–¹å¼ä¹ŸåŸºæœ¬ä¸€è‡´</p><h3 id="è·å–-TKK"><a href="#è·å–-TKK" class="headerlink" title="è·å– TKK"></a>è·å– TKK</h3><p>æ‰“å¼€ <code>www.translate.google.cn</code> ï¼Œéšä¾¿è¾“å…¥ç‚¹è‹±æ–‡ï¼Œç„¶å F12 æ‰“å¼€çœ‹ Networkï¼Œå‘ç°åªæœ‰è¿™ä¸ªç½‘å€æŒ‡å‘äº†ç¿»è¯‘çš„ç»“æœï¼š<code>https://translate.google.cn/translate_a/single?client=webapp&amp;sl=en&amp;tl=zh-CN&amp;hl=zh-CN&amp;dt=at&amp;dt=bd&amp;dt=ex&amp;dt=ld&amp;dt=md&amp;dt=qca&amp;dt=rw&amp;dt=rm&amp;dt=ss&amp;dt=t&amp;source=bh&amp;ssel=0&amp;tsel=0&amp;kc=1&amp;tk=262549.177587&amp;q=...</code> </p><p><strong>åˆ†æï¼š</strong>æ³¨æ„åˆ°æ•´ä¸ªç½‘å€ä¸­åªæœ‰ <code>q=...</code> æ˜¯æˆ‘ä»¬è¾“å…¥çš„å†…å®¹ï¼Œ<code>sl</code> å’Œ <code>tl</code> åˆ†åˆ«æ˜¯æºè¯­è¨€å’Œç›®æ ‡è¯­è¨€ï¼ˆ<code>sl</code> å¡« auto å°±ç›¸å½“äºè‡ªåŠ¨æ£€æµ‹è¯­è¨€äº†ï¼‰ï¼Œå…¶å®ƒçš„å­—æ®µéƒ½æ˜¯è‡ªåŠ¨å¡«å¥½çš„</p><p>ç„¶åæ³¨æ„åˆ°ä¸€ä¸ªé‡è¦çš„å­—æ®µ <code>tk=262549.177587</code>ï¼Œæ³¨æ„åˆ°æ¯æ¬¡æ‰“å¼€è¿™ä¸ªé¡µé¢åï¼Œé™„å¸¦çš„ <code>tk</code> éƒ½æ˜¯ä¸ä¸€æ ·çš„ï¼Œè€Œä¸”æˆ‘ä»¬çœ‹ä¸å‡ºä»€ä¹ˆè§„å¾‹</p><p><code>tk</code> å˜›ï¼Œå°±ç›¸å½“äº <code>ticket</code> ï¼Œç¥¨çš„æ„æ€ï¼Œåº”è¯¥å°±æ˜¯ Google é˜²æ­¢éšæ„è°ƒç”¨ç¿»è¯‘ API è®¾ç½®çš„éšœç¢äº†</p><p>è¿™ä¸ª <code>tk</code> å…¶å®å’Œä¸¤ä¸ªä¸œè¥¿æœ‰å…³ï¼Œä¸€ä¸ªæ˜¯æˆ‘ä»¬è¾“å…¥çš„å†…å®¹ï¼Œå¦ä¸€ä¸ªæ˜¯éšè—åœ¨é¡µé¢ HTML æ–‡æ¡£ä¸­çš„ <code>TKK</code> å€¼ï¼Œå¯è®¤ä¸ºï¼Œä¸¤è€…éƒ½æ˜¯æµ®ç‚¹æ•°ç±»å‹ï¼Œé‚£ä¹ˆæœ‰å¯èƒ½ <code>tk</code> å°±æ˜¯ç”± <code>TKK</code> è®¡ç®—å¾—åˆ°çš„</p><h3 id="è®¡ç®—-tk"><a href="#è®¡ç®—-tk" class="headerlink" title="è®¡ç®— tk"></a>è®¡ç®— tk</h3><p>ç›‘è§†å‘ç°ï¼Œç½‘ç«™ä¸­æœ‰ä¸€ä¸ª JS è°ƒç”¨äº†è¿™ä¸ª <code>TKK</code> å¹¶é€šè¿‡æŸç§ç®—æ³•ç”Ÿæˆäº† <code>tk</code> ï¼Œç½‘ä¸Šå·²ç»æœ‰äººç ´è§£äº†è¿™æ®µç®—æ³•çš„ä»£ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> b = <span class="keyword">function</span> (<span class="params">a, b</span>) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> d = <span class="number">0</span>; d &lt; b.<span class="property">length</span> - <span class="number">2</span>; d += <span class="number">3</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> c = b.<span class="title function_">charAt</span>(d + <span class="number">2</span>),</span><br><span class="line">            c = <span class="string">&quot;a&quot;</span> &lt;= c ? c.<span class="title function_">charCodeAt</span>(<span class="number">0</span>) - <span class="number">87</span> : <span class="title class_">Number</span>(c),</span><br><span class="line">            c = <span class="string">&quot;+&quot;</span> == b.<span class="title function_">charAt</span>(d + <span class="number">1</span>) ? a &gt;&gt;&gt; c : a &lt;&lt; c;</span><br><span class="line">        a = <span class="string">&quot;+&quot;</span> == b.<span class="title function_">charAt</span>(d) ? a + c &amp; <span class="number">4294967295</span> : a ^ c</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> a</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> tk =  <span class="keyword">function</span> (<span class="params">a,TKK</span>) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> e = <span class="variable constant_">TKK</span>.<span class="title function_">split</span>(<span class="string">&quot;.&quot;</span>), h = <span class="title class_">Number</span>(e[<span class="number">0</span>]) || <span class="number">0</span>, g = [], d = <span class="number">0</span>, f = <span class="number">0</span>; f &lt; a.<span class="property">length</span>; f++) &#123;</span><br><span class="line">        <span class="keyword">var</span> c = a.<span class="title function_">charCodeAt</span>(f);</span><br><span class="line">        <span class="number">128</span> &gt; c ? g[d++] = c : (<span class="number">2048</span> &gt; c ? g[d++] = c &gt;&gt; <span class="number">6</span> | <span class="number">192</span> : (<span class="number">55296</span> == (c &amp; <span class="number">64512</span>) &amp;&amp; f + <span class="number">1</span> &lt; a.<span class="property">length</span> &amp;&amp; <span class="number">56320</span> == (a.<span class="title function_">charCodeAt</span>(f + <span class="number">1</span>) &amp; <span class="number">64512</span>) ? (c = <span class="number">65536</span> + ((c &amp; <span class="number">1023</span>) &lt;&lt; <span class="number">10</span>) + (a.<span class="title function_">charCodeAt</span>(++f) &amp; <span class="number">1023</span>), g[d++] = c &gt;&gt; <span class="number">18</span> | <span class="number">240</span>, g[d++] = c &gt;&gt; <span class="number">12</span> &amp; <span class="number">63</span> | <span class="number">128</span>) : g[d++] = c &gt;&gt; <span class="number">12</span> | <span class="number">224</span>, g[d++] = c &gt;&gt; <span class="number">6</span> &amp; <span class="number">63</span> | <span class="number">128</span>), g[d++] = c &amp; <span class="number">63</span> | <span class="number">128</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    a = h;</span><br><span class="line">    <span class="keyword">for</span> (d = <span class="number">0</span>; d &lt; g.<span class="property">length</span>; d++) a += g[d], a = <span class="title function_">b</span>(a, <span class="string">&quot;+-a^+6&quot;</span>);</span><br><span class="line">    a = <span class="title function_">b</span>(a, <span class="string">&quot;+-3^+b+-f&quot;</span>);</span><br><span class="line">    a ^= <span class="title class_">Number</span>(e[<span class="number">1</span>]) || <span class="number">0</span>;</span><br><span class="line">    <span class="number">0</span> &gt; a &amp;&amp; (a = (a &amp; <span class="number">2147483647</span>) + <span class="number">2147483648</span>);</span><br><span class="line">    a %= <span class="number">1E6</span>;</span><br><span class="line">    <span class="keyword">return</span> a.<span class="title function_">toString</span>() + <span class="string">&quot;.&quot;</span> + (a ^ h)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»£ç ä¸­å‡½æ•° <code>tk(a,TKK)</code> çš„å‚æ•° <code>a</code> æ˜¯æˆ‘ä»¬è¾“å…¥çš„å†…å®¹ï¼Œ<code>TKK</code> æ˜¯åˆšæ‰å¾—åˆ°çš„å€¼ï¼Œç›´æ¥è°ƒç”¨ JS ä»£ç å°±å¯ä»¥è·å¾— <code>tk</code> äº†</p><p>ç”±äº <code>ScriptControl</code> ï¼ŒC# é‡Œé¢æ˜¯å¯ä»¥ç›´æ¥è°ƒç”¨ JS ä»£ç çš„ï¼š</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">MSScriptControl.ScriptControl scriptControl = <span class="keyword">new</span> MSScriptControl.ScriptControl();</span><br><span class="line">scriptControl.Language = <span class="string">&quot;JScript&quot;</span>;</span><br><span class="line">scriptControl.AddCode(JSCode);<span class="comment">// åˆšåˆšçš„ä»£ç </span></span><br><span class="line"><span class="built_in">string</span> tk = scriptControl.Eval(<span class="string">&quot;...&quot;</span>); <span class="comment">// ...è¡¨ç¤ºtk(a,TKK)ï¼Œa å’Œ TKK è¦æ›¿æ¢æˆå¾—åˆ°çš„å€¼</span></span><br></pre></td></tr></table></figure><p>ç„¶åå°±å¯ä»¥æ­£å¸¸çš„è¿”å›ç¿»è¯‘ç»“æœäº†ï¼Œæ³¨æ„é‡å¤è°ƒç”¨æ—¶ä¸ç”¨æ¯æ¬¡éƒ½å…ˆè®¿é—® <code>www.translate.google.cn</code> è·å– <code>TKK</code>ï¼Œåªç”¨è·å–ä¸€æ¬¡ï¼Œç„¶ååŠ¨æ€æ ¹æ®è¾“å…¥çš„å†…å®¹ç”Ÿæˆ <code>tk</code> å³å¯</p><p>æ­Œè¯APIä»£ç ï¼š<a href="https://paste.ubuntu.com/p/sphY9vhVv9/">Ubuntu Pastebin</a><br>ç¿»è¯‘APIä»£ç ï¼š<a href="https://paste.ubuntu.com/p/8yr7NwKSbx/">Ubuntu Pastebin</a>ï¼ˆæ„Ÿè°¢<a href="https://www.cnblogs.com/marso/p/google_translate_api.html"><strong>C#å®ç°è°·æ­Œç¿»è¯‘API</strong></a>ï¼‰</p>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C#.NET </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŠ¨æ€è§„åˆ’ | çº¿æ®µæ ‘ | 0/1åˆ†æ•°è§„åˆ’  \ | å›¾è®º  | 201901031è€ƒè¯•ï¼šè§£é¢˜æŠ¥å‘Š</title>
      <link href="/2019/10/31/2019-10-31-exam/"/>
      <url>/2019/10/31/2019-10-31-exam/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><h2 id="é¢˜ç›®é™åˆ¶ä¸€è§ˆ"><a href="#é¢˜ç›®é™åˆ¶ä¸€è§ˆ" class="headerlink" title="é¢˜ç›®é™åˆ¶ä¸€è§ˆ"></a>é¢˜ç›®é™åˆ¶ä¸€è§ˆ</h2><div class="table-container"><table><thead><tr><th style="text-align:center">é¢˜ç›®</th><th style="text-align:center">æ—¶é—´é™åˆ¶</th><th style="text-align:center">ç©ºé—´é™åˆ¶</th></tr></thead><tbody><tr><td style="text-align:center">1. array</td><td style="text-align:center">1000 MS</td><td style="text-align:center">128 MB</td></tr><tr><td style="text-align:center">2. bus</td><td style="text-align:center">2000 MS</td><td style="text-align:center">128 MB</td></tr><tr><td style="text-align:center">3. team</td><td style="text-align:center">3000 MS</td><td style="text-align:center">256 MB</td></tr></tbody></table></div><h2 id="1-é€†åºæ•°å¯¹åˆ—ï¼ˆarray-cppï¼‰"><a href="#1-é€†åºæ•°å¯¹åˆ—ï¼ˆarray-cppï¼‰" class="headerlink" title="1. é€†åºæ•°å¯¹åˆ—ï¼ˆarray.cppï¼‰"></a>1. é€†åºæ•°å¯¹åˆ—ï¼ˆarray.cppï¼‰</h2><h3 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h3><p>å¯¹äºä¸€ä¸ªæ•°åˆ—{ai}ï¼Œå¦‚æœæœ‰iajï¼Œé‚£ä¹ˆæˆ‘ä»¬ç§°aiä¸ajä¸ºä¸€å¯¹é€†åºå¯¹æ•°ã€‚è‹¥å¯¹äºä»»æ„ä¸€ä¸ªç”±1~nè‡ªç„¶æ•°ç»„æˆçš„</p><p>æ•°åˆ—ï¼Œå¯ä»¥å¾ˆå®¹æ˜“æ±‚å‡ºæœ‰å¤šå°‘ä¸ªé€†åºå¯¹æ•°ã€‚é‚£ä¹ˆé€†åºå¯¹æ•°ä¸ºkçš„è¿™æ ·è‡ªç„¶æ•°æ•°åˆ—åˆ°åº•æœ‰å¤šå°‘ä¸ªï¼Ÿ</p><h3 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h3><p>ç¬¬ä¸€è¡Œä¸ºä¸¤ä¸ªæ•´æ•°nï¼Œkã€‚</p><h3 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h3><p>å†™å…¥ä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºç¬¦åˆæ¡ä»¶çš„æ•°åˆ—ä¸ªæ•°ï¼Œç”±äºè¿™ä¸ªæ•°å¯èƒ½å¾ˆå¤§ï¼Œä½ åªéœ€è¾“å‡ºè¯¥æ•°å¯¹10000æ±‚ä½™æ•°åçš„ç»“æœã€‚</p><h3 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">4 1</span><br></pre></td></tr></table></figure><h3 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">3</span><br></pre></td></tr></table></figure><h3 id="Hint"><a href="#Hint" class="headerlink" title="Hint"></a>Hint</h3><p>æ ·ä¾‹è¯´æ˜ï¼š</p><p>ä¸‹åˆ—3ä¸ªæ•°åˆ—é€†åºå¯¹æ•°éƒ½ä¸º1ï¼›åˆ†åˆ«æ˜¯1 2 4 3 ï¼›1 3 2 4 ï¼›2 1 3 4ï¼›</p><p>100%çš„æ•°æ®  n&lt;=1000ï¼Œk&lt;=1000</p><h3 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h3><blockquote><ol><li><strong>æ­£ç»Ÿè§£æ³•</strong></li></ol></blockquote><p>è®¾ $f[i][j]$ è¡¨ç¤º $1\rightarrow i$ çš„æ’åˆ—ä¸­é€†åºå¯¹æ•°ä¸º $j$ ä¸ªçš„æ–¹æ¡ˆæ•°</p><p>é‚£ä¹ˆä¸€äº›è¾¹ç•Œçš„æƒ…å†µå°±å¯ä»¥æ‰‹ç®—å‡ºæ¥äº†ï¼Œä¾‹å¦‚ $f[i][0]=1$ï¼Œ$f[i][1]=i-1$</p><p>æ¥ä¸‹æ¥è€ƒè™‘æ€ä¹ˆé€šè¿‡è¿™ä¸ªå¼å­é€’æ¨ï¼Œå¯ä»¥è€ƒè™‘åœ¨å·²ç»å½¢æˆçš„ $i-1$ ä¸ªæ’åˆ—ä¸­æ’å…¥å½“å‰çš„æ•° $i$ï¼Œè¿™ä¼šå¯¼è‡´å¢åŠ ä¸€äº›é€†åºå¯¹æ•°</p><p>è®¾ $k$ ä¸ºå¢åŠ çš„é€†åºå¯¹æ•°ï¼Œé‚£ä¹ˆ $k\in[0,\;min(j,i-1)]$ï¼Œå³ï¼š$f[i][j]=\sum_{k=0}^{min(i-1,j)}f[i-1][j-k]$</p><p>å†åšä¸ªå˜å½¢ï¼Œ$f[i][j]=\sum_{k=max(0,j-i+1)}^jf[i-1][k]$ ï¼Œåˆ°è¿™ä¸€æ­¥é€’æ¨çš„è¯ï¼Œæ—¶é—´å¤æ‚åº¦ $O(nk^2)$ ï¼Œæœ‰è¶…æ—¶é£é™©</p><p>ä½†æ˜¯æˆ‘ä»¬å‘ç° $k$ æ˜¯ä» 0 å¼€å§‹å¾ªç¯çš„ï¼Œå½“ $i,j$ å›ºå®šæ—¶ï¼Œ$k$ çš„åŒºé—´ $[max(0,j-i+1),\;j]$ ä¹Ÿå›ºå®šäº†ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é¢å¤–ç»´æŠ¤å‰ç¼€å’Œæ¥å¿«é€Ÿçš„è®¡ç®—</p><blockquote><ol><li><strong>ç¥å¥‡ä¹±æè§£æ³•</strong></li></ol></blockquote><p>è€ƒè¯•çš„æ—¶å€™æƒ³å‡ºæ¥çš„ç¥å¥‡ä¹±æè§£æ³•ï¼Œå¯¹äºæ•°æ®è¾ƒå°çš„æ—¶å€™ï¼Œå¯ä»¥ç›´æ¥æœç´¢ï¼Œç„¶åè®¾ $f[i][j]$ æ„ä¹‰åŒä¸Šï¼Œè§‚å¯Ÿè¡¨æ ¼ï¼š</p><div class="table-container"><table><thead><tr><th style="text-align:center">$f[3][0\rightarrow3]$</th><th style="text-align:center">1</th><th style="text-align:center">2</th><th style="text-align:center">2</th><th style="text-align:center">1</th><th style="text-align:center"></th><th style="text-align:center"></th><th style="text-align:center"></th><th style="text-align:center"></th><th style="text-align:center"></th><th style="text-align:center"></th><th style="text-align:center"></th><th style="text-align:center"></th><th style="text-align:center"></th><th style="text-align:center"></th><th style="text-align:center"></th><th style="text-align:center"></th></tr></thead><tbody><tr><td style="text-align:center">$f[4][0\rightarrow6]$</td><td style="text-align:center">1</td><td style="text-align:center">3</td><td style="text-align:center">5</td><td style="text-align:center">6</td><td style="text-align:center">5</td><td style="text-align:center">1</td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td></tr><tr><td style="text-align:center">$f[5][0\rightarrow10]$</td><td style="text-align:center">1</td><td style="text-align:center">4</td><td style="text-align:center">9</td><td style="text-align:center">15</td><td style="text-align:center">20</td><td style="text-align:center">22</td><td style="text-align:center">20</td><td style="text-align:center">15</td><td style="text-align:center">9</td><td style="text-align:center">4</td><td style="text-align:center">1</td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td></tr><tr><td style="text-align:center">$f[6][0\rightarrow15]$</td><td style="text-align:center">1</td><td style="text-align:center">5</td><td style="text-align:center">14</td><td style="text-align:center">29</td><td style="text-align:center">49</td><td style="text-align:center">71</td><td style="text-align:center">90</td><td style="text-align:center">101</td><td style="text-align:center">101</td><td style="text-align:center">90</td><td style="text-align:center">71</td><td style="text-align:center">49</td><td style="text-align:center">29</td><td style="text-align:center">14</td><td style="text-align:center">5</td><td style="text-align:center">1</td></tr></tbody></table></div><p>åé¢æ•°æ®å¤ªå¤šå°±ä¸æ”¾äº†ï¼Œæ€»ä¹‹å¯ä»¥å‘ç°ä¸€ä¸ªè§„å¾‹ï¼š</p><ol><li>å½“ $j&lt;i$ æ—¶ï¼Œ$f[i][j]=f[i-1][j]+f[i][j-1]$</li><li>å½“ $i\leq j \leq \frac{i(i-1)}{4}$ æ—¶ï¼Œ$f[i][j]=f[i-1][j]+f[i][j-1]-x$ </li><li>å½“ $\frac{i(i-1)}{4} \leq j \leq \frac{i(i-1)}{2}$ æ—¶ï¼Œ$f[i][j]=f[i][\frac{i(i-1)}{2}-j]$ </li></ol><p>ç”±äº $ 1 \rightarrow i$  çš„å…¨æ’åˆ—æœ€å¤šæœ‰ $\frac{i(i-1)}{2}$ å¯¹é€†åºå¯¹ï¼Œæ‰€ä»¥ $j_{max}=\frac{i(i-1)}{2}$ ï¼Œæ¥ä¸‹æ¥è€ƒè™‘ $x$ çš„é—®é¢˜</p><p>å¯ä»¥å‘ç°ï¼Œ$f[i][j]$ ä» $j=i$ å¼€å§‹å‡å»çš„æ•°ï¼Œæ°å¥½æ˜¯ $f[i-1]$ çš„ä¸€è¡Œä» $jâ€™=0$ å¼€å§‹çš„é¡¹ï¼Œéšç€ $j$ å¾€åç§» $jâ€™$ ä¹Ÿå¾€åç§»åŠ¨</p><p>äºæ˜¯è¿™æ ·ä¸€ä¸ªç¥å¥‡çš„é€’æ¨å¼å°±å†™å¥½äº†ï¼Œæ—¶é—´å¤æ‚åº¦ $ O(nk)$</p><h3 id="Codes"><a href="#Codes" class="headerlink" title="Codes"></a>Codes</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;ctime&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxn 1005</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> lowbit(x) (x&amp;-x)</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="type">const</span> ll mod=<span class="number">10000</span>;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> t&gt;<span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">fcin</span><span class="params">(t &amp;x)</span></span>&#123;</span><br><span class="line"><span class="type">int</span> sign=<span class="number">1</span>; x=<span class="number">0</span>; <span class="type">char</span> op=<span class="built_in">getchar</span>();</span><br><span class="line"><span class="keyword">while</span>(op&lt;<span class="string">&#x27;0&#x27;</span>||op&gt;<span class="string">&#x27;9&#x27;</span>)&#123;<span class="keyword">if</span>(op==<span class="string">&#x27;-&#x27;</span>) sign=<span class="number">-1</span>;op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line"><span class="keyword">while</span>(op&gt;=<span class="string">&#x27;0&#x27;</span>&amp;&amp;op&lt;=<span class="string">&#x27;9&#x27;</span>)&#123;x=x*<span class="number">10</span>+(op<span class="number">-48</span>);op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line">x*=sign;</span><br><span class="line">&#125;</span><br><span class="line">ll f[maxn][maxn];</span><br><span class="line"><span class="type">int</span> n;<span class="type">int</span> k;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++) f[i][<span class="number">0</span>]=<span class="number">1</span>,f[i][<span class="number">1</span>]=i<span class="number">-1</span>;</span><br><span class="line">f[<span class="number">3</span>][<span class="number">2</span>]=<span class="number">2</span>;f[<span class="number">3</span>][<span class="number">3</span>]=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">4</span>;i&lt;=n;i++)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">2</span>;j&lt;i;j++) f[i][j]=(f[i][j]+f[i<span class="number">-1</span>][j]+f[i][j<span class="number">-1</span>])%mod;</span><br><span class="line"><span class="type">int</span> sub=<span class="number">0</span>,lim2=(i*(i<span class="number">-1</span>))&gt;&gt;<span class="number">2</span>,lim1=(i*(i<span class="number">-1</span>))&gt;&gt;<span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> j=i;j&lt;=lim2 &amp;&amp; j&lt;=k;j++,sub++)&#123;</span><br><span class="line">f[i][j]=(f[i][j]+f[i<span class="number">-1</span>][j]+f[i][j<span class="number">-1</span>]-f[i<span class="number">-1</span>][sub])%mod;</span><br><span class="line"><span class="keyword">while</span>(f[i][j]&lt;<span class="number">0</span>) f[i][j]+=mod;f[i][j]%=mod;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> j=lim2+<span class="number">1</span>;j&lt;=lim1 &amp;&amp; j&lt;=k;j++) f[i][j]=f[i][lim1-j];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;array.in&quot;</span>,<span class="string">&quot;r&quot;</span>,stdin);</span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;array.out&quot;</span>,<span class="string">&quot;w&quot;</span>,stdout);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"><span class="built_in">fcin</span>(n);<span class="built_in">fcin</span>(k);</span><br><span class="line"><span class="built_in">init</span>();<span class="built_in">printf</span>(<span class="string">&quot;%lld&quot;</span>,f[n][k]);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>{:. copyable}</p><hr><h2 id="2-å…¬äº¤çº¿è·¯ï¼ˆbus-cppï¼‰"><a href="#2-å…¬äº¤çº¿è·¯ï¼ˆbus-cppï¼‰" class="headerlink" title="2. å…¬äº¤çº¿è·¯ï¼ˆbus.cppï¼‰"></a>2. å…¬äº¤çº¿è·¯ï¼ˆbus.cppï¼‰</h2><h3 id="Description-1"><a href="#Description-1" class="headerlink" title="Description"></a>Description</h3><p>æŸåŸå¸‚çš„è¡—é“å½¢æˆäº†ä¸€ä¸ªæ£‹ç›˜ç½‘ç»œ â€“ ä»–ä»¬è¦ä¹ˆæ˜¯åŒ—å—èµ°å‘è¦ä¹ˆå°±æ˜¯è¥¿ä¸œèµ°å‘.åŒ—å—èµ°å‘çš„è·¯å£ä» 1 åˆ° nç¼–å·, è¥¿ä¸œèµ°å‘çš„è·¯ä»1 åˆ° mç¼–å·. æ¯ä¸ªè·¯å£ç”¨ä¸¤ä¸ªæ•°(i, j) è¡¨ç¤º(1 &lt;= i &lt;= n, 1 &lt;= j &lt;= m).</p><p>è¯¥åŸå¸‚é‡Œæœ‰ä¸€æ¡å…¬äº¤çº¿, åœ¨æŸä¸€äº›è·¯å£è®¾ç½®äº†å…¬äº¤ç«™ç‚¹. å…¬äº¤è½¦ä» (1, 1) å‘è½¦, åœ¨(n, m)ç»“æŸ.å…¬äº¤è½¦åªèƒ½å¾€åŒ—æˆ–å¾€ä¸œèµ°. ç°åœ¨æœ‰ä¸€äº›ä¹˜å®¢åœ¨æŸäº›ç«™ç‚¹ç­‰è½¦. å…¬äº¤è½¦å¸æœºå¸Œæœ›åœ¨è·¯çº¿ä¸­èƒ½æ¥åˆ°å°½é‡å¤šçš„ä¹˜å®¢.å¸®ä»–æƒ³æƒ³æ€ä¹ˆæ‰èƒ½æ¥åˆ°æœ€å¤šçš„ä¹˜å®¢.</p><p>ç¬¬ä¸€è¡Œä¸€ä¸ªæ•°å­— T è¡¨ç¤ºæ•°æ®ç»„æ•°ï¼›</p><p>å¯¹äºæ¯ç»„æ•°æ®ï¼Œ</p><p>ç¬¬ä¸€è¡Œä¸¤ä¸ªæ•°å­— N,Q åˆ†åˆ«è¡¨ç¤º ç‰¹æ®Šä½ç½®æ•°é‡å’Œè¯¢é—®æ¬¡æ•°ã€‚</p><p>æ¥ä¸‹æ¥ N è¡Œï¼Œæ¯è¡Œä¸¤ä¸ªæ•°å­— Xi,Yi è¡¨ç¤ºç‰¹æ®Šä½ç½®åæ ‡ï¼›</p><p>æ¥ä¸‹æ¥ Q è¡Œï¼Œæ¯è¡Œä¸¤ä¸ªæ•°å­— S,T è¡¨ç¤ºè¯¢é—®èµ·ç‚¹åæ ‡ã€‚</p><h3 id="Output-1"><a href="#Output-1" class="headerlink" title="Output"></a>Output</h3><p>ä¸€ä¸ªæ•°è¡¨ç¤ºæœ€å¤šèƒ½æ¥åˆ°çš„ä¹˜å®¢æ•°é‡.</p><h3 id="Sample-Input-1"><a href="#Sample-Input-1" class="headerlink" title="Sample Input"></a>Sample Input</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">8 7 11</span><br><span class="line">4 3 4</span><br><span class="line">6 2 4</span><br><span class="line">2 3 2</span><br><span class="line">5 6 1</span><br><span class="line">2 5 2</span><br><span class="line">1 5 5</span><br><span class="line">2 1 1</span><br><span class="line">3 1 1</span><br><span class="line">7 7 1</span><br><span class="line">7 4 2</span><br><span class="line">8 6 2</span><br></pre></td></tr></table></figure><h3 id="Sample-Output-1"><a href="#Sample-Output-1" class="headerlink" title="Sample Output"></a>Sample Output</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">11</span><br></pre></td></tr></table></figure><h3 id="Hint-1"><a href="#Hint-1" class="headerlink" title="Hint"></a>Hint</h3><p>æœ¬é¢˜å…± 5 ä¸ªæµ‹è¯•ç‚¹ï¼Œæ¯ä¸ªæµ‹è¯•ç‚¹ 20 åˆ†ã€‚</p><p>å¯¹äº 20% çš„æ•°æ®ï¼ŒT=1,1â‰¤N,Qâ‰¤5000,1â‰¤S,T,Xi,Yiâ‰¤1000</p><p>å¯¹äº 40% çš„æ•°æ®ï¼Œæ‰€æœ‰æ•°æ®ä¸­ N<em>Q çš„æ€»å’Œä¸è¶…è¿‡ 5\</em>10^7</p><p>å¯¹äºå¦å¤– 20% çš„æ•°æ®ï¼ŒT=1,1â‰¤S,T,Xi,Yiâ‰¤1000</p><p>å¯¹äº 100% çš„æ•°æ®ï¼ŒN çš„æ€»å’Œå’Œ Q çš„æ€»å’Œå‡ä¸è¶…è¿‡ 10^6 ï¼Œ1â‰¤S,T,Xi,Yiâ‰¤10^9</p><h3 id="åˆ†æ-1"><a href="#åˆ†æ-1" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h3><p>è€ƒè¯•æ—¶çœ‹åˆ°è¿™ä¸ªé¢˜ï¼Œè§‰å¾—å¾ˆåƒä»¥å‰åšè¿‡çš„äºŒç»´ååºé—®é¢˜ï¼Œå› ä¸ºæ¯ä¸ªè½¦ç«™ç»“ç‚¹ $(x,\;y)$ åªèƒ½ç”± $(xâ€™,\;yâ€™)(x;\leq x,\;yâ€™\leq y)$ å‡ºå‘çš„å…¬äº¤è½¦æ¥å®¢ï¼Œæ‰€ä»¥å¯ä»¥ç”¨æ•°æ®ç»“æ„ç»´æŠ¤ $(x,\;y)$ ä¸ºå³ä¸‹è§’çš„çŸ©å½¢ä¸­çš„æœ€å¤§å€¼</p><p><del>äºæ˜¯è€ƒåœºä¸Š 45min æ•²ä»£ç +è°ƒè¯•äºŒç»´çº¿æ®µæ ‘ç»“æœ build èŠ±äº† 1.8s+??? æ€€ç–‘äººç”Ÿ</del></p><p>å…¶å®è¿™é¢˜åªéœ€å¯¹$y$ å¼€ä¸€ç»´çº¿æ®µæ ‘å°±å¯ä»¥è½»æ¾è¿‡äº†ï¼Œå› ä¸º $x$ è½´çš„é¡ºåºå¯ä»¥ç›´æ¥ä¸€éæ’åºè§£å†³ã€‚ã€‚ã€‚</p><h3 id="Codes-1"><a href="#Codes-1" class="headerlink" title="Codes"></a>Codes</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;ctime&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxn 1000005</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> mid ((L+R)&gt;&gt;1)</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> t&gt;<span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">fcin</span><span class="params">(t &amp;x)</span></span>&#123;</span><br><span class="line"><span class="type">int</span> sign=<span class="number">1</span>; x=<span class="number">0</span>; <span class="type">char</span> op=<span class="built_in">getchar</span>();</span><br><span class="line"><span class="keyword">while</span>(op&lt;<span class="string">&#x27;0&#x27;</span>||op&gt;<span class="string">&#x27;9&#x27;</span>)&#123;<span class="keyword">if</span>(op==<span class="string">&#x27;-&#x27;</span>) sign=<span class="number">-1</span>;op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line"><span class="keyword">while</span>(op&gt;=<span class="string">&#x27;0&#x27;</span>&amp;&amp;op&lt;=<span class="string">&#x27;9&#x27;</span>)&#123;x=x*<span class="number">10</span>+(op<span class="number">-48</span>);op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line">x*=sign;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">node</span>&#123;</span><br><span class="line"><span class="type">int</span> x,y,w;</span><br><span class="line"><span class="type">bool</span> <span class="keyword">operator</span> &lt;(<span class="type">const</span> node &amp;obj)<span class="type">const</span>&#123;</span><br><span class="line"><span class="keyword">if</span>(x!=obj.x) <span class="keyword">return</span> x&lt;obj.x;</span><br><span class="line"><span class="keyword">return</span> y&lt;obj.y;</span><br><span class="line">&#125;</span><br><span class="line">&#125;d[maxn],dat[maxn];</span><br><span class="line"><span class="type">int</span> f[maxn],c[maxn];</span><br><span class="line"><span class="type">int</span> n,m,k;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">st</span>&#123;</span><br><span class="line">st *lc,*rc;</span><br><span class="line"><span class="type">int</span> val;</span><br><span class="line"><span class="built_in">st</span>():<span class="built_in">lc</span>(<span class="number">0x0</span>),<span class="built_in">rc</span>(<span class="number">0x0</span>),<span class="built_in">val</span>(<span class="number">0</span>)&#123;&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">pushup</span><span class="params">()</span></span>&#123;</span><br><span class="line">val=<span class="built_in">max</span>(lc-&gt;val,rc-&gt;val);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">updata</span><span class="params">(<span class="type">int</span> L,<span class="type">int</span> R,<span class="type">int</span> x,<span class="type">int</span> d)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(L==R)&#123;</span><br><span class="line">val=<span class="built_in">max</span>(val,d);<span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(x&lt;=mid) lc-&gt;<span class="built_in">updata</span>(L,mid,x,d);</span><br><span class="line"><span class="keyword">else</span> rc-&gt;<span class="built_in">updata</span>(mid+<span class="number">1</span>,R,x,d);</span><br><span class="line"><span class="built_in">pushup</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">stmax</span><span class="params">(<span class="type">int</span> L,<span class="type">int</span> R,<span class="type">int</span> x,<span class="type">int</span> y)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(x&lt;=L &amp;&amp; R&lt;=y) <span class="keyword">return</span> val;</span><br><span class="line"><span class="type">int</span> ans=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">if</span>(x&lt;=mid) ans=<span class="built_in">max</span>(ans,lc-&gt;<span class="built_in">stmax</span>(L,mid,x,y));</span><br><span class="line"><span class="keyword">if</span>(y&gt;mid) ans=<span class="built_in">max</span>(ans,rc-&gt;<span class="built_in">stmax</span>(mid+<span class="number">1</span>,R,x,y));</span><br><span class="line"><span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">build</span><span class="params">(st* &amp;p,<span class="type">int</span> L,<span class="type">int</span> R)</span></span>&#123;</span><br><span class="line">p=<span class="keyword">new</span> <span class="built_in">st</span>();</span><br><span class="line"><span class="keyword">if</span>(L==R)&#123;</span><br><span class="line">p-&gt;val=<span class="number">0</span>;<span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">build</span>(p-&gt;lc,L,mid);</span><br><span class="line"><span class="built_in">build</span>(p-&gt;rc,mid+<span class="number">1</span>,R);</span><br><span class="line">p-&gt;<span class="built_in">pushup</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> maxDx,maxDy;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">discret</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="type">int</span> ed;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=k;i++) c[i]=d[i].x;</span><br><span class="line"><span class="built_in">sort</span>(c+<span class="number">1</span>,c+k+<span class="number">1</span>);</span><br><span class="line">ed=<span class="built_in">unique</span>(c+<span class="number">1</span>,c+k+<span class="number">1</span>)-(c+<span class="number">1</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=k;i++) </span><br><span class="line">dat[i].x=<span class="built_in">lower_bound</span>(c+<span class="number">1</span>,c+ed+<span class="number">1</span>,d[i].x)-c,</span><br><span class="line">maxDx=<span class="built_in">max</span>(maxDx,dat[i].x);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=k;i++) c[i]=d[i].y;</span><br><span class="line"><span class="built_in">sort</span>(c+<span class="number">1</span>,c+k+<span class="number">1</span>);</span><br><span class="line">ed=<span class="built_in">unique</span>(c+<span class="number">1</span>,c+k+<span class="number">1</span>)-(c+<span class="number">1</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=k;i++) </span><br><span class="line">dat[i].y=<span class="built_in">lower_bound</span>(c+<span class="number">1</span>,c+ed+<span class="number">1</span>,d[i].y)-c,</span><br><span class="line">maxDy=<span class="built_in">max</span>(maxDy,dat[i].y);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">solve_40</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">sort</span>(d+<span class="number">1</span>,d+k+<span class="number">1</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=k;i++) f[i]=d[i].w;</span><br><span class="line"><span class="type">int</span> ans=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=k;i++)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=k;j++)&#123;</span><br><span class="line"><span class="keyword">if</span>(i==j) <span class="keyword">continue</span>;</span><br><span class="line"><span class="keyword">if</span>(d[j].x&lt;=d[i].x &amp;&amp; d[j].y&lt;=d[i].y)</span><br><span class="line">f[i]=<span class="built_in">max</span>(f[i],f[j]+d[i].w);</span><br><span class="line">&#125;</span><br><span class="line">ans=<span class="built_in">max</span>(ans,f[i]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,ans);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">st *root;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;bus.in&quot;</span>,<span class="string">&quot;r&quot;</span>,stdin);</span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;bus.out&quot;</span>,<span class="string">&quot;w&quot;</span>,stdout);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"><span class="built_in">fcin</span>(n);<span class="built_in">fcin</span>(m);<span class="built_in">fcin</span>(k);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=k;i++)&#123;</span><br><span class="line"><span class="built_in">fcin</span>(d[i].x);</span><br><span class="line"><span class="built_in">fcin</span>(d[i].y);</span><br><span class="line"><span class="built_in">fcin</span>(d[i].w);</span><br><span class="line">dat[i].w=d[i].w;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//if(k&lt;=10000) return solve_40();</span></span><br><span class="line"><span class="built_in">discret</span>();</span><br><span class="line">n=maxDx;m=maxDy;</span><br><span class="line"><span class="built_in">build</span>(root,<span class="number">1</span>,m);</span><br><span class="line"><span class="built_in">sort</span>(dat+<span class="number">1</span>,dat+k+<span class="number">1</span>);</span><br><span class="line"><span class="type">int</span> ans=<span class="number">0</span>,cur=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=k;i++)&#123;</span><br><span class="line">cur=root-&gt;<span class="built_in">stmax</span>(<span class="number">1</span>,m,<span class="number">1</span>,dat[i].y);</span><br><span class="line">ans=<span class="built_in">max</span>(ans,cur+dat[i].w);</span><br><span class="line">root-&gt;<span class="built_in">updata</span>(<span class="number">1</span>,m,dat[i].y,cur+dat[i].w);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,ans);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="3-æœ€ä½³å›¢ä½“ï¼ˆteam-cppï¼‰"><a href="#3-æœ€ä½³å›¢ä½“ï¼ˆteam-cppï¼‰" class="headerlink" title="3. æœ€ä½³å›¢ä½“ï¼ˆteam.cppï¼‰"></a>3. æœ€ä½³å›¢ä½“ï¼ˆteam.cppï¼‰</h2><h3 id="Description-2"><a href="#Description-2" class="headerlink" title="Description"></a>Description</h3><p>èŒœèŒœçš„èˆè¹ˆå›¢é˜Ÿä¸€å…±æœ‰Nåå€™é€‰äººï¼Œè¿™äº›å€™é€‰äººä»1åˆ°Nç¼–å·ã€‚æ–¹ä¾¿èµ·è§ï¼ŒèŒœèŒœçš„ç¼–å·æ˜¯0å·ã€‚æ¯ä¸ªå€™é€‰äººéƒ½ç”±ä¸€ä½ç¼–å·æ¯”ä»–å°çš„å€™é€‰äººRiæ¨èã€‚å¦‚æœRi=0åˆ™è¯´æ˜è¿™ä¸ªå€™é€‰äººæ˜¯èŒœèŒœè‡ªå·±çœ‹ä¸Šçš„ã€‚ä¸ºäº†ä¿è¯å›¢é˜Ÿçš„å’Œè°ï¼ŒèŒœèŒœéœ€è¦ä¿è¯ï¼Œå¦‚æœæ‹›å‹Ÿäº†å€™é€‰äººiï¼Œé‚£ä¹ˆå€™é€‰äººRiä¹Ÿä¸€å®šéœ€è¦åœ¨å›¢é˜Ÿä¸­ã€‚å½“ç„¶äº†ï¼ŒèŒœèŒœè‡ªå·±æ€»æ˜¯åœ¨å›¢é˜Ÿé‡Œçš„ã€‚æ¯ä¸€ä¸ªå€™é€‰äººéƒ½æœ‰ä¸€ä¸ªèƒ½åŠ›å€¼Piï¼Œä¹Ÿæœ‰ä¸€ä¸ªæ‹›å‹Ÿè´¹ç”¨Siã€‚èŒœèŒœå¸Œæœ›æ‹›å‹ŸKä¸ªå€™é€‰äººï¼ˆèŒœèŒœè‡ªå·±ä¸ç®—ï¼‰ï¼Œç»„æˆä¸€ä¸ªæ€§ä»·æ¯”æœ€é«˜çš„å›¢é˜Ÿã€‚ä¹Ÿå°±æ˜¯ï¼Œè¿™Kä¸ªè¢«èŒœèŒœé€‰æ‹©çš„å€™é€‰äººçš„æ€»èƒ½åŠ›å€¼ä¸æ€»æ‹›å‹Ÿæ€»è´¹ç”¨çš„æ¯”å€¼æœ€å¤§ã€‚</p><h3 id="Input-1"><a href="#Input-1" class="headerlink" title="Input"></a>Input</h3><p>è¾“å…¥ä¸€è¡ŒåŒ…å«ä¸¤ä¸ªæ­£æ•´æ•°Kå’ŒNã€‚</p><p>æ¥ä¸‹æ¥Nè¡Œï¼Œå…¶ä¸­ç¬¬iè¡ŒåŒ…å«3ä¸ªæ•´æ•°Si,Pi,Riè¡¨ç¤ºå€™é€‰äººiçš„æ‹›å‹Ÿè´¹ç”¨ï¼Œæˆ˜æ–—å€¼å’Œæ¨èäººç¼–å·ã€‚ </p><h3 id="Output-2"><a href="#Output-2" class="headerlink" title="Output"></a>Output</h3><p>è¾“å‡ºä¸€è¡Œä¸€ä¸ªå®æ•°ï¼Œè¡¨ç¤ºæœ€ä½³æ¯”å€¼ã€‚ç­”æ¡ˆä¿ç•™ä¸‰ä½å°æ•°ã€‚</p><h3 id="Sample-Input-2"><a href="#Sample-Input-2" class="headerlink" title="Sample Input"></a>Sample Input</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1 2</span><br><span class="line">1000 1 0</span><br><span class="line">1 1000 1</span><br></pre></td></tr></table></figure><h3 id="Sample-Output-2"><a href="#Sample-Output-2" class="headerlink" title="Sample Output"></a>Sample Output</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0.001</span><br></pre></td></tr></table></figure><h3 id="Hint-2"><a href="#Hint-2" class="headerlink" title="Hint"></a>Hint</h3><p>å¯¹äº100%çš„æ•°æ®æ»¡è¶³ $1\leq K\leq N \leq 2500,\;0\leq S_i,P_i\leq 10^4,\;0\leq R_i\leq i$</p><h3 id="åˆ†æ-2"><a href="#åˆ†æ-2" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h3><p>è¿™æ˜¯ä¸€é“ $0/1$ åˆ†æ•°è§„åˆ’çš„é¢˜ç›®ï¼Œä½†æ˜¯ç”±äº<del>æˆ‘æ ¹æœ¬æ²¡å­¦è¿‡</del>å¯¼è‡´åªèƒ½å†™çˆ†æœçˆ†0</p><p>å€Ÿç€è¿™ä¸ªé¢˜æ¥å›é¡¾ä¸€ä¸‹ $0/1$ åˆ†æ•°è§„åˆ’çš„è§£é¢˜æ€è·¯å§</p><p>é¦–å…ˆï¼Œé¢˜ç›®è¦æ±‚çš„æ˜¯ä¸€ä¸ªæ€»æˆ˜æ–—åŠ›å’Œæ€»è´¹ç”¨çš„æ¯”å€¼æœ€å¤§å€¼ï¼Œè®¾æ¯”å€¼ä¸º $k$ï¼Œæˆ˜æ–—åŠ›ä¸º $v[i]$ï¼Œè´¹ç”¨ä¸º $w[i]$</p><p><strong>é‚£ä¹ˆ $k<em>{max}=\frac{\sum v[i]}{\sum w[i]}$ï¼ŒæŠŠè¿™ä¸ªåˆ†å¼åŒ–æˆæ•´å¼ï¼Œå¾—åˆ°ï¼š$k</em>{max}\sum w[i]=\sum v[i]$ ï¼Œç§»é¡¹å¾—åˆ° $\sum v[i]-k_{max}\sum w[i]\geq 0$</strong></p><p>é‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥äºŒåˆ† $k_{max}$ï¼Œç„¶åæ›´æ–° $v$ æ•°ç»„ï¼Œç„¶åæ ‘ä¸Š DP çœ‹èƒ½å¦æ»¡è¶³ç»“æœ $\geq 0$</p><p>è®¾ $f[i][j]$ è¡¨ç¤ºä»¥ $i$ ä¸ºæ ¹çš„å­æ ‘é‡Œé¢ï¼Œé€‰æ‹© $j$ ä¸ªå¾—åˆ°çš„æœ€å¤§ $v$ å€¼ï¼ˆ$v$ å€¼å·²ç»å‡å» $k_{max}w[i]$ï¼‰ï¼Œå¯¹äºæ¯ä¸ªæ¨èäºº $R[i]$ ï¼Œå°†è¿™ä¸ªæ¨èäºº $R[i]$ ä¸ä»–æ¨èçš„æ‰€æœ‰äººè¿ä¸€æ¡è¾¹ï¼Œ$R[i]$ ä¸ºçˆ¶ç»“ç‚¹ï¼Œ$i$ ä¸ºå„¿å­ç»“ç‚¹ï¼Œå°±èƒ½ç¬¦åˆé¢˜ç›®é€‰æ‹©çš„è¦æ±‚äº†</p><p>å¯¹äºèŒœèŒœè‡ªå·±ï¼Œæ ¹æ®é¢˜æ„è®¾ä¸º $0$ å·ç»“ç‚¹ï¼Œç”±äºæœ€ç»ˆèŒœèŒœè‡ªå·±ä¹Ÿåœ¨å›¢ä½“é‡Œé¢ï¼Œæ‰€ä»¥ç­”æ¡ˆä¸º $f[0][k+1]$</p><p>è¿™ä¸ª DP çš„è½¬ç§»æ–¹ç¨‹ä¹Ÿå¾ˆå¥½å†™ï¼š$f[i][j]=max(f[i][j],\;f[i][k]+f[s][j-k])\;(s\in son[i])$ </p><p>ç„¶åæ˜¯å®æ•°åŸŸä¸Šçš„äºŒåˆ†ç²¾åº¦é—®é¢˜ï¼Œäº‹å®ä¸Šè¿™ä¸ªé¢˜çš„æ ‘ä¸ŠèƒŒåŒ…åšæ³•æ˜¯ $O(nk^2)$ æ—¶é—´å¤æ‚åº¦ï¼ˆæ­£è§£æ˜¯ DFS åºä¸æƒ³å†å†™äº†ï¼‰ï¼Œæ‰€ä»¥æ³¨æ„æ§åˆ¶ç²¾åº¦é—®é¢˜ï¼Œå®æµ‹ $1e-4$ è¶³çŸ£ï¼Œå¹³æ—¶ä½¿ç”¨çš„ $1e-8$ ç”šè‡³ $1e-10$ éƒ½æœ‰å¯èƒ½ TLE</p><h3 id="Codes-2"><a href="#Codes-2" class="headerlink" title="Codes"></a>Codes</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;ctime&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxn 2505</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxm maxn&lt;&lt;1</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> INF 1e-4</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> mid ((L+R)/2.0)</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">int</span> to[maxm],nxt[maxm],head[maxn];</span><br><span class="line"><span class="type">double</span> cost[maxn];</span><br><span class="line"><span class="type">double</span> v[maxn],src[maxn];</span><br><span class="line"><span class="type">int</span> n,k,tot;</span><br><span class="line"><span class="type">double</span> f[maxn][maxn];</span><br><span class="line"><span class="type">int</span> siz[maxn];</span><br><span class="line"><span class="type">double</span> d[maxn];</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">Eadd</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> v)</span></span>&#123;</span><br><span class="line">to[++tot]=v;nxt[tot]=head[u];</span><br><span class="line">head[u]=tot;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">check</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> pre)</span></span>&#123;</span><br><span class="line">siz[u]=<span class="number">1</span>; f[u][<span class="number">0</span>]=<span class="number">0.0</span>; f[u][<span class="number">1</span>]=v[u];</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=head[u];i;i=nxt[i])&#123;</span><br><span class="line"><span class="keyword">if</span>(to[i]==pre) <span class="keyword">continue</span>;</span><br><span class="line"><span class="built_in">check</span>(to[i],u);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=siz[u]+siz[to[i]];j++) d[j]=<span class="number">-2147483647.0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=siz[u];j++)</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> p=<span class="number">0</span>;p&lt;=siz[to[i]];p++) d[j+p]=<span class="built_in">max</span>(d[j+p],f[u][j]+f[to[i]][p]);</span><br><span class="line">siz[u]+=siz[to[i]];</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=siz[u];j++) f[u][j]=d[j];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;team.in&quot;</span>,<span class="string">&quot;r&quot;</span>,stdin);</span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;team.out&quot;</span>,<span class="string">&quot;w&quot;</span>,stdout);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;k,&amp;n);<span class="type">int</span> x;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%lf%lf&quot;</span>,&amp;cost[i],&amp;src[i]);</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;x);</span><br><span class="line"><span class="built_in">Eadd</span>(x,i);<span class="built_in">Eadd</span>(i,x);</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">double</span> L=<span class="number">0.0</span>,R=<span class="number">10000.0</span>;</span><br><span class="line"><span class="keyword">while</span>(R-L&gt;=INF)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">v[i]=src[i]-mid*cost[i];</span><br><span class="line"><span class="built_in">memset</span>(f,<span class="number">-0x3f</span>,<span class="built_in">sizeof</span>(f));</span><br><span class="line"><span class="built_in">check</span>(<span class="number">0</span>,<span class="number">0</span>);</span><br><span class="line"><span class="keyword">if</span>(f[<span class="number">0</span>][k+<span class="number">1</span>]&gt;<span class="number">0</span>) L=mid;</span><br><span class="line"><span class="keyword">else</span> R=mid;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%.3lf&quot;</span>,L);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŠ¨æ€è§„åˆ’ </tag>
            
            <tag> å­—ç¬¦ä¸² </tag>
            
            <tag> SPFA </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŠ¨æ€è§„åˆ’ | è´ªå¿ƒ | å›¾è®º | 201901025è€ƒè¯•  ï¼šè§£é¢˜æŠ¥å‘Š</title>
      <link href="/2019/10/25/2019-10-25-exam/"/>
      <url>/2019/10/25/2019-10-25-exam/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><h2 id="é¢˜ç›®é™åˆ¶ä¸€è§ˆ"><a href="#é¢˜ç›®é™åˆ¶ä¸€è§ˆ" class="headerlink" title="é¢˜ç›®é™åˆ¶ä¸€è§ˆ"></a>é¢˜ç›®é™åˆ¶ä¸€è§ˆ</h2><div class="table-container"><table><thead><tr><th style="text-align:center">é¢˜ç›®</th><th style="text-align:center">æ—¶é—´é™åˆ¶</th><th style="text-align:center">ç©ºé—´é™åˆ¶</th></tr></thead><tbody><tr><td style="text-align:center">1. <strong>trapped</strong></td><td style="text-align:center">1000 MS</td><td style="text-align:center">128 MB</td></tr><tr><td style="text-align:center">2. <strong>array</strong></td><td style="text-align:center">1000 MS</td><td style="text-align:center">128 MB</td></tr><tr><td style="text-align:center">3. <strong>travel</strong></td><td style="text-align:center">1000 MS</td><td style="text-align:center">128 MB</td></tr></tbody></table></div><h2 id="1-é™·é˜±ï¼ˆtrapped-cppï¼‰"><a href="#1-é™·é˜±ï¼ˆtrapped-cppï¼‰" class="headerlink" title="1. é™·é˜±ï¼ˆtrapped.cppï¼‰"></a>1. é™·é˜±ï¼ˆtrapped.cppï¼‰</h2><h3 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h3><p>FJå°†N(1&lt;=N&lt;=100000)å †å¹²è‰æ”¾åœ¨äº†ä¸€æ¡å¹³ç›´çš„å…¬è·¯ä¸Šã€‚ç¬¬jå †å¹²è‰çš„å¤§å°ä¸ºSjï¼Œåæ ‡ä¸ºPjã€‚å¥¶ç‰›è´èŒœä½äºä¸€ä¸ªæ²¡æœ‰å¹²è‰å †çš„ç‚¹Bã€‚</p><p>å¥¶ç‰›Bessieå¯ä»¥åœ¨è·¯ä¸Šè‡ªç”±ç§»åŠ¨ï¼Œç”šè‡³å¯ä»¥èµ°åˆ°æŸä¸ªå¹²è‰å †ä¸Šï¼Œä½†æ˜¯ä¸èƒ½ç©¿è¿‡å»ã€‚å¦‚æœå¥¹æœåŒä¸€ä¸ªæ–¹å‘è·‘äº†Dä¸ªå•ä½çš„è·ç¦»ï¼Œé‚£ä¹ˆå¥¹å°±æœ‰è¶³å¤Ÿå¤§çš„é€Ÿåº¦å»å‡»ç¢ä»»ä½•å¤§å°ä¸¥æ ¼å°äºDçš„å¹²è‰å †ã€‚å½“ç„¶ï¼Œåœ¨è¿™ä¹‹åå¥¹å°±å¯ä»¥è·å¾—äº†æ›´å¤§çš„æ´»åŠ¨ç©ºé—´ï¼Œä»¥å°è¯•å‡»ç¢æ›´å¤šå¹²è‰å †ã€‚</p><p>çº¦ç¿°å¯ä»¥æŒ‡å®šæŸå †å¹²è‰ï¼Œå¹¶å¢å¤§å®ƒçš„å¤§å°ï¼Œä»–æƒ³çŸ¥é“ä»–æœ€å°‘éœ€è¦     å¢å¤§å¤šå°‘ï¼Œæ‰èƒ½æŠŠå¥¶ç‰›è´èŒœå›°ä½ï¼ˆå³åœ¨ç¬¬ä¸€å †å¹²è‰å’Œæœ€åä¸€å †å¹²è‰ä¹‹é—´ï¼‰ï¼Œæˆ–è€…æ ¹æœ¬ä¸å¯èƒ½ã€‚</p><h3 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h3><p>ç¬¬ä¸€è¡Œä¸¤ä¸ªæ•´æ•°ï¼Œåˆ†åˆ«è¡¨ç¤ºNå’ŒB</p><p>æ¥ä¸‹æ¥Nè¡Œï¼Œæ¯è¡Œä¸¤ä¸ªæ•´æ•°S,J ï¼Œæè¿°äº†å¹²è‰å †çš„å¤§å°å’Œåæ ‡</p><h3 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h3><p>è¾“å‡ºä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºFJéœ€è¦å¢åŠ çš„æœ€å°å€¼ã€‚å¦‚æœä¸å¯èƒ½é˜»æ­¢Bessieï¼Œåˆ™è¾“å‡º-1</p><h3 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">5 7</span><br><span class="line">8 1</span><br><span class="line">1 4</span><br><span class="line">3 8</span><br><span class="line">12 15</span><br><span class="line">20 20</span><br></pre></td></tr></table></figure><h3 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">4</span><br></pre></td></tr></table></figure><h3 id="Hint"><a href="#Hint" class="headerlink" title="Hint"></a>Hint</h3><p>æ‰€æœ‰å¹²è‰å †çš„ä½ç½®å’Œå¤§å°éƒ½å±äº[1,10^9]</p><h3 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h3><blockquote><p><strong>åšæ³•ä¸€ï¼šæš´åŠ›æšä¸¾ï¼ˆ50åˆ†ï¼‰</strong></p></blockquote><p>å°†æ‰€æœ‰å¹²è‰å †æŒ‰ç…§Bessieçš„èµ·ç‚¹ä½ç½®åˆ†æˆå·¦å³ä¸¤ä¸ªéƒ¨åˆ†ï¼Œç„¶åæ¯ä¸ªéƒ¨åˆ†å†…æŒ‰ç…§ä½ç½®åæ ‡å‡åºæ’åº</p><p>è®¾ $f[i]$ è¡¨ç¤ºå°†Bessieé˜»æŒ¡åœ¨ç¬¬ $i$ å †å¹²è‰å—å‰æœ€å°‘éœ€è¦åœ¨è¿™å †å¹²è‰ä¸ŠåŠ çš„å¹²è‰é«˜åº¦ï¼Œäºæ˜¯å¯ä»¥å¾—åˆ°ï¼š</p><p>$f[i]=min\lbrace abs(pos[j]-pos[i]-siz[i])\; \lvert\; pos[j]\geq abs(pos[j]-pos[i])\; \rbrace$</p><p>è¿™æ ·æšä¸¾å¯»æ‰¾æ»¡è¶³æ¡ä»¶çš„ $j$ çš„è¿‡ç¨‹ä¸­ï¼Œè‹¥é‡åˆ° $siz[i]\geq \lvert pos[j]-pos[i] \rvert$ å¯ä»¥ç›´æ¥è¾“å‡º 0,å¤æ‚åº¦æ¥è¿‘ $O(n^2)$</p><blockquote><p><strong>åšæ³•äºŒï¼šè¿‘ä¼¼è´ªå¿ƒï¼ˆ100åˆ†ï¼‰</strong></p></blockquote><p>æˆ‘ä»¬å¯ä»¥æŒ‡å®šBessieå¾€ä¸€ä¸ªæ–¹å‘çªç ´ï¼ˆå·¦æˆ–è€…å³ï¼‰ï¼Œç„¶åè€ƒè™‘èŠ±è´¹æœ€å°‘çš„å¹²è‰é«˜åº¦å †åœ¨æŸä¸€ä¸ªBessieçªç ´æ–¹åƒçš„å¹²è‰å †ä¸Šä½¿å¾—å¥¹ä¸èƒ½å‡ºå»</p><p>è¿™æ ·åšçš„å‰æå°±æ˜¯å·¦è¾¹çš„å¹²è‰å †å¿…é¡»èƒ½å¤Ÿæ‰¿å—Bessieçš„æ’å‡»ï¼Œå‡è®¾å½“å‰è€ƒè™‘çªç ´åˆ°å³è¾¹çš„ç¬¬ $i$ ä¸ªå¹²è‰å †ï¼Œé‚£ä¹ˆå·¦è¾¹å°±å¿…é¡»å­˜åœ¨å¹²è‰å † $j$ ä½¿å¾— $\lvert pos[j]-pos[i] \rvert\leq siz[j]$ ç„¶åæˆ‘ä»¬æ‰èƒ½æ”¾å¿ƒçš„åœ¨è¿™ä¸ªå³è¾¹çš„å¹²è‰å †ä¸Šé¢å †è‰</p><p>é‚£ä¹ˆBessieå¾€å·¦è¾¹çªç ´çš„æ—¶å€™åŒç†åˆ†æï¼Œæœ€åç±»ä¼¼è´ªå¿ƒçš„åšæ³•èƒ½åœ¨è¿‘ä¼¼ $O(n)$ çš„æ—¶é—´å¤æ‚åº¦å†…å¾—åˆ°ç­”æ¡ˆ</p><h3 id="Codes"><a href="#Codes" class="headerlink" title="Codes"></a>Codes</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;ctime&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxn 100005</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> t&gt;<span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">fcin</span><span class="params">(t &amp;x)</span></span>&#123;</span><br><span class="line"><span class="type">int</span> sign=<span class="number">1</span>; x=<span class="number">0</span>; <span class="type">char</span> op=<span class="built_in">getchar</span>();</span><br><span class="line"><span class="keyword">while</span>(op&lt;<span class="string">&#x27;0&#x27;</span>||op&gt;<span class="string">&#x27;9&#x27;</span>)&#123;<span class="keyword">if</span>(op==<span class="string">&#x27;-&#x27;</span>) sign=<span class="number">-1</span>;op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line"><span class="keyword">while</span>(op&gt;=<span class="string">&#x27;0&#x27;</span>&amp;&amp;op&lt;=<span class="string">&#x27;9&#x27;</span>)&#123;x=x*<span class="number">10</span>+(op<span class="number">-48</span>);op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line">x*=sign;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">node</span>&#123;</span><br><span class="line"><span class="type">int</span> siz,pos;</span><br><span class="line"><span class="type">bool</span> <span class="keyword">operator</span> &lt;(<span class="type">const</span> node &amp;x)<span class="type">const</span>&#123;</span><br><span class="line"><span class="keyword">return</span> pos&lt;x.pos;</span><br><span class="line">&#125;</span><br><span class="line">&#125;dl[maxn],dr[maxn];</span><br><span class="line"><span class="type">int</span> n,st,cl,cr;</span><br><span class="line"><span class="type">bool</span> l[maxn],r[maxn],del[maxn];</span><br><span class="line"><span class="type">int</span> f[maxn];<span class="type">int</span> sign;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dp</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;trapped.in&quot;</span>,<span class="string">&quot;r&quot;</span>,stdin);</span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;trapped.out&quot;</span>,<span class="string">&quot;w&quot;</span>,stdout);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"><span class="built_in">fcin</span>(n);<span class="built_in">fcin</span>(st);</span><br><span class="line"><span class="type">int</span> x,y;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line"><span class="built_in">fcin</span>(x);<span class="built_in">fcin</span>(y);</span><br><span class="line"><span class="keyword">if</span>(y&lt;st) dl[++cl]=(node)&#123;x,y&#125;;</span><br><span class="line"><span class="keyword">else</span> dr[++cr]=(node)&#123;x,y&#125;;</span><br><span class="line">&#125;<span class="built_in">sort</span>(dl+<span class="number">1</span>,dl+cl+<span class="number">1</span>);<span class="built_in">sort</span>(dr+<span class="number">1</span>,dr+cr+<span class="number">1</span>);</span><br><span class="line"><span class="type">int</span> ans=<span class="number">-1</span>,sign=cl;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=cr &amp;&amp; sign;i++)&#123;</span><br><span class="line"><span class="keyword">while</span>(sign &amp;&amp; <span class="built_in">abs</span>(dr[i].pos-dl[sign].pos)&gt;dl[sign].siz) sign--;</span><br><span class="line"><span class="keyword">if</span>(!sign) <span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">abs</span>(dr[i].pos-dl[sign].pos)&lt;=dr[i].siz) <span class="keyword">return</span> <span class="built_in">printf</span>(<span class="string">&quot;0&quot;</span>),<span class="number">0</span>;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(ans&lt;<span class="number">0</span>) ans=<span class="built_in">abs</span>(dr[i].pos-dl[sign].pos)-dr[i].siz;</span><br><span class="line"><span class="keyword">else</span> ans=<span class="built_in">min</span>(ans,<span class="built_in">abs</span>(dr[i].pos-dl[sign].pos)-dr[i].siz);</span><br><span class="line">&#125;sign=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=cl;i&amp;&amp;sign&lt;=cr;i--)&#123;</span><br><span class="line"><span class="keyword">while</span>(sign&lt;=cr &amp;&amp; <span class="built_in">abs</span>(dl[i].pos-dr[sign].pos)&gt;dr[sign].siz) sign++;</span><br><span class="line"><span class="keyword">if</span>(sign&gt;cr) <span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">abs</span>(dr[sign].pos-dl[i].pos)&lt;=dl[i].siz) <span class="keyword">return</span> <span class="built_in">printf</span>(<span class="string">&quot;0&quot;</span>),<span class="number">0</span>;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(ans&lt;<span class="number">0</span>) ans=<span class="built_in">abs</span>(dr[sign].pos-dl[i].pos)-dl[i].siz;</span><br><span class="line"><span class="keyword">else</span> ans=<span class="built_in">min</span>(ans,<span class="built_in">abs</span>(dr[sign].pos-dl[i].pos)-dl[i].siz);</span><br><span class="line">&#125;<span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,ans);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="2-æ•°åˆ—ï¼ˆarray-cppï¼‰"><a href="#2-æ•°åˆ—ï¼ˆarray-cppï¼‰" class="headerlink" title="2. æ•°åˆ—ï¼ˆarray.cppï¼‰"></a>2. æ•°åˆ—ï¼ˆarray.cppï¼‰</h2><h3 id="Description-1"><a href="#Description-1" class="headerlink" title="Description"></a>Description</h3><p>æœ‰ä¸¤ä¸ªä½ç½®åˆ†åˆ«å¯¹åº”çš„åºåˆ—Aã€Bï¼Œé•¿åº¦ä¸ºnï¼Œä¸¤åºåˆ—éƒ½ä¸ºnçš„ä¸€ä¸ªæ’åˆ—ã€‚å½“Ai == Bjæ—¶ï¼Œä¸Šä¸‹ä¼šè¿ä¸€æ¡è¾¹ã€‚</p><p>ä½ å¯ä»¥é€‰æ‹©åºåˆ—Aæˆ–è€…åºåˆ—Bè¿›è¡Œæ—‹è½¬ä»»æ„Kæ­¥ï¼Œ</p><p>å¦‚ 3 4 1 5 2 æ—‹è½¬ä¸¤æ­¥ä¸º 5 2 3 4 1ã€‚</p><p>æ±‚æ—‹è½¬åæœ€å°çš„ç›¸äº¤çš„çº¿æ®µçš„å¯¹æ•°ã€‚</p><h3 id="Input-1"><a href="#Input-1" class="headerlink" title="Input"></a>Input</h3><p>ç¬¬ä¸€è¡Œæ˜¯N</p><p>æ¥ä¸‹æ¥Nè¡Œ,æ¯è¡Œä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºA[i]</p><p>å†æ¥ä¸‹æ¥Nè¡Œ,æ¯è¡Œä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºB[i]</p><h3 id="Output-1"><a href="#Output-1" class="headerlink" title="Output"></a>Output</h3><p>è¾“å‡ºæœ€å°çš„ç›¸äº¤çš„çº¿æ®µå¯¹æ•°</p><h3 id="Sample-Input-1"><a href="#Sample-Input-1" class="headerlink" title="Sample Input"></a>Sample Input</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">5</span><br><span class="line">5 4 1 3 2</span><br><span class="line">1 3 2 5 4</span><br></pre></td></tr></table></figure><h3 id="Sample-Output-1"><a href="#Sample-Output-1" class="headerlink" title="Sample Output"></a>Sample Output</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0</span><br></pre></td></tr></table></figure><h3 id="Hint-1"><a href="#Hint-1" class="headerlink" title="Hint"></a>Hint</h3><p>1â‰¤Nâ‰¤100,000</p><h3 id="åˆ†æ-1"><a href="#åˆ†æ-1" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h3><p>é¢˜ç›®æ‰€è¯´çš„ â€œä¸¤ä¸ªæ•°åˆ—ç›¸äº¤çš„çº¿æ®µæœ€å°â€ å…¶å®å°±æ˜¯å°½å¯èƒ½å¤šçš„å°† a æ•°åˆ—ä¸­çš„æ•°ä¸ b æ•°åˆ—ä¸­çš„æ•°ä¸€ä¸€å¯¹åº”ï¼Œè¿›ä¸€æ­¥çš„ï¼Œ<strong>å¦‚æœå°† b æ•°åˆ—ä¸­çš„å…ƒç´ åœ¨ a æ•°åˆ—ä¸­å‡ºç°çš„ä½ç½®åšæˆæ–°çš„ä¸€ä¸ªåºåˆ—ï¼ˆä¾‹å¦‚æ ·ä¾‹çš„åºåˆ—ä¸º <code>3 4 5 1 2</code>ï¼‰æ‰€è°“çš„æœ€å°çš„ç›¸äº¤çº¿æ®µæ•°å°±æ˜¯è¿™ä¸ªåºåˆ—çš„æœ€å°‘çš„é€†åºå¯¹æ•°</strong></p><p>ç”±äº a æ•°åˆ—å¯ä»¥æ—‹è½¬ï¼Œé‚£ä¹ˆå¯¹åº”å‡ºæ¥çš„æ–°çš„åºåˆ—ä¹Ÿæ˜¯å¯ä»¥æ—‹è½¬çš„ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸ç”¨æ¯æ¬¡æ—‹è½¬ä¹‹åè®¡ç®—æ–°çš„é€†åºå¯¹æ•°ï¼Œåªéœ€è¦è®°å½•æœ€å¼€å§‹çš„é€†åºå¯¹æ•°ä¸º $ans$ï¼Œé‚£ä¹ˆå‡è®¾å½“å‰æ–°åºåˆ—çš„æœ«å°¾å…ƒç´ ä¸º $p[i]$ï¼Œå®ƒè¢«æ—‹è½¬åˆ°äº†ç¬¬ä¸€ä½ï¼Œé‚£ä¹ˆåºåˆ—ä¸­å‡å°‘çš„é€†åºå¯¹æ•°å°±æ˜¯åŸæ¥æ¯” $p[i]$ å¤§çš„å…ƒç´ ä¸ªæ•°ï¼Œå¢åŠ çš„é€†åºå¯¹æ•°å°±æ˜¯åŸæ¥æ¯” $p[i]$ å°çš„å…ƒç´ ä¸ªæ•°ï¼Œç”±äºé¢˜ç›®ç»™å‡ºçš„åºåˆ—æ˜¯ $[1,\;n]$ çš„ä¸€ä¸ªå…¨æ’åˆ—ï¼Œé‚£ä¹ˆæ–°çš„é€†åºå¯¹æ•° $ansâ€™=ans-(n-p[i])+p[i]-1$ï¼Œé‚£ä¹ˆä»å°¾åˆ°å¤´æŠŠåºåˆ—æ‰«æä¸€éå–æœ€å°å€¼å³å¯</p><p>P.S. ç”±äºé¢˜ç›®ä¸­è¯´ä¸¤ä¸ªæ•°åˆ—éƒ½å¯ä»¥æ—‹è½¬ï¼Œæ‰€ä»¥ä¸Šè¿°æ“ä½œè¦å¯¹ $(b\leftarrow a)$ å’Œ $(a\leftarrow b)$ å„è‡ªåšä¸€éï¼Œå–æœ€å°å€¼</p><h3 id="Codes-1"><a href="#Codes-1" class="headerlink" title="Codes"></a>Codes</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;ctime&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxn 100005</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> lowbit(x) (x&amp;-x)</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> t&gt;<span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">fcin</span><span class="params">(t &amp;x)</span></span>&#123;</span><br><span class="line"><span class="type">int</span> sign=<span class="number">1</span>; x=<span class="number">0</span>; <span class="type">char</span> op=<span class="built_in">getchar</span>();</span><br><span class="line"><span class="keyword">while</span>(op&lt;<span class="string">&#x27;0&#x27;</span>||op&gt;<span class="string">&#x27;9&#x27;</span>)&#123;<span class="keyword">if</span>(op==<span class="string">&#x27;-&#x27;</span>) sign=<span class="number">-1</span>;op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line"><span class="keyword">while</span>(op&gt;=<span class="string">&#x27;0&#x27;</span>&amp;&amp;op&lt;=<span class="string">&#x27;9&#x27;</span>)&#123;x=x*<span class="number">10</span>+(op<span class="number">-48</span>);op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line">x*=sign;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> n;ll T[maxn];</span><br><span class="line"><span class="type">int</span> a[maxn],b[maxn];</span><br><span class="line"><span class="type">int</span> vis[maxn],f[maxn];</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">updata</span><span class="params">(<span class="type">int</span> p,<span class="type">int</span> d)</span></span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=p;i&lt;=n;i+=<span class="built_in">lowbit</span>(i))</span><br><span class="line">T[i]+=<span class="number">1ll</span>*d;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">ll <span class="title">sum</span><span class="params">(<span class="type">int</span> p)</span></span>&#123;</span><br><span class="line">ll ans=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=p;i;i-=<span class="built_in">lowbit</span>(i))</span><br><span class="line">ans+=T[i];</span><br><span class="line"><span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">ll <span class="title">init</span><span class="params">(<span class="type">int</span> ref[maxn],<span class="type">int</span> op[maxn])</span></span>&#123;</span><br><span class="line"><span class="built_in">memset</span>(f,<span class="number">0</span>,<span class="built_in">sizeof</span>(f));</span><br><span class="line"><span class="built_in">memset</span>(T,<span class="number">0</span>,<span class="built_in">sizeof</span>(T));</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++) vis[ref[i]]=i;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++) f[i]=vis[op[i]];</span><br><span class="line">ll ans=<span class="number">0</span>,tmp,res;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=n;i;i--)&#123;</span><br><span class="line">ans+=<span class="built_in">sum</span>(f[i]);</span><br><span class="line"><span class="built_in">updata</span>(f[i],<span class="number">1</span>);</span><br><span class="line">&#125;res=ans;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=n;i&gt;=<span class="number">2</span>;i--)&#123;</span><br><span class="line">tmp=ans-(n-f[i])+f[i]<span class="number">-1</span>;</span><br><span class="line">res=<span class="built_in">min</span>(res,tmp);</span><br><span class="line">ans=tmp;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;array.in&quot;</span>,<span class="string">&quot;r&quot;</span>,stdin);</span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;array.out&quot;</span>,<span class="string">&quot;w&quot;</span>,stdout);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"><span class="built_in">fcin</span>(n);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++) <span class="built_in">fcin</span>(a[i]);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++) <span class="built_in">fcin</span>(b[i]);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%lld&quot;</span>,<span class="built_in">min</span>(<span class="built_in">init</span>(a,b),<span class="built_in">init</span>(b,a)));</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="3-æ—…æ¸¸ï¼ˆtravel-cppï¼‰"><a href="#3-æ—…æ¸¸ï¼ˆtravel-cppï¼‰" class="headerlink" title="3. æ—…æ¸¸ï¼ˆtravel.cppï¼‰"></a>3. æ—…æ¸¸ï¼ˆtravel.cppï¼‰</h2><h3 id="Description-2"><a href="#Description-2" class="headerlink" title="Description"></a>Description</h3><p>æŸåŸå¸‚æœ‰Nä¸ªæ—…æ¸¸èƒœåœ°ï¼ˆ1â‰¤Nâ‰¤1000ï¼‰ï¼Œç¼–å·ä¸º1â€¦Nï¼Œæ¯ä¸ªæ—…æ¸¸èƒœåœ°éƒ½æœ‰ä¸€ä¸ªæ„‰æ‚¦åº¦Qã€‚å¦‚æœå»ièƒœåœ°æ—…æ¸¸ï¼Œå¯ä»¥è·å¾—Qiå•ä½çš„æ„‰æ‚¦åº¦ã€‚æ¯å—èƒœåœ°æœ€å¤šå’Œ10å—èƒœåœ°æœ‰ç›¸è¿çš„é“è·¯ï¼Œåœ¨ç›¸è¿çš„ä¸¤ä¸ªèƒœåœ°ä¹‹é—´èµ°åŠ¨éœ€è¦æ¶ˆè€—Eå•ä½çš„æ„‰æ‚¦åº¦ï¼ˆ1â‰¤Eâ‰¤1,000,000)ã€‚ä½ å¯ä»¥ä»ä»»æ„ä¸€ä¸ªèƒœåœ°å¼€å§‹æ—…æ¸¸ï¼Œå¹¶ä¸”æƒ³è¦åœ¨è·å¾—äº†æœ€å¤šæ„‰æ‚¦åº¦çš„æ—¶å€™åœæ­¢ã€‚ä½ æ˜¯ä¸€ä¸ªæŒ‘å‰”çš„æ—…è¡Œè€…ï¼Œä¸€æ—¦å»è¿‡æŸä¸ªèƒœåœ°ï¼Œå¥¹å°±ä¸ä¼šå†å»æ„‰æ‚¦åº¦ç›¸åŒæˆ–æ›´ä½çš„èƒœåœ°ï¼ä½†æ˜¯ä½ å¯ä»¥è·¯è¿‡æŸäº›èƒœåœ°ï¼Œè€Œä¸åœä¸‹æ¥äº«å—æ—…æ¸¸ï¼ˆä»è€Œä¸è·å¾—è¯¥åœ£åœ°çš„æ„‰æ‚¦åº¦ï¼‰ã€‚å®é™…ä¸Šï¼Œå¦‚æœè·¯è¿‡ä¸€å—é«˜æ„‰æ‚¦åº¦çš„èƒœåœ°ï¼Œç­‰ä¸€ä¸‹è¿”å›å†å»äº«å—æ—…æ¸¸ï¼Œæœ‰æ—¶ä¼šæ›´æœ‰åˆ©ï¼è¯·è®¡ç®—ä½ èƒ½å¤Ÿè·å¾—çš„æ„‰æ‚¦åº¦çš„æœ€å¤§å€¼ã€‚</p><h3 id="Input-2"><a href="#Input-2" class="headerlink" title="Input"></a>Input</h3><p>ç¬¬1è¡Œï¼šåŒ…å«ä¸¤ä¸ªæ•´æ•°Nå’ŒEã€‚</p><p>æ¥ä¸‹æ¥Nè¡Œï¼šæ¯è¡Œæè¿°ä¸€å—èƒœåœ°ï¼Œé¦–å…ˆä¸¤ä¸ªæ•´æ•°Qå’ŒDï¼Œåˆ†åˆ«è¡¨ç¤ºè¯¥èƒœåœ°çš„æ„‰æ‚¦åº¦ï¼ˆèŒƒå›´1â€¦1,000,000ï¼‰å’Œç›¸è¿çš„å…¶ä»–èƒœåœ°çš„æ•°é‡ã€‚ç„¶åç´§æ¥ç€Dä¸ªæ•´æ•°è¡¨ç¤ºç›¸è¿çš„èƒœåœ°ç¼–å·ã€‚</p><h3 id="Output-2"><a href="#Output-2" class="headerlink" title="Output"></a>Output</h3><p>è¾“å‡ºä½ èƒ½å¤Ÿè·å¾—çš„æ„‰æ‚¦åº¦çš„æœ€å¤§å€¼ã€‚</p><h3 id="Sample-Input-2"><a href="#Sample-Input-2" class="headerlink" title="Sample Input"></a>Sample Input</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">5 2</span><br><span class="line">4 1 2</span><br><span class="line">1 3 1 3 4</span><br><span class="line">6 2 2 5</span><br><span class="line">5 2 2 5</span><br><span class="line">2 2 3 4</span><br></pre></td></tr></table></figure><h3 id="Sample-Output-2"><a href="#Sample-Output-2" class="headerlink" title="Sample Output"></a>Sample Output</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">7</span><br></pre></td></tr></table></figure><h3 id="Hint-2"><a href="#Hint-2" class="headerlink" title="Hint"></a>Hint</h3><p>NO HINT</p><h3 id="åˆ†æ-2"><a href="#åˆ†æ-2" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h3><blockquote><p><strong>åšæ³•ï¼šBFSï¼ˆæˆ–SPFAï¼‰+ DP</strong></p></blockquote><p>ç”±äºé¢˜ç›®ä¸­é™åˆ¶äº†åœ¨æ—…æ¸¸å®Œä¸€ä¸ªæ™¯ç‚¹ä¹‹ååªèƒ½å»æ¯”å®ƒæ„‰æ‚¦åº¦æ›´é«˜çš„æ™¯ç‚¹ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥æ ¹æ®æ„‰æ‚¦åº¦ä»å¤§åˆ°å°ç»™æ¯ä¸ªæ™¯ç‚¹æ’åºï¼Œè®¾ $f[i]$ è¡¨ç¤ºä»¥ $i$ å·æ—…æ¸¸æ™¯ç‚¹ä¸ºèµ·ç‚¹èƒ½å¾—åˆ°çš„æœ€å¤§æ„‰æ‚¦åº¦</p><p>é‚£ä¹ˆæ˜¾ç„¶ï¼Œè‹¥ä»¥ $i$ å·æ™¯ç‚¹ä¸ºèµ·ç‚¹ï¼Œæˆ‘ä»¬åªèƒ½å» $[1,\;i-1]$ å·æ—…æ¸¸æ™¯ç‚¹æ—…æ¸¸ï¼ˆä¸æ˜¯è·¯è¿‡ï¼‰ï¼Œå¹¶ä¸”è¿˜è¦å‡å»è·¯ä¸Šçš„èŠ±é”€ï¼Œç”±äºé¢˜ç›®ä¸­çš„è¾¹æƒå€¼æ˜¯ä¸€æ ·çš„ï¼Œæ‰€ä»¥å¯¹äºæ¯ä¸ªç‚¹ç›´æ¥ BFS ä¸€æ¬¡å°±å¯ä»¥åˆ°å¾—åˆ°å®ƒåˆ°æ¯ä¸ªç‚¹çš„è¾¹æƒå’Œï¼Œæ‰€ä»¥è½¬ç§»æ–¹ç¨‹ä¸ºï¼š</p><p>$f[i]=max(f[i],\; f[j]+Q[id[i]]-dist[id[i]][id[j]])$ï¼Œè¿™é‡Œçš„ $id$ è¡¨ç¤ºæ’åºåçš„æ•°ç»„å¯¹åº”åˆ°åŸæ¥çš„æ—…æ¸¸æ™¯ç‚¹çš„ç¼–å·</p><h3 id="Codes-2"><a href="#Codes-2" class="headerlink" title="Codes"></a>Codes</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;ctime&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxn 5005</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxm 10005</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> t&gt;<span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">fcin</span><span class="params">(t &amp;x)</span></span>&#123;</span><br><span class="line"><span class="type">int</span> sign=<span class="number">1</span>; x=<span class="number">0</span>; <span class="type">char</span> op=<span class="built_in">getchar</span>();</span><br><span class="line"><span class="keyword">while</span>(op&lt;<span class="string">&#x27;0&#x27;</span>||op&gt;<span class="string">&#x27;9&#x27;</span>)&#123;<span class="keyword">if</span>(op==<span class="string">&#x27;-&#x27;</span>) sign=<span class="number">-1</span>;op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line"><span class="keyword">while</span>(op&gt;=<span class="string">&#x27;0&#x27;</span>&amp;&amp;op&lt;=<span class="string">&#x27;9&#x27;</span>)&#123;x=x*<span class="number">10</span>+(op<span class="number">-48</span>);op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line">x*=sign;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> to[maxm],nxt[maxm],head[maxn];</span><br><span class="line"><span class="type">int</span> tot,n,costE,q[maxn];</span><br><span class="line"><span class="type">bool</span> vis[maxn]; <span class="type">int</span> cost[maxn][maxn];</span><br><span class="line">ll f[maxn];<span class="type">int</span> id[maxn];</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">Eadd</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> v)</span></span>&#123;</span><br><span class="line">to[++tot]=v;nxt[tot]=head[u];</span><br><span class="line">head[u]=tot;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">bfs</span><span class="params">(<span class="type">int</span> src)</span></span>&#123;</span><br><span class="line"><span class="built_in">memset</span>(cost[src],<span class="number">0x3f</span>,<span class="built_in">sizeof</span>(cost[src]));</span><br><span class="line"><span class="built_in">memset</span>(vis,<span class="literal">false</span>,<span class="built_in">sizeof</span>(vis));queue&lt;<span class="type">int</span>&gt; q;</span><br><span class="line">q.<span class="built_in">push</span>(src);vis[src]=<span class="literal">true</span>;cost[src][src]=<span class="number">0</span>;</span><br><span class="line"><span class="type">int</span> hx;</span><br><span class="line"><span class="keyword">while</span>(!q.<span class="built_in">empty</span>())&#123;</span><br><span class="line">hx=q.<span class="built_in">front</span>();q.<span class="built_in">pop</span>();</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=head[hx];i;i=nxt[i])</span><br><span class="line"><span class="keyword">if</span>(!vis[to[i]])&#123;</span><br><span class="line">vis[to[i]]=<span class="literal">true</span>;</span><br><span class="line">q.<span class="built_in">push</span>(to[i]);</span><br><span class="line">cost[src][to[i]]=cost[src][hx]+costE;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">cmp</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> y)</span></span>&#123;</span><br><span class="line"><span class="keyword">return</span> q[x]&gt;q[y];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;travel.in&quot;</span>,<span class="string">&quot;r&quot;</span>,stdin);</span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;travel.out&quot;</span>,<span class="string">&quot;w&quot;</span>,stdout);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"><span class="built_in">fcin</span>(n);<span class="built_in">fcin</span>(costE);</span><br><span class="line"><span class="type">int</span> x,y;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line"><span class="built_in">fcin</span>(q[i]);<span class="built_in">fcin</span>(x);</span><br><span class="line">id[i]=i;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=x;j++)&#123;</span><br><span class="line"><span class="built_in">fcin</span>(y);</span><br><span class="line"><span class="built_in">Eadd</span>(i,y);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++) </span><br><span class="line"><span class="built_in">bfs</span>(i);</span><br><span class="line"><span class="built_in">sort</span>(id+<span class="number">1</span>,id+n+<span class="number">1</span>,cmp);ll ans=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">f[i]=q[id[i]];</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;i;j++) f[i]=<span class="built_in">max</span>(f[i],q[id[i]]+f[j]-cost[id[i]][id[j]]);</span><br><span class="line">ans=<span class="built_in">max</span>(ans,f[i]);</span><br><span class="line">&#125;<span class="built_in">printf</span>(<span class="string">&quot;%lld&quot;</span>,ans);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŠ¨æ€è§„åˆ’ </tag>
            
            <tag> å­—ç¬¦ä¸² </tag>
            
            <tag> SPFA </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ•°è®º | åŒä½™ | å­—ç¬¦ä¸² | åŠ¨æ€è§„åˆ’  \ | æ ‘é“¾å‰–åˆ† | 201901024è€ƒè¯•ï¼šè§£é¢˜æŠ¥å‘Š</title>
      <link href="/2019/10/24/2019-10-24-exam/"/>
      <url>/2019/10/24/2019-10-24-exam/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><h2 id="é¢˜ç›®é™åˆ¶ä¸€è§ˆ"><a href="#é¢˜ç›®é™åˆ¶ä¸€è§ˆ" class="headerlink" title="é¢˜ç›®é™åˆ¶ä¸€è§ˆ"></a>é¢˜ç›®é™åˆ¶ä¸€è§ˆ</h2><div class="table-container"><table><thead><tr><th style="text-align:center">é¢˜ç›®</th><th style="text-align:center">æ—¶é—´é™åˆ¶</th><th style="text-align:center">ç©ºé—´é™åˆ¶</th></tr></thead><tbody><tr><td style="text-align:center">1. math</td><td style="text-align:center">1000 MS</td><td style="text-align:center">128 MB</td></tr><tr><td style="text-align:center">2. path</td><td style="text-align:center">1000 MS</td><td style="text-align:center">128 MB</td></tr><tr><td style="text-align:center">3. city</td><td style="text-align:center">1000 MS</td><td style="text-align:center">128 MB</td></tr></tbody></table></div><h2 id="1-æ•°å­¦é¢˜ï¼ˆxorarray-cppï¼‰"><a href="#1-æ•°å­¦é¢˜ï¼ˆxorarray-cppï¼‰" class="headerlink" title="1. æ•°å­¦é¢˜ï¼ˆxorarray.cppï¼‰"></a>1. æ•°å­¦é¢˜ï¼ˆxorarray.cppï¼‰</h2><h3 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h3><p>ä¸€é“æ•°å­¦é¢˜ï¼Œè¡¨è¾¾å¼ä¸ºï¼š(B+E+S+S+I+E)(G+O+E+S)(M+O+O)ï¼Œè¯¥è¡¨è¾¾å¼å…±æœ‰7ä¸ªå˜é‡ï¼Œæ¯ä¸ªå˜é‡æœ€å¤šæœ‰500ä¸ªå¯èƒ½çš„å€™é€‰å–å€¼ï¼Œé—®æœ‰å¤šå°‘ç§æ–¹å¼èƒ½ä½¿ä¸Šé¢çš„è¡¨è¾¾å¼æˆä¸º7çš„å€æ•°ï¼Ÿ</p><h3 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h3><p>ç¬¬ä¸€è¡Œä¸€ä¸ªæ•´æ•°N</p><p>æ¥ä¸‹æ¥Nè¡Œï¼Œæ¯è¡ŒåŒ…å«ä¸€ä¸ªå˜é‡å’Œå…¶å¯èƒ½çš„ä¸€ä¸ªå€¼ã€‚è¾“å…¥æ•°æ®ä¿è¯åŒä¸€ä¸ªå˜é‡å¯èƒ½çš„å–å€¼å„ä¸ç›¸åŒï¼Œä¸”éƒ½åœ¨-10^5 åˆ° 10^5ä¹‹é—´</p><h3 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h3><p>ä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæ–¹æ¡ˆæ•°ã€‚</p><h3 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">10</span><br><span class="line">B 2</span><br><span class="line">E 5</span><br><span class="line">S 7</span><br><span class="line">I 10</span><br><span class="line">O 16</span><br><span class="line">M 19</span><br><span class="line">B 3</span><br><span class="line">G 1</span><br><span class="line">I 9</span><br><span class="line">M 2</span><br></pre></td></tr></table></figure><h3 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2</span><br></pre></td></tr></table></figure><h3 id="Hint"><a href="#Hint" class="headerlink" title="Hint"></a>Hint</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">The two possible assignments are</span><br><span class="line"></span><br><span class="line">(B,E,S,I,G,O,M) = (2, 5, 7, 9, 1, 16, 19) -&gt; 51,765</span><br><span class="line"></span><br><span class="line">                = (2, 5, 7, 9, 1, 16, 2) -&gt; 34,510</span><br></pre></td></tr></table></figure><p>æ•°æ®èŒƒå›´</p><p>1&lt;=N&lt;=500</p><h3 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h3><p>åŸè¡¨è¾¾å¼ $(B+E+S+S+I+E)(G+O+E+S)(M+O+O)$ å…± 7 ä¸ªå˜é‡ï¼Œå®ƒçš„ç»“æœè¢« 7 æ•´é™¤ï¼Œåˆ©ç”¨åŒä½™å¯ä»¥ç­‰æ•ˆç†è§£ä¸º $B,E,S,I,G,O,M$ è¿™ 7 ä¸ªå˜é‡ $\mod 7$ çš„ä½™æ•°å¸¦è¿›è¿™ä¸ªå¼å­è¢« 7 æ•´é™¤</p><p>ç”±äº$\mod 7$ çš„ç»“æœåªæœ‰ 0-6 è¿™ 7 ç§æƒ…å†µï¼Œç›´æ¥æš´åŠ›æšä¸¾ï¼Œæ—¶é—´å¤æ‚åº¦ $O(7^7)$ çº¦ä¸º 83 ä¸‡</p><h3 id="Codes"><a href="#Codes" class="headerlink" title="Codes"></a>Codes</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxn 505</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> t&gt;<span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">fcin</span><span class="params">(t &amp;x)</span></span>&#123;</span><br><span class="line"><span class="type">int</span> sign=<span class="number">1</span>; x=<span class="number">0</span>; <span class="type">char</span> op=<span class="built_in">getchar</span>();</span><br><span class="line"><span class="keyword">while</span>(op&lt;<span class="string">&#x27;0&#x27;</span>||op&gt;<span class="string">&#x27;9&#x27;</span>)&#123;<span class="keyword">if</span>(op==<span class="string">&#x27;-&#x27;</span>) sign=<span class="number">-1</span>;op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line"><span class="keyword">while</span>(op&gt;=<span class="string">&#x27;0&#x27;</span>&amp;&amp;op&lt;=<span class="string">&#x27;9&#x27;</span>)&#123;x=x*<span class="number">10</span>+(op<span class="number">-48</span>);op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line">x*=sign;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> s[<span class="number">9</span>][maxn];</span><br><span class="line"><span class="type">int</span> v[<span class="number">9</span>];</span><br><span class="line">ll ans=<span class="number">0</span>;<span class="type">int</span> n,times;</span><br><span class="line"><span class="function">ll <span class="title">calc</span><span class="params">()</span></span>&#123;</span><br><span class="line">ll sum=<span class="number">1ll</span>*(v[<span class="number">1</span>]+<span class="number">2</span>*v[<span class="number">2</span>]+<span class="number">2</span>*v[<span class="number">4</span>]+v[<span class="number">3</span>]);</span><br><span class="line">sum*=<span class="number">1ll</span>*(v[<span class="number">5</span>]+v[<span class="number">4</span>]+v[<span class="number">6</span>]+v[<span class="number">2</span>]);</span><br><span class="line">sum*=<span class="number">1ll</span>*(<span class="number">2</span>*v[<span class="number">6</span>]+v[<span class="number">7</span>]);</span><br><span class="line"><span class="keyword">return</span> (sum%<span class="number">7</span>==<span class="number">0</span>)?sum:<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dfs</span><span class="params">(<span class="type">int</span> step)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(step&gt;<span class="number">7</span>)&#123;</span><br><span class="line">ll ret=<span class="built_in">calc</span>();</span><br><span class="line"><span class="keyword">if</span>(ret) ans++;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=s[step][<span class="number">0</span>];i++)&#123;</span><br><span class="line">v[step]=s[step][i];</span><br><span class="line"><span class="built_in">dfs</span>(step+<span class="number">1</span>);</span><br><span class="line">v[step]=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;math.in&quot;</span>,<span class="string">&quot;r&quot;</span>,stdin);</span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;math.out&quot;</span>,<span class="string">&quot;w&quot;</span>,stdout);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"><span class="comment">// (B+E+S+S+I+E)(G+O+E+S)(M+O+O)</span></span><br><span class="line"><span class="comment">// (1+4+2+2+3+4)(5+6+4+2)(7+6+6)</span></span><br><span class="line"><span class="built_in">fcin</span>(n);</span><br><span class="line"><span class="type">char</span> ch;<span class="type">int</span> x;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">cin&gt;&gt;ch;<span class="built_in">fcin</span>(x);</span><br><span class="line"><span class="keyword">switch</span>(ch)&#123;</span><br><span class="line"><span class="keyword">case</span> <span class="string">&#x27;B&#x27;</span>:s[<span class="number">1</span>][++s[<span class="number">1</span>][<span class="number">0</span>]]=x; <span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="string">&#x27;S&#x27;</span>:s[<span class="number">2</span>][++s[<span class="number">2</span>][<span class="number">0</span>]]=x; <span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="string">&#x27;I&#x27;</span>:s[<span class="number">3</span>][++s[<span class="number">3</span>][<span class="number">0</span>]]=x; <span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="string">&#x27;E&#x27;</span>:s[<span class="number">4</span>][++s[<span class="number">4</span>][<span class="number">0</span>]]=x; <span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="string">&#x27;G&#x27;</span>:s[<span class="number">5</span>][++s[<span class="number">5</span>][<span class="number">0</span>]]=x; <span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="string">&#x27;O&#x27;</span>:s[<span class="number">6</span>][++s[<span class="number">6</span>][<span class="number">0</span>]]=x; <span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="string">&#x27;M&#x27;</span>:s[<span class="number">7</span>][++s[<span class="number">7</span>][<span class="number">0</span>]]=x; <span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;<span class="built_in">dfs</span>(<span class="number">1</span>);<span class="built_in">printf</span>(<span class="string">&quot;%lld&quot;</span>,ans);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="2-å›æ–‡è·¯å¾„ï¼ˆpath-cppï¼‰"><a href="#2-å›æ–‡è·¯å¾„ï¼ˆpath-cppï¼‰" class="headerlink" title="2. å›æ–‡è·¯å¾„ï¼ˆpath.cppï¼‰"></a>2. å›æ–‡è·¯å¾„ï¼ˆpath.cppï¼‰</h2><h3 id="Description-1"><a href="#Description-1" class="headerlink" title="Description"></a>Description</h3><p>åœ¨ä¸€ä¸ªN*Nçš„ç½‘æ ¼ä¸­ï¼Œè§„å®šå·¦ä¸Šè§’ä¸ºèµ·ç‚¹ï¼Œæ¯æ¬¡åªèƒ½å‘å³æˆ–è€…å‘ä¸‹èµ°ä¸€æ ¼ï¼Œä»¥å³ä¸‹è§’ä¸ºç»ˆç‚¹ï¼Œè®¡ç®—æœ‰å¤šå°‘ç§æ–¹æ¡ˆï¼Œä½¿å¾—èµ°è¿‡çš„çº¿è·¯æ˜¯å›æ–‡ä¸²ï¼Ÿæœ€ç»ˆè¾“å‡ºç­”æ¡ˆæ¨¡1,000,000,007çš„ç»“æœã€‚</p><h3 id="Input-1"><a href="#Input-1" class="headerlink" title="Input"></a>Input</h3><p>ç¬¬ä¸€è¡Œä¸€ä¸ªæ­£æ•´æ•° <em>N</em>ã€‚</p><p>ç¬¬äºŒè¡Œ <em>N</em> ä¸ªæ­£æ•´æ•° <em>Xi</em>ï¼Œè¡¨ç¤ºå­˜åœ¨ä¸€æ¡æœ‰å‘è¾¹ <em>i</em> æŒ‡å‘ <em>Xi</em>ã€‚</p><h3 id="Output-1"><a href="#Output-1" class="headerlink" title="Output"></a>Output</h3><p>è¯·è¾“å‡ºå›æ–‡è·¯å¾„æ•°é‡ï¼Œå–æ¨¡1,000,000,007ã€‚</p><h3 id="Sample-Input-1"><a href="#Sample-Input-1" class="headerlink" title="Sample Input"></a>Sample Input</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">4</span><br><span class="line">ABCD</span><br><span class="line">BXZX</span><br><span class="line">CDXB</span><br><span class="line">WCBA</span><br></pre></td></tr></table></figure><h3 id="Sample-Output-1"><a href="#Sample-Output-1" class="headerlink" title="Sample Output"></a>Sample Output</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">12</span><br></pre></td></tr></table></figure><h3 id="Hint-1"><a href="#Hint-1" class="headerlink" title="Hint"></a>Hint</h3><p>ã€æ ·ä¾‹è§£é‡Šã€‘</p><p>1 â€œ ABCDCBAâ€</p><p>1 â€œ ABCWCBAâ€</p><p>6 â€œ ABXZXBAâ€</p><p>4 â€œ ABXDXBAâ€</p><p>ã€æ•°æ®èŒƒå›´ã€‘</p><p>1â‰¤Nâ‰¤500</p><h3 id="åˆ†æ-1"><a href="#åˆ†æ-1" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h3><p>ç›´æ¥çœ‹åŸå›¾å¯èƒ½ä¸å¥½åˆ†æï¼Œæˆ‘ä»¬æŠŠåŸå›¾æŒ‰ç…§å¯¹è§’çº¿é¡ºåºè½¬æ¢æˆå¦‚ä¸‹å›¾ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">A</span><br><span class="line">BB</span><br><span class="line">CXC</span><br><span class="line">WDZD</span><br><span class="line">CXX</span><br><span class="line">BB</span><br><span class="line">A</span><br></pre></td></tr></table></figure><p>é¢˜ç›®ç»™å®šçš„æ¯æ¬¡å¾€å³æˆ–è€…å¾€ä¸‹ç§»åŠ¨ï¼Œåœ¨æ–°å›¾é‡Œé¢å°±æ˜¯å¾€ä¸‹æˆ–è€…å¾€å³ä¸‹æ–¹ç§»åŠ¨</p><p>è¿™æ ·è½¬æ¢çš„å¥½å¤„åœ¨äºï¼šä»å·¦ä¸Šè§’å‡ºå‘ï¼Œä¸”åœ¨å³ä¸‹è§’ç»“æŸçš„è·¯å¾„ä¸Šçš„å›æ–‡ä¸²ï¼Œå…¶ä¸­å¿ƒå­—ç¬¦ä¸€å®šåœ¨ä¸­é—´çš„ <code>WDZD</code> ä¸Šï¼Œè€Œå…³äºä¸­å¿ƒå­—ç¬¦å¯¹ç§°çš„ä¸¤ç»„å­—ç¬¦ä¸²åˆ†åˆ«æ˜¯ä»æœ€ä¸Šé¢çš„ <code>A</code> å’Œæœ€ä¸‹é¢çš„ <code>A</code>ï¼Œåˆ†åˆ«å¾€ä¸‹å’Œå¾€ä¸Šç§»åŠ¨ç›¸åŒçš„æ­¥æ•°å¾—åˆ°çš„</p><p>å› æ­¤å¯ä»¥è®¾è®¡é€’æ¨æ–¹ç¨‹ï¼š <strong>$f[i1][j1][i2][j2]$ è¡¨ç¤ºè€ƒè™‘åˆ° $d[i1][i2]$ ä½ç½®çš„å­—ç¬¦ï¼Œå…¶å…³äºæŸä¸ªä¸­å¿ƒå­—ç¬¦å¯¹ç§°çš„å­—ç¬¦ä½äº $d[i2][j2]$ å¤„çš„æ–¹æ¡ˆæ•°</strong></p><p>è½¬ç§»ï¼š$f[i1][j1][i2][j2]\leftarrow \begin{cases} f[i1-1][j1][i2+1][j2]\\f[i1-1][j1-1][i2+1][j2]\\f[i1-1][j1][i2+1][j2-1]\\f[i1-1][j1-1][i2+1][j2-1] \end{cases}$</p><p>è¾¹ç•Œ $f[1][1][2n-1][1]=1$ï¼Œè½¬ç§»æ¡ä»¶ä¸º $d[i1][j1]=d[i2][j2]$ </p><p>ç›´æ¥è¿™æ ·è®¾è®¡è‚¯å®šä¼šé€ æˆ MLEï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨å›æ–‡ä¸²çš„å…³äºä¸­å¿ƒå­—ç¬¦å¯¹ç§°çš„ä¸¤ä¸ªå­ä¸²é•¿åº¦ç›¸ç­‰çš„æ€§è´¨ï¼Œå‘ç°åªè¦ $i1$ ç¡®å®šï¼Œé‚£ä¹ˆ $i2$ ä¹Ÿå°±ç¡®å®šäº†ï¼Œä¸” $i1+i2=2n$ï¼Œäºæ˜¯å¯ä»¥çœå»ä¸€ç»´ï¼Œåˆå‘ç° $f[i1]$ åªå’Œ $f[i1-1]$ æœ‰å…³ç³»ï¼Œæ‰€ä»¥æ»šåŠ¨ä¼˜åŒ–ï¼Œæœ€åçš„ç©ºé—´ä¸º $2\times 500\times 500$ï¼Œå¯ä»¥è¿‡æ­¤é¢˜</p><p>P.S. å®é™…å†™ä»£ç æ—¶ï¼Œæˆ‘ç¬¬ä¸€æ¬¡é‡‡ç”¨çš„æ˜¯åˆ†æ­¥åŠ æ³•å†å–æ¨¡çš„æ–¹æ³•ç»Ÿè®¡çš„ $f$ æ•°ç»„ï¼Œç»“æœæœ‰ä¸€ä¸ªæµ‹è¯•ç‚¹ç›´æ¥çˆ† 1.6sï¼Œç„¶åæ”¹æˆä¸€æ¬¡æ€§èµ‹å€¼ï¼Œåœ¨åŠ æ³•è¡¨è¾¾å¼é‡Œé¢å–æ¨¡ï¼Œæ—¶é—´éª¤ç¼©è‡³ 0.4sâ€¦â€¦ï¼Œä¼°è®¡æ˜¯å› ä¸ºæ¯æ¬¡èµ‹å€¼éƒ½è¦å¯¹å½“å‰çš„æ•°ç»„ä¸‹æ ‡å¯»å€èŠ±è´¹äº†æ—¶é—´ï¼Œä»¥åå†™ä»£ç æ—¶èƒ½ä¸€æ¬¡æ€§èµ‹å€¼è¿˜æ˜¯å°½é‡ä¸€æ¬¡æ€§èµ‹å€¼å§</p><h3 id="Codes-1"><a href="#Codes-1" class="headerlink" title="Codes"></a>Codes</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//#pragma GCC optimize(3)</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;ctime&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxn 505</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="type">const</span> ll mod=(ll)(<span class="number">1e9</span>+<span class="number">7</span>);</span><br><span class="line"><span class="type">char</span> src[maxn][maxn];</span><br><span class="line"><span class="type">char</span> str[<span class="number">2</span>*maxn<span class="number">-1</span>][maxn];</span><br><span class="line"><span class="type">int</span> cnt[<span class="number">2</span>*maxn<span class="number">-1</span>];</span><br><span class="line">ll f[<span class="number">2</span>][maxn][maxn];</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">convert</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=n;j++)</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++) str[i+j<span class="number">-1</span>][++cnt[i+j<span class="number">-1</span>]]=src[i][j];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">dp</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="comment">// current: at rows i</span></span><br><span class="line"><span class="comment">// another: at rows tot-i+1;</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ii (2*n-i)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> NI ((i+1)&amp;1)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> I (i&amp;1)</span></span><br><span class="line">f[<span class="number">1</span>][<span class="number">1</span>][<span class="number">1</span>]=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">2</span>;i&lt;=n;i++)&#123;</span><br><span class="line"><span class="built_in">memset</span>(f[I],<span class="number">0</span>,<span class="built_in">sizeof</span>(f[I]));</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=i;j++)</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> k=<span class="number">1</span>;k&lt;=i;k++)</span><br><span class="line"><span class="keyword">if</span>(str[i][j]==str[ii][k])&#123;</span><br><span class="line">f[I][j][k]=(f[NI][j][k]%mod+f[NI][j][k<span class="number">-1</span>]%mod+f[NI][j<span class="number">-1</span>][k]%mod+f[NI][j<span class="number">-1</span>][k<span class="number">-1</span>]%mod)%mod;</span><br><span class="line"><span class="comment">//(f[I][j][k]+=f[NI][j][k])%=mod;</span></span><br><span class="line"><span class="comment">//(f[I][j][k]+=f[NI][j-1][k])%=mod;</span></span><br><span class="line"><span class="comment">//(f[I][j][k]+=f[NI][j][k-1])%=mod;</span></span><br><span class="line"><span class="comment">//(f[I][j][k]+=f[NI][j-1][k-1])%=mod;</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">ll ans=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++) (ans+=f[n&amp;<span class="number">1</span>][i][i])%=mod;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%lld&quot;</span>,ans);</span><br><span class="line"><span class="meta">#<span class="keyword">undef</span> ii</span></span><br><span class="line"><span class="meta">#<span class="keyword">undef</span> NI</span></span><br><span class="line"><span class="meta">#<span class="keyword">undef</span> I</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;path.in&quot;</span>,<span class="string">&quot;r&quot;</span>,stdin);</span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;path.out&quot;</span>,<span class="string">&quot;w&quot;</span>,stdout);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++) <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,&amp;src[i][<span class="number">1</span>]);</span><br><span class="line"><span class="built_in">convert</span>();</span><br><span class="line"><span class="built_in">dp</span>();</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="3-å¤§éƒ½å¸‚ï¼ˆcity-cppï¼‰"><a href="#3-å¤§éƒ½å¸‚ï¼ˆcity-cppï¼‰" class="headerlink" title="3. å¤§éƒ½å¸‚ï¼ˆcity.cppï¼‰"></a>3. å¤§éƒ½å¸‚ï¼ˆcity.cppï¼‰</h2><h3 id="Description-2"><a href="#Description-2" class="headerlink" title="Description"></a>Description</h3><p>åœ¨ç»æµå…¨çƒåŒ–æµªæ½®çš„å½±å“ä¸‹,ä¹ æƒ¯äºæ¼«æ­¥åœ¨æ¸…æ™¨çš„ä¹¡é—´å°è·¯çš„é‚®é€’å‘˜Blue Maryä¹Ÿå¼€å§‹éª‘ç€æ‘©æ‰˜è½¦ä¼ é€’é‚®ä»¶äº†ã€‚ä¸è¿‡ï¼Œå¥¹ç»å¸¸å›å¿†èµ·ä»¥å‰åœ¨ä¹¡é—´æ¼«æ­¥çš„æƒ…æ™¯ã€‚æ˜”æ—¥ï¼Œä¹¡ä¸‹æœ‰ä¾æ¬¡ç¼–å·ä¸º1..nçš„nä¸ªå°æ‘åº„ï¼ŒæŸäº›æ‘åº„ä¹‹é—´æœ‰ä¸€äº›åŒå‘çš„åœŸè·¯ã€‚ä»æ¯ä¸ªæ‘åº„éƒ½æ°å¥½æœ‰ä¸€æ¡è·¯å¾„åˆ°è¾¾æ‘åº„1ï¼ˆå³æ¯”ç‰¹å ¡ï¼‰ã€‚å¹¶ä¸”ï¼Œå¯¹äºæ¯ä¸ªæ‘åº„ï¼Œå®ƒåˆ°æ¯”ç‰¹å ¡çš„è·¯å¾„æ°å¥½åªç»è¿‡ç¼–å·æ¯”å®ƒçš„ç¼–å·å°çš„æ‘åº„ã€‚å¦å¤–ï¼Œå¯¹äºæ‰€æœ‰é“è·¯è€Œè¨€ï¼Œå®ƒä»¬éƒ½ä¸åœ¨é™¤æ‘åº„ä»¥å¤–çš„å…¶ä»–åœ°ç‚¹ç›¸é‡ã€‚åœ¨è¿™ä¸ªæœªå¼€åŒ–çš„åœ°æ–¹ï¼Œä»æ¥æ²¡æœ‰è¿‡é«˜æ¶æ¡¥å’Œåœ°ä¸‹é“é“ã€‚éšç€æ—¶é—´çš„æ¨ç§»ï¼Œè¶Šæ¥è¶Šå¤šçš„åœŸè·¯è¢«æ”¹é€ æˆäº†å…¬è·¯ã€‚è‡³ä»Šï¼ŒBlue Maryè¿˜æ¸…æ™°åœ°è®°å¾—æœ€åä¸€æ¡åœŸè·¯è¢«æ”¹é€ ä¸ºå…¬è·¯çš„æƒ…æ™¯ã€‚ç°åœ¨ï¼Œè¿™é‡Œå·²ç»æ²¡æœ‰åœŸè·¯äº†â€”â€”æ‰€æœ‰çš„è·¯éƒ½æˆä¸ºäº†å…¬è·¯ï¼Œè€Œæ˜”æ—¥çš„æ‘åº„å·²ç»å˜æˆäº†ä¸€ä¸ªå¤§éƒ½å¸‚ã€‚ Blue Maryæƒ³èµ·äº†åœ¨æ”¹é€ æœŸé—´å¥¹é€ä¿¡çš„ç»å†ã€‚å¥¹ä»æ¯”ç‰¹å ¡å‡ºå‘ï¼Œéœ€è¦å»æŸä¸ªæ‘åº„ï¼Œå¹¶ä¸”åœ¨ä¸¤æ¬¡é€ä¿¡ç»å†çš„é—´éš”æœŸé—´,æœ‰æŸäº›åœŸè·¯è¢«æ”¹é€ æˆäº†å…¬è·¯.ç°åœ¨Blue Maryéœ€è¦ä½ çš„å¸®åŠ©ï¼šè®¡ç®—å‡ºæ¯æ¬¡é€ä¿¡å¥¹éœ€è¦èµ°è¿‡çš„åœŸè·¯æ•°ç›®ã€‚ï¼ˆå¯¹äºå…¬è·¯ï¼Œå¥¹å¯ä»¥éª‘æ‘©æ‰˜è½¦ï¼›è€Œå¯¹äºåœŸè·¯ï¼Œå¥¹å°±åªå¥½æ¨è½¦äº†ã€‚ï¼‰</p><h3 id="Input-2"><a href="#Input-2" class="headerlink" title="Input"></a>Input</h3><p>ç¬¬ä¸€è¡Œæ˜¯ä¸€ä¸ªæ•°n(1 &lt; = n &lt; = 2 50000).</p><p>ä»¥ä¸‹n-1è¡Œï¼Œæ¯è¡Œä¸¤ä¸ªæ•´æ•°aï¼Œbï¼ˆ1â‰¤a&lt;bâ‰¤n)</p><p>ä»¥ä¸‹ä¸€è¡ŒåŒ…å«ä¸€ä¸ªæ•´æ•°mï¼ˆ1 &lt; = m &lt; = 2 50000ï¼‰ï¼Œè¡¨ç¤ºBlue Maryæ›¾ç»åœ¨æ”¹é€ æœŸé—´é€è¿‡mæ¬¡ä¿¡ã€‚</p><p>ä»¥ä¸‹n+m-1è¡Œï¼Œæ¯è¡Œæœ‰ä¸¤ç§æ ¼å¼çš„è‹¥å¹²ä¿¡æ¯ï¼Œè¡¨ç¤ºæŒ‰æ—¶é—´å…ˆåå‘ç”Ÿè¿‡çš„n+m-1æ¬¡äº‹ä»¶:</p><p>1ã€è‹¥è¿™è¡Œä¸ºâ€œA a bâ€ï¼ˆa&lt;bï¼‰ï¼Œè¡¨ç¤ºaæ‘å’Œbæ‘ä¹‹é—´çš„ä¹¡æ‘é“è·¯åœ¨è¯¥ç‰¹å®šæ—¶åˆ»è½¬å˜ä¸ºé«˜é€Ÿå…¬è·¯ã€‚2ã€è‹¥è¿™è¡Œä¸ºâ€œW aâ€ï¼Œè¡¨ç¤ºBlue Maryä»æ¯”ç‰¹å ¡åˆ°aæ‘é€ä¿¡ã€‚</p><h3 id="Output-2"><a href="#Output-2" class="headerlink" title="Output"></a>Output</h3><p>æœ‰mè¡Œï¼Œæ¯è¡ŒåŒ…å«ä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºå¯¹åº”çš„æŸæ¬¡é€ä¿¡æ—¶ç»è¿‡çš„åœŸè·¯æ•°ç›®ã€‚</p><h3 id="Sample-Input-2"><a href="#Sample-Input-2" class="headerlink" title="Sample Input"></a>Sample Input</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">5</span><br><span class="line">1 2</span><br><span class="line">1 3</span><br><span class="line">1 4</span><br><span class="line">4 5</span><br><span class="line">4</span><br><span class="line">W 5</span><br><span class="line">A 1 4</span><br><span class="line">W 5</span><br><span class="line">A 4 5</span><br><span class="line">W 5</span><br><span class="line">W 2</span><br><span class="line">A 1 2</span><br><span class="line">A 1 3</span><br></pre></td></tr></table></figure><h3 id="Sample-Output-2"><a href="#Sample-Output-2" class="headerlink" title="Sample Output"></a>Sample Output</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">2</span><br><span class="line">1</span><br><span class="line">0</span><br><span class="line">1</span><br></pre></td></tr></table></figure><h3 id="Hint-2"><a href="#Hint-2" class="headerlink" title="Hint"></a>Hint</h3><div class="mermaid-wrap"><pre class="mermaid-src" hidden>  graph LR1---2;1---3;1---4;4---5;  </pre></div><h3 id="åˆ†æ-2"><a href="#åˆ†æ-2" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h3><p>å¯ä»¥ç”¨æ ‘é“¾å‰–åˆ†åšï¼ŒæŠŠçˆ¶ç»“ç‚¹å’Œå­ç»“ç‚¹é—´è¾¹çš„æƒå€¼ç»™å­ç»“ç‚¹ï¼Œæ¯æ¬¡ç»™å‡º <code>W</code> æ“ä½œå°±æ˜¯è¯¢é—®æ ¹ç»“ç‚¹åˆ°å½“å‰ç»“ç‚¹çš„è¾¹æƒå’Œï¼Œä¿®è·¯å°±æ˜¯é€‰å®šä¸€å¯¹çˆ¶å­ç»“ç‚¹æŠŠä»–ä»¬ä¹‹é—´çš„è¾¹æ”¹ä¸º0ï¼Œä¹Ÿå°±æ˜¯æŠŠå­ç»“ç‚¹çš„æƒå€¼æ”¹ä¸º0ï¼Œå› ä¸ºé¢˜ç›®æ•°æ®å¤ªè¿‡å¼ºå¤§ï¼Œè¿™æ ·åšå¥½åƒä¼š TLE ä¸€ä¸ªç‚¹â€¦â€¦</p><p>å¸¸æ•°è¾ƒå°çš„æ˜¯ä¸ DFS åºç»“åˆçš„æ ‘çŠ¶æ•°ç»„ï¼Œæˆ‘ä»¬å‘ç°æ¯æ¬¡è¯¢é—®çš„éƒ½æ˜¯æ ¹ç»“ç‚¹åˆ°å½“å‰ç»“ç‚¹çš„æƒå€¼å’Œï¼Œæ¯æ¬¡å°†ä¸€ä¸ªç‚¹çš„æƒå€¼å˜ä¸º0ï¼Œä¼šå¯¼è‡´ä»¥è¿™ä¸ªç»“ç‚¹ä¸ºæ ¹çš„å­æ ‘ä¸Šçš„ç»“ç‚¹çš„æƒå€¼å’Œå…¨éƒ¨å‡å»1ï¼Œå› æ­¤ç”¨ DFSåºå¤„ç†åå¯ä»¥ç±»ä¼¼äºçº¿æ®µæ ‘çš„åŒºé—´ä¿®æ”¹ + å•ç‚¹æŸ¥è¯¢ï¼Œç»´æŠ¤æŸ¥åˆ†æ•°ç»„å³å¯</p><h3 id="Codes-2"><a href="#Codes-2" class="headerlink" title="Codes"></a>Codes</h3><blockquote><p><strong>DFSåºåšæ³•</strong></p></blockquote><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;ctime&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> lowbit(x) (x&amp;-x)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxn 250005</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxm 500005</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> t&gt;<span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">fcin</span><span class="params">(t &amp;x)</span></span>&#123;</span><br><span class="line"><span class="type">int</span> sign=<span class="number">1</span>; x=<span class="number">0</span>; <span class="type">char</span> op=<span class="built_in">getchar</span>();</span><br><span class="line"><span class="keyword">while</span>(op&lt;<span class="string">&#x27;0&#x27;</span>||op&gt;<span class="string">&#x27;9&#x27;</span>)&#123;<span class="keyword">if</span>(op==<span class="string">&#x27;-&#x27;</span>) sign=<span class="number">-1</span>;op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line"><span class="keyword">while</span>(op&gt;=<span class="string">&#x27;0&#x27;</span>&amp;&amp;op&lt;=<span class="string">&#x27;9&#x27;</span>)&#123;x=x*<span class="number">10</span>+(op<span class="number">-48</span>);op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line">x*=sign;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> to[maxm],nxt[maxm],w[maxn];</span><br><span class="line"><span class="type">int</span> l[maxn],r[maxn],head[maxn];</span><br><span class="line"><span class="type">int</span> tot,n,m,dt;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">Eadd</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> v)</span></span>&#123;</span><br><span class="line">to[++tot]=v;nxt[tot]=head[u];</span><br><span class="line">head[u]=tot;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">updata</span><span class="params">(<span class="type">int</span> p,<span class="type">int</span> d)</span></span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=p;i&lt;=n;i+=<span class="built_in">lowbit</span>(i))</span><br><span class="line">w[i]+=d;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">sum</span><span class="params">(<span class="type">int</span> p)</span></span>&#123;</span><br><span class="line"><span class="type">int</span> ans=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=p;i;i-=<span class="built_in">lowbit</span>(i))</span><br><span class="line">ans+=w[i];</span><br><span class="line"><span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dfs</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> fu)</span></span>&#123;</span><br><span class="line">l[u]=++dt;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=head[u];i;i=nxt[i])&#123;</span><br><span class="line"><span class="keyword">if</span>(to[i]==fu) <span class="keyword">continue</span>;</span><br><span class="line"><span class="built_in">dfs</span>(to[i],u);</span><br><span class="line">&#125;r[u]=dt;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;city.in&quot;</span>,<span class="string">&quot;r&quot;</span>,stdin);</span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;city.out&quot;</span>,<span class="string">&quot;w&quot;</span>,stdout);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line">    <span class="built_in">fcin</span>(n);</span><br><span class="line">    <span class="type">int</span> x,y;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;n;i++)&#123;</span><br><span class="line">    <span class="built_in">fcin</span>(x);<span class="built_in">fcin</span>(y);</span><br><span class="line">    <span class="built_in">Eadd</span>(x,y);<span class="built_in">Eadd</span>(y,x);</span><br><span class="line">&#125;<span class="built_in">dfs</span>(<span class="number">1</span>,<span class="number">0</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">2</span>;i&lt;=n;i++)&#123;</span><br><span class="line"><span class="built_in">updata</span>(l[i],<span class="number">1</span>);</span><br><span class="line"><span class="built_in">updata</span>(r[i]+<span class="number">1</span>,<span class="number">-1</span>);</span><br><span class="line">&#125; <span class="type">char</span> ch;</span><br><span class="line"><span class="built_in">fcin</span>(m);m=m+n<span class="number">-1</span>;</span><br><span class="line"><span class="keyword">while</span>(m--)&#123;</span><br><span class="line">cin&gt;&gt;ch;</span><br><span class="line"><span class="keyword">if</span>(ch==<span class="string">&#x27;W&#x27;</span>) <span class="built_in">fcin</span>(x),<span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,<span class="built_in">sum</span>(l[x]));</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line"><span class="built_in">fcin</span>(x),<span class="built_in">fcin</span>(y);</span><br><span class="line"><span class="built_in">updata</span>(l[y],<span class="number">-1</span>);</span><br><span class="line"><span class="built_in">updata</span>(r[y]+<span class="number">1</span>,<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p><strong>æ ‘å‰–åšæ³•</strong></p></blockquote><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//#pragma GCC optimize(3)</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;ctime&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxn 250005</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxm maxn*2</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> t&gt;<span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">fcin</span><span class="params">(t &amp;x)</span></span>&#123;</span><br><span class="line"><span class="type">int</span> sign=<span class="number">1</span>; x=<span class="number">0</span>; <span class="type">char</span> op=<span class="built_in">getchar</span>();</span><br><span class="line"><span class="keyword">while</span>(op&lt;<span class="string">&#x27;0&#x27;</span>||op&gt;<span class="string">&#x27;9&#x27;</span>)&#123;<span class="keyword">if</span>(op==<span class="string">&#x27;-&#x27;</span>) sign=<span class="number">-1</span>;op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line"><span class="keyword">while</span>(op&gt;=<span class="string">&#x27;0&#x27;</span>&amp;&amp;op&lt;=<span class="string">&#x27;9&#x27;</span>)&#123;x=x*<span class="number">10</span>+(op<span class="number">-48</span>);op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line">x*=sign;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> to[maxm],nxt[maxm];</span><br><span class="line"><span class="type">int</span> head[maxn],n,m,tot,id[maxn];</span><br><span class="line"><span class="type">int</span> dep[maxn],xson[maxn],fa[maxn],top[maxn];</span><br><span class="line"><span class="type">int</span> newp,siz[maxn];</span><br><span class="line"><span class="comment">// segment tree </span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">node</span>&#123;</span><br><span class="line"><span class="type">int</span> LC,RC,VAL,TAG;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> lc(x) T[x].LC</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> rc(x) T[x].RC</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> val(x) T[x].VAL</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> tag(x) T[x].TAG</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> mid ((L+R)&gt;&gt;1)</span></span><br><span class="line">&#125;T[maxn&lt;&lt;<span class="number">1</span>];</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">pushup</span><span class="params">(<span class="type">int</span> k)</span></span>&#123;<span class="built_in">val</span>(k)=<span class="built_in">val</span>(<span class="built_in">lc</span>(k))+<span class="built_in">val</span>(<span class="built_in">rc</span>(k));&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">pushdown</span><span class="params">(<span class="type">int</span> k,<span class="type">int</span> L,<span class="type">int</span> R)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">tag</span>(k)==<span class="number">-1</span>) <span class="keyword">return</span>;</span><br><span class="line"><span class="comment">// [L,mid] [mid+1,R]</span></span><br><span class="line"><span class="built_in">val</span>(<span class="built_in">lc</span>(k))=<span class="built_in">tag</span>(k)*(mid-L+<span class="number">1</span>);</span><br><span class="line"><span class="built_in">val</span>(<span class="built_in">rc</span>(k))=<span class="built_in">tag</span>(k)*(R-mid);</span><br><span class="line"><span class="built_in">tag</span>(<span class="built_in">lc</span>(k))=<span class="built_in">tag</span>(<span class="built_in">rc</span>(k))=<span class="built_in">tag</span>(k);</span><br><span class="line"><span class="built_in">tag</span>(k)=<span class="number">-1</span>;<span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">build</span><span class="params">(<span class="type">int</span> L,<span class="type">int</span> R)</span></span>&#123;</span><br><span class="line"><span class="type">int</span> p=++newp;<span class="built_in">tag</span>(p)=<span class="number">-1</span>;</span><br><span class="line"><span class="keyword">if</span>(L==R)&#123;<span class="built_in">val</span>(p)=<span class="number">1</span>;<span class="keyword">return</span> p;&#125;</span><br><span class="line"><span class="built_in">lc</span>(p)=<span class="built_in">build</span>(L,mid);</span><br><span class="line"><span class="built_in">rc</span>(p)=<span class="built_in">build</span>(mid+<span class="number">1</span>,R);</span><br><span class="line"><span class="built_in">pushup</span>(p);</span><br><span class="line"><span class="keyword">return</span> p;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">updata</span><span class="params">(<span class="type">int</span> k,<span class="type">int</span> L,<span class="type">int</span> R,<span class="type">int</span> x,<span class="type">int</span> y,<span class="type">int</span> d)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(x&lt;=L &amp;&amp; R&lt;=y)&#123;</span><br><span class="line"><span class="built_in">val</span>(k)=d*(R-L+<span class="number">1</span>);</span><br><span class="line"><span class="built_in">tag</span>(k)=d;<span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">pushdown</span>(k,L,R);</span><br><span class="line"><span class="keyword">if</span>(mid&gt;=x) <span class="built_in">updata</span>(<span class="built_in">lc</span>(k),L,mid,x,y,d);</span><br><span class="line"><span class="keyword">if</span>(mid&lt;y) <span class="built_in">updata</span>(<span class="built_in">rc</span>(k),mid+<span class="number">1</span>,R,x,y,d);</span><br><span class="line"><span class="built_in">pushup</span>(k);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">sum</span><span class="params">(<span class="type">int</span> k,<span class="type">int</span> L,<span class="type">int</span> R,<span class="type">int</span> x,<span class="type">int</span> y)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(x&lt;=L &amp;&amp; R&lt;=y) <span class="keyword">return</span> <span class="built_in">val</span>(k);</span><br><span class="line"><span class="built_in">pushdown</span>(k,L,R);</span><br><span class="line"><span class="type">int</span> ans=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">if</span>(mid&gt;=x) ans+=<span class="built_in">sum</span>(<span class="built_in">lc</span>(k),L,mid,x,y);</span><br><span class="line"><span class="keyword">if</span>(mid&lt;y) ans+=<span class="built_in">sum</span>(<span class="built_in">rc</span>(k),mid+<span class="number">1</span>,R,x,y);</span><br><span class="line"><span class="built_in">pushup</span>(k);<span class="keyword">return</span> ans; </span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">Eadd</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> v)</span></span>&#123;</span><br><span class="line">to[++tot]=v;nxt[tot]=head[u];</span><br><span class="line">head[u]=tot;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dfs</span><span class="params">(<span class="type">int</span> u)</span></span>&#123;</span><br><span class="line">siz[u]=<span class="number">1</span>;<span class="type">int</span> maxsize=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=head[u];i;i=nxt[i])&#123;</span><br><span class="line"><span class="keyword">if</span>(dep[to[i]]) <span class="keyword">continue</span>;</span><br><span class="line">dep[to[i]]=dep[u]+<span class="number">1</span>;</span><br><span class="line">fa[to[i]]=u;<span class="built_in">dfs</span>(to[i]);</span><br><span class="line">siz[u]+=siz[to[i]];</span><br><span class="line"><span class="keyword">if</span>(siz[to[i]]&gt;maxsize)&#123;</span><br><span class="line">maxsize=siz[to[i]];</span><br><span class="line">xson[u]=to[i];</span><br><span class="line">&#125;</span><br><span class="line">&#125;<span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dfs</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> TOP)</span></span>&#123;</span><br><span class="line">id[u]=++id[<span class="number">0</span>];</span><br><span class="line">top[u]=TOP;</span><br><span class="line"><span class="keyword">if</span>(siz[u]==<span class="number">1</span>) <span class="keyword">return</span>;</span><br><span class="line"><span class="built_in">dfs</span>(xson[u],TOP);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=head[u];i;i=nxt[i])</span><br><span class="line"><span class="keyword">if</span>(to[i]!=xson[u] &amp;&amp; to[i]!=fa[u])</span><br><span class="line"><span class="built_in">dfs</span>(to[i],to[i]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">pathadd</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> y,<span class="type">int</span> dt)</span></span>&#123;</span><br><span class="line"><span class="keyword">while</span>(top[x]!=top[y])&#123;</span><br><span class="line"><span class="keyword">if</span>(dep[top[x]]&lt;dep[top[y]]) <span class="built_in">swap</span>(x,y);</span><br><span class="line"><span class="built_in">updata</span>(<span class="number">1</span>,<span class="number">1</span>,n,id[top[x]],id[x],dt);</span><br><span class="line">x=fa[top[x]];</span><br><span class="line">&#125;<span class="keyword">if</span>(dep[x]&lt;dep[y]) <span class="built_in">swap</span>(x,y);</span><br><span class="line"><span class="built_in">updata</span>(<span class="number">1</span>,<span class="number">1</span>,n,id[y],id[x],dt); </span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">pathsum</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> y)</span></span>&#123;</span><br><span class="line"><span class="type">int</span> ans=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span>(top[x]!=top[y])&#123;</span><br><span class="line"><span class="keyword">if</span>(dep[top[x]]&lt;dep[top[y]]) <span class="built_in">swap</span>(x,y);</span><br><span class="line">ans+=<span class="built_in">sum</span>(<span class="number">1</span>,<span class="number">1</span>,n,id[top[x]],id[x]);</span><br><span class="line">x=fa[top[x]];</span><br><span class="line">&#125;<span class="keyword">if</span>(dep[x]&lt;dep[y]) <span class="built_in">swap</span>(x,y);</span><br><span class="line">ans+=<span class="built_in">sum</span>(<span class="number">1</span>,<span class="number">1</span>,n,id[y],id[x]);<span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;city.in&quot;</span>,<span class="string">&quot;r&quot;</span>,stdin);</span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;city.out&quot;</span>,<span class="string">&quot;w&quot;</span>,stdout);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"><span class="built_in">fcin</span>(n);<span class="type">int</span> x,y;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;n;i++)&#123;</span><br><span class="line"><span class="built_in">fcin</span>(x);<span class="built_in">fcin</span>(y);</span><br><span class="line"><span class="built_in">Eadd</span>(x,y);<span class="built_in">Eadd</span>(y,x);</span><br><span class="line">&#125;</span><br><span class="line">dep[<span class="number">1</span>]=<span class="number">1</span>;<span class="built_in">dfs</span>(<span class="number">1</span>);<span class="built_in">dfs</span>(<span class="number">1</span>,<span class="number">1</span>);</span><br><span class="line"><span class="built_in">build</span>(<span class="number">1</span>,n);</span><br><span class="line"><span class="built_in">fcin</span>(m);m=(n+m)<span class="number">-1</span>;</span><br><span class="line"><span class="type">char</span> op;</span><br><span class="line"><span class="keyword">while</span>(m--)&#123;</span><br><span class="line">cin&gt;&gt;op;</span><br><span class="line"><span class="keyword">if</span>(op==<span class="string">&#x27;W&#x27;</span>)&#123;</span><br><span class="line"><span class="built_in">fcin</span>(x);<span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,<span class="built_in">pathsum</span>(<span class="number">1</span>,x)<span class="number">-1</span>);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"><span class="built_in">fcin</span>(x);<span class="built_in">fcin</span>(y);</span><br><span class="line"><span class="built_in">pathadd</span>(y,y,<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŠ¨æ€è§„åˆ’ </tag>
            
            <tag> å­—ç¬¦ä¸² </tag>
            
            <tag> SPFA </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŠ¨æ€è§„åˆ’ | SPFA | å­—ç¬¦ä¸² | 201901022è€ƒè¯•  ï¼šè§£é¢˜æŠ¥å‘Š</title>
      <link href="/2019/10/22/2019-10-22-exam/"/>
      <url>/2019/10/22/2019-10-22-exam/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><h2 id="é¢˜ç›®é™åˆ¶ä¸€è§ˆ"><a href="#é¢˜ç›®é™åˆ¶ä¸€è§ˆ" class="headerlink" title="é¢˜ç›®é™åˆ¶ä¸€è§ˆ"></a>é¢˜ç›®é™åˆ¶ä¸€è§ˆ</h2><div class="table-container"><table><thead><tr><th style="text-align:center">é¢˜ç›®</th><th style="text-align:center">æ—¶é—´é™åˆ¶</th><th style="text-align:center">ç©ºé—´é™åˆ¶</th></tr></thead><tbody><tr><td style="text-align:center">1. door</td><td style="text-align:center">1000 MS</td><td style="text-align:center">128 MB</td></tr><tr><td style="text-align:center">2. escape</td><td style="text-align:center">1000 MS</td><td style="text-align:center">128 MB</td></tr><tr><td style="text-align:center">3. graze</td><td style="text-align:center">3000 MS</td><td style="text-align:center">128 MB</td></tr></tbody></table></div><h2 id="1-é—¨å«ï¼ˆdoor-cppï¼‰"><a href="#1-é—¨å«ï¼ˆdoor-cppï¼‰" class="headerlink" title="1. é—¨å«ï¼ˆdoor.cppï¼‰"></a>1. é—¨å«ï¼ˆdoor.cppï¼‰</h2><h3 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h3><p>çº¢ç¾ç²æ˜¯çº¢é­”é¦†çš„é—¨å«ã€‚æœ€è¿‘çº¢é­”é¦†å®‰ä¿ç³»ç»Ÿä½¿ç”¨äº†æ–°å‹çš„æ•°æ®ç¼–ç æŠ€æœ¯base64ï¼Œå¯ä»¥</p><p>å°†æ•°æ®è½¬åŒ–ä¸ºå¤§å°å†™å­—æ¯ã€æ•°å­—å’Œ+ã€/ã€=ç»„æˆçš„å­—ç¬¦ä¸²ï¼Œå…·ä½“æ–¹æ³•å¦‚ä¸‹ï¼š </p><p>é¦–å…ˆå°†è¾“å…¥å­—ç¬¦ä¸‰ä¸ªä¸‰ä¸ªåˆ†ä¸ºä¸€ç»„ï¼šå¦‚æœæ²¡æœ‰å‰©ä½™ï¼ˆå³å­—ç¬¦ä¸²é•¿åº¦ä¸º3çš„å€æ•°ï¼‰ï¼Œåˆ™ç›´æ¥è°ƒç”¨ä¸»è¿‡ç¨‹ï¼ˆè§ä¸‹æ–¹æè¿°ï¼‰ï¼›å¦‚æœå‰©1ä¸ªï¼Œåˆ™åŠ ä¸¤ä¸ªâ€œ\0â€å­—ç¬¦ï¼ˆASCIIç ä¸º0ï¼‰ï¼Œä½¿æ€»é•¿åº¦å˜ä¸º3çš„å€æ•°ï¼Œè°ƒç”¨ä¸»è¿‡ç¨‹ï¼Œå¹¶ä¸”å°†ä¸»è¿‡ç¨‹è½¬åŒ–åçš„å­—ç¬¦ä¸²æœ€åä¸¤ä¸ªå­—ç¬¦æ”¹ä¸ºâ€œ==â€ï¼›å¦‚æœå‰©2ä¸ªï¼Œåˆ™åŠ ä¸€ä¸ªâ€œ\0â€å­—ç¬¦ï¼Œä½¿æ€»é•¿åº¦å˜ä¸º3çš„å€æ•°ï¼Œè°ƒç”¨ä¸»è¿‡ç¨‹ï¼Œå¹¶ä¸”å°†ä¸»è¿‡ç¨‹è½¬åŒ–åçš„å­—ç¬¦ä¸²æœ€åä¸€ä¸ªå­—ç¬¦æ”¹ä¸ºâ€œ=â€ã€‚ </p><p>ä¸»è¿‡ç¨‹ï¼šè¾“å…¥ä¸€ä¸ªé•¿åº¦ä¸º3kçš„å­—ç¬¦ä¸²ï¼Œè¾“å‡ºä¸€ä¸ªé•¿åº¦ä¸º4kçš„å­—ç¬¦ä¸²ã€‚ï¼ˆkä¸ºéè´Ÿæ•´æ•°ã€‚ï¼‰å¾ªç¯ä»¥ä¸‹è¿‡ç¨‹næ¬¡,æ¯æ¬¡è½¬æ¢ä¸‰ä¸ªå­—ç¬¦æˆä¸ºå››ä¸ªå­—ç¬¦ï¼Œå¾ªç¯næ¬¡è½¬æ¢å‡ºçš„å­—ç¬¦ä¸²è¿æ¥èµ·æ¥ï¼Œå³ä¸ºæœ€ç»ˆçš„å­—ç¬¦ä¸²ã€‚ </p><p>æ¯æ¬¡å°†ä¸‰ä¸ªå­—ç¬¦è½¬åŒ–æˆasciiç ï¼Œå†è½¬æˆäºŒè¿›åˆ¶ï¼Œå¾—åˆ°24ä¸ªäºŒè¿›åˆ¶ä½ã€‚å°†24ä¸ªäºŒè¿›åˆ¶ä½åˆ†æˆ4ç»„ï¼Œæ¯ç»„6ä¸ªäºŒè¿›åˆ¶ä½ï¼Œå†åˆ†åˆ«è½¬åŒ–æˆåè¿›åˆ¶ã€‚æ­¤æ—¶å¾—åˆ°å››ä¸ªåè¿›åˆ¶æ•°ï¼Œå¹¶ä¸”å°äº 64ï¼ˆå› ä¸ºæ¯ä¸ªåè¿›åˆ¶æ•°æ˜¯ç”±6ä¸ªäºŒè¿›åˆ¶ä½è¡¨ç¤ºçš„ï¼‰ã€‚æ¥ä¸‹æ¥å‚ç…§ä¸‹è¡¨ï¼Œå°†è¿™å››ä¸ªæ•°è½¬åŒ–æˆå­—ç¬¦ï¼Œè¾“å‡ºå³å¯ã€‚</p><div class="table-container"><table><thead><tr><th style="text-align:center">value</th><th style="text-align:center">char</th></tr></thead><tbody><tr><td style="text-align:center">0-25</td><td style="text-align:center">A-Z</td></tr><tr><td style="text-align:center">26-51</td><td style="text-align:center">a-z</td></tr><tr><td style="text-align:center">52-61</td><td style="text-align:center">0-9</td></tr><tr><td style="text-align:center">62</td><td style="text-align:center">+</td></tr><tr><td style="text-align:center">63</td><td style="text-align:center">/</td></tr></tbody></table></div><p>æ¥ä¸‹æ¥æ˜¯ä¸¤ä¸ªä¾‹å­ï¼š </p><p>è¾“å…¥Manï¼Œé•¿åº¦ä¸º3çš„å€æ•°ï¼Œç›´æ¥è°ƒç”¨ä¸»è¿‡ç¨‹ </p><div class="table-container"><table><thead><tr><th style="text-align:center">æ–‡æœ¬</th><th style="text-align:center">M</th><th style="text-align:center">a</th><th style="text-align:center">n</th></tr></thead><tbody><tr><td style="text-align:center">ASCII</td><td style="text-align:center">77</td><td style="text-align:center">97</td><td style="text-align:center">110</td></tr><tr><td style="text-align:center">äºŒè¿›åˆ¶</td><td style="text-align:center">01001101</td><td style="text-align:center">01100001</td><td style="text-align:center">01101110</td></tr></tbody></table></div><p>è¾“å‡ºä¸ºï¼šTWFu</p><p>è¾“å…¥Aï¼š</p><div class="table-container"><table><thead><tr><th style="text-align:center">æ–‡æœ¬</th><th style="text-align:center">A</th><th style="text-align:center">\0</th><th style="text-align:center">\0</th></tr></thead><tbody><tr><td style="text-align:center">ASCII</td><td style="text-align:center">65</td><td style="text-align:center">0</td><td style="text-align:center">0</td></tr><tr><td style="text-align:center">äºŒè¿›åˆ¶</td><td style="text-align:center">01000001</td><td style="text-align:center">00000000</td><td style="text-align:center">00000000</td></tr></tbody></table></div><p>è¾“å‡ºä¸ºï¼šQQAA =&gt; QQ==ï¼ˆæœ€åä¸¤ä¸ªå­—ç¬¦è¢«æ›¿æ¢ï¼‰</p><p>æœ€ç»ˆå°†è½¬åŒ–åçš„å­—ç¬¦ä¸²è¾“å‡ºï¼Œæ¯76ä¸ªå­—ç¬¦ä¸ºä¸€è¡Œï¼Œå¦‚æœæœ€åä¸€è¡Œä¸æ»¡76ä¸ªå­—ç¬¦ï¼Œä¹Ÿæ¢ä¸€è¡Œã€‚è¾“å‡ºæ–‡ä»¶æœ€åè¯·è¾“å‡ºä¸€ä¸ªç©ºè¡Œã€‚å› ä¸ºæ˜¯é€å­—èŠ‚æ¯”è¾ƒï¼Œè¡Œæœ«ä¸èƒ½æœ‰å¤šä½™ç©ºæ ¼ï¼Œæ–‡æœ«ä¸èƒ½æœ‰å¤šä½™ç©ºè¡Œï¼ˆä¹Ÿå°±æ˜¯è¯´æ–‡ä»¶æœ€åä¸€è¡Œä¸€å®šæ˜¯ç©ºè¡Œï¼Œå€’æ•°ç¬¬äºŒè¡Œä¸€å®šä¸æ˜¯ç©ºè¡Œï¼‰ã€‚ </p><p>ä½ éœ€è¦ä¸ºçº¢é­”é¦†è®¾è®¡è¿™ä¸ªæ–°å‹çš„ç¼–ç æŠ€æœ¯ï¼Œçº¢ç¾ç²æ­£åœ¨æ€¥ç€å¤„ç†ä¼ è¾“è¿›æ¥çš„ä¿¡æ¯ï¼Œå´ä¸</p><p>çŸ¥é“çº¢é­”é¦†å†…å·²ç»æœ‰äº†å…¥ä¾µè€…â€¦â€¦ </p><h3 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h3><p>è¾“å…¥æ–‡ä»¶ç¬¬ä¸€è¡Œæ˜¯ä¸€ä¸ªæ­£æ•´æ•°nï¼Œè¡¨ç¤ºåŸå§‹å­—ç¬¦ä¸²çš„é•¿åº¦ã€‚ </p><p>ç¬¬äºŒè¡Œæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œé•¿åº¦ä¸ºnã€‚å­—ç¬¦ä¸²ç”±å¤§å°å†™å­—æ¯ï¼Œæ•°å­—ï¼Œç¬¦å·ï¼Œç©ºæ ¼æ„æˆã€‚</p><h3 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h3><p> è‹¥å¹²è¡Œï¼Œè¡¨ç¤ºè½¬åŒ–åçš„å­—ç¬¦ä¸²ã€‚æ¯76ä¸ªå­—ç¬¦ä¸ºä¸€è¡Œï¼Œå¦‚æœæœ€åä¸€è¡Œä¸æ»¡76ä¸ªå­—ç¬¦ï¼Œä¹Ÿæ¢ä¸€è¡Œã€‚å› ä¸ºæ˜¯é€å­—èŠ‚æ¯”è¾ƒï¼Œè¡Œæœ«ä¸èƒ½æœ‰å¤šä½™ç©ºæ ¼ï¼Œæ–‡æœ«ä¸èƒ½æœ‰å¤šä½™ç©ºè¡Œï¼ˆä¹Ÿå°±æ˜¯è¯´æ–‡ä»¶æœ€åä¸€è¡Œä¸€å®šæ˜¯ç©ºè¡Œï¼Œå€’æ•°ç¬¬äºŒè¡Œä¸€å®šä¸æ˜¯ç©ºè¡Œï¼‰ã€‚</p><h3 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">2</span><br><span class="line">BC</span><br></pre></td></tr></table></figure><h3 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">QkM=</span><br></pre></td></tr></table></figure><h3 id="Hint"><a href="#Hint" class="headerlink" title="Hint"></a>Hint</h3><p>å¯¹äº30%çš„æ•°æ®,n=3,å­—ç¬¦ä¸²åªç”±å­—æ¯ç»„æˆ</p><p>å¯¹äº50%çš„æ•°æ®,n=12</p><p>å¯¹äº70%çš„æ•°æ®,n&lt;=57</p><p>å¯¹äº100%çš„æ•°æ®,3&lt;=n&lt;=1000</p><h3 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h3><p>ä¸€é“ç®€å•çš„å­—ç¬¦ä¸²æ“ä½œé¢˜ï¼Œæ ¹æ®é¢˜æ„è½¬åŒ–å­—ç¬¦ä¸²ï¼Œåˆ†è¡Œè¾“å‡ºè½¬åŒ–åçš„å­—ç¬¦å³å¯</p><p>è¿™é“é¢˜åœ¨è€ƒè¯•æ—¶å†™çš„ç¨‹åºï¼Œåœ¨è‡ªå·±ç”µè„‘ä¸Šèƒ½ ACï¼Œä½†æ˜¯äº¤åˆ°è€å¸ˆçš„ Linux ä¸‹é¢å»å°±ä¸è¡Œäº†â€¦â€¦</p><p>ç„¶è€Œ NOIP é‡‡ç”¨çš„å°±æ˜¯æ ‡å‡†çš„ Linux ç¯å¢ƒï¼Œä¸çŸ¥é“è¯¥æ€ä¹ˆåŠâ€¦â€¦</p><h3 id="Codes"><a href="#Codes" class="headerlink" title="Codes"></a>Codes</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;ctime&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxn 5005</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">char</span> src[maxn];</span><br><span class="line"><span class="type">int</span> bin[maxn],res[maxn];</span><br><span class="line"><span class="type">char</span> ref[maxn];</span><br><span class="line"><span class="type">int</span> n,cnt,rest;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="string">&#x27;A&#x27;</span>;i&lt;=<span class="string">&#x27;Z&#x27;</span>;i++) ref[cnt++]=i;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="string">&#x27;a&#x27;</span>;i&lt;=<span class="string">&#x27;z&#x27;</span>;i++) ref[cnt++]=i;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="string">&#x27;0&#x27;</span>;i&lt;=<span class="string">&#x27;9&#x27;</span>;i++) ref[cnt++]=i;</span><br><span class="line">ref[cnt++]=<span class="string">&#x27;+&#x27;</span>;ref[cnt++]=<span class="string">&#x27;/&#x27;</span>;ref[cnt]=<span class="string">&#x27;=&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;door.in&quot;</span>,<span class="string">&quot;r&quot;</span>,stdin);</span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;door.out&quot;</span>,<span class="string">&quot;w&quot;</span>,stdout);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);<span class="type">char</span> ch;</span><br><span class="line"><span class="built_in">init</span>();</span><br><span class="line">ch=<span class="built_in">getchar</span>();</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">ch=<span class="built_in">getchar</span>();</span><br><span class="line">src[i]=ch;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">while</span>(n%<span class="number">3</span>!=<span class="number">0</span>) src[++n]=<span class="string">&#x27;\0&#x27;</span>,rest++;</span><br><span class="line"><span class="type">int</span> offset,curch,ans;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i+=<span class="number">3</span>)&#123;</span><br><span class="line"><span class="built_in">memset</span>(bin,<span class="number">0</span>,<span class="built_in">sizeof</span>(bin));</span><br><span class="line"> curch=src[i];</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">7</span>;j&gt;=<span class="number">0</span>;j--) bin[++bin[<span class="number">0</span>]]=(curch&gt;&gt;j)&amp;<span class="number">1</span>;</span><br><span class="line">curch=src[i+<span class="number">1</span>];</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">7</span>;j&gt;=<span class="number">0</span>;j--) bin[++bin[<span class="number">0</span>]]=(curch&gt;&gt;j)&amp;<span class="number">1</span>;</span><br><span class="line">curch=src[i+<span class="number">2</span>];</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">7</span>;j&gt;=<span class="number">0</span>;j--) bin[++bin[<span class="number">0</span>]]=(curch&gt;&gt;j)&amp;<span class="number">1</span>;</span><br><span class="line">ans=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=bin[<span class="number">0</span>];j++)&#123;</span><br><span class="line">ans=(ans&lt;&lt;<span class="number">1</span>)|bin[j];</span><br><span class="line"><span class="keyword">if</span>(j%<span class="number">6</span>==<span class="number">0</span>)&#123;res[++res[<span class="number">0</span>]]=ans;ans=<span class="number">0</span>;&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=rest;i;i--) res[res[<span class="number">0</span>]-i+<span class="number">1</span>]=<span class="number">64</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=res[<span class="number">0</span>];i++)&#123;</span><br><span class="line"><span class="built_in">putchar</span>(ref[res[i]]);</span><br><span class="line"><span class="keyword">if</span>(i%<span class="number">76</span>==<span class="number">0</span>) </span><br><span class="line"><span class="built_in">putchar</span>(<span class="string">&#x27;\n&#x27;</span>);</span><br><span class="line">&#125;<span class="built_in">putchar</span>(<span class="string">&#x27;\n&#x27;</span>);<span class="comment">// è¿™é‡Œå¿…é¡»å¤šæ‰“ä¸€ä¸ª putcharï¼Œä¸ç„¶ä¸èƒ½æ¢è¡Œâ€¦â€¦</span></span><br><span class="line"><span class="keyword">if</span>(res[<span class="number">0</span>]%<span class="number">76</span>!=<span class="number">0</span>) <span class="built_in">putchar</span>(<span class="string">&#x27;\n&#x27;</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="2-é€ƒè·‘ï¼ˆescape-cppï¼‰"><a href="#2-é€ƒè·‘ï¼ˆescape-cppï¼‰" class="headerlink" title="2. é€ƒè·‘ï¼ˆescape.cppï¼‰"></a>2. é€ƒè·‘ï¼ˆescape.cppï¼‰</h2><h3 id="Description-1"><a href="#Description-1" class="headerlink" title="Description"></a>Description</h3><p>å› ä¸ºé—¨å«çº¢ç¾ç²çš„å¤±è¯¯ï¼Œç–å¿½å°†å…¥ä¾µè€…æ”¾å…¥äº†çº¢é­”é¦†ã€‚å…¥ä¾µè€…è¢­å‡»äº†çº¢é­”é¦†çš„å¤§å°å§è•¾ç±³è‰äºšÂ·æ–¯å¡é›·ç‰¹ï¼Œå¤§å°å§åœ¨æ–½æ”¾ã€å¿…æ€Â·æ–¯å¡é›·ç‰¹å®¶ç»æŠ€Â·æŠ±å¤´è¹²é˜²ã€‘æ— æ•ˆååªå¥½å˜æˆäº†å¥½å¤šè™è ï¼Œåœ¨çº¢é­”é¦†ä¸­åˆ†æ•£å¼€æ¥ã€‚ </p><p>ç°åœ¨çš„å½“åŠ¡ä¹‹æ€¥æ˜¯æ‰¾åˆ°äºŒå°å§èŠ™å…°æœµéœ²Â·æ–¯å¡é›·ç‰¹ï¼Œå¹¶ä¸”ä¸å¤§å°å§åŒ–èº«æˆçš„æ‰€æœ‰è™è é›†åˆåœ¨ä¸€ç‚¹ã€‚ä½ çš„ä»»åŠ¡å°±æ˜¯å¸®å¥¹ä»¬æ‰¾ä¸€æ¡æœ€ä½³è·¯çº¿ã€‚ </p><p>æˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªæ— å‘å›¾æ¥è¡¨ç¤ºçº¢é­”é¦†çš„åœ°å›¾ã€‚è™è å’ŒäºŒå°å§èµ°è¿‡ä»»ä½•ä¸€æ¡è¾¹éƒ½è¦ä»˜å‡ºä¸€å®šçš„ä»£ä»·ã€‚å› ä¸ºå½¢æ€ä¸åŒï¼Œè™è å’ŒäºŒå°å§èµ°åŒä¸€æ¡è¾¹ä»˜å‡ºçš„ä»£ä»·å¯èƒ½ä¸åŒã€‚ä½†æ˜¯å¦‚æœæŸä¸€åªè™è ä¸äºŒå°å§ç¢°é¢ï¼Œé‚£ä¹ˆäºŒå°å§ç”±äºè™è çš„å¼•å¯¼ï¼Œä»¥åçš„æ‰€æœ‰è·¯ç¨‹å¯ä»¥ä¸æ”¯ä»˜ä»£ä»·ã€‚ï¼ˆä¹Ÿå°±æ˜¯ç›¸å½“äºäºŒå°å§å’ŒæŸåªè™è éƒ½èµ°åˆ°æŸç‚¹ï¼Œä¹‹åæ— è§†äºŒå°å§çš„å­˜åœ¨ã€‚ï¼‰ç°åœ¨å·²çŸ¥æ‰€æœ‰è™è ï¼ŒäºŒå°å§å’Œç›®æ ‡é›†åˆç‚¹çš„ä½ç½®ï¼Œè¯·ä½ æ±‚å‡ºæ‰€æœ‰è™è å’ŒäºŒå°å§è¡Œèµ°ä»£ä»·çš„å’Œçš„æœ€å°å€¼ã€‚</p><h3 id="Input-1"><a href="#Input-1" class="headerlink" title="Input"></a>Input</h3><p>ç¬¬ä¸€è¡Œæ˜¯5ä¸ªæ­£æ•´æ•°ï¼Œnï¼Œmï¼Œkï¼ŒSï¼ŒTï¼Œåˆ†åˆ«ä»£è¡¨æ— å‘å›¾ç‚¹æ•°ï¼Œè¾¹æ•°ï¼Œè™è çš„æ•°é‡ï¼ŒäºŒå°å§æ‰€åœ¨èµ·ç‚¹çš„ç¼–å·ï¼Œç›®æ ‡ç‚¹çš„ç¼–å·ã€‚ </p><p>ç¬¬äºŒè¡Œæ˜¯kä¸ªæ­£æ•´æ•°ï¼Œåˆ†åˆ«ä»£è¡¨å¤§å°å§æ¯ä¸ªè™è æ‰€åœ¨çš„èµ·ç‚¹çš„ç¼–å·ã€‚ </p><p>æ¥ä¸‹æ¥æœ‰mè¡Œï¼Œæ¯è¡Œæœ‰4ä¸ªæ­£æ•´æ•°ï¼Œuï¼Œvï¼Œqï¼Œpï¼Œåˆ†åˆ«æ˜¯è¯¥è¾¹çš„èµ·ç‚¹ã€ç»ˆç‚¹ï¼Œè™è é€šè¿‡è¯¥è·¯èŠ±è´¹çš„ä»£ä»·ï¼ŒäºŒå°å§é€šè¿‡è¯¥è·¯èŠ±è´¹çš„ä»£ä»·ã€‚</p><h3 id="Output-1"><a href="#Output-1" class="headerlink" title="Output"></a>Output</h3><p>ç¬¬ä¸€è¡Œæ˜¯5ä¸ªæ­£æ•´æ•°ï¼Œnï¼Œmï¼Œkï¼ŒSï¼ŒTï¼Œåˆ†åˆ«ä»£è¡¨æ— å‘å›¾ç‚¹æ•°ï¼Œè¾¹æ•°ï¼Œè™è çš„æ•°é‡ï¼ŒäºŒå°å§æ‰€åœ¨èµ·ç‚¹çš„ç¼–å·ï¼Œç›®æ ‡ç‚¹çš„ç¼–å·ã€‚ </p><p>ç¬¬äºŒè¡Œæ˜¯kä¸ªæ­£æ•´æ•°ï¼Œåˆ†åˆ«ä»£è¡¨å¤§å°å§æ¯ä¸ªè™è æ‰€åœ¨çš„èµ·ç‚¹çš„ç¼–å·ã€‚ </p><p>æ¥ä¸‹æ¥æœ‰mè¡Œï¼Œæ¯è¡Œæœ‰4ä¸ªæ­£æ•´æ•°ï¼Œuï¼Œvï¼Œqï¼Œpï¼Œåˆ†åˆ«æ˜¯è¯¥è¾¹çš„èµ·ç‚¹ã€ç»ˆç‚¹ï¼Œè™è é€šè¿‡è¯¥è·¯èŠ±è´¹çš„ä»£ä»·ï¼ŒäºŒå°å§é€šè¿‡è¯¥è·¯èŠ±è´¹çš„ä»£ä»·ã€‚</p><h3 id="Sample-Input-1"><a href="#Sample-Input-1" class="headerlink" title="Sample Input"></a>Sample Input</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">5 5 2 3 4 </span><br><span class="line">1 5 </span><br><span class="line">1 2 3 5 </span><br><span class="line">3 2 3 5 </span><br><span class="line">2 4 4 9 </span><br><span class="line">3 4 9 6 </span><br><span class="line">5 4 1 1 </span><br></pre></td></tr></table></figure><h3 id="Sample-Output-1"><a href="#Sample-Output-1" class="headerlink" title="Sample Output"></a>Sample Output</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">14</span><br></pre></td></tr></table></figure><h3 id="Hint-1"><a href="#Hint-1" class="headerlink" title="Hint"></a>Hint</h3><p>ã€æ ·ä¾‹è§£é‡Šã€‘</p><p>1å·è™è ä»1åˆ°2ï¼ŒèŠ±è´¹3  äºŒå°å§ä»3åˆ°2ï¼ŒèŠ±è´¹5ï¼Œé‡è§è™è ï¼Œä¹‹åä¸è®¡ç®—è´¹ç”¨ </p><p> 1å·è™è ä»2åˆ°4ï¼ŒèŠ±è´¹4  2å·è™è ä»5åˆ°4ï¼ŒèŠ±è´¹1  æ€»è®¡13</p><p>ã€æ•°æ®è§„æ¨¡ã€‘</p><p>å…¶ä¸­30%ï¼šn&lt;=200ã€‚ </p><p>å¦æœ‰20%: ä¿è¯S=Tã€‚ </p><p>å¦æœ‰20%ï¼šä¿è¯k&lt;=5ï¼Œn&lt;=1000,m&lt;=10000ã€‚ </p><p>100%ï¼šn&lt;=10000ï¼Œm&lt;=100000ï¼Œk&lt;=10000ï¼Œ1&lt;=Sã€Tã€uã€v&lt;=nï¼Œ1&lt;=pã€q&lt;=1000ï¼Œä¸ä¿è¯è™è èµ·ç‚¹äº’ä¸ç›¸ç­‰ï¼Œæ•°æ®ä¸­å¯èƒ½æœ‰é‡è¾¹å’Œè‡ªç¯ï¼Œä¿è¯æ‰€æœ‰ç‚¹å‡èƒ½èµ°åˆ°Tç‚¹ï¼ˆå³ä¸å­˜åœ¨æ— è§£æƒ…å†µï¼‰ã€‚</p><h3 id="åˆ†æ-1"><a href="#åˆ†æ-1" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h3><blockquote><p><strong>å±€éƒ¨åˆ†åšæ³•ï¼šSPFA + DFSï¼ˆ60åˆ†ï¼‰</strong></p></blockquote><p>è€ƒè¯•æ—¶å†™çš„è§£æ³•ï¼Œå…ˆé¢„å¤„ç†å‡ºç»ˆç‚¹åˆ°æ‰€æœ‰ç‚¹çš„å•æºæœ€çŸ­è·¯å¾„ï¼Œç„¶åç»Ÿè®¡æ‰€æœ‰è™è åˆ°ç»ˆç‚¹çš„æœ€çŸ­è·¯å¾„è·ç¦»å’Œï¼Œå¦‚æœé¢˜ç›®ç»™å‡ºçš„ S=Tï¼Œåˆ™ç›´æ¥è¾“å‡ºä½œä¸ºç­”æ¡ˆï¼ˆè¿™é‡Œæœ‰ 20ptsï¼‰</p><p><strong>ç„¶åå°±æ˜¯ DFS æ ‡è®°æ¯åªè™è é€šè¿‡æœ€çŸ­è·¯å¾„åˆ°è¾¾ç»ˆç‚¹æ—¶è¦ç»å†çš„ç‚¹ï¼Œå†åšä¸€æ¬¡ SPFAï¼Œä»¥äºŒå°å§çš„ç‚¹ä¸ºæºç‚¹ï¼Œè®¡ç®—æ¯ä¸ªè¢«æ ‡è®°çš„ç‚¹åˆ°æ–°çš„æºç‚¹çš„æœ€çŸ­è·¯å¾„ï¼Œå†åœ¨å…¶ä¸­å–æœ€å°å€¼</strong>ï¼ŒåŠ ä¸Šä¸Šä¸€æ­¥ç®—å‡ºçš„å’Œå³ä¸ºç­”æ¡ˆï¼Œæœ€ç»ˆå¾—åˆ† 60pts</p><blockquote><p><strong>æ­£è§£ï¼šSPFA + è·¯å¾„è½¬åŒ–ï¼ˆ100åˆ†ï¼‰</strong></p></blockquote><p>å¾ˆæ˜¾ç„¶è™è ä¸ä¸€å®šè¦åœ¨æœ€çŸ­è·¯å¾„ä¸Šç»è¿‡çš„ç‚¹æ¥æ¥äºŒå°å§ï¼Œå› ä¸ºäºŒå°å§åˆ°è¾¾è¿™äº›ç‚¹çš„èŠ±è´¹é€šå¸¸æ¯”è™è è¦é«˜å¾—å¤š</p><p>æšä¸¾æ¯ä¸ªè™è å»æ¥äºŒå°å§çš„ç‚¹ $D$ï¼Œè®¾å»æ¥äºŒå°å§çš„è™è ä¸º $K_i$ï¼Œé‚£ä¹ˆè¿™åªè™è éœ€è¦çš„é¢å¤–èŠ±è´¹å°±ä¸ºï¼š</p><p>$dist[K_i][D]+dist[S][D]+dist[D][T]-dist[K_i][T]=delta$ï¼Œä¹Ÿå°±æ˜¯ $ans+=delta$</p><p>è¿™æ ·åšçš„è¯ï¼Œæœ´ç´ åšæ³•éœ€è¦é¢„å¤„ç†å‡ºæ¯åªè™è ï¼ŒäºŒå°å§ï¼Œç»ˆç‚¹åˆ°æ¯ä¸ªç‚¹çš„å•æºæœ€çŸ­è·¯å¾„ï¼ˆå¦‚æœä¼šæ±‚å¤šæºæœ€çŸ­è·¯å¾„çš„è¯åˆ°è¿™ä¸€æ­¥å°±å¯ä»¥ AC æ­¤é¢˜äº†ï¼‰ï¼Œæ—¶é—´å’Œç©ºé—´éƒ½ä¸èƒ½æ¥å—ï¼Œè€ƒè™‘æ¯ä¸ªç‚¹çš„ $delta$ å€¼ï¼š</p><p>$delta(D)=min_{i=1}^n(dist[K_i,D]+dist[D][T]+dist[S][D]-dist[K_i][T])$</p><p>$ans=min<em>{i=1}^ndelta(i)+\sum</em>{i=1}^ndist[i][T]$ </p><p>å…¶ä¸­ $delta(D)$ çš„è¡¨è¾¾å¼ä¸­å¯ä»¥æå‡ºå¸¸å€¼è¡¨è¾¾å¼ï¼ˆå³ä¸ä¼šè¢«å½“å‰è®¡ç®—æ‰€æ”¹å˜çš„è¡¨è¾¾å¼ï¼‰ï¼š<br>$delta(D)=min_{i=1}^n(dist[K_i][D]-dist[K_i][T])-dist[S][K]+dist[D][T]$ </p><p>å˜åŒ–çš„è¡¨è¾¾å¼å€¼è®°ä½œï¼š$f(D)=delta(D)=min_{i=1}^n(dist[K_i][D]-dist[K_i][T])$</p><p><strong>è€ƒè™‘æ–°è®¾æºç‚¹ $Sâ€™$ ï¼ŒæŠŠ $Sâ€™$ ä¸æ‰€æœ‰è™è åœ¨çš„ç‚¹ $Ki$ è¿æ¥ä¸€æ¡æƒå€¼ä¸º $-dist[K_i][t]$ çš„è¾¹ï¼Œç„¶åè®¡ç®—ä»¥è¿™ä¸ªç‚¹ä¸ºæºç‚¹çš„å•æºæœ€çŸ­è·¯å¾„ï¼Œå‘ç°è¡¨è¾¾å¼å’Œ $f(D)$ ä¸€è‡´ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥ä¸€æ¬¡æœ€çŸ­è·¯æ±‚å‡º $f$ æ•°ç»„ï¼Œç„¶ååˆæšä¸¾å¾—å‡ºç­”æ¡ˆäº†</strong></p><p>æœ¬é¢˜è€ƒæŸ¥å¯¹æœ€çŸ­è·¯å¾„è¡¨è¾¾å¼çš„ç†è§£ï¼Œéš¾ç‚¹åœ¨äºæœ€åä¸€æ­¥çš„æ–°æºç‚¹è®¾ç½®å’Œè½¬åŒ–ï¼Œé€šè¿‡å·²çŸ¥çš„ç›®æ ‡è¡¨è¾¾å¼æ„é€ å‡ºèƒ½ç”¨æœ€çŸ­è·¯å¾„æ±‚å‡ºçš„è¡¨è¾¾å¼ä»è€Œè§£å†³é—®é¢˜</p><h3 id="Codes-1"><a href="#Codes-1" class="headerlink" title="Codes"></a>Codes</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;ctime&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxn 10005</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxm 100005*8</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="type">int</span>,<span class="type">int</span>&gt; pr;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> t&gt;<span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">fcin</span><span class="params">(t &amp;x)</span></span>&#123;</span><br><span class="line"><span class="type">int</span> sign=<span class="number">1</span>; x=<span class="number">0</span>; <span class="type">char</span> op=<span class="built_in">getchar</span>();</span><br><span class="line"><span class="keyword">while</span>(op&lt;<span class="string">&#x27;0&#x27;</span>||op&gt;<span class="string">&#x27;9&#x27;</span>)&#123;<span class="keyword">if</span>(op==<span class="string">&#x27;-&#x27;</span>) sign=<span class="number">-1</span>;op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line"><span class="keyword">while</span>(op&gt;=<span class="string">&#x27;0&#x27;</span>&amp;&amp;op&lt;=<span class="string">&#x27;9&#x27;</span>)&#123;x=x*<span class="number">10</span>+(op<span class="number">-48</span>);op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line">x*=sign;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> to[maxm],nxt[maxm],head[maxn];</span><br><span class="line"><span class="type">int</span> wsis[maxm],wbf[maxm],tot;</span><br><span class="line"><span class="type">int</span> n,m,S,T,k;<span class="type">int</span> pos[maxn];</span><br><span class="line"><span class="type">int</span> bf[maxn];</span><br><span class="line"><span class="type">int</span> dist[<span class="number">3</span>][maxn];</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">Eadd</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> v,<span class="type">int</span> W1,<span class="type">int</span> W2)</span></span>&#123;</span><br><span class="line">to[++tot]=v;nxt[tot]=head[u];</span><br><span class="line">wbf[tot]=W1;wsis[tot]=W2;head[u]=tot;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">cmp</span>&#123;<span class="function"><span class="type">bool</span> <span class="title">operator</span> <span class="params">()</span><span class="params">(<span class="type">const</span> pr a,<span class="type">const</span> pr b)</span></span>&#123;<span class="keyword">return</span> a.second&gt;b.second;&#125;&#125;;</span><br><span class="line">priority_queue&lt;pr,vector&lt;pr&gt;,cmp&gt; q;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">SPFA</span><span class="params">(<span class="type">int</span> id,<span class="type">int</span> src=<span class="number">-1</span>)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(src!=<span class="number">-1</span>) <span class="keyword">while</span>(!q.<span class="built_in">empty</span>()) q.<span class="built_in">pop</span>();</span><br><span class="line"><span class="keyword">if</span>(src!=<span class="number">-1</span>) <span class="built_in">memset</span>(dist[id],<span class="number">0x3f</span>,<span class="built_in">sizeof</span>(dist[id]));</span><br><span class="line"><span class="type">int</span> hx,hy,val;</span><br><span class="line"><span class="keyword">if</span>(src!=<span class="number">-1</span>)&#123;</span><br><span class="line">dist[id][src]=<span class="number">0</span>;</span><br><span class="line">q.<span class="built_in">push</span>(<span class="built_in">make_pair</span>(src,<span class="number">0</span>));</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">while</span>(!q.<span class="built_in">empty</span>())&#123;</span><br><span class="line">hx=q.<span class="built_in">top</span>().first;</span><br><span class="line">hy=q.<span class="built_in">top</span>().second;</span><br><span class="line">q.<span class="built_in">pop</span>();</span><br><span class="line"><span class="keyword">if</span>(dist[id][hx]!=hy) <span class="keyword">continue</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=head[hx];i;i=nxt[i])&#123;</span><br><span class="line">val=(id==<span class="number">0</span> || id==<span class="number">2</span>)?wbf[i]:wsis[i];</span><br><span class="line"><span class="keyword">if</span>(dist[id][to[i]]&gt;dist[id][hx]+val)&#123;</span><br><span class="line">dist[id][to[i]]=dist[id][hx]+val;</span><br><span class="line">q.<span class="built_in">push</span>(<span class="built_in">make_pair</span>(to[i],dist[id][to[i]]));</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;escape.in&quot;</span>,<span class="string">&quot;r&quot;</span>,stdin);</span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;escape.out&quot;</span>,<span class="string">&quot;w&quot;</span>,stdout);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"><span class="built_in">fcin</span>(n);<span class="built_in">fcin</span>(m);<span class="type">int</span> a,b,c,d;</span><br><span class="line"><span class="built_in">fcin</span>(k);<span class="built_in">fcin</span>(S);<span class="built_in">fcin</span>(T);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=k;i++) <span class="built_in">fcin</span>(a),bf[a]++;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++)&#123;</span><br><span class="line"><span class="built_in">fcin</span>(a);<span class="built_in">fcin</span>(b);</span><br><span class="line"><span class="built_in">fcin</span>(c);<span class="built_in">fcin</span>(d);</span><br><span class="line"><span class="built_in">Eadd</span>(a,b,c,d);<span class="built_in">Eadd</span>(b,a,c,d);</span><br><span class="line">&#125; </span><br><span class="line"><span class="built_in">SPFA</span>(<span class="number">0</span>,T);<span class="built_in">SPFA</span>(<span class="number">1</span>,S); </span><br><span class="line">ll ans=<span class="number">0</span>;<span class="keyword">while</span>(!q.<span class="built_in">empty</span>()) q.<span class="built_in">pop</span>();</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line"><span class="keyword">if</span>(bf[i])&#123;</span><br><span class="line">dist[<span class="number">2</span>][i]=-dist[<span class="number">0</span>][i];</span><br><span class="line">ans+=dist[<span class="number">0</span>][i]*bf[i];</span><br><span class="line">q.<span class="built_in">push</span>(<span class="built_in">make_pair</span>(i,dist[<span class="number">2</span>][i]));</span><br><span class="line">&#125;<span class="keyword">else</span> dist[<span class="number">2</span>][i]=<span class="number">1</span>&lt;&lt;<span class="number">28</span>; </span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">SPFA</span>(<span class="number">2</span>);</span><br><span class="line">ll ret=<span class="number">1ll</span>&lt;&lt;<span class="number">55</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++) ret=<span class="built_in">min</span>(ret,ans+dist[<span class="number">2</span>][i]+dist[<span class="number">0</span>][i]+dist[<span class="number">1</span>][i]);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%lld&quot;</span>,ret);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="3-æ“¦è›‹ï¼ˆgraze-cppï¼‰"><a href="#3-æ“¦è›‹ï¼ˆgraze-cppï¼‰" class="headerlink" title="3. æ“¦è›‹ï¼ˆgraze.cppï¼‰"></a>3. æ“¦è›‹ï¼ˆgraze.cppï¼‰</h2><h3 id="Description-2"><a href="#Description-2" class="headerlink" title="Description"></a>Description</h3><p>å¤§å°å§å’ŒäºŒå°å§æ±‡åˆä»¥åï¼Œå¤§å°å§ä»è™è å˜å›äººå½¢ã€‚è¿™ä¸ªæ—¶å€™å…¥ä¾µè€…å‘ç°äº†å¥¹ä»¬ï¼ŒäºŒå°å§çœ‹è§äº†æ–°çš„ç©å…·ï¼Œååˆ†å…´å¥‹ï¼Œä½¿ç”¨äº†ç¦å¿Œã€å››é‡å­˜åœ¨ã€‘ã€‚æ­¤æ—¶å¯†é›†çš„å¼¹å¹•é£äº†è¿‡æ¥ï¼ŒäºŒå°å§ä¸å¥¹çš„åˆ†èº«è¯¥æ€æ ·èº²è¿‡è¿™ä¸€é˜µè¢­å‡»å‘¢ï¼Ÿ </p><p>å››é‡å­˜åœ¨ == åˆ†èº«æœ‰4ä¸ª</p><p>æˆ‘ä»¬å‡è®¾å¯¹æˆ˜åœºåœ°æ˜¯ä¸€æ¡é•¿åº¦ä¸ºnæ ¼çš„è·¯ï¼Œå¼€å§‹æ—¶äºŒå°å§ä¸æ‰€æœ‰åˆ†èº«éƒ½åœ¨è·¯çš„æœ€å·¦ç«¯ç¬¬ä¸€æ ¼ï¼Œè€Œç›®æ ‡åœ¨è·¯çš„æœ€å³ç«¯ï¼Œä¹Ÿå°±æ˜¯ç¬¬næ ¼ã€‚äºŒå°å§éœ€è¦å°†åˆ†èº«éƒ½ç§»åŠ¨åˆ°è·¯çš„æœ€å³ä¸€æ ¼ï¼Œç„¶åç»™äºˆæ•Œäººè‡´å‘½ä¸€å‡»ã€‚å› ä¸ºåˆ†èº«éš¾ä»¥æ“çºµï¼Œæ‰€ä»¥äºŒå°å§æ¯å•ä½æ—¶é—´åªèƒ½æ“ä½œ1ä¸ªåˆ†èº«å‘å³ç§»åŠ¨ä¸€æ ¼ã€‚æ˜¾ç„¶ï¼ŒäºŒå°å§éœ€è¦4n-4çš„æ—¶é—´ä½¿å¾—æ‰€æœ‰åˆ†èº«å¤„äºé“è·¯æœ€å³ç«¯ã€‚ </p><p>æˆ‘ä»¬å·²çŸ¥ä»å¼€å§‹4n-4æ—¶é—´å†…æ¯æ—¶åˆ»ï¼Œé“è·¯çš„æŸä¸€æ ¼å†…çš„å¼¹å¹•æ•°ã€‚å¯¹äºæ¯ä¸ªåˆ†èº«åˆ†åˆ«è®¡ç®—ï¼Œå¦‚æœåœ¨ç¬¬tæ—¶åˆ»,è¯¥åˆ†èº«ä½äºç¬¬iæ ¼ï¼Œé‚£ä¹ˆåˆ™ä¼šï¼š1.å—åˆ°è¯¥æ—¶åˆ»ç¬¬iæ ¼å†…å¼¹å¹•æ•°é‡çš„ä¼¤å®³ï¼Œç§°ä¸ºmissæ•°ï¼ˆæŒ‡èµ°ä½å¤±è¯¯çš„æ•°é‡ï¼‰ã€‚2.å¦‚æœè¯¥åˆ†èº«ä¸Šä¸€æ—¶åˆ»åœ¨ç¬¬i-1æ ¼ï¼Œå¾—åˆ°è¯¥æ—¶åˆ»i-1æ ¼å†…å¼¹å¹•æ•°é‡çš„åˆ†æ•°ï¼Œç§°ä¸ºgrazeæ•°ï¼ˆæŒ‡æ“¦å¼¹æ•°ï¼‰ã€‚ï¼ˆå¦‚æœè¯¥åˆ†èº«æ­¤å›åˆæ²¡æœ‰ç§»åŠ¨ï¼Œä¸è®¡ç®—æ“¦å¼¹æ•°ã€‚ï¼‰ </p><p>æ€»misså°±æ˜¯è¿™4n-4æ—¶é—´æ®µå†…æ‰€æœ‰åˆ†èº«æ‰€æœ‰missä¹‹å’Œï¼Œæ€»grazeæ•°æ˜¯è¿™4n-4æ—¶é—´æ®µå†…æ‰€æœ‰åˆ†æ•°çš„grazeæ•°ä¹‹å’Œã€‚ç°åœ¨æƒ³çŸ¥é“missæ•°æœ€å°çš„æƒ…å†µä¸‹ï¼Œgrazeæ•°æœ€å¤§ä¸ºå¤šå°‘ã€‚è¾“å‡ºè¿™ä¸ªmissæ•°å’Œgrazeæ•°ã€‚</p><h3 id="Input-2"><a href="#Input-2" class="headerlink" title="Input"></a>Input</h3><p>ç¬¬ä¸€è¡Œæ˜¯1ä¸ªæ­£æ•´æ•°nï¼Œä»£è¡¨é“è·¯é•¿åº¦ã€‚ </p><p>æ¥ä¸‹æ¥æœ‰4n-4è¡Œï¼Œæ¯è¡Œnä¸ªæ•´æ•°ï¼Œç¬¬iè¡Œç¬¬jä¸ªæ•°ä»£è¡¨åœ¨iæ—¶åˆ»ï¼ˆå¼€å§‹ä¸º0æ—¶åˆ»ï¼‰åœ¨ç¬¬jæ ¼å†…å—åˆ°çš„ä¼¤å®³ã€‚</p><h3 id="Output-2"><a href="#Output-2" class="headerlink" title="Output"></a>Output</h3><p>ä¸¤ä¸ªæ•´æ•°ï¼Œç”¨ç©ºæ ¼éš”å¼€ï¼Œåˆ†åˆ«ä»£è¡¨æœ€å°çš„missæ•°ï¼Œå’Œåœ¨missæ•°æœ€å°çš„æƒ…å†µä¸‹æœ€å¤§çš„graze æ•°ã€‚ </p><h3 id="Sample-Input-2"><a href="#Sample-Input-2" class="headerlink" title="Sample Input"></a>Sample Input</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">2</span><br><span class="line">1 2</span><br><span class="line">2 2</span><br><span class="line">3 2</span><br><span class="line">4 2</span><br></pre></td></tr></table></figure><h3 id="Sample-Output-2"><a href="#Sample-Output-2" class="headerlink" title="Sample Output"></a>Sample Output</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">30 10</span><br></pre></td></tr></table></figure><h3 id="Hint-2"><a href="#Hint-2" class="headerlink" title="Hint"></a>Hint</h3><p>ã€æ ·ä¾‹è§£é‡Š ã€‘</p><p> åªæœ‰ä¸€ç§èµ°æ³•ã€‚ </p><p> ç¬¬ä¸€å›åˆï¼šç¬¬ä¸€æ ¼3åˆ†èº«ï¼Œç¬¬äºŒæ ¼1åˆ†èº«ï¼Œmiss5ï¼Œgraze1ã€‚ </p><p> ç¬¬äºŒå›åˆï¼šç¬¬ä¸€æ ¼2åˆ†èº«ï¼Œç¬¬äºŒæ ¼2åˆ†èº«ï¼Œmiss8ï¼Œgraze2ã€‚ç¬¬ä¸‰å›åˆï¼šç¬¬ä¸€æ ¼1åˆ†èº«ï¼Œç¬¬äºŒæ ¼3åˆ†èº«ï¼Œmiss9ï¼Œgraze3ã€‚ </p><p>ç¬¬å››å›åˆï¼šç¬¬ä¸€æ ¼0åˆ†èº«ï¼Œç¬¬äºŒæ ¼4åˆ†èº«ï¼Œmiss8ï¼Œgraze4ã€‚ </p><p>ã€æ•°æ®çº¦å®š ã€‘</p><p> å…¶ä¸­30%æ•°æ®:n&lt;=3      å…¶ä¸­50%æ•°æ®:n&lt;=10 å…¶ä¸­70%æ•°æ®:n&lt;=30 </p><p>100%æ•°æ®:n&lt;=100,æ¯æ—¶åˆ»æ¯æ ¼ä¸­å¼¹å¹•æ•°å‡ä¸ºæ­£æ•°ä¸”å°äº1000 </p><h3 id="åˆ†æ-2"><a href="#åˆ†æ-2" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h3><blockquote><p><strong>30åˆ†åšæ³•ï¼šæœç´¢</strong></p></blockquote><p>æœ´ç´ çš„æœç´¢ç®—æ³•ï¼Œè€ƒè¯•æ—¶è¿˜æƒ³ç€å‰ªæä¼˜åŒ–ï¼Œç»“æœå‘ç°å‰ªäº†æå’Œæ²¡å‰ªæ²¡ä»€ä¹ˆåŒºåˆ«â€¦â€¦</p><blockquote><p><strong>100åˆ†åšæ³•ï¼šDP+å„ç§ä¼˜åŒ–</strong></p></blockquote><p><strong>1çº§ DP</strong></p><p>è®¾ $f[t][i][j][k][l]=(miss,\;graze)$ è¡¨ç¤ºåœ¨ $t$ æ—¶åˆ»ï¼Œå››ä¸ªåˆ†èº«ä½äº $i,\;j,\;k,\;l$ å››ä¸ªä½ç½®æ—¶çš„æœ€å° $miss$ å€¼ä»¥åŠæœ€å¤§ $graze$ å€¼ï¼ŒæŒ‰ç…§é¢˜æ„ $miss$ å€¼å°çš„ä¼˜å…ˆï¼Œè¿™ç‚¹å¯ä»¥åœ¨é‡è½½è¿ç®—ç¬¦æ—¶å®ç°ï¼Œç„¶åè½¬ç§»æ–¹ç¨‹ä¹Ÿæ¯”è¾ƒå¥½æƒ³ï¼š</p><p>è®¾ $cost[i]$ ä¸º $i$ ä½ç½®åœ¨å½“å‰æ—¶åˆ» $t$ çš„å¼¹å¹•æ•°é‡ï¼Œåˆ™ï¼š</p><p>$f[t][i][j][k][l]=min\begin{cases} f[t-1][i-1][j][k][l]+(cost[i+j+k+l],\;cost[i-1])\\f[t-1][i][j-1][k][l]+(cost[i+j+k+l],\;cost[j-1])\\f[t-1][i][j][k-1][l]+(cost[i+j+k+l],\;cost[k-1])\\f[t-1][i][j][k][l-1]+(cost[i+j+k+l],\;cost[l-1]) \end{cases}$</p><p>è¿™ä¸€ä¸ªè½¬ç§»æ–¹ç¨‹çš„æ§ä»¶å’Œæ—¶é—´å¤æ‚åº¦éƒ½è¾¾åˆ°äº† $O((4n-4)\times n^4)$ï¼Œå¯ä»¥è¿‡ 50% çš„æ•°æ®</p><p><strong>2çº§ DP</strong></p><p>ç”±äºæ¯æ—¶åˆ»åªèƒ½æ“ä½œä¸€ä¸ªåˆ†èº«å‘å‰ç§»åŠ¨ä¸€æ ¼ï¼Œæ‰€ä»¥ $t$ ä¹Ÿå°±æ˜¯æ‰€æœ‰åˆ†èº«çš„ä½ç½®æ€»å’Œï¼ˆè®¾ 0 ä¸ºèµ·ç‚¹ï¼Œn-1 ä¸ºç»ˆç‚¹ï¼‰ï¼Œé‚£ä¹ˆåªéœ€è¦æšä¸¾å‰ä¸‰ä¸ª $i,\;j,\;k$ å°±èƒ½ç¡®å®šå‰©ä¸‹çš„ $l$ ï¼Œå¤æ‚åº¦ä¸º  $O((4n-4)\times n^3)$ ï¼Œå¯ä»¥è¿‡æ‰ 70 pts</p><p><strong>3çº§DP</strong></p><p><strong>é¦–å…ˆï¼Œ$f[t]$ çš„çŠ¶æ€åªå’Œ $f[t-1]$ æœ‰å…³ï¼Œæ‰€ä»¥å¯ä»¥ç”¨æ»šåŠ¨æ•°ç»„ä¼˜åŒ–ï¼Œé™ä½ç©ºé—´å¤æ‚åº¦</strong></p><p><strong>å…¶æ¬¡ï¼Œè€ƒè™‘äº’æ¢æ¯ä¸ªåˆ†èº«çš„ä½ç½®ï¼Œæˆ‘ä»¬å‘ç°ç”±äºåˆ†èº«æ˜¯ä¸€æ ·çš„ï¼Œæ‰€ä»¥å°†ä»»ä¸€æ—¶åˆ»çš„åˆ†èº«éšæ„äº’æ¢ä½ç½®å¯¹è®¡ç®—çš„ç­”æ¡ˆæ¯«æ— å½±å“ï¼Œ</strong>äºæ˜¯å¯ä»¥è§„å®š $i&gt;j&gt;k&gt;l$ ï¼Œä»è€Œå‡å°‘æšä¸¾çš„çŠ¶æ€ï¼Œè¿‡ 100pts çš„æ•°æ®ç‚¹</p><h3 id="Codes-2"><a href="#Codes-2" class="headerlink" title="Codes"></a>Codes</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;ctime&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxn 125</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> t&gt;<span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">fcin</span><span class="params">(t &amp;x)</span></span>&#123;</span><br><span class="line"><span class="type">int</span> sign=<span class="number">1</span>; x=<span class="number">0</span>; <span class="type">char</span> op=<span class="built_in">getchar</span>();</span><br><span class="line"><span class="keyword">while</span>(op&lt;<span class="string">&#x27;0&#x27;</span>||op&gt;<span class="string">&#x27;9&#x27;</span>)&#123;<span class="keyword">if</span>(op==<span class="string">&#x27;-&#x27;</span>) sign=<span class="number">-1</span>;op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line"><span class="keyword">while</span>(op&gt;=<span class="string">&#x27;0&#x27;</span>&amp;&amp;op&lt;=<span class="string">&#x27;9&#x27;</span>)&#123;x=x*<span class="number">10</span>+(op<span class="number">-48</span>);op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line">x*=sign;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">node</span>&#123;</span><br><span class="line"><span class="type">int</span> miss,graze;</span><br><span class="line"><span class="type">bool</span> <span class="keyword">operator</span> &lt;(<span class="type">const</span> node &amp;x)<span class="type">const</span>&#123;</span><br><span class="line"><span class="keyword">if</span>(miss!=x.miss) <span class="keyword">return</span> miss&lt;x.miss;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">return</span> graze&gt;x.graze;</span><br><span class="line">&#125;</span><br><span class="line">node <span class="keyword">operator</span> +(<span class="type">const</span> node &amp;x)&#123;</span><br><span class="line"><span class="keyword">return</span> (node)&#123;miss+x.miss,graze+x.graze&#125;; </span><br><span class="line">&#125;</span><br><span class="line">node&amp; <span class="keyword">operator</span> +=(<span class="type">const</span> node &amp;x)&#123;</span><br><span class="line">miss+=x.miss;graze+=x.graze;</span><br><span class="line"><span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;f[<span class="number">2</span>][maxn][maxn][maxn];</span><br><span class="line"><span class="type">int</span> n,cost[maxn];</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">calc</span><span class="params">(node &amp;x,node y[maxn][maxn][maxn],<span class="type">int</span> p1,<span class="type">int</span> p2,<span class="type">int</span> p3,<span class="type">int</span> p4,<span class="type">int</span> delta)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(p1&lt;p2) <span class="built_in">swap</span>(p1,p2);</span><br><span class="line"><span class="keyword">if</span>(p2&lt;p3) <span class="built_in">swap</span>(p2,p3);</span><br><span class="line"><span class="keyword">if</span>(p3&lt;p4) <span class="built_in">swap</span>(p3,p4);</span><br><span class="line">node cur=y[p1][p2][p3];</span><br><span class="line">cur.graze+=delta;</span><br><span class="line"><span class="keyword">if</span>(cur.miss&lt;x.miss || (cur.miss==x.miss &amp;&amp; cur.graze&gt;x.graze)) x=cur;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;graze.in&quot;</span>,<span class="string">&quot;r&quot;</span>,stdin);</span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;graze.out&quot;</span>,<span class="string">&quot;w&quot;</span>,stdout);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"><span class="built_in">fcin</span>(n);</span><br><span class="line"><span class="type">int</span> curStat=<span class="number">1</span>;</span><br><span class="line"><span class="built_in">memset</span>(f[curStat],<span class="number">0x3f</span>,<span class="built_in">sizeof</span>(f[curStat]));</span><br><span class="line">f[<span class="number">1</span>][<span class="number">0</span>][<span class="number">0</span>][<span class="number">0</span>]=(node)&#123;<span class="number">0</span>,<span class="number">0</span>&#125;;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">4</span>*(n<span class="number">-1</span>);i++)&#123;</span><br><span class="line">curStat=!curStat;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> p=<span class="number">0</span>;p&lt;n;p++) <span class="built_in">fcin</span>(cost[p]);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> x=<span class="built_in">min</span>(n<span class="number">-1</span>,i);x&gt;=<span class="number">0</span>;x--)</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> y=<span class="built_in">min</span>(x,i-x);<span class="number">3</span>*y+x&gt;=i&amp;&amp;y&gt;=<span class="number">0</span>;y--)</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> z=<span class="built_in">min</span>(y,i-x-y);<span class="number">2</span>*z+y+x&gt;=i&amp;&amp;z&gt;=<span class="number">0</span>;z--)&#123;</span><br><span class="line"><span class="type">int</span> w=i-x-y-z;</span><br><span class="line">f[curStat][x][y][z]=(node)&#123;<span class="number">1</span>&lt;&lt;<span class="number">28</span>,<span class="number">1</span>&lt;&lt;<span class="number">28</span>&#125;;</span><br><span class="line"><span class="keyword">if</span>(x) <span class="built_in">calc</span>(f[curStat][x][y][z],f[<span class="number">1</span>-curStat],x<span class="number">-1</span>,y,z,w,cost[x<span class="number">-1</span>]);</span><br><span class="line"><span class="keyword">if</span>(y) <span class="built_in">calc</span>(f[curStat][x][y][z],f[<span class="number">1</span>-curStat],x,y<span class="number">-1</span>,z,w,cost[y<span class="number">-1</span>]);</span><br><span class="line"><span class="keyword">if</span>(z) <span class="built_in">calc</span>(f[curStat][x][y][z],f[<span class="number">1</span>-curStat],x,y,z<span class="number">-1</span>,w,cost[z<span class="number">-1</span>]);</span><br><span class="line"><span class="keyword">if</span>(w) <span class="built_in">calc</span>(f[curStat][x][y][z],f[<span class="number">1</span>-curStat],x,y,z,w<span class="number">-1</span>,cost[w<span class="number">-1</span>]);</span><br><span class="line">f[curStat][x][y][z].miss+=cost[x]+cost[y]+cost[z]+cost[w];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">node ans=f[curStat][n<span class="number">-1</span>][n<span class="number">-1</span>][n<span class="number">-1</span>];</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d %d&quot;</span>,ans.miss,ans.graze);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŠ¨æ€è§„åˆ’ </tag>
            
            <tag> å­—ç¬¦ä¸² </tag>
            
            <tag> SPFA </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>VB.NET | åœ¨çº¿è·å–æ­Œè¯æ–¹æ³•çš„å°å°  æ€»ç»“</title>
      <link href="/2019/09/13/2019-09-13-OLGetLRC/"/>
      <url>/2019/09/13/2019-09-13-OLGetLRC/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>ä¸Šæ¬¡çš„é¡¹ç›® <code>LRCEditor</code> å‘Šä¸€æ®µè½ä¹‹åï¼Œæœ€è¿‘åˆæƒ³åˆ°å¯¹å…¶è¿›è¡Œä¼˜åŒ–ï¼Œå…¶å®ä¹Ÿå°±æ˜¯æ·»åŠ ä¸€ä¸ªå¸¸ç”¨çš„åŠŸèƒ½ï¼š<strong>åœ¨çº¿æœç´¢æ­Œè¯</strong></p><p>åœ¨ <code>LRCEditor</code> ä¸­çš„ â€œå¸®åŠ©â€ é€‰é¡¹é‡Œé¢æœ‰æåˆ°å¦‚ä½•åœ¨ç½‘æ˜“äº‘éŸ³ä¹çš„åœ¨çº¿ç•Œé¢åˆ©ç”¨å¼€å‘è€…æ¨¡å¼è·å–æ­Œè¯æ–‡ä»¶å’Œç¿»è¯‘ï¼Œä½†æ˜¯æ­¤æ–¹æ³•æ“ä½œèµ·æ¥ä¼šæœ‰ä¸€å®šéš¾åº¦ï¼Œä¸åˆ©äºå°†æ¥å‡†å¤‡åšçš„ MusicPlayer çš„åŠŸèƒ½é›†æˆï¼Œ<strong>å› æ­¤æƒ³åˆ°é€šè¿‡ç¨‹åºè‡ªå·±è®¿é—®ç½‘ç»œè·å–æ­Œè¯å¹¶æ˜¾ç¤º</strong></p><p>åœ¨æˆ‘ä»¬å¹³å¸¸æµè§ˆçš„æ’­æ”¾å™¨ç½‘é¡µé‡Œé¢ï¼Œé€šå¸¸éƒ½å¯ä»¥çœ‹åˆ°æ­Œè¯ï¼Œæ­Œæ›²åç§°ï¼Œä½œè€…ä¿¡æ¯å’Œå°é¢ä¿¡æ¯ç­‰ç­‰ï¼Œç„¶è€Œè¦è®©ç¨‹åºä»ç½‘é¡µä¸­åƒäººä¸€æ ·æå–å‡ºè¿™äº›ä¿¡æ¯æ— ç–‘æ˜¯éå¸¸éš¾çš„ï¼Œå¦‚ä½•è®©è¿™äº›ä¿¡æ¯ä»¥ç¨‹åºèƒ½å¤Ÿç†è§£æˆ–è€…è§£æçš„æ ¼å¼ç›´æ¥å‘ˆç°å‘¢ï¼Œè¿™å°±è¦ä¾<strong>ç½‘é¡µAPIæ¥å®ç°äº†</strong></p><h2 id="å®ç°ï¼ˆè·å–æ­Œè¯ï¼‰"><a href="#å®ç°ï¼ˆè·å–æ­Œè¯ï¼‰" class="headerlink" title="å®ç°ï¼ˆè·å–æ­Œè¯ï¼‰"></a>å®ç°ï¼ˆè·å–æ­Œè¯ï¼‰</h2><h3 id="Step1"><a href="#Step1" class="headerlink" title="Step1"></a>Step1</h3><p>ä½¿ç”¨ç½‘æ˜“äº‘æä¾›çš„ APIï¼Œæ ¹æ®ç»™å®šçš„æ­Œæ›²åç§°ï¼ˆè®¾ä¸º Fadedï¼‰æœç´¢ç›¸åº”ä¿¡æ¯ï¼š<code>http://music.163.com/api/search/get?s=Faded&amp;limit=20&amp;type=1&amp;offset=0</code> ï¼Œå¿…éœ€å‚æ•°è¯´æ˜ï¼š</p><ul><li><code>http://music.163.com/api/search/get</code> APIæ¥å£ç½‘å€</li><li><code>s</code>ï¼šæ­Œæ›²åç§°ï¼Œä¸­æ–‡è¦è¿›è¡Œå­—ç¬¦ç¼–ç </li><li><code>limit</code>ï¼šè¿”å›ç»“æœçš„æ•°é‡</li><li><code>type</code>ï¼šæœç´¢ç±»å‹ï¼Œ1ä¸ºå•æ›²ï¼Œ10ä¸ºä¸“è¾‘ï¼Œ100ä¸ºæ­Œæ‰‹ï¼Œ1000æ­Œå•ï¼Œ1002ç”¨æˆ·</li><li><code>offset</code>ï¼šåç§»é‡ï¼Œç”¨äºç»“æœåˆ†é¡µè¿”å›</li></ul><p>åœ¨æµè§ˆå™¨åœ°å€æ è¾“å…¥è¿™ä¸ªç½‘å€åï¼Œå¯ä»¥çœ‹åˆ°è¿”å›äº†ä¸€å¨ä¿¡æ¯ï¼Œå¤§å¤šéƒ½æ˜¯å¦‚ä¸‹æ ¼å¼çš„ JSON ä»£ç ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span><span class="attr">&quot;id&quot;</span><span class="punctuation">:</span><span class="number">36990266</span><span class="punctuation">,</span><span class="attr">&quot;name&quot;</span><span class="punctuation">:</span><span class="string">&quot;Faded&quot;</span><span class="punctuation">,</span><span class="attr">&quot;artists&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span><span class="punctuation">&#123;</span><span class="attr">&quot;id&quot;</span><span class="punctuation">:</span><span class="number">1045123</span><span class="punctuation">,</span><span class="attr">&quot;name&quot;</span><span class="punctuation">:</span><span class="string">&quot;Alan Walker&quot;</span><span class="punctuation">,</span><span class="attr">&quot;picUrl&quot;</span><span class="punctuation">:</span><span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span><span class="attr">&quot;alias&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span><span class="attr">&quot;albumSize&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;picId&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;img1v1Url&quot;</span><span class="punctuation">:</span><span class="string">&quot;http://p2.music.126.net/6y-UleORITEDbvrOLV0Q8A==/5639395138885805.jpg&quot;</span><span class="punctuation">,</span><span class="attr">&quot;img1v1&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;trans&quot;</span><span class="punctuation">:</span><span class="literal"><span class="keyword">null</span></span><span class="punctuation">&#125;</span><span class="punctuation">,</span><span class="punctuation">&#123;</span><span class="attr">&quot;id&quot;</span><span class="punctuation">:</span><span class="number">1078390</span><span class="punctuation">,</span><span class="attr">&quot;name&quot;</span><span class="punctuation">:</span><span class="string">&quot;Iselin Solheim&quot;</span><span class="punctuation">,</span><span class="attr">&quot;picUrl&quot;</span><span class="punctuation">:</span><span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span><span class="attr">&quot;alias&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span><span class="attr">&quot;albumSize&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;picId&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;img1v1Url&quot;</span><span class="punctuation">:</span><span class="string">&quot;http://p2.music.126.net/6y-UleORITEDbvrOLV0Q8A==/5639395138885805.jpg&quot;</span><span class="punctuation">,</span><span class="attr">&quot;img1v1&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;trans&quot;</span><span class="punctuation">:</span><span class="literal"><span class="keyword">null</span></span><span class="punctuation">&#125;</span><span class="punctuation">]</span><span class="punctuation">,</span><span class="attr">&quot;album&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span><span class="attr">&quot;id&quot;</span><span class="punctuation">:</span><span class="number">3406843</span><span class="punctuation">,</span><span class="attr">&quot;name&quot;</span><span class="punctuation">:</span><span class="string">&quot;Faded&quot;</span><span class="punctuation">,</span><span class="attr">&quot;artist&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span><span class="attr">&quot;id&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;name&quot;</span><span class="punctuation">:</span><span class="string">&quot;&quot;</span><span class="punctuation">,</span><span class="attr">&quot;picUrl&quot;</span><span class="punctuation">:</span><span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span><span class="attr">&quot;alias&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span><span class="attr">&quot;albumSize&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;picId&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;img1v1Url&quot;</span><span class="punctuation">:</span><span class="string">&quot;http://p2.music.126.net/6y-UleORITEDbvrOLV0Q8A==/5639395138885805.jpg&quot;</span><span class="punctuation">,</span><span class="attr">&quot;img1v1&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;trans&quot;</span><span class="punctuation">:</span><span class="literal"><span class="keyword">null</span></span><span class="punctuation">&#125;</span><span class="punctuation">,</span><span class="attr">&quot;publishTime&quot;</span><span class="punctuation">:</span><span class="number">1448380800007</span><span class="punctuation">,</span><span class="attr">&quot;size&quot;</span><span class="punctuation">:</span><span class="number">4</span><span class="punctuation">,</span><span class="attr">&quot;copyrightId&quot;</span><span class="punctuation">:</span><span class="number">7001</span><span class="punctuation">,</span><span class="attr">&quot;status&quot;</span><span class="punctuation">:</span><span class="number">3</span><span class="punctuation">,</span><span class="attr">&quot;picId&quot;</span><span class="punctuation">:</span><span class="number">18277181788626198</span><span class="punctuation">,</span><span class="attr">&quot;mark&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">&#125;</span><span class="punctuation">,</span><span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span><span class="number">212626</span><span class="punctuation">,</span><span class="attr">&quot;copyrightId&quot;</span><span class="punctuation">:</span><span class="number">7001</span><span class="punctuation">,</span><span class="attr">&quot;status&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;alias&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span><span class="attr">&quot;rtype&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;ftype&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;mvid&quot;</span><span class="punctuation">:</span><span class="number">524116</span><span class="punctuation">,</span><span class="attr">&quot;fee&quot;</span><span class="punctuation">:</span><span class="number">8</span><span class="punctuation">,</span><span class="attr">&quot;rUrl&quot;</span><span class="punctuation">:</span><span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span><span class="attr">&quot;mark&quot;</span><span class="punctuation">:</span><span class="number">8192</span><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œç¬¬ä¸€ä¸ª <code>&quot;id&quot;</code> å°±æ˜¯è¯¥æ­Œæ›²åœ¨ç½‘æ˜“äº‘éŸ³ä¹çš„ç¼–å·ï¼Œè¿‡åçš„ä¿¡æ¯å¦‚è‹±æ–‡æ‰€ç¤ºï¼Œ<code>&quot;name&quot;</code> è¡¨ç¤ºæ­Œæ›²åï¼Œ<code>&quot;artists&quot;</code> ä¸­åˆ—å‡ºäº†å‚ä¸åˆ›ä½œçš„è‰ºæœ¯å®¶åç§°ï¼ˆå› ä¸ºå¯èƒ½ä¸æ­¢ä¸€ä¸ªï¼Œæ‰€ä»¥æ˜¯ä»¥æ•°ç»„çš„å½¢å¼è¿”å›çš„ï¼‰ï¼Œ<code>&quot;duration&quot;</code> è¡¨ç¤ºæ­Œæ›²æŒç»­çš„æ—¶é—´ï¼ˆå•ä½ä¸ºæ¯«ç§’ï¼‰ï¼Œè¿™ä¸€æ­¥çš„ä½œç”¨åªæ˜¯é€šè¿‡APIæœç´¢å‡ºæ­Œæ›²IDï¼Œä¸‹ä¸€æ­¥å°†å†æ¬¡é€šè¿‡APIå¾—åˆ°IDå¯¹åº”æ­Œæ›²çš„æ­Œè¯ä¿¡æ¯</p><h3 id="Step2"><a href="#Step2" class="headerlink" title="Step2"></a>Step2</h3><p>ä½¿ç”¨æ­¤ç½‘å€å¾—åˆ°æ­Œæ›²çš„æ­Œè¯ä¿¡æ¯ï¼š<code>http://music.163.com/api/song/lyric?os=pc&amp;id=36990266&amp;lv=-1&amp;kv=-1&amp;tv=-1</code></p><p>åœ°å€ä¸­é™¤äº† <code>id=</code> åé¢æ¥ä¸Šä¸Šä¸€æ­¥å¾—åˆ°çš„ ID å¤–ï¼Œå…¶ä»–éƒ¨åˆ†ä¸ç”¨ç®¡ï¼Œç„¶åå¯ä»¥çœ‹åˆ°ä»¥ä¸‹ JSON ä¿¡æ¯ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span><span class="attr">&quot;sgc&quot;</span><span class="punctuation">:</span><span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span><span class="attr">&quot;sfy&quot;</span><span class="punctuation">:</span><span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span><span class="attr">&quot;qfy&quot;</span><span class="punctuation">:</span><span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span><span class="attr">&quot;transUser&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span><span class="attr">&quot;id&quot;</span><span class="punctuation">:</span><span class="number">36990266</span><span class="punctuation">,</span><span class="attr">&quot;status&quot;</span><span class="punctuation">:</span><span class="number">99</span><span class="punctuation">,</span><span class="attr">&quot;demand&quot;</span><span class="punctuation">:</span><span class="number">1</span><span class="punctuation">,</span><span class="attr">&quot;userid&quot;</span><span class="punctuation">:</span><span class="number">1569973972</span><span class="punctuation">,</span><span class="attr">&quot;nickname&quot;</span><span class="punctuation">:</span><span class="string">&quot;â€¦â€¦ye&quot;</span><span class="punctuation">,</span><span class="attr">&quot;uptime&quot;</span><span class="punctuation">:</span><span class="number">1548668567698</span><span class="punctuation">&#125;</span><span class="punctuation">,</span><span class="attr">&quot;lyricUser&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span><span class="attr">&quot;id&quot;</span><span class="punctuation">:</span><span class="number">36990266</span><span class="punctuation">,</span><span class="attr">&quot;status&quot;</span><span class="punctuation">:</span><span class="number">99</span><span class="punctuation">,</span><span class="attr">&quot;demand&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;userid&quot;</span><span class="punctuation">:</span><span class="number">1569973972</span><span class="punctuation">,</span><span class="attr">&quot;nickname&quot;</span><span class="punctuation">:</span><span class="string">&quot;â€¦â€¦ye&quot;</span><span class="punctuation">,</span><span class="attr">&quot;uptime&quot;</span><span class="punctuation">:</span><span class="number">1547805089718</span><span class="punctuation">&#125;</span><span class="punctuation">,</span><span class="attr">&quot;lrc&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span><span class="attr">&quot;version&quot;</span><span class="punctuation">:</span><span class="number">16</span><span class="punctuation">,</span><span class="attr">&quot;lyric&quot;</span><span class="punctuation">:</span><span class="string">&quot;â€¦â€¦&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span><span class="attr">&quot;klyric&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span><span class="attr">&quot;version&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;lyric&quot;</span><span class="punctuation">:</span><span class="literal"><span class="keyword">null</span></span><span class="punctuation">&#125;</span><span class="punctuation">,</span><span class="attr">&quot;tlyric&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span><span class="attr">&quot;version&quot;</span><span class="punctuation">:</span><span class="number">10</span><span class="punctuation">,</span><span class="attr">&quot;lyric&quot;</span><span class="punctuation">:</span><span class="string">&quot;â€¦â€¦&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span><span class="attr">&quot;code&quot;</span><span class="punctuation">:</span><span class="number">200</span><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>è¯¦ç»†çš„æ­Œè¯éƒ¨åˆ†ç”¨ â€œâ€¦â€¦â€ ä»£æ›¿äº†ï¼Œè¿”å›ä¿¡æ¯ä¸­ <code>lrc</code> æ˜¯åŸç‰ˆæ­Œè¯ï¼Œè‹¥æ­Œæ›²éä¸­æ–‡ä¸”ç½‘æ˜“äº‘æœ‰ç¿»è¯‘ç‰ˆï¼Œåˆ™ <code>tlyric</code> ä¸ºæœ€æ–°ä¸€çš„ç¿»è¯‘ç‰ˆæ­Œè¯ï¼Œ<code>nickname</code> å’Œ <code>userid</code> æ˜¯ç¿»è¯‘è´¡çŒ®è€…çš„ç”¨æˆ·åå’Œç”¨æˆ·ID</p><p>åˆ°è¿™ä¸€æ­¥ï¼Œæˆ‘ä»¬å°±å·²ç»å–å¾—äº†å…³äºæ­Œè¯çš„è¾ƒä¸ºå®Œæ•´çš„ä¿¡æ¯ï¼Œä½†æ˜¯ç›®å‰ä¸ºæ­¢ï¼Œä¸Šè¿°æ­¥éª¤éƒ½æ˜¯éƒ½æ˜¯åœ¨æµè§ˆå™¨ä¸­å®Œæˆçš„ï¼Œè¦è®©ç¨‹åºåšåˆ°å¤Ÿåƒåœ¨æµè§ˆå™¨åœ°å€æ ä¸­è¾“å…¥ç½‘å€ç„¶åè·å–è¿”å›ä¿¡æ¯çš„è¯ï¼Œéœ€è¦é¢å¤–çš„ä»£ç </p><p>å¹¶ä¸”ï¼Œè¿”å›å­—ç¬¦ä¸²ä¹Ÿå¹¶ä¸æ˜¯åŸåŸæœ¬æœ¬çš„æ­Œè¯ï¼Œè€Œæ˜¯ä»¥ JSON æ ¼å¼ç¼–ç çš„è¿”å›ä¿¡æ¯ï¼Œä¸ºäº†å¤„ç† JSON æ ¼å¼çš„è¿”å›ä¿¡æ¯ï¼Œéœ€è¦ç”¨åˆ° <code>Newtonsoft.JSON</code></p><h3 id="Step3"><a href="#Step3" class="headerlink" title="Step3"></a>Step3</h3><p>ä»¥ä¸‹ä»£ç ç”¨äºä»ç»™å®šç½‘å€è¯»å–ä¿¡æ¯ï¼Œä»¥ <code>String</code> æ ¼å¼è¿”å›ï¼ŒåŸç†ä¸å¤šåšè§£é‡Šäº†</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Imports System.Security.Cryptography.X509Certificates</span><br><span class="line">Imports System.Net</span><br><span class="line">Public Function GetInfo(ByVal url As String) As String</span><br><span class="line">        Dim ret As String = <span class="string">&quot;&quot;</span></span><br><span class="line">        Dim HttpUrl As New Uri(url)</span><br><span class="line">        Dim HttpReq As HttpWebRequest = WebRequest.Create(HttpUrl)</span><br><span class="line">        Dim HttpRep As HttpWebResponse = HttpReq.GetResponse()</span><br><span class="line">        Dim resStream As IO.Stream = HttpRep.GetResponseStream()</span><br><span class="line">        Dim sr As New IO.StreamReader(resStream, System.Text.Encoding.UTF8)</span><br><span class="line">        ret = sr.ReadToEnd()</span><br><span class="line">        sr.Close()</span><br><span class="line">        Return ret</span><br><span class="line">    End Function</span><br></pre></td></tr></table></figure><p>è°ƒç”¨ä¾‹å­ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Dim ResPUrl As String = <span class="string">&quot;http://music.163.com/api/search/get?&amp;limit=20&amp;type=1&amp;offset=0&amp;s=&quot;</span> + Given <span class="string">&#x27;Given ç»™å®šæ­Œæ›²çš„åç§°</span></span><br><span class="line"><span class="string">Dim WebRet = GetInfo(ResPUrl)</span></span><br></pre></td></tr></table></figure><p>æ­¤æ—¶ï¼Œ<code>WebRet</code> å­˜å‚¨çš„å°±æ˜¯ Step1 é‡Œé¢çœ‹åˆ°çš„ä¸€å¤§å¨ä¸œè¥¿äº†ï¼Œæ¥ä¸‹æ¥ä½¿ç”¨ <code>Newtonsoft.JSON</code> æ¡†æ¶é‡Œçš„å‡½æ•°è§£æè¿™ä¸ªå­—ç¬¦ä¸²ï¼Œè·å¾—æˆ‘ä»¬æƒ³è¦çš„æ­Œæ›²ä¿¡æ¯</p><h3 id="Step4"><a href="#Step4" class="headerlink" title="Step4"></a>Step4</h3><p>å…ˆä» NuGet å¯¼å…¥ <code>Newtonsoft</code> çš„åŒ…ï¼Œç„¶å <code>Imports Newtonsoft.JSON</code></p><p>è¿™ä¸€æ­¥ä½¿ç”¨ <code>JsonConvert.DeserializeObject</code> å¯¹å­—ç¬¦ä¸²è¿›è¡Œååºåˆ—åŒ–å¹¶å­˜å‚¨å¯¹åº”æ ‡ç­¾çš„é”®å€¼</p><p>å…ˆçœ‹ä¸€ä¸‹å‡½æ•°å£°æ˜ï¼š<code>JsonConvert.DeserializeObject(Of T As Type)(Value As String) As Object</code>ï¼Œæ˜¯ä¸€ä¸ªå¾ˆå¥‡æ€ªçš„å‡½æ•°ï¼Œå¯ä»¥æŠŠå®ƒå’Œ C++ é‡Œé¢çš„ <code>Template&lt;Typename T&gt;</code> ç±»æ¯”ï¼Œå³å‰é¢ä¸€ä¸ªæ‹¬å·é‡Œé¢å†™çš„ <code>(Of T As Type)</code> é™å®šæ­¤å‡½æ•°è¿”å›çš„ç±»å‹ï¼Œåé¢ä¸€ä¸ªæ‹¬å·é‡Œé¢æ˜¯æˆ‘ä»¬è¦è¿›è¡Œååºåˆ—åŒ–æ“ä½œçš„ JSON å­—ç¬¦ä¸²</p><p><code>JsonConvert.DeserializeObject</code> å‡½æ•°æœ¬èº«è¿”å›çš„æ˜¯ <code>Object</code> ç±»å‹ï¼Œè¿™æ˜¯ <code>VB.NET</code> é‡Œé¢çš„æœ€åŸºæœ¬ç±»å‹ï¼Œå¯ä»¥æ´¾ç”Ÿå‡ºä»»æ„çš„ç±»å‹ï¼Œæ‹¥æœ‰ä»–ä»¬çš„ç»“æ„ï¼Œä½†æ˜¯ <code>Object</code> æœ¬èº«ä¸å…·æœ‰ä»»ä½•ç‰¹å®šçš„æˆå‘˜å˜é‡æˆ–è€…å‡½æ•°ï¼Œéœ€è¦å°†ç‰¹å®šçš„ç»“æ„ä½“ä¼ å…¥åˆ° <code>Object</code> æ‰èƒ½è®©å®ƒåƒå…¶ä»–ç±»æˆ–è€…ç»“æ„ä½“ä¸€æ ·ä½¿ç”¨</p><p><code>JsonConvert.DeserializeObject</code> å‡½æ•°è¿”å›çš„æ˜¯ä¸€ä¸ªç‰¹å®šçš„ç±»æˆ–è€…ç»“æ„ä½“ï¼Œå…¶ç»„æˆå’Œè¦æ“ä½œçš„ JSON å­—ç¬¦ä¸²ä¸€è‡´ï¼Œå³æ‹¥æœ‰ç›¸åŒçš„ç»“æ„å’Œå˜é‡åï¼Œä¾‹å¦‚ä»¥ä¸‹ JSON å­—ç¬¦ä¸²ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;Competitors&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;HQX&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;score&quot;</span><span class="punctuation">:</span> <span class="number">400</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;time&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0ms&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;WYX&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;score&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;time&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1000ms&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>ä»æ­¤å­—ç¬¦ä¸²è¿”å›çš„ç‰¹å®šç»“æ„ä½“æˆ–ç±»åº”å…·æœ‰å¦‚ä¸‹ç»„æˆå½¢å¼ï¼Œæ‰èƒ½è®©å‡½æ•°æ­£ç¡®è¿”å›ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Public Structure JRES</span><br><span class="line">Public Structure JRES_PERSON</span><br><span class="line">Public name,time As String</span><br><span class="line">Public score As Integer</span><br><span class="line">End Structure</span><br><span class="line">Public Competitors As List(Of JRES_PERSON)</span><br><span class="line"><span class="string">&#x27;è‹¥ JSON è¿”å›çš„å€¼ä¸å¸¦å¼•å·ï¼Œéœ€è¦ç”¨Integeræˆ–Longç±»å‹æ¥æ”¶</span></span><br><span class="line"><span class="string">End Structure</span></span><br></pre></td></tr></table></figure><p>éœ€è¦è¯´æ˜çš„æ˜¯ï¼Œç‰¹å®šç»“æ„ä½“ä¸ä¸€å®šè¦æœ‰å…¨éƒ¨ JSON é‡Œé¢çš„å˜é‡åç§°ï¼Œä½†æ˜¯ä¸èƒ½å¤šå‡º JSON é‡Œæ²¡æœ‰çš„å˜é‡åç§°ï¼Œä¾‹å¦‚åˆ å»æˆå‘˜ <code>name</code> ï¼Œå‡½æ•°ä»ç„¶æ­£ç¡®è¿”å›ï¼Œä½†æ˜¯è‹¥åŠ ä¸Šæˆå‘˜ <code>age</code> å°±ä¼šå‡ºç°é”™è¯¯ï¼ˆä¸ç®¡æ˜¯ä»€ä¹ˆç±»å‹ï¼‰ï¼Œå¯¹äº JSON è¿”å›å€¼ä¸­å¸¦æ–¹æ‹¬å·å£°æ˜çš„æ•°ç»„ç±»å‹ï¼Œéœ€è¦ç”¨åŒåä¸”æ‹¥æœ‰ä¸€è‡´çš„ç»“æ„çš„é›†åˆç±»å‹è¿›è¡Œæ¥æ”¶ï¼Œå¦‚ List æˆ– æ•°ç»„</p><p>ç°åœ¨ï¼Œåˆ†æä¸€ä¸‹ Step1 ä¸­JSONè¿”å›å€¼çš„ç»“æ„ï¼š</p><p><img src="https://s2.ax1x.com/2019/09/14/nyx5En.png" alt="pic"></p><p>æ•´ä¸ªç»“æ„éå¸¸çš„ç¹çè€Œä¸”å±‚æ¬¡å¾ˆæ·±ï¼Œå› æ­¤æˆ‘ä»¬åªæå–æƒ³è¦çš„å‡ ä¸ªä¿¡æ¯ï¼Œå¯ä»¥ç”¨å¦‚ä¸‹çš„ç‰¹å®šç»“æ„ä½“ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Public Structure JRES</span><br><span class="line">        Public code As Integer</span><br><span class="line">        Public Structure JRES_SONGS</span><br><span class="line">            Public songCount As Integer</span><br><span class="line">            Public Structure JRES_SINGLESONG</span><br><span class="line">                Public <span class="built_in">id</span>, duration As Integer</span><br><span class="line">                Public name As String</span><br><span class="line">                Public Structure JRES_SINGLESONG_ARTISTS</span><br><span class="line">                    Public name As String</span><br><span class="line">                End Structure</span><br><span class="line">                Public artists As List(Of JRES_SINGLESONG_ARTISTS)</span><br><span class="line">            End Structure</span><br><span class="line">            Public songs As List(Of JRES_SINGLESONG)</span><br><span class="line">        End Structure</span><br><span class="line">        Public result As JRES_SONGS</span><br><span class="line">    End Structure</span><br></pre></td></tr></table></figure><p>ç„¶åï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Public Res As JRES</span><br><span class="line">Res = JsonConvert.DeserializeObject(Of JRES)(TarGetResp)</span><br><span class="line"><span class="string">&#x27;TarGetResp æ˜¯ä¸Šä¸€æ­¥å–å¾—çš„ç½‘é¡µè¿”å›å€¼</span></span><br></pre></td></tr></table></figure><p>ç°åœ¨ï¼Œç»“æ„ä½“ <code>Res</code> é‡Œé¢å­˜å‚¨çš„å°±æ˜¯æˆ‘ä»¬å¸Œæœ›å¾—åˆ°çš„æ­Œè¯ä¿¡æ¯äº†ï¼Œå¦‚æœç”¨æˆ·è¿˜é™åˆ¶äº†è‰ºæœ¯å®¶åç§°ï¼Œæˆ‘ä»¬å¯ä»¥å°†ä¸ç¬¦åˆçš„é¡¹ä» List å½“ä¸­å»æ‰ï¼Œç„¶åé€‰å–ä¸€ä¸ªæ§ä»¶å‘ˆç°å¾—åˆ°çš„ä¿¡æ¯å§ï¼</p><h2 id="å®ç°ï¼ˆè·å–ä¸“è¾‘å°é¢ï¼‰"><a href="#å®ç°ï¼ˆè·å–ä¸“è¾‘å°é¢ï¼‰" class="headerlink" title="å®ç°ï¼ˆè·å–ä¸“è¾‘å°é¢ï¼‰"></a>å®ç°ï¼ˆè·å–ä¸“è¾‘å°é¢ï¼‰</h2><h3 id="Step-1"><a href="#Step-1" class="headerlink" title="Step 1"></a>Step 1</h3><p>åŒæ ·æ˜¯ç½‘æ˜“äº‘çš„ API ç½‘å€ï¼š<code>http://music.163.com/api/song/detail/?id=&#123;æ­Œæ›²id&#125;&amp;ids=[&#123;æ­Œæ›²id&#125;]</code></p><p>è·å–åˆ°å¦‚ä¸‹è¿”å›å€¼ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span><span class="attr">&quot;songs&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span><span class="punctuation">&#123;</span><span class="attr">&quot;name&quot;</span><span class="punctuation">:</span><span class="string">&quot;Umbrella (Matte Remix)&quot;</span><span class="punctuation">,</span><span class="attr">&quot;id&quot;</span><span class="punctuation">:</span><span class="number">518904426</span><span class="punctuation">,</span><span class="attr">&quot;position&quot;</span><span class="punctuation">:</span><span class="number">1</span><span class="punctuation">,</span><span class="attr">&quot;alias&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span><span class="attr">&quot;status&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;fee&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;copyrightId&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;disc&quot;</span><span class="punctuation">:</span><span class="string">&quot;01&quot;</span><span class="punctuation">,</span><span class="attr">&quot;no&quot;</span><span class="punctuation">:</span><span class="number">1</span><span class="punctuation">,</span><span class="attr">&quot;artists&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span><span class="punctuation">&#123;</span><span class="attr">&quot;name&quot;</span><span class="punctuation">:</span><span class="string">&quot;Matte&quot;</span><span class="punctuation">,</span><span class="attr">&quot;id&quot;</span><span class="punctuation">:</span><span class="number">12335355</span><span class="punctuation">,</span><span class="attr">&quot;picId&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;img1v1Id&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;briefDesc&quot;</span><span class="punctuation">:</span><span class="string">&quot;&quot;</span><span class="punctuation">,</span><span class="attr">&quot;picUrl&quot;</span><span class="punctuation">:</span><span class="string">&quot;http://p1.music.126.net/6y-UleORITEDbvrOLV0Q8A==/5639395138885805.jpg&quot;</span><span class="punctuation">,</span><span class="attr">&quot;img1v1Url&quot;</span><span class="punctuation">:</span><span class="string">&quot;http://p1.music.126.net/6y-UleORITEDbvrOLV0Q8A==/5639395138885805.jpg&quot;</span><span class="punctuation">,</span><span class="attr">&quot;albumSize&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;alias&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span><span class="attr">&quot;trans&quot;</span><span class="punctuation">:</span><span class="string">&quot;&quot;</span><span class="punctuation">,</span><span class="attr">&quot;musicSize&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;topicPerson&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">&#125;</span><span class="punctuation">,</span><span class="punctuation">&#123;</span><span class="attr">&quot;name&quot;</span><span class="punctuation">:</span><span class="string">&quot;Ember Island&quot;</span><span class="punctuation">,</span><span class="attr">&quot;id&quot;</span><span class="punctuation">:</span><span class="number">1100001</span><span class="punctuation">,</span><span class="attr">&quot;picId&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;img1v1Id&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;briefDesc&quot;</span><span class="punctuation">:</span><span class="string">&quot;&quot;</span><span class="punctuation">,</span><span class="attr">&quot;picUrl&quot;</span><span class="punctuation">:</span><span class="string">&quot;http://p1.music.126.net/6y-UleORITEDbvrOLV0Q8A==/5639395138885805.jpg&quot;</span><span class="punctuation">,</span><span class="attr">&quot;img1v1Url&quot;</span><span class="punctuation">:</span><span class="string">&quot;http://p1.music.126.net/6y-UleORITEDbvrOLV0Q8A==/5639395138885805.jpg&quot;</span><span class="punctuation">,</span><span class="attr">&quot;albumSize&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;alias&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span><span class="attr">&quot;trans&quot;</span><span class="punctuation">:</span><span class="string">&quot;&quot;</span><span class="punctuation">,</span><span class="attr">&quot;musicSize&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;topicPerson&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">&#125;</span><span class="punctuation">]</span><span class="punctuation">,</span><span class="attr">&quot;album&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span><span class="attr">&quot;name&quot;</span><span class="punctuation">:</span><span class="string">&quot;Umbrella (Matte Remix)&quot;</span><span class="punctuation">,</span><span class="attr">&quot;id&quot;</span><span class="punctuation">:</span><span class="number">36812124</span><span class="punctuation">,</span><span class="attr">&quot;type&quot;</span><span class="punctuation">:</span><span class="string">&quot;EP/Single&quot;</span><span class="punctuation">,</span><span class="attr">&quot;size&quot;</span><span class="punctuation">:</span><span class="number">1</span><span class="punctuation">,</span><span class="attr">&quot;picId&quot;</span><span class="punctuation">:</span><span class="number">109951163063843501</span><span class="punctuation">,</span><span class="attr">&quot;blurPicUrl&quot;</span><span class="punctuation">:</span><span class="string">&quot;http://p1.music.126.net/1LrtvH8EpKb5iHKR9qEU0Q==/109951163063843501.jpg&quot;</span><span class="punctuation">,</span><span class="attr">&quot;companyId&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;pic&quot;</span><span class="punctuation">:</span><span class="number">109951163063843501</span><span class="punctuation">,</span><span class="attr">&quot;picUrl&quot;</span><span class="punctuation">:</span><span class="string">&quot;http://p1.music.126.net/1LrtvH8EpKb5iHKR9qEU0Q==/109951163063843501.jpg&quot;</span><span class="punctuation">,</span><span class="attr">&quot;publishTime&quot;</span><span class="punctuation">:</span><span class="number">1510502400007</span><span class="punctuation">,</span><span class="attr">&quot;description&quot;</span><span class="punctuation">:</span><span class="string">&quot;&quot;</span><span class="punctuation">,</span><span class="attr">&quot;tags&quot;</span><span class="punctuation">:</span><span class="string">&quot;&quot;</span><span class="punctuation">,</span><span class="attr">&quot;company&quot;</span><span class="punctuation">:</span><span class="string">&quot;Self-Release&quot;</span><span class="punctuation">,</span><span class="attr">&quot;briefDesc&quot;</span><span class="punctuation">:</span><span class="string">&quot;&quot;</span><span class="punctuation">,</span><span class="attr">&quot;artist&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span><span class="attr">&quot;name&quot;</span><span class="punctuation">:</span><span class="string">&quot;&quot;</span><span class="punctuation">,</span><span class="attr">&quot;id&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;picId&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;img1v1Id&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;briefDesc&quot;</span><span class="punctuation">:</span><span class="string">&quot;&quot;</span><span class="punctuation">,</span><span class="attr">&quot;picUrl&quot;</span><span class="punctuation">:</span><span class="string">&quot;http://p1.music.126.net/6y-UleORITEDbvrOLV0Q8A==/5639395138885805.jpg&quot;</span><span class="punctuation">,</span><span class="attr">&quot;img1v1Url&quot;</span><span class="punctuation">:</span><span class="string">&quot;http://p1.music.126.net/6y-UleORITEDbvrOLV0Q8A==/5639395138885805.jpg&quot;</span><span class="punctuation">,</span><span class="attr">&quot;albumSize&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;alias&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span><span class="attr">&quot;trans&quot;</span><span class="punctuation">:</span><span class="string">&quot;&quot;</span><span class="punctuation">,</span><span class="attr">&quot;musicSize&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;topicPerson&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">&#125;</span><span class="punctuation">,</span><span class="attr">&quot;songs&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span><span class="attr">&quot;alias&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span><span class="attr">&quot;status&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;copyrightId&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;commentThreadId&quot;</span><span class="punctuation">:</span><span class="string">&quot;R_AL_3_36812124&quot;</span><span class="punctuation">,</span><span class="attr">&quot;artists&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span><span class="punctuation">&#123;</span><span class="attr">&quot;name&quot;</span><span class="punctuation">:</span><span class="string">&quot;Matte&quot;</span><span class="punctuation">,</span><span class="attr">&quot;id&quot;</span><span class="punctuation">:</span><span class="number">12335355</span><span class="punctuation">,</span><span class="attr">&quot;picId&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;img1v1Id&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;briefDesc&quot;</span><span class="punctuation">:</span><span class="string">&quot;&quot;</span><span class="punctuation">,</span><span class="attr">&quot;picUrl&quot;</span><span class="punctuation">:</span><span class="string">&quot;http://p1.music.126.net/6y-UleORITEDbvrOLV0Q8A==/5639395138885805.jpg&quot;</span><span class="punctuation">,</span><span class="attr">&quot;img1v1Url&quot;</span><span class="punctuation">:</span><span class="string">&quot;http://p1.music.126.net/6y-UleORITEDbvrOLV0Q8A==/5639395138885805.jpg&quot;</span><span class="punctuation">,</span><span class="attr">&quot;albumSize&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;alias&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span><span class="attr">&quot;trans&quot;</span><span class="punctuation">:</span><span class="string">&quot;&quot;</span><span class="punctuation">,</span><span class="attr">&quot;musicSize&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;topicPerson&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">&#125;</span><span class="punctuation">]</span><span class="punctuation">,</span><span class="attr">&quot;subType&quot;</span><span class="punctuation">:</span><span class="string">&quot;æ··éŸ³ç‰ˆ&quot;</span><span class="punctuation">,</span><span class="attr">&quot;transName&quot;</span><span class="punctuation">:</span><span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span><span class="attr">&quot;mark&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;picId_str&quot;</span><span class="punctuation">:</span><span class="string">&quot;109951163063843501&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span><span class="attr">&quot;starred&quot;</span><span class="punctuation">:</span><span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span><span class="attr">&quot;popularity&quot;</span><span class="punctuation">:</span><span class="number">100.0</span><span class="punctuation">,</span><span class="attr">&quot;score&quot;</span><span class="punctuation">:</span><span class="number">100</span><span class="punctuation">,</span><span class="attr">&quot;starredNum&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span><span class="number">285701</span><span class="punctuation">,</span><span class="attr">&quot;playedNum&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;dayPlays&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;hearTime&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;ringtone&quot;</span><span class="punctuation">:</span><span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span><span class="attr">&quot;crbt&quot;</span><span class="punctuation">:</span><span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span><span class="attr">&quot;audition&quot;</span><span class="punctuation">:</span><span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span><span class="attr">&quot;copyFrom&quot;</span><span class="punctuation">:</span><span class="string">&quot;&quot;</span><span class="punctuation">,</span><span class="attr">&quot;commentThreadId&quot;</span><span class="punctuation">:</span><span class="string">&quot;R_SO_4_518904426&quot;</span><span class="punctuation">,</span><span class="attr">&quot;rtUrl&quot;</span><span class="punctuation">:</span><span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span><span class="attr">&quot;ftype&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;rtUrls&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span><span class="attr">&quot;copyright&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;transName&quot;</span><span class="punctuation">:</span><span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span><span class="attr">&quot;sign&quot;</span><span class="punctuation">:</span><span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span><span class="attr">&quot;mark&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;hMusic&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span><span class="attr">&quot;name&quot;</span><span class="punctuation">:</span><span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span><span class="attr">&quot;id&quot;</span><span class="punctuation">:</span><span class="number">1387911675</span><span class="punctuation">,</span><span class="attr">&quot;size&quot;</span><span class="punctuation">:</span><span class="number">11430182</span><span class="punctuation">,</span><span class="attr">&quot;extension&quot;</span><span class="punctuation">:</span><span class="string">&quot;mp3&quot;</span><span class="punctuation">,</span><span class="attr">&quot;sr&quot;</span><span class="punctuation">:</span><span class="number">44100</span><span class="punctuation">,</span><span class="attr">&quot;dfsId&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;bitrate&quot;</span><span class="punctuation">:</span><span class="number">320000</span><span class="punctuation">,</span><span class="attr">&quot;playTime&quot;</span><span class="punctuation">:</span><span class="number">285701</span><span class="punctuation">,</span><span class="attr">&quot;volumeDelta&quot;</span><span class="punctuation">:</span><span class="number">-19400.0</span><span class="punctuation">&#125;</span><span class="punctuation">,</span><span class="attr">&quot;mMusic&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span><span class="attr">&quot;name&quot;</span><span class="punctuation">:</span><span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span><span class="attr">&quot;id&quot;</span><span class="punctuation">:</span><span class="number">1387911676</span><span class="punctuation">,</span><span class="attr">&quot;size&quot;</span><span class="punctuation">:</span><span class="number">6858127</span><span class="punctuation">,</span><span class="attr">&quot;extension&quot;</span><span class="punctuation">:</span><span class="string">&quot;mp3&quot;</span><span class="punctuation">,</span><span class="attr">&quot;sr&quot;</span><span class="punctuation">:</span><span class="number">44100</span><span class="punctuation">,</span><span class="attr">&quot;dfsId&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;bitrate&quot;</span><span class="punctuation">:</span><span class="number">192000</span><span class="punctuation">,</span><span class="attr">&quot;playTime&quot;</span><span class="punctuation">:</span><span class="number">285701</span><span class="punctuation">,</span><span class="attr">&quot;volumeDelta&quot;</span><span class="punctuation">:</span><span class="number">-16600.0</span><span class="punctuation">&#125;</span><span class="punctuation">,</span><span class="attr">&quot;lMusic&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span><span class="attr">&quot;name&quot;</span><span class="punctuation">:</span><span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span><span class="attr">&quot;id&quot;</span><span class="punctuation">:</span><span class="number">1387911677</span><span class="punctuation">,</span><span class="attr">&quot;size&quot;</span><span class="punctuation">:</span><span class="number">4572099</span><span class="punctuation">,</span><span class="attr">&quot;extension&quot;</span><span class="punctuation">:</span><span class="string">&quot;mp3&quot;</span><span class="punctuation">,</span><span class="attr">&quot;sr&quot;</span><span class="punctuation">:</span><span class="number">44100</span><span class="punctuation">,</span><span class="attr">&quot;dfsId&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;bitrate&quot;</span><span class="punctuation">:</span><span class="number">128000</span><span class="punctuation">,</span><span class="attr">&quot;playTime&quot;</span><span class="punctuation">:</span><span class="number">285701</span><span class="punctuation">,</span><span class="attr">&quot;volumeDelta&quot;</span><span class="punctuation">:</span><span class="number">-14700.0</span><span class="punctuation">&#125;</span><span class="punctuation">,</span><span class="attr">&quot;bMusic&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span><span class="attr">&quot;name&quot;</span><span class="punctuation">:</span><span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span><span class="attr">&quot;id&quot;</span><span class="punctuation">:</span><span class="number">1387911677</span><span class="punctuation">,</span><span class="attr">&quot;size&quot;</span><span class="punctuation">:</span><span class="number">4572099</span><span class="punctuation">,</span><span class="attr">&quot;extension&quot;</span><span class="punctuation">:</span><span class="string">&quot;mp3&quot;</span><span class="punctuation">,</span><span class="attr">&quot;sr&quot;</span><span class="punctuation">:</span><span class="number">44100</span><span class="punctuation">,</span><span class="attr">&quot;dfsId&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;bitrate&quot;</span><span class="punctuation">:</span><span class="number">128000</span><span class="punctuation">,</span><span class="attr">&quot;playTime&quot;</span><span class="punctuation">:</span><span class="number">285701</span><span class="punctuation">,</span><span class="attr">&quot;volumeDelta&quot;</span><span class="punctuation">:</span><span class="number">-14700.0</span><span class="punctuation">&#125;</span><span class="punctuation">,</span><span class="attr">&quot;mvid&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;rtype&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;rurl&quot;</span><span class="punctuation">:</span><span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span><span class="attr">&quot;mp3Url&quot;</span><span class="punctuation">:</span><span class="literal"><span class="keyword">null</span></span><span class="punctuation">&#125;</span><span class="punctuation">]</span><span class="punctuation">,</span><span class="attr">&quot;equalizers&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span><span class="attr">&quot;code&quot;</span><span class="punctuation">:</span><span class="number">200</span><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>è¿™ä¸ª JSON è¿”å›å€¼çš„ç»“æ„å’Œä¸Šé¢æåˆ°çš„è·å–æ­Œè¯æ—¶å€™çš„è¿”å›å€¼ç»“æ„ç›¸ä¼¼ï¼Œä½†æ˜¯æ²¡æœ‰æœ€å¤–å±‚çš„ <code>result</code> ï¼Œæ‰€ä»¥è¿˜æ˜¯éœ€è¦å†å†™ä¸€ä¸ªç»“æ„ä½“æ¥æ”¶ï¼Œå¦‚æœç”¨ä¸Šè¿°è·å–æ­Œè¯çš„ç»“æ„ä½“æ¥æ”¶ï¼Œå…¶ <code>songs</code> ä¼šä¸º <code>nothing</code></p><p>æˆåŠŸæ¥æ”¶æ•°æ®åï¼Œ<code>songs(0).album.picurl</code> å°±æ˜¯ä¸“è¾‘å°é¢å›¾ç‰‡çš„ç½‘å€</p><h3 id="Step-2"><a href="#Step-2" class="headerlink" title="Step 2"></a>Step 2</h3><p>å¾—åˆ°ç½‘å€åï¼Œæ³¨æ„åˆ°è¿™æ¬¡çš„ç½‘å€è¿”å›çš„ä¸æ˜¯çº¯å­—ç¬¦ä¸²è€Œæ˜¯æ–‡ä»¶ï¼Œæ‰€ä»¥ä¸èƒ½å†ç”¨åƒè·å–æ­Œè¯çš„ <code>GetResponse</code> çš„æ–¹æ³•å¾—åˆ°å›¾ç‰‡äº†ï¼Œæ­¤æ—¶æˆ‘ä»¬å¯ä»¥ç”¨ .NET è‡ªå¸¦çš„ HTTP ä¸‹è½½å™¨ <code>WebClint</code> å®Œæˆæ“ä½œ</p><p><code>WebClint</code> çš„ä¸‹è½½æ“ä½œéƒ½æ˜¯é»˜è®¤å¼‚æ­¥æ‰§è¡Œçš„ï¼Œä¸ä¼šé€ æˆä¸»çª—ä½“æ­»é”çš„ç°è±¡ï¼Œä½†æ˜¯ <code>WebClint</code> ä¸åœ¨æ§ä»¶ç®±é‡Œï¼Œä¸èƒ½å¯è§†åŒ–å¯¹å…¶è§¦å‘äº‹ä»¶è¿›è¡Œå‡½æ•°ç»‘å®šï¼Œå› æ­¤æˆ‘ä»¬ç”¨ <code>AddHandler</code> æ‰‹åŠ¨ç»‘å®šå‡ ä¸ªå‡½æ•°ï¼Œé¦–å…ˆï¼Œè¯·æ±‚ä¸‹è½½çš„æ“ä½œä¸ºï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Dim <span class="built_in">wc</span> As WebClint</span><br><span class="line">wc.DownloadFileAsync(TargetUrl, TargetFileName)</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ <code>TargetFileName</code> æ˜¯ä¸‹è½½æ–‡ä»¶ä¿å­˜åˆ°æœ¬åœ°æ—¶çš„æ–‡ä»¶åï¼Œç„¶åæˆ‘ä»¬ç»™ä¸¤ä¸ªè§¦å‘äº‹ä»¶ç»‘å®šå‡½æ•°</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">AddHandler wc.DownloadProgressChanged, AddressOf ShowDownProcess</span><br><span class="line">AddHandler wc.DownloadFileCompleted, AddressOf DownloadComplete</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ <code>DownloadProcessChanged</code> åœ¨ä¸‹è½½è¿›åº¦æ”¹å˜æ—¶è§¦å‘ï¼Œ<code>DownloadFileCompleted</code> åœ¨æ–‡ä»¶ä¸‹è½½å®Œæˆåè§¦å‘ï¼Œåœ¨å¯¹åº”çš„å‡½æ•° <code>ShowDownProcess</code> é‡Œå¯ä»¥ä½¿ç”¨ <code>ProcessBar</code> æ§ä»¶ç›´è§‚æ˜¾ç¤ºä¸‹è½½è¿›åº¦ï¼Œä¸‹è½½å®Œæˆå <code>Process.Start</code> å¯åŠ¨æ–‡ä»¶</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Public Sub ShowDownProcess(ByVal sender As Object, ByVal e As System.Net.DownloadProgressChangedEventArgs)</span><br><span class="line">        pb1.Value = e.ProgressPercentage</span><br><span class="line">        Lpro.Text = <span class="string">&quot;å·²å®Œæˆï¼š&quot;</span> + CStr(e.ProgressPercentage) + <span class="string">&quot; / &quot;</span> + <span class="string">&quot;100&quot;</span></span><br><span class="line">    End Sub</span><br><span class="line">    Public Sub DownloadComplete(ByVal sender As Object, ByVal e As System.ComponentModel.AsyncCompletedEventArgs)</span><br><span class="line">        Process.Start(TargetFileName)</span><br><span class="line">        Me.Close()</span><br><span class="line">    End Sub</span><br></pre></td></tr></table></figure><p>è¿™ä¸€æ­¥å¯ä»¥å•ç‹¬ç”¨ä¸€ä¸ªçª—ä½“æ¥è§£å†³ï¼Œä½¿å¾—ç¨‹åºæ›´ç›´è§‚</p><h2 id="å®ç°ï¼ˆè·å–mp3æ–‡ä»¶ï¼‰"><a href="#å®ç°ï¼ˆè·å–mp3æ–‡ä»¶ï¼‰" class="headerlink" title="å®ç°ï¼ˆè·å–mp3æ–‡ä»¶ï¼‰"></a>å®ç°ï¼ˆè·å–mp3æ–‡ä»¶ï¼‰</h2><h3 id="Step1-1"><a href="#Step1-1" class="headerlink" title="Step1"></a>Step1</h3><p>APIç½‘å€ä¸ºï¼š<code>http://music.163.com/song/media/outer/url?id=&#123;æ­Œæ›²id&#125;</code></p><p>æ‰“å¼€è¿™ä¸ªç½‘å€ä¼šå¾—åˆ°ä¸€ä¸ªå¯ä»¥ç›´æ¥ä¸‹è½½çš„ mp3 æ–‡ä»¶ï¼Œç„¶åç›´æ¥ä½¿ç”¨ä¸Šé¢æåˆ°çš„ <code>WebClint</code> ä¸‹è½½å³å¯</p><h3 id="é™„ï¼šçª—ä½“ä»£ç ï¼ˆä¸‹è½½ï¼‰"><a href="#é™„ï¼šçª—ä½“ä»£ç ï¼ˆä¸‹è½½ï¼‰" class="headerlink" title="é™„ï¼šçª—ä½“ä»£ç ï¼ˆä¸‹è½½ï¼‰"></a>é™„ï¼šçª—ä½“ä»£ç ï¼ˆä¸‹è½½ï¼‰</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">Option Explicit On</span><br><span class="line">Imports System.Security.Cryptography.X509Certificates</span><br><span class="line">Imports Newtonsoft.Json</span><br><span class="line">Imports System.Net</span><br><span class="line">Imports System.Diagnostics</span><br><span class="line">Public Class Donw</span><br><span class="line">    Public <span class="built_in">wc</span> As WebClient</span><br><span class="line">    Public TargetUrl As Uri</span><br><span class="line">    Public TargetFileName As String</span><br><span class="line">    Public Sub callDialog(songname As String, songart As String, songid As Integer)</span><br><span class="line">        TargetUrl = New Uri(<span class="string">&quot;http://music.163.com/song/media/outer/url?id=&quot;</span> + CStr(songid) + <span class="string">&quot;.mp3&quot;</span>)</span><br><span class="line">        TargetFileName = songname + <span class="string">&quot; - &quot;</span> + songart + <span class="string">&quot;.mp3&quot;</span></span><br><span class="line">        Ltitle.Text = <span class="string">&quot;ä¸‹è½½æ­Œè¯ï¼š&quot;</span> + TargetFileName</span><br><span class="line">        pb1.Value = 0</span><br><span class="line">        <span class="built_in">wc</span> = New WebClient()</span><br><span class="line">        AddHandler wc.DownloadProgressChanged, AddressOf ShowDownProcess</span><br><span class="line">        AddHandler wc.DownloadFileCompleted, AddressOf DownloadComplete</span><br><span class="line">        Me.ShowDialog()</span><br><span class="line">    End Sub</span><br><span class="line">    Public Sub callDialog_PIC(songname As String, songart As String, picurl As String)</span><br><span class="line">        TargetUrl = New Uri(picurl)</span><br><span class="line">        TargetFileName = songname + <span class="string">&quot; - &quot;</span> + songart + <span class="string">&quot;.png&quot;</span></span><br><span class="line">        Ltitle.Text = <span class="string">&quot;ä¸‹è½½ä¸“è¾‘å›¾ç‰‡ï¼š&quot;</span> + TargetFileName</span><br><span class="line">        pb1.Value = 0</span><br><span class="line">        <span class="built_in">wc</span> = New WebClient()</span><br><span class="line">        AddHandler wc.DownloadProgressChanged, AddressOf ShowDownProcess</span><br><span class="line">        AddHandler wc.DownloadFileCompleted, AddressOf DownloadComplete</span><br><span class="line">        Me.ShowDialog()</span><br><span class="line">    End Sub</span><br><span class="line">    Public Sub ShowDownProcess(ByVal sender As Object, ByVal e As System.Net.DownloadProgressChangedEventArgs)</span><br><span class="line">        pb1.Value = e.ProgressPercentage</span><br><span class="line">        Lpro.Text = <span class="string">&quot;å·²å®Œæˆï¼š&quot;</span> + CStr(e.ProgressPercentage) + <span class="string">&quot; / &quot;</span> + <span class="string">&quot;100&quot;</span></span><br><span class="line">    End Sub</span><br><span class="line">    Public Sub DownloadComplete(ByVal sender As Object, ByVal e As System.ComponentModel.AsyncCompletedEventArgs)</span><br><span class="line">        Process.Start(TargetFileName)</span><br><span class="line">        Me.Close()</span><br><span class="line">    End Sub</span><br><span class="line"></span><br><span class="line">    Private Sub Donw_Load(sender As Object, e As EventArgs) Handles MyBase.Load</span><br><span class="line">        wc.DownloadFileAsync(TargetUrl, TargetFileName)</span><br><span class="line">    End Sub</span><br><span class="line"></span><br><span class="line">    Private Sub Donw_FormClosing(sender As Object, e As FormClosingEventArgs) Handles MyBase.FormClosing</span><br><span class="line">        If Not wc.IsBusy Then wc.CancelAsync()</span><br><span class="line">    End Sub</span><br><span class="line">End Class</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> VB.NET </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŠ¨æ€è§„åˆ’ | çº¿æ®µæ ‘ | äºŒåˆ† | æ¨¡æ‹Ÿ  \ | 20190824è€ƒè¯•è§£é¢˜æŠ¥å‘Š</title>
      <link href="/2019/08/24/2019-08-24-0824%E8%80%83%E8%AF%95/"/>
      <url>/2019/08/24/2019-08-24-0824%E8%80%83%E8%AF%95/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><h2 id="é¢˜ç›®é™åˆ¶ä¸€è§ˆ"><a href="#é¢˜ç›®é™åˆ¶ä¸€è§ˆ" class="headerlink" title="é¢˜ç›®é™åˆ¶ä¸€è§ˆ"></a>é¢˜ç›®é™åˆ¶ä¸€è§ˆ</h2><div class="table-container"><table><thead><tr><th style="text-align:center">é¢˜ç›®</th><th style="text-align:center">æ—¶é—´é™åˆ¶</th><th style="text-align:center">ç©ºé—´é™åˆ¶</th></tr></thead><tbody><tr><td style="text-align:center">1. agent</td><td style="text-align:center">1000 MS</td><td style="text-align:center">512 MB</td></tr><tr><td style="text-align:center">2. earth</td><td style="text-align:center">1000 MS</td><td style="text-align:center">512 MB</td></tr><tr><td style="text-align:center">3. aurora</td><td style="text-align:center">1000 MS</td><td style="text-align:center">512 MB</td></tr></tbody></table></div><h2 id="1-å½©è™¹ï¼ˆrainbow-cppï¼‰"><a href="#1-å½©è™¹ï¼ˆrainbow-cppï¼‰" class="headerlink" title="1. å½©è™¹ï¼ˆrainbow.cppï¼‰"></a>1. å½©è™¹ï¼ˆrainbow.cppï¼‰</h2><h3 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h3><p>æ¢é™©é˜Ÿå‘˜ä»¬è·Ÿéšä¸¤ä½æŠ¤æ³•æ¥åˆ°äº†ä¸ƒè‰²è™¹å‰ã€‚ä¸ƒè‰²è™¹ï¼Œå°±æ˜¯å¹³é¢ç›´è§’åæ ‡ç³»ä¸­èµ¤æ©™é»„ç»¿é’è“ç´«ä¸ƒä¸ªåŠåœ†ï¼Œç¬¬iåº§(1&lt;=i&lt;=7)åŠåœ†å½¢å½©è™¹çš„åœ†å¿ƒæ˜¯(xi,0)ï¼ŒåŠå¾„æ˜¯riï¼ŒåŠåœ†ä¸Šæ‰€æœ‰ç‚¹çš„çºµåæ ‡å‡ä¸ºéè´Ÿæ•°ã€‚æ¢é™©é˜Ÿå‘˜å¯ä»¥çœ‹åšä¸€æ¡ç«–ç›´çš„ã€é•¿åº¦ç­‰äºèº«é«˜çš„çº¿æ®µï¼Œçº¿æ®µçš„åº•ç«¯çºµåæ ‡ä¸º0ï¼Œæœ€é«˜çš„ä¸€ä½æ¢é™©é˜Ÿå‘˜çš„èº«é«˜ä¸ºhã€‚</p><p>ç°åœ¨æ¢é™©é˜Ÿå‘˜ä»¬è¦ä»(0,0)åˆ°è¾¾(x0,0)ï¼Œç©¿è¶Šå½©è™¹çš„è¿‡ç¨‹ä¸­ï¼Œæ¢é™©é˜Ÿå‘˜çš„æ•´ä¸ªèº«ä½“å¿…é¡»å§‹ç»ˆåœ¨è‡³å°‘ä¸€ä¸ªåŠåœ†å½¢å½©è™¹çš„å†…éƒ¨ã€‚ç”±äºå½©è™¹çš„åŠå¾„riå¯èƒ½å¤ªå°äº†ï¼Œä¸è¶³ä»¥æ»¡è¶³è¿™ä¸ªæ¡ä»¶ï¼Œå› æ­¤ä¸¤ä½æŠ¤æ³•å†³å®šå¸®åŠ©ä»–ä»¬æŠŠæ‰€æœ‰å½©è™¹çš„åŠå¾„éƒ½å¢å¤§ä¸€ä¸ªéè´Ÿå®æ•°rã€‚æ¢é™©é˜Ÿå‘˜ä»¬æƒ³çŸ¥é“ï¼Œræœ€å°æ˜¯å¤šå°‘å‘¢ï¼Ÿ</p><h3 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h3><p>ç¬¬ä¸€è¡Œä¸¤ä¸ªå®æ•° hã€x0,è¡¨ç¤ºèº«é«˜å’Œç›®çš„åœ°æ¨ªåæ ‡ã€‚ æ¥ä¸‹æ¥ä¸ƒè¡Œæ¯è¡Œä¸¤ä¸ªå®æ•° xiã€ri,è¡¨ç¤ºä¸ƒåº§åŠåœ†å½¢å½©è™¹çš„åœ†å¿ƒå’ŒåŠå¾„ã€‚</p><h3 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h3><p>è¾“å‡ºæœ€å°çš„ r,å››èˆäº”å…¥ä¿ç•™ 2 ä½å°æ•°ã€‚</p><h3 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">4.0 36.0</span><br><span class="line">0.0 4.0</span><br><span class="line">6.0 4.0</span><br><span class="line">12.0 4.0</span><br><span class="line">18.0 4.0</span><br><span class="line">24.0 4.0</span><br><span class="line">30.0 4.0</span><br><span class="line">36.0 4.0</span><br></pre></td></tr></table></figure><h3 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.00</span><br></pre></td></tr></table></figure><h3 id="Hint"><a href="#Hint" class="headerlink" title="Hint"></a>Hint</h3><p>å¯¹äº 100% çš„æ•°æ®,æ»¡è¶³ 0&lt;=xi,x0&lt;=10000,0&lt;h&lt;100ã€‚</p><h3 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h3><p>ç±»ä¼¼äº <strong>å–·æ°´æ± é—®é¢˜</strong> çš„è§£æ³•ï¼Œå³ <strong>äºŒåˆ† + åŒºé—´è¦†ç›–é—®é¢˜</strong></p><p>å¯¹äºæ¯ä¸ªå½©è™¹åŠåœ†ï¼Œæ¢é™©é˜Ÿèƒ½å®‰å…¨èµ°è¿‡çš„ç©ºé—´å°±æ˜¯åŠåœ†ä¸ $y=h$ è¿™ä¸€æ¡ç›´çº¿çš„ä¸¤ä¸ªäº¤ç‚¹ä¹‹é—´çš„çŸ©å½¢éƒ¨åˆ†ï¼Œè€Œè¿™ä¸¤ä¸ªäº¤ç‚¹å¾ˆå¥½æ±‚å‡º</p><p>å¯¹äºä¸€ä¸ªåœ†å¿ƒä¸º $(x_0ï¼Œ0)$ï¼ŒåŠå¾„ä¸º $r$ çš„åŠåœ†ï¼Œæœ‰ $h^2+dx^2=r^2$ï¼Œé‚£ä¹ˆ $dx=\sqrt{r^2-h^2}$ ï¼Œä¸¤ç‚¹æ¨ªåæ ‡åˆ†åˆ«ä¸º $x_0-dx$ å’Œ $x_0+dx$ï¼Œå¯¹äºå’Œ $y=h$ ç›´çº¿æœ‰äº¤ç‚¹çš„åŠåœ†ï¼ŒæŠŠè¿™äº›äº¤ç‚¹ä¿å­˜ä¸ºåŒºé—´ï¼Œç„¶ååˆ¤æ–­è¿™äº›åŒºé—´èƒ½ä¸èƒ½è¦†ç›– $[0ï¼Œx_0]$ï¼Œç„¶åå®æ•°åŸŸä¸ŠäºŒåˆ†çŒœç­”æ¡ˆå³å¯</p><h3 id="Codes"><a href="#Codes" class="headerlink" title="Codes"></a>Codes</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> mid ((L+R)/2.0)</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="type">double</span>,<span class="type">double</span>&gt; pr;</span><br><span class="line"><span class="type">const</span> <span class="type">double</span> inf=<span class="number">2147483647.00</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">double</span> eps=<span class="number">1e-8</span>;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">node</span>&#123;</span><br><span class="line"><span class="type">double</span> x,r;</span><br><span class="line"><span class="type">bool</span> <span class="keyword">operator</span> &lt;(<span class="type">const</span> node &amp;o)<span class="type">const</span>&#123;</span><br><span class="line"><span class="keyword">if</span>(x!=o.x) <span class="keyword">return</span> x&lt;o.x;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">return</span> r&lt;o.r;</span><br><span class="line">&#125;</span><br><span class="line">&#125;s[<span class="number">9</span>];<span class="type">double</span> h,x0;</span><br><span class="line"><span class="function">pr <span class="title">getseq</span><span class="params">(<span class="type">double</span> cx,<span class="type">double</span> cr,<span class="type">double</span> py)</span></span>&#123;</span><br><span class="line"><span class="type">double</span> dx=<span class="built_in">sqrt</span>(<span class="built_in">pow</span>(cr,<span class="number">2</span>)-<span class="built_in">pow</span>(py,<span class="number">2</span>));</span><br><span class="line"><span class="keyword">return</span> <span class="built_in">make_pair</span>(cx-dx,cx+dx);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">check</span><span class="params">(<span class="type">double</span> d)</span></span>&#123;</span><br><span class="line">pr dots[<span class="number">9</span>];<span class="type">int</span> cnt=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">7</span>;i++)&#123;</span><br><span class="line"><span class="keyword">if</span>(s[i].r+d&gt;=h) dots[++cnt]=<span class="built_in">getseq</span>(s[i].x,s[i].r+d,h);</span><br><span class="line">&#125; <span class="built_in">sort</span>(dots+<span class="number">1</span>,dots+cnt+<span class="number">1</span>);</span><br><span class="line"><span class="keyword">if</span>(dots[<span class="number">1</span>].first&gt;<span class="number">0</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"><span class="type">double</span> cover=dots[<span class="number">1</span>].second;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">2</span>;i&lt;=cnt;i++)&#123;</span><br><span class="line"><span class="keyword">if</span>(cover&gt;=x0) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">if</span>(dots[i].first&gt;cover) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">cover=<span class="built_in">max</span>(cover,dots[i].second);</span><br><span class="line">&#125; <span class="keyword">return</span> cover&gt;=x0;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;rainbow.in&quot;</span>,<span class="string">&quot;r&quot;</span>,stdin);</span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;rainbow.out&quot;</span>,<span class="string">&quot;w&quot;</span>,stdout);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%lf%lf&quot;</span>,&amp;h,&amp;x0);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">7</span>;i++) <span class="built_in">scanf</span>(<span class="string">&quot;%lf%lf&quot;</span>,&amp;s[i].x,&amp;s[i].r);</span><br><span class="line"><span class="built_in">sort</span>(s+<span class="number">1</span>,s+<span class="number">7</span>+<span class="number">1</span>);<span class="type">double</span> L=<span class="number">0.0</span>,R=<span class="number">100000.0</span>,ans;</span><br><span class="line"><span class="built_in">check</span>(<span class="number">52.71</span>);</span><br><span class="line"><span class="keyword">while</span>(R-L&gt;eps)&#123;</span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">check</span>(mid)) R=mid,ans=mid;</span><br><span class="line"><span class="keyword">else</span> L=mid;</span><br><span class="line">&#125; <span class="built_in">printf</span>(<span class="string">&quot;%.2lf&quot;</span>,ans);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="2-è¿˜æ•™å®¤ï¼ˆclassroom-cppï¼‰"><a href="#2-è¿˜æ•™å®¤ï¼ˆclassroom-cppï¼‰" class="headerlink" title="2. è¿˜æ•™å®¤ï¼ˆclassroom.cppï¼‰"></a>2. è¿˜æ•™å®¤ï¼ˆclassroom.cppï¼‰</h2><h3 id="Description-1"><a href="#Description-1" class="headerlink" title="Description"></a>Description</h3><p>è¿˜è®°å¾— NOIP 2012 æé«˜ç»„ Day2 ä¸­çš„å€Ÿæ•™å®¤å—ï¼Ÿæ—¶å…‰é£é€ï¼Œå…‰é˜´èè‹’ï¼Œä¸¤å¹´è¿‡å»äº†ï¼Œæ›¾ç»å€Ÿæ•™å®¤çš„åŒå­¦ä»¬çº·çº·å½’è¿˜è‡ªå·±å½“åˆç§Ÿå€Ÿçš„æ•™å®¤ã€‚è¯·ä½ æ¥è§£å†³ç±»ä¼¼äºå€Ÿæ•™å®¤çš„å¦ä¸€ä¸ªé—®é¢˜ã€‚</p><p>åœ¨æ¥å—å€Ÿæ•™å®¤è¯·æ±‚çš„ n å¤©ä¸­ï¼Œç¬¬ i<em>i</em> å¤©å‰©ä½™çš„æ•™å®¤ä¸º ai ä¸ªã€‚ä½œä¸ºå¤§å­¦å€Ÿæ•™å®¤æœ</p><p>åŠ¡çš„è´Ÿè´£äººï¼Œä½ éœ€è¦å®Œæˆå¦‚ä¸‹ä¸‰ç§æ“ä½œå…± m<em>m</em> æ¬¡ï¼š</p><p>â‘  ç¬¬ l å¤©åˆ°ç¬¬ r å¤©ï¼Œæ¯å¤©è¢«å½’è¿˜ d ä¸ªæ•™å®¤ã€‚</p><p>â‘¡ è¯¢é—®ç¬¬ l å¤©åˆ°ç¬¬ r å¤©æ•™å®¤ä¸ªæ•°çš„å¹³å‡æ•°ã€‚</p><p>â‘¢ è¯¢é—®ç¬¬ l å¤©åˆ°ç¬¬ r å¤©æ•™å®¤ä¸ªæ•°çš„æ–¹å·®ã€‚</p><h3 id="Input-1"><a href="#Input-1" class="headerlink" title="Input"></a>Input</h3><p>ç¬¬ä¸€è¡ŒåŒ…æ‹¬ä¸¤ä¸ªæ­£æ•´æ•° n å’Œ m ï¼Œå…¶ä¸­ n ä¸ºå€Ÿæ•™å®¤çš„å¤©æ•°ï¼Œm ä¸ºæ“ä½œæ¬¡æ•°ã€‚</p><p>æ¥ä¸‹æ¥ä¸€è¡Œï¼Œå…±åŒ…å« n ä¸ªæ•´æ•°ï¼Œç¬¬i ä¸ªæ•´æ•°è¡¨ç¤ºç¬¬ i å¤©å‰©ä½™æ•™å®¤æ•°ç›®ä¸º ai ä¸ªã€‚</p><p>æ¥ä¸‹æ¥ m è¡Œï¼Œæ¯è¡Œçš„ç¬¬ä¸€ä¸ªæ•´æ•°ä¸ºæ“ä½œç¼–å·ï¼ˆåªèƒ½ä¸º 1 æˆ– 2 æˆ– 3ï¼‰ï¼Œæ¥ä¸‹æ¥ï¼š</p><p>åŒ…å«ä¸¤ä¸ªæ­£æ•´æ•° l å’Œ rï¼Œè‹¥æ“ä½œç¼–å·ä¸º 1ï¼Œåˆ™æ¥ä¸‹æ¥å†åŒ…å«ä¸€ä¸ªæ­£æ•´æ•° dã€‚</p><h3 id="Output-1"><a href="#Output-1" class="headerlink" title="Output"></a>Output</h3><p>å¯¹äºæ¯ä¸ªæ“ä½œ 2 å’Œæ“ä½œ 3ï¼Œè¾“å‡ºä¸€ä¸ªæ—¢çº¦åˆ†æ•°ï¼ˆåˆ†å­ä¸åˆ†æ¯äº’è´¨ï¼‰è¡¨ç¤ºè¯¢é—®çš„ç­”æ¡ˆï¼ˆè¯¦è§æ ·ä¾‹ï¼‰ã€‚è‹¥ç­”æ¡ˆä¸º 0ï¼Œè¯·è¾“å‡ºâ€œ0/1â€ï¼ˆä¸å«å¼•å·ï¼‰</p><h3 id="Sample-Input-1"><a href="#Sample-Input-1" class="headerlink" title="Sample Input"></a>Sample Input</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">5 4</span><br><span class="line">1 2 3 4 5</span><br><span class="line">1 1 2 3</span><br><span class="line">2 2 4</span><br><span class="line">3 2 4</span><br><span class="line">3 1 5</span><br></pre></td></tr></table></figure><h3 id="Sample-Output-1"><a href="#Sample-Output-1" class="headerlink" title="Sample Output"></a>Sample Output</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">4/1</span><br><span class="line">2/3</span><br><span class="line">14/25</span><br></pre></td></tr></table></figure><h3 id="Hint-1"><a href="#Hint-1" class="headerlink" title="Hint"></a>Hint</h3><p>å…¨éƒ¨æ•°æ®æ»¡è¶³ï¼š$1\leq l,r \leq 10^5$ï¼Œ$n,m \leq 10^5$ï¼Œ$0\leq a_i \leq 10$ï¼Œ$1\leq d\leq 3$ï¼Œæ“ä½œ 1 çš„æ•°é‡ä¸è¶…è¿‡ 10%</p><p>æ³¨æ„ï¼š$a_i$ å’Œ $d$ çš„æ“ä½œèŒƒå›´å¾ˆå°ä»¥åŠæ“ä½œ 1 çš„æ•°é‡å¾ˆå°‘æ˜¯ä¸ºäº†ä¿è¯ç­”æ¡ˆçš„åˆ†å­åˆ†æ¯ä¸ä¼šè¶…è¿‡ Int64 çš„èŒƒå›´ï¼Œä¸é¢˜ç›®çš„åšæ³•æœ¬èº«å¹¶æ— å…³ç³»</p><h3 id="åˆ†æ-1"><a href="#åˆ†æ-1" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h3><p>çœ‹åˆ°åŒºé—´æ›´æ–°å’ŒåŒºé—´æŸ¥è¯¢ï¼Œå¾ˆå®¹æ˜“æƒ³åˆ°çº¿æ®µæ ‘ï¼Œé—®é¢˜ 1 å°±æ˜¯åŒºé—´æ›´æ–°æ¿å­ï¼Œé—®é¢˜ 2 ç›´æ¥åŒºé—´æ±‚å’Œåé™¤ä»¥åŒºé—´é•¿åº¦å³å¯ï¼Œå…³é”®åœ¨äºç»´æŠ¤é—®é¢˜ 3 çš„ç­”æ¡ˆä¿¡æ¯</p><p><strong>æ˜¾ç„¶æˆ‘ä»¬ä¸èƒ½ç›´æ¥ç»´æŠ¤æ–¹å·®ï¼Œä¸”ä¸èƒ½é€šè¿‡å®æ•°çš„æ–¹å¼ç®—å‡ºæ–¹å·®ç„¶åè¯•å›¾å¾—å‡ºåˆ†æ•°å½¢å¼ï¼Œå› ä¸ºè¿™æ ·ä¼šæœ‰ç²¾åº¦æŸå¤±</strong></p><p><strong>é‚£ä¹ˆæˆ‘ä»¬è¦ç»´æŠ¤çš„ä¹Ÿå°±æ˜¯æ–¹å·®çš„å³è¾¹éƒ¨åˆ†ï¼Œä¹Ÿå°±æ˜¯ $\sum_{i=1}^n(x_i-\overline{x})^2$ ï¼Œä¹‹ååƒå¹³å‡æ•°é‚£æ ·é™¤ä»¥åŒºé—´é•¿åº¦å³å¯</strong></p><p>ç„¶è€Œæˆ‘ä»¬è¿˜æ˜¯ä¸èƒ½ç›´æ¥ç»´æŠ¤ä¸Šè¿°çš„ä¸€å¨å¼å­ï¼ŒæŠŠå®ƒå±•å¼€å¾—åˆ°ï¼š</p><p>$\sum<em>{i=1}^n(x_i-\overline{x})^2=\sum</em>{i=1}^n(x<em>i-2x_i\overline{x}+\overline{x}^2)=\sum</em>{i=1}^nx<em>i^2+n\times \overline{x}^2-2\times \sum</em>{i=1}^nx_i\overline{x}$ </p><p>$\sum<em>{i=1}^nx_i^2+n\times \overline{x}^2-2\overline{x}\times \sum</em>{i=1}^nx<em>i$ï¼Œå¯ä»¥è®¾ $S=\sum</em>{i=1}^nx<em>i^2$ï¼Œ$T=\sum</em>{i=1}^nx_i$ï¼Œåˆ™ $\overline{x}=\frac{T}{n}$ï¼ŒåŒ–ç®€å¼å­ï¼š</p><p>$\sum<em>{i=1}^nx_i^2+n\times \overline{x}^2-2\overline{x}\times \sum</em>{i=1}^nx_i=S+n\times \frac{T^2}{n^2}-2\times \frac{T}{n}\times T=S+\frac{T^2}{n}-2\times\frac{T^2}{n}=S-\frac{T^2}{n}$</p><p>ä¸Šè¿°å¼å­è¡¨æ˜ç»´æŠ¤æ–¹å·®éœ€è¦ç»´æŠ¤ <strong>åŒºé—´å¹³æ–¹å’Œ</strong> å’Œ <strong>åŒºé—´å’Œ</strong>ï¼ˆåŒºé—´é•¿åº¦ $n$ å¯ä»¥ç›´æ¥å¾—å‡ºï¼‰</p><p>åŒºé—´å’Œçš„çº¿æ®µæ ‘å†™è¿‡æ¿å­ï¼Œé‚£ä¹ˆåŒºé—´å¹³æ–¹å’Œå‘¢ï¼Ÿå…¶å®è½¬åŒ–ä¹‹åä¹Ÿå¯ä»¥ç”±åŒºé—´å’Œå¾—å‡ºï¼š</p><p>$\sum<em>{i=1}^n(x_i+v)^2=\sum</em>{i=1}^n(x^2+2x<em>iv+v^2)=\sum</em>{i=1}^nx<em>i^2+2v\sum</em>{i=1}^nx_i+nv^2$</p><p>ä¸Šè¿°å¼å­è¡¨æ˜æ–°çš„åŒºé—´å¹³æ–¹å’Œå¯ä»¥ç”± <strong>ç°åœ¨çš„åŒºé—´å¹³æ–¹å’Œå’Œç°åœ¨çš„åŒºé—´å’Œ</strong> ç»´æŠ¤è€Œæ¥ï¼ˆæ­¤å¤„æ³¨æ„åº”è¯¥æ˜¯å…ˆæ›´æ–°åŒºé—´å¹³æ–¹å’Œå†æ›´æ–°åŒºé—´å’Œï¼‰,é‚£ä¹ˆçº¿æ®µæ ‘å°±å¯ä»¥åœ†æ»¡è§£å†³è¿™ä¸ªé¢˜äº†</p><p>è‡³äºè¾“å‡ºæ—¢çº¦åˆ†æ•°ï¼Œå°±æ˜¯åˆ†å­åˆ†æ¯åŒæ—¶é™¤ä»¥å®ƒä»¬çš„æœ€å¤§å…¬çº¦æ•°</p><h3 id="Codes-1"><a href="#Codes-1" class="headerlink" title="Codes"></a>Codes</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxn 100005</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> mid ((L+R)&gt;&gt;1)</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> t&gt;<span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">fcin</span><span class="params">(t &amp;x)</span></span>&#123;</span><br><span class="line"><span class="type">int</span> sign=<span class="number">1</span>; x=<span class="number">0</span>; <span class="type">char</span> op=<span class="built_in">getchar</span>();</span><br><span class="line"><span class="keyword">while</span>(op&lt;<span class="string">&#x27;0&#x27;</span>||op&gt;<span class="string">&#x27;9&#x27;</span>)&#123;<span class="keyword">if</span>(op==<span class="string">&#x27;-&#x27;</span>) sign=<span class="number">-1</span>;op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line"><span class="keyword">while</span>(op&gt;=<span class="string">&#x27;0&#x27;</span>&amp;&amp;op&lt;=<span class="string">&#x27;9&#x27;</span>)&#123;x=x*<span class="number">10</span>+(op<span class="number">-48</span>);op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line">x*=sign;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">node</span>&#123;</span><br><span class="line"><span class="type">int</span> LC,RC;</span><br><span class="line">ll V,PV,TAG;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> lc(x) T[x].LC</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> rc(x) T[x].RC</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> val(x) T[x].V</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pval(x) T[x].PV</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> tag(x) T[x].TAG</span></span><br><span class="line">&#125;T[maxn&lt;&lt;<span class="number">2</span>];<span class="type">int</span> newp,Tr[maxn];</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">pushup</span><span class="params">(<span class="type">int</span> k)</span></span>&#123;</span><br><span class="line"><span class="built_in">val</span>(k)=<span class="built_in">val</span>(<span class="built_in">lc</span>(k))+<span class="built_in">val</span>(<span class="built_in">rc</span>(k));</span><br><span class="line"><span class="built_in">pval</span>(k)=<span class="built_in">pval</span>(<span class="built_in">lc</span>(k))+<span class="built_in">pval</span>(<span class="built_in">rc</span>(k));</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">build</span><span class="params">(<span class="type">int</span> L,<span class="type">int</span> R)</span></span>&#123;</span><br><span class="line"><span class="type">int</span> p=++newp;</span><br><span class="line"><span class="keyword">if</span>(L==R)&#123;</span><br><span class="line"><span class="built_in">val</span>(p)=Tr[L];</span><br><span class="line"><span class="built_in">pval</span>(p)=<span class="built_in">val</span>(p)*<span class="built_in">val</span>(p);</span><br><span class="line"><span class="keyword">return</span> p;</span><br><span class="line">&#125; </span><br><span class="line"><span class="built_in">lc</span>(p)=<span class="built_in">build</span>(L,mid);<span class="built_in">rc</span>(p)=<span class="built_in">build</span>(mid+<span class="number">1</span>,R);</span><br><span class="line"><span class="built_in">pushup</span>(p);</span><br><span class="line"><span class="keyword">return</span> p;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">spr</span><span class="params">(<span class="type">int</span> k,<span class="type">int</span> L,<span class="type">int</span> R,<span class="type">int</span> d)</span></span>&#123;</span><br><span class="line"><span class="built_in">tag</span>(k)+=d;</span><br><span class="line"><span class="built_in">pval</span>(k)=<span class="built_in">pval</span>(k)+(<span class="number">1ll</span>*<span class="number">2</span>*d*<span class="built_in">val</span>(k)+<span class="number">1ll</span>*(R-L+<span class="number">1</span>)*d*d);</span><br><span class="line">    <span class="comment">// å¼å­å¼€å¤´ä¹˜ä¸Š 1llï¼Œä¼šè‡ªåŠ¨å°†å¼å­ä¸­çš„æ‰€æœ‰å˜é‡çœ‹åš long long å‚ä¸è¿ç®—</span></span><br><span class="line">    <span class="comment">// å¯ä»¥é˜²æ­¢ä¸­é€”å› ä¸º int çˆ†æ‰</span></span><br><span class="line"><span class="built_in">val</span>(k)+=(R-L+<span class="number">1</span>)*d;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">pushdown</span><span class="params">(<span class="type">int</span> k,<span class="type">int</span> L,<span class="type">int</span> R)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">tag</span>(k)==<span class="number">0</span>) <span class="keyword">return</span>;</span><br><span class="line"><span class="built_in">spr</span>(<span class="built_in">lc</span>(k),L,mid,<span class="built_in">tag</span>(k));</span><br><span class="line"><span class="built_in">spr</span>(<span class="built_in">rc</span>(k),mid+<span class="number">1</span>,R,<span class="built_in">tag</span>(k));</span><br><span class="line"><span class="built_in">tag</span>(k)=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">updata</span><span class="params">(<span class="type">int</span> k,<span class="type">int</span> L,<span class="type">int</span> R,<span class="type">int</span> x,<span class="type">int</span> y,<span class="type">int</span> d)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(x&lt;=L &amp;&amp; R&lt;=y) <span class="keyword">return</span> <span class="built_in">spr</span>(k,L,R,d);</span><br><span class="line"><span class="built_in">pushdown</span>(k,L,R);</span><br><span class="line"><span class="keyword">if</span>(mid&gt;=x) <span class="built_in">updata</span>(<span class="built_in">lc</span>(k),L,mid,x,y,d);</span><br><span class="line"><span class="keyword">if</span>(mid&lt;y) <span class="built_in">updata</span>(<span class="built_in">rc</span>(k),mid+<span class="number">1</span>,R,x,y,d);</span><br><span class="line"><span class="built_in">pushup</span>(k);</span><br><span class="line">&#125; </span><br><span class="line"><span class="function">ll <span class="title">sum</span><span class="params">(<span class="type">int</span> k,<span class="type">int</span> L,<span class="type">int</span> R,<span class="type">int</span> x,<span class="type">int</span> y)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(x&lt;=L &amp;&amp; R&lt;=y) <span class="keyword">return</span> <span class="built_in">val</span>(k); <span class="built_in">pushdown</span>(k,L,R);</span><br><span class="line">ll ans=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">if</span>(mid&gt;=x) ans+=<span class="built_in">sum</span>(<span class="built_in">lc</span>(k),L,mid,x,y);</span><br><span class="line"><span class="keyword">if</span>(mid&lt;y) ans+=<span class="built_in">sum</span>(<span class="built_in">rc</span>(k),mid+<span class="number">1</span>,R,x,y);</span><br><span class="line"><span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">ll <span class="title">psum</span><span class="params">(<span class="type">int</span> k,<span class="type">int</span> L,<span class="type">int</span> R,<span class="type">int</span> x,<span class="type">int</span> y)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(x&lt;=L &amp;&amp; R&lt;=y) <span class="keyword">return</span> <span class="built_in">pval</span>(k); <span class="built_in">pushdown</span>(k,L,R);</span><br><span class="line">ll ans=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">if</span>(mid&gt;=x) ans+=<span class="built_in">psum</span>(<span class="built_in">lc</span>(k),L,mid,x,y);</span><br><span class="line"><span class="keyword">if</span>(mid&lt;y) ans+=<span class="built_in">psum</span>(<span class="built_in">rc</span>(k),mid+<span class="number">1</span>,R,x,y);</span><br><span class="line"><span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> n,m;</span><br><span class="line"><span class="function">ll <span class="title">gcd</span><span class="params">(ll a,ll b)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(a&lt;b) <span class="built_in">swap</span>(a,b);</span><br><span class="line"><span class="keyword">if</span>(b==<span class="number">0</span>) <span class="keyword">return</span> a;</span><br><span class="line"><span class="keyword">return</span> <span class="built_in">gcd</span>(b,a%b);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;classroom.in&quot;</span>,<span class="string">&quot;r&quot;</span>,stdin);</span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;classroom.out&quot;</span>,<span class="string">&quot;w&quot;</span>,stdout);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"><span class="built_in">fcin</span>(n);<span class="built_in">fcin</span>(m);<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++) <span class="built_in">fcin</span>(Tr[i]);</span><br><span class="line"><span class="built_in">build</span>(<span class="number">1</span>,n);<span class="type">int</span> op,x,y,z; </span><br><span class="line">ll summ,divm,psumm,xsumm,ysumm;</span><br><span class="line">ll newx,newy,tsumm;</span><br><span class="line"><span class="keyword">while</span>(m--)&#123;</span><br><span class="line"><span class="built_in">fcin</span>(op);<span class="built_in">fcin</span>(x);<span class="built_in">fcin</span>(y);</span><br><span class="line"><span class="keyword">if</span>(op==<span class="number">1</span>) <span class="built_in">fcin</span>(z),<span class="built_in">updata</span>(<span class="number">1</span>,<span class="number">1</span>,n,x,y,z);</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(op==<span class="number">2</span>)&#123;</span><br><span class="line">summ=<span class="built_in">sum</span>(<span class="number">1</span>,<span class="number">1</span>,n,x,y);</span><br><span class="line">divm=<span class="built_in">gcd</span>(summ,(ll)(y-x+<span class="number">1</span>));</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%lld/%lld\n&quot;</span>,summ/divm,(ll)(y-x+<span class="number">1</span>)/divm);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">summ=<span class="built_in">sum</span>(<span class="number">1</span>,<span class="number">1</span>,n,x,y);</span><br><span class="line">psumm=<span class="built_in">psum</span>(<span class="number">1</span>,<span class="number">1</span>,n,x,y);</span><br><span class="line">newx=(ll)(y-x+<span class="number">1</span>)*psumm-summ*summ; <span class="keyword">if</span>(newx&lt;<span class="number">0</span>) <span class="keyword">return</span> <span class="number">1</span>; <span class="comment">// debug</span></span><br><span class="line">newy=(ll)(y-x+<span class="number">1</span>)*(ll)(y-x+<span class="number">1</span>);</span><br><span class="line">divm=<span class="built_in">gcd</span>(newx,newy);<span class="built_in">printf</span>(<span class="string">&quot;%lld/%lld\n&quot;</span>,newx/divm,newy/divm);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="2-ç¯®çƒæ¯”èµ›ï¼ˆbasketball-cppï¼‰"><a href="#2-ç¯®çƒæ¯”èµ›ï¼ˆbasketball-cppï¼‰" class="headerlink" title="2. ç¯®çƒæ¯”èµ›ï¼ˆbasketball.cppï¼‰"></a>2. ç¯®çƒæ¯”èµ›ï¼ˆbasketball.cppï¼‰</h2><h3 id="Description-2"><a href="#Description-2" class="headerlink" title="Description"></a>Description</h3><p>ç”±äºCzhouä¸¾è¡Œäº†ä¼—å¤šNOIPæ¨¡æ‹Ÿèµ›ï¼Œä¹Ÿå¯¼è‡´æ”¾å­¦åç¯®çƒæ¯”èµ›æ¬¡æ•°æ€¥å‰§å¢åŠ ã€‚ç¥ç‰›ä»¬èº«ä½“ç´ è´¨çªé£çŒ›è¿›ï¼Œå¹¶ä¸”çƒæŠ€ä¸æ–­ç²¾è¿›ã€‚è¿™å¼•èµ·äº†ä½“è‚²è€å¸ˆå½©å“¥çš„æ³¨æ„ï¼Œä¸ºäº†ç»™æ ¡ç¯®çƒé˜Ÿæ‰¾åˆ°åŠ¿å‡åŠ›æ•Œçš„å¯¹æ‰‹ï¼Œå½©å“¥æ‰¾åˆ°äº†Czhouç¥ï¼Œæƒ³è¦å’Œæœºæˆ¿ç¯®çƒé˜Ÿè¿›è¡Œå¤šåœºå‹è°Šèµ›ã€‚Czhouä¸ºäº†é¡¾å…¨æ ¡ç¯®çƒé˜Ÿé¢å­ï¼Œå†³å®šæ´¾å‡ºé…åˆé»˜å¥‘åˆä¸è‡³äºåŠæ‰“æ ¡ç¯®çƒé˜Ÿçš„é˜µå®¹ã€‚</p><p>è€Œæœºæˆ¿ç¥ç‰›çš„èƒ½åŠ›å€¼å—åˆ°æ¸¸æˆæ—¶é•¿ï¼Œè®­ç»ƒæ—¶é•¿ï¼Œä¸ªäººåŸºç¡€å€¼å¾—å½±å“ï¼Œå¯èƒ½ä¼šä¸æ–­å˜åŒ–ã€‚æ‰€ä»¥Czhouæƒ³æ ¹æ®ç¥ç‰›å½“å¤©çŠ¶æ€ä»ä¸­é€‰å‡ºè‹¥å¹²åé€‰æ‰‹ï¼Œä½¿ä»–ä»¬çš„èƒ½åŠ›å€¼å’Œç­‰äºkã€‚</p><h3 id="Input-2"><a href="#Input-2" class="headerlink" title="Input"></a>Input</h3><p>ä¸€è¡Œä¸‰ä¸ªæ•°n,k,lã€‚è¡¨ç¤ºæœºæˆ¿æœ‰nä¸ªç¥ç‰›ï¼Œé€‰å‡ºé˜Ÿå‘˜èƒ½åŠ›å€¼å’Œä¸ºkï¼Œæ¯ä¸ªç¥ç‰›çš„èƒ½åŠ›æœ€å¤§å€¼&lt;=Lä¸”&gt;=0ã€‚</p><h3 id="Output-2"><a href="#Output-2" class="headerlink" title="Output"></a>Output</h3><p>è¾“å‡ºä¸€ä¸ªæ•°ï¼Œè¡¨ç¤ºæ–¹æ¡ˆæ•°ï¼Œæ–¹æ¡ˆæ»¡è¶³é€‰å‡ºè‹¥å¹²é€‰æ‰‹ä½¿èƒ½åŠ›å’Œä¸ºkã€‚å› ä¸ºç­”æ¡ˆæ¯”è¾ƒå¤§ï¼Œæœ€åæ¨¡10^9+7ã€‚</p><h3 id="Sample-Input-2"><a href="#Sample-Input-2" class="headerlink" title="Sample Input"></a>Sample Input</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2 2 2</span><br></pre></td></tr></table></figure><h3 id="Sample-Output-2"><a href="#Sample-Output-2" class="headerlink" title="Sample Output"></a>Sample Output</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">6</span><br></pre></td></tr></table></figure><h3 id="Hint-2"><a href="#Hint-2" class="headerlink" title="Hint"></a>Hint</h3><p>æ ·ä¾‹è¯´æ˜ï¼šç¥ç‰›çš„èƒ½åŠ›å€¼å¯èƒ½ä¸º(0,2)(1,2)(1,1)(2,0)(2,1)(2,2)ï¼Œè¿™æ ·éƒ½å¯ä»¥é€‰å‡ºä¸€äº›æ•°å­—ä½¿ä»–ä»¬çš„èƒ½åŠ›å€¼å’Œä¸º2ã€‚</p><p>å¯¹äºï¼ˆ0,2ï¼‰è¡¨ç¤ºç¬¬ä¸€åªç‰›èƒ½åŠ›å€¼ä¸º0ï¼Œç¬¬äºŒåªç‰›èƒ½åŠ›ä¸º2</p><p>ç±»ä¼¼çš„ï¼š</p><p>å¯¹äºï¼ˆ1,2ï¼‰é€‰å‡º2å³æ»¡è¶³è¦æ±‚ã€‚</p><p>å¯¹äºï¼ˆ1,1ï¼‰é€‰å‡ºå…¨éƒ¨é€‰æ‰‹å³æ»¡è¶³è¦æ±‚ã€‚</p><p>æ‰€ä»¥ï¼ˆ0,2ï¼‰ï¼ˆ1ï¼Œ1ï¼‰éƒ½æ˜¯æ»¡è¶³è¦æ±‚çš„æ–¹æ¡ˆã€‚</p><p>æ•°æ®èŒƒå›´ï¼š</p><p>n,k&lt;=20</p><p>0&lt;=L&lt;=10^9.</p><h3 id="åˆ†æ-2"><a href="#åˆ†æ-2" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h3><blockquote><p><strong>åšæ³•ä¸€ï¼šçˆ†æœ + èƒŒåŒ…ï¼ˆ20åˆ†ï¼‰</strong></p></blockquote><p>æ²¡ä»€ä¹ˆå¥½è¯´çš„â€¦â€¦æš´åŠ›æšä¸¾æ¯ä¸ªç¥ç‰›çš„èƒ½åŠ›å€¼ç„¶åæ£€éªŒæ˜¯å¦èƒ½åˆšå¥½è¾¾åˆ° Kï¼Œå› ä¸ºæ•°æ®è§„æ¨¡çš„åŸå› åªèƒ½è¿‡ 2 ä¸ªç‚¹</p><blockquote><p><strong>åšæ³•äºŒï¼šçŠ¶å‹ DPï¼ˆ100åˆ†ï¼‰</strong></p></blockquote><p>ä»æç¤ºçš„æ•°æ®èŒƒå›´æ¥çœ‹ï¼Œ$n$ï¼Œ$k$ éƒ½æ˜¯éå¸¸å°çš„æ•´æ•°ï¼Œæ‰€ä»¥å¯ä»¥ç”¨çŠ¶å‹ DP è¡¨ç¤º $[0ï¼Œk]$ ä¸­æ¯ä¸€ä¸ªèƒ½åŠ›å€¼èƒ½ä¸èƒ½å–å¾—åˆ°ï¼Œæ‰€ä»¥ $f[i][j]$ ($i\in[1ï¼Œn]$ï¼Œ$j\in[1ï¼Œ2^{min(l,k)}-1]$) è¡¨ç¤ºè€ƒè™‘å®Œå‰ $i$ ä¸ªç¥ç‰›ï¼Œä¸”æ»¡è¶³çŠ¶æ€ $j$ è¡¨ç¤ºçš„èƒ½åŠ›å€¼çš„æ–¹æ¡ˆæ•°</p><p><strong>ä¹Ÿå°±æ˜¯è¯´å…¶ä¸­è‹¥èƒ½åŠ›å€¼ $x$ å–åˆ°ï¼Œ$j$ åŒ–æˆäºŒè¿›åˆ¶çš„ç¬¬ $x$ ä½ä¸º 1ï¼Œé¢˜ç›®çš„ $l$ å¯èƒ½å¾ˆå¤§ï¼Œä½†æˆ‘ä»¬åªéœ€è®¨è®º $k$ ä»¥å†…çš„æƒ…å†µ</strong></p><p>è¿™ä¸ªçŠ¶å‹ DP çš„æ–¹ç¨‹ä¹Ÿä¸éš¾æƒ³åˆ°ï¼Œæ–°å¢ä¸€ä½ç¥ç‰›æ—¶ï¼Œé™¤äº†å½“å‰çŠ¶æ€ä¸­èƒ½å–åˆ°çš„èƒ½åŠ›å€¼ä¸å˜ï¼Œè¿˜ä¼šå¢åŠ ä¸€äº›æ–°çš„èƒ½å–åˆ°çš„èƒ½åŠ›å€¼</p><p>æ•…ç”± $f[i][j]$ è½¬ç§»åˆ° $f[i+1][jâ€™]$ æ—¶ï¼Œè‹¥æ–°ç¥ç‰›çš„èƒ½åŠ›å€¼ä¸º $x$ï¼Œå¯¹åº”çš„ $jâ€™=j \;\lvert\; (j&lt;&lt;x) \;\lvert\; 1&lt;&lt;(x-1)$ï¼Œè½¬ç§»æ–¹ç¨‹ä¸ºï¼š</p><p>$f[i+1][jâ€™]=(f[i+1][jâ€™]+f[i][j])\mod (1e9+7)$ ï¼Œå…¶ä¸­ $x\in[0ï¼Œmin(l,k)]$ </p><p>è€Œå¦‚æœæ–°ç¥ç‰›çš„èƒ½åŠ›å€¼ $x\geq k$ï¼Œé‚£ä¹ˆåŸæ¥çš„æ–¹æ¡ˆæ•°æ˜¾ç„¶ä¸ä¼šæ”¹å˜ï¼Œä½†æ˜¯è¿™ä»ç„¶æ˜¯ä¸€ç§å–ç¥ç‰›çš„æ–¹å¼ï¼Œæ‰€ä»¥ï¼š</p><p>$f[i+1][j]=(f[i][j]\times (l-k) \mod (1e9+7)) \mod (1e9+7)$ ($When\; l\geq k$)</p><p>ç»Ÿè®¡æ—¶ï¼Œåˆ¤æ–­å½“å‰çŠ¶æ€ $i$ ä¸‹èƒ½åŠ›å€¼ $k$ èƒ½å¦è¢«å–åˆ°ï¼Œç”¨ $i\; \&amp; \; 1&lt;&lt;(k-1)$</p><h3 id="Codes-2"><a href="#Codes-2" class="headerlink" title="Codes"></a>Codes</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxn 25 </span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxs 1&lt;&lt;21</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> t&gt;<span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">fcin</span><span class="params">(t &amp;x)</span></span>&#123;</span><br><span class="line"><span class="type">int</span> sign=<span class="number">1</span>; x=<span class="number">0</span>; <span class="type">char</span> op=<span class="built_in">getchar</span>();</span><br><span class="line"><span class="keyword">while</span>(op&lt;<span class="string">&#x27;0&#x27;</span>||op&gt;<span class="string">&#x27;9&#x27;</span>)&#123;<span class="keyword">if</span>(op==<span class="string">&#x27;-&#x27;</span>) sign=<span class="number">-1</span>;op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line"><span class="keyword">while</span>(op&gt;=<span class="string">&#x27;0&#x27;</span>&amp;&amp;op&lt;=<span class="string">&#x27;9&#x27;</span>)&#123;x=x*<span class="number">10</span>+(op<span class="number">-48</span>);op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line">x*=sign;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">const</span> ll mod=(ll)<span class="number">1e9</span>+<span class="number">7</span>; </span><br><span class="line">ll f[maxn][maxs];<span class="type">int</span> n,m,k,l;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;basketball.in&quot;</span>,<span class="string">&quot;r&quot;</span>,stdin);</span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;basketball.out&quot;</span>,<span class="string">&quot;w&quot;</span>,stdout);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"><span class="built_in">fcin</span>(n);<span class="built_in">fcin</span>(k);<span class="built_in">fcin</span>(l);m=(<span class="number">1</span>&lt;&lt;k)<span class="number">-1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=<span class="built_in">min</span>(l,k);i++) f[<span class="number">1</span>][<span class="number">1</span>&lt;&lt;(i<span class="number">-1</span>)]=<span class="number">1</span>;</span><br><span class="line"><span class="type">int</span> nxts;</span><br><span class="line"><span class="keyword">if</span>(l&gt;=k) f[<span class="number">1</span>][<span class="number">0</span>]=(l-k+<span class="number">1</span>); <span class="comment">// ç‰¹åˆ¤ </span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;n;i++)&#123;</span><br><span class="line"><span class="keyword">if</span>(!f[i][<span class="number">0</span>]) f[i][<span class="number">0</span>]=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;=m;j++)</span><br><span class="line"><span class="keyword">if</span>(f[i][j])&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> h=<span class="number">0</span>;h&lt;=<span class="built_in">min</span>(l,k);h++)&#123;</span><br><span class="line">nxts=(j|(j&lt;&lt;h)|(<span class="number">1</span>&lt;&lt;(h<span class="number">-1</span>)))&amp;m;</span><br><span class="line">(f[i+<span class="number">1</span>][nxts]+=f[i][j])%=mod;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(l&gt;=k) (f[i+<span class="number">1</span>][j]+=(f[i][j]*(ll)(l-k)%mod))%=mod; </span><br><span class="line">&#125;</span><br><span class="line">&#125; ll ans=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;=m;i++)</span><br><span class="line"><span class="keyword">if</span>(i&amp;(<span class="number">1</span>&lt;&lt;(k<span class="number">-1</span>))) (ans+=f[n][i])%=mod;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%lld&quot;</span>,ans);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŠ¨æ€è§„åˆ’ </tag>
            
            <tag> äºŒåˆ† </tag>
            
            <tag> çº¿æ®µæ ‘ </tag>
            
            <tag> æ¨¡æ‹Ÿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ¨¡æ‹Ÿ | ç‚æœµè‰æ ‘ï¼šå­¦ä¹ ç¬”è®°</title>
      <link href="/2019/08/23/2019-08-23-%E7%8F%82%E6%9C%B5%E8%8E%89%E6%A0%91%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
      <url>/2019/08/23/2019-08-23-%E7%8F%82%E6%9C%B5%E8%8E%89%E6%A0%91%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><h2 id="ç‚æœµè‰æ ‘ï¼šå­¦ä¹ ç¬”è®°"><a href="#ç‚æœµè‰æ ‘ï¼šå­¦ä¹ ç¬”è®°" class="headerlink" title="ç‚æœµè‰æ ‘ï¼šå­¦ä¹ ç¬”è®°"></a>ç‚æœµè‰æ ‘ï¼šå­¦ä¹ ç¬”è®°</h2><p>è€å¸æœºæ ‘ï¼ŒODT(Old Driver Tree)ï¼Œåˆåç‚æœµè‰æ ‘ï¼ˆChtholly Tree)ã€‚</p><p>èµ·æºè‡ª <a href="https://codeforces.com/problemset/problem/896/C">CF896C</a> ã€‚å› ä¸ºè¿™æ˜¯ç¬¬ä¸€é“ä»¥æ­¤æ ‘ AC çš„é¢˜ï¼Œåˆæ˜¯å…³äºåŠ¨æ¼«è§’è‰² <a href="https://www.baidu.com/link?url=fKEr3qvW8yTxQcNeokB_X7TIeNPFa74y3_jnigC2NYTG8dtGa3h6XqG3u-C4Dn_xEzN-qFjurCC6XT53rmWnyyQx5NQrJFDZm2OkSrkBouL94MiWnRfDTh6lkD6h1ETm0TTYMMjKbEQAEA6MitOjSkPNYhppxw_rcPAfuaLueJkv1f064dClA8MOAaomH555VUGTONRpysQ7K_UvnR-gfYZQBENtEpiUi5Y06XYY_JuGPox3PXi3grxn7Smzge2I7q7lNp8T9xuZIKbWKiTvdbAdajdi34uC8oTxJQKzMFa&amp;wd=&amp;eqid=9da8851000300455000000065d608b73">ç‚æœµè‰</a> çš„ï¼Œæ•…å› æ­¤å¾—åã€‚</p><p>æ˜¯ä¸€ç§éå¸¸æš´åŠ›çš„æ•°æ®ç»“æ„ï¼Œæ—¶é—´å¤æ‚åº¦ä¸å¥½è®¡ç®—ï¼Œä¸”å–å†³äºæ•°æ®çš„éšæœºæ€§ï¼Œç‚æœµè‰æ ‘å¯ä»¥ç”¨äºå¸¦æœ‰åŒºé—´è¦†ç›–çš„é—®é¢˜å½“ä¸­ï¼Œä¸”å½“è¦†ç›–æ“ä½œæ¯”è¾ƒå¤šçš„æ—¶å€™ï¼Œå®ƒèƒ½å‘æŒ¥å‡ºä¸€å®šä¼˜åŠ¿ï¼Œ<strong>æ‰€ä»¥ç‚æœµè‰æ ‘é€šå¸¸ç”¨äºå†™ä¸å‡ºæ­£ç»Ÿè§£æ³•æ—¶çš„éª—åˆ†é€‰æ‹©</strong></p><p><strong>è¦ä¿è¯ç‚æœµè‰æ ‘çš„å¤æ‚åº¦æ­£ç¡®ï¼Œæ•°æ®å¿…é¡»éšæœºï¼ˆä¹Ÿå°±æ˜¯å‡ºé¢˜äººä¸ä¼šç‰¹æ„å¡ï¼‰ï¼Œ<a href="http://codeforces.com/blog/entry/56135?#comment-398940">è¯æ˜</a></strong></p><p>åœ¨å¾ˆå¤šé¢˜ç›®ä¸­ä¸æ˜¯æ­£ç»Ÿçš„è§£æ³•ï¼Œä½†æ˜¯æœ‰äº›æ—¶å€™å´æ¯”æ­£ç»Ÿçš„è§£æ³•è·‘å¾—æ›´å¿«â€¦â€¦</p><h3 id="æ ¸å¿ƒæ€æƒ³"><a href="#æ ¸å¿ƒæ€æƒ³" class="headerlink" title="æ ¸å¿ƒæ€æƒ³"></a>æ ¸å¿ƒæ€æƒ³</h3><p>ç‚æœµè‰æ ‘çš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š<strong>æŠŠå€¼ç›¸åŒçš„åŒºé—´åˆå¹¶æˆä¸€ä¸ªç»“ç‚¹ä¿å­˜åœ¨ set é‡Œé¢ã€‚</strong></p><p>å› æ­¤ä¸€ä¸ªæ ‘èŠ‚ç‚¹åªåŒ…å«ä¸‰ä¸ªä¿¡æ¯ï¼šå·¦å³ç«¯ç‚¹ $L,R$ ï¼Œå’ŒåŒºé—´å€¼ $v$ï¼Œå®šä¹‰æ—¶æ³¨æ„å€¼ $v$ è¦ç”¨ <code>mutable</code> ä¿®é¥°</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">node</span>&#123;</span><br><span class="line">    <span class="type">int</span> L,R;</span><br><span class="line">    <span class="keyword">mutable</span> <span class="type">int</span> v;</span><br><span class="line">    <span class="built_in">node</span>(<span class="type">int</span> x, <span class="type">int</span> y=<span class="number">-1</span>, <span class="type">int</span> z=<span class="number">0</span>):<span class="built_in">L</span>(x), <span class="built_in">R</span>(y), <span class="built_in">v</span>(z) &#123;&#125;</span><br><span class="line">    <span class="type">bool</span> <span class="keyword">operator</span>&lt;(<span class="type">const</span> node&amp; o)<span class="type">const</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> L &lt; o.L;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><del>å…¶å®æ ¸å¿ƒæ€æƒ³å°±å¾ˆæš´åŠ›äº†â€¦â€¦</del></p><p>ä¸€ä¸‹æ˜¯ç‚æœµè‰æ ‘çš„å‡ ç§åŸºæœ¬æ“ä½œï¼Œæ— ä¸€ä¾‹å¤–åœ°ï¼Œå®ç°å®ƒä»¬çš„æ–¹å¼éƒ½éå¸¸æš´åŠ›</p><h3 id="å…³é”®æ“ä½œï¼šSplit"><a href="#å…³é”®æ“ä½œï¼šSplit" class="headerlink" title="å…³é”®æ“ä½œï¼šSplit"></a>å…³é”®æ“ä½œï¼šSplit</h3><p><strong><code>split</code> æ˜¯ç‚æœµè‰æ ‘çš„æ ¸å¿ƒä¹‹ä¸€ï¼Œç”¨äºä»å½“å‰ <code>set</code> ä¸­æå–éœ€è¦çš„åŒºé—´ç»“ç‚¹ä¾¿äºæ“ä½œ</strong>ï¼Œå®ƒä¼šå°†ä¸€ä¸ªå¤§çš„åŒºé—´ç»“ç‚¹ $[L,R]$ åˆ†è£‚æˆä¸¤ä¸ªåŒºé—´ç»“ç‚¹ï¼Œä¸º $[l,x-1]$ å’Œ $[x.R]$ ï¼Œä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬éƒ½ä¼š <code>split</code> ä¸¤æ¬¡ï¼Œ<code>split(r+1);split(l)</code></p><p><strong>æ³¨æ„ä¸€å®šè¦å…ˆ <code>split(r+1)</code>ï¼Œä¹‹åæˆ‘ä»¬ä¼šå–å¾—ä¸¤ä¸ªè¿­ä»£å™¨ï¼Œè¿™ä¸¤ä¸ªè¿­ä»£å™¨ä¹‹é—´å­˜å‚¨çš„å°±æ˜¯æ“ä½œåŒºé—´å†…çš„ç»“ç‚¹äº†</strong></p><p>è€Œå…³äº <code>split</code> çš„å†™æ³•ä¹Ÿæ¯”è¾ƒç®€å•ï¼Œå°±æ˜¯æš´åŠ›æ‰¾åˆ°ä»¥ $x$ ä½œä¸ºå·¦ç«¯ç‚¹çš„ç»“ç‚¹ï¼Œç„¶åæŠŠåŸæ¥çš„å¤§ç»“ç‚¹ç›´æ¥ <code>erase</code> æ‰ï¼Œæ–°æ’å…¥ä¸¤ä¸ªå°ç»“ç‚¹ï¼Œè¿”å›åä¸€ä¸ªç»“ç‚¹çš„è¿­ä»£å™¨</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> se(X) set<span class="string">&lt;X&gt;</span>::iterator</span></span><br><span class="line"><span class="built_in">se</span>(node) <span class="built_in">split</span>(<span class="type">int</span> pos)&#123;</span><br><span class="line"><span class="built_in">se</span>(node) iter=s.<span class="built_in">lower_bound</span>(<span class="built_in">node</span>(pos));</span><br><span class="line"><span class="keyword">if</span>(iter!=s.<span class="built_in">end</span>() &amp;&amp; iter-&gt;L==pos) <span class="keyword">return</span> iter;</span><br><span class="line">iter--; <span class="type">int</span> x=iter-&gt;L,y=iter-&gt;R; <span class="type">int</span> z=iter-&gt;v;</span><br><span class="line">s.<span class="built_in">erase</span>(iter); s.<span class="built_in">insert</span>(<span class="built_in">node</span>(x,pos<span class="number">-1</span>,z));</span><br><span class="line"><span class="keyword">return</span> s.<span class="built_in">insert</span>(<span class="built_in">node</span>(pos,y,z)).first;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å…³é”®æ“ä½œï¼šfillï¼ˆassignï¼‰"><a href="#å…³é”®æ“ä½œï¼šfillï¼ˆassignï¼‰" class="headerlink" title="å…³é”®æ“ä½œï¼šfillï¼ˆassignï¼‰"></a>å…³é”®æ“ä½œï¼šfillï¼ˆassignï¼‰</h3><p><strong><code>assign</code> æ˜¯ç‚æœµè‰æ ‘ç”¨äºå¤„ç†åŒºé—´è¦†ç›–é—®é¢˜çš„æ“ä½œï¼Œèƒ½å‡å°‘ set ä¸­çš„ç»“ç‚¹ä¸ªæ•°</strong>ï¼ŒåŒºé—´è¦†ç›–æ“ä½œè¶Šå¤šï¼Œset ä¸­çš„èŠ‚ç‚¹ä¸ªæ•°è¶Šå°‘ï¼Œå› æ­¤æ¯æ¬¡æ“ä½œçš„æ—¶é—´å¤æ‚åº¦ä¼šé™ä½ï¼Œè¿™ä¹Ÿæ˜¯ç‚æœµè‰æ ‘åœ¨æŸäº›é¢˜ç›®ä¸­è·‘çš„æ¯”æ­£ç»Ÿè§£æ³•å¿«çš„åŸå› ä¹‹ä¸€å§</p><p><code>assign</code> æ“ä½œæœ¬èº«éå¸¸æš´åŠ›ï¼Œä»£ç ä¹Ÿå¾ˆç®€æ´ï¼Œå¾ˆå¥½ç†è§£ï¼Œå°±æ˜¯å…ˆ <code>split</code> å¾—åˆ°è¦†ç›–çš„å·¦å³ç«¯ç‚¹å¯¹åº”çš„è¿­ä»£å™¨ï¼Œç„¶åç›´æ¥ <code>erase</code> æ‰ï¼Œæ’å…¥ä¸€ä¸ªæ–°çš„ç»“ç‚¹â€¦â€¦</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> se(X) set<span class="string">&lt;X&gt;</span>::iterator</span></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">fill</span><span class="params">(<span class="type">int</span> l,<span class="type">int</span> r,<span class="type">int</span> d)</span></span>&#123;</span><br><span class="line"><span class="built_in">se</span>(node) iterr=<span class="built_in">split</span>(r+<span class="number">1</span>),iterl=<span class="built_in">split</span>(l);</span><br><span class="line">s.<span class="built_in">erase</span>(iterl,iterr);s.<span class="built_in">insert</span>(<span class="built_in">node</span>(l,r,d));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="åŒºé—´åŠ ï¼šadd"><a href="#åŒºé—´åŠ ï¼šadd" class="headerlink" title="åŒºé—´åŠ ï¼šadd"></a>åŒºé—´åŠ ï¼šadd</h3><p><strong>ä»åŒºé—´åŠ æ“ä½œå¼€å§‹ï¼Œä»¥ä¸‹æ“ä½œå…¨æ˜¯åŸºäº <code>for</code> å¾ªç¯æˆ– <code>while</code> å¾ªç¯çš„çº¯æš´åŠ›éå†æ¥å®ç°çš„</strong></p><p>åŒºé—´åŠ æ³•ï¼Œå°±æ˜¯ <code>split</code> å¾—åˆ°åŒºé—´å·¦å³ç«¯ç‚¹å¯¹åº”çš„è¿­ä»£å™¨ï¼Œç„¶åéå†è¿™äº›åŒºé—´ï¼Œé€ä¸€åŠ ä¸Šå°±è¡Œäº†â€¦â€¦</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> se(X) set<span class="string">&lt;X&gt;</span>::iterator</span></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">add</span><span class="params">(<span class="type">int</span> l,<span class="type">int</span> r,<span class="type">int</span> d)</span></span>&#123;</span><br><span class="line">    <span class="built_in">se</span>(node) iterr=<span class="built_in">split</span>(r+<span class="number">1</span>),iterl=<span class="built_in">split</span>(l);</span><br><span class="line">    <span class="keyword">for</span>(;iterl!=iterr;iterl++) iterl-&gt;v+=d;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="åŒºé—´æ±‚å’Œï¼šsum"><a href="#åŒºé—´æ±‚å’Œï¼šsum" class="headerlink" title="åŒºé—´æ±‚å’Œï¼šsum"></a>åŒºé—´æ±‚å’Œï¼šsum</h3><p>åŒºé—´æ±‚å’Œï¼Œä¹Ÿæ˜¯å…ˆ <code>split</code> ç„¶åå†éå†ï¼Œç´¯åŠ ï¼Œæ³¨æ„ä¸­é€”è¦ä¹˜ä¸ŠåŒºé—´é•¿åº¦ï¼Œå› ä¸ºæ¯ä¸ªç»“ç‚¹æ˜¯ä¸€ä¸ªå€¼å®Œå…¨ç›¸åŒçš„åŒºé—´</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> se(X) set<span class="string">&lt;X&gt;</span>::iterator</span></span><br><span class="line"><span class="function">ll <span class="title">sum</span><span class="params">(<span class="type">int</span> l,<span class="type">int</span> r)</span></span>&#123;</span><br><span class="line"><span class="built_in">se</span>(node) iterr=<span class="built_in">split</span>(r+<span class="number">1</span>),iterl=<span class="built_in">split</span>(l);</span><br><span class="line">ll ans=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span>(iterl!=iterr)</span><br><span class="line">ans=(ans+(ll)(iterl-&gt;R-iterl-&gt;L+<span class="number">1</span>)*iterl-&gt;v,</span><br><span class="line">iterl++;</span><br><span class="line"><span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="åŒºé—´ç¬¬Kå°ï¼škth"><a href="#åŒºé—´ç¬¬Kå°ï¼škth" class="headerlink" title="åŒºé—´ç¬¬Kå°ï¼škth"></a>åŒºé—´ç¬¬Kå°ï¼škth</h3><p>ä¸ªäººæ„Ÿè§‰è¿™æ˜¯æœ€æš´åŠ›çš„æ“ä½œäº†ï¼Œå› ä¸ºè¿™ä¸ªæ“ä½œä¸ä½†éå†ï¼Œè€Œä¸”ä¸­é€”è¿˜ç›´æ¥ä½¿ç”¨ <code>vector</code> æ’åºï¼Œè®¡ç®—çš„æ—¶å€™ä¹Ÿè¦éå† <code>vector</code>â€¦â€¦</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">kth</span><span class="params">(<span class="type">int</span> l,<span class="type">int</span> r,<span class="type">int</span> k)</span></span>&#123;</span><br><span class="line">    <span class="meta">#<span class="keyword">define</span> se(X) set<span class="string">&lt;X&gt;</span>::iterator</span></span><br><span class="line">    <span class="keyword">typedef</span> pair&lt;<span class="type">int</span>,<span class="type">int</span>&gt; pr;</span><br><span class="line">vector&lt;pr&gt; X;</span><br><span class="line"><span class="built_in">se</span>(node) iterr=<span class="built_in">split</span>(r+<span class="number">1</span>),iterl=<span class="built_in">split</span>(l);</span><br><span class="line"><span class="keyword">while</span>(iterl!=iterr) X.<span class="built_in">push_back</span>(<span class="built_in">make_pair</span>(iterl-&gt;v,iterl-&gt;R-iterl-&gt;L+<span class="number">1</span>)),iterl++;</span><br><span class="line"><span class="built_in">sort</span>(X.<span class="built_in">begin</span>(),X.<span class="built_in">end</span>());</span><br><span class="line"><span class="keyword">for</span>(<span class="built_in">ve</span>(pr) iter=X.<span class="built_in">begin</span>();iter!=X.<span class="built_in">end</span>();iter++)&#123;</span><br><span class="line">k-=iter-&gt;second;<span class="keyword">if</span>(k&lt;=<span class="number">0</span>) <span class="keyword">return</span> iter-&gt;first;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç‚æœµè‰æ ‘å°±æ˜¯è¿™ä¹ˆæš´åŠ›çš„ä¸€ç§æ•°æ®ç»“æ„ï¼Œç„¶è€Œåœ¨ä¸€äº›æ¶‰åŠåˆ°å¾ˆå¤šæ¬¡åŒºé—´è¦†ç›–çš„é—®é¢˜ä¸­å´èƒ½å¤Ÿè·‘çš„å¾ˆå¿«<del>ï¼Œæœç„¶è¿˜æ˜¯ set å¤§æ³•å¥½å•Šâ€¦â€¦</del>ï¼Œä¸‹é¢æ˜¯å¯ä»¥ç”¨ç‚æœµè‰æ ‘ AC çš„é¢˜é€‰</p><p><em>P.Sï¼šä»¥ä¸‹é¢˜ç›®çš„æ­£çµ±è§£æ³•å‡ ä¹éƒ½æ˜¯çº¿æ®µæ ‘ï¼Œå†™æ³•æ­£ç¡®çš„çº¿æ®µæ ‘ä¹Ÿé€šå¸¸æ¯”ç‚æœµè‰æ ‘è·‘çš„å¿«ä¸€äº›</em></p><ol><li><a href="https://www.lydsy.com/JudgeOnline/problem.php?id=1858">SCOI2010 åºåˆ—æ“ä½œ</a>ï¼šç‚æœµè‰æ ‘æ¨¡æ¿é¢˜ï¼Œæ²¡ä»€ä¹ˆå¥½è®²çš„</li><li><a href="https://www.lydsy.com/JudgeOnline/problem.php?id=4592">SHOI2015 è„‘æ´æ²»ç–—ä»ª</a>ï¼šå‡ ä¹æ˜¯æ¨¡æ¿é¢˜ï¼Œæ³¨æ„åˆ¤æ–­æ­£å¸¸è„‘ç»„ç»‡å¤Ÿä¸å¤Ÿå¡«è¡¥è„‘æ´å³å¯</li><li><a href="https://www.luogu.org/problemnew/show/P2787">LG2787 ç†ç†æ€ç»´</a>ï¼šæ¨¡æ¿é¢˜ï¼Œè¾“å…¥å­—ç¬¦ä¸²çš„æ—¶å€™å°½é‡å…ˆæŠŠç›¸åŒçš„å­—ç¬¦åˆæˆä¸€ä¸ªç»“ç‚¹</li><li><p><a href="https://www.luogu.org/problemnew/show/P4979">LG4979 çŸ¿æ´åå¡Œ</a>ï¼šæ¨¡æ¿é¢˜ï¼Œæ³¨æ„è¾“å‡ºå­—ç¬¦ä¸²çš„ä¼˜åŒ–å’Œé¢˜ç›®è¦æ±‚çš„åˆ¤æ–­æ¡ä»¶å³å¯</p></li><li><p><a href="https://newoj.cqyz.cn/problem/P1204">USCAO1.2.1 æŒ¤ç‰›å¥¶</a>ï¼šè¿™ä¸ª<del>å¼±æ™º</del>é¢˜ä¹Ÿéœ€è¦ç”¨ç‚æœµè‰æ ‘ï¼Ÿæ˜¯çš„ï¼åªè¦æ˜¯åŒºé—´è¦†ç›–éƒ½å¯ä»¥ç”¨å®ƒ<del>éª—åˆ†</del></p></li></ol><h3 id="é™„ï¼šç‚æœµè‰ç¾å›¾æ¬£èµ"><a href="#é™„ï¼šç‚æœµè‰ç¾å›¾æ¬£èµ" class="headerlink" title="é™„ï¼šç‚æœµè‰ç¾å›¾æ¬£èµ"></a><del>é™„ï¼šç‚æœµè‰ç¾å›¾æ¬£èµ</del></h3><p><img src="https://cn.bing.com/th?id=OIP.A7xyeywrZrZK-oE1V7uSsAAAAA&amp;pid=Api&amp;rs=1" alt="pic1"></p><p><img src="https://cn.bing.com/th?id=OIP.MLcLKPtJQR1bfUxOVMwnzgAAAA&amp;pid=Api&amp;rs=1" alt="pic2"></p><p><img src="http://www.3dmgame.com/uploads/allimg/180122/399_180122100132_1.jpg" alt="pic3"></p><p><img src="https://cn.bing.com/th?id=OIP.JZ32Uo8TRzip-iN8q5BYowAAAA&amp;pid=Api&amp;rs=1" alt="pic4"></p><p><img src="https://cn.bing.com/th?id=OIP.CZcQfhPzqn9OeI-tl0WKhQAAAA&amp;pid=Api&amp;rs=1" alt="pic5"></p>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ¨¡æ‹Ÿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åˆ†æ²» | äºŒåˆ† | æ•´ä½“äºŒåˆ†ï¼š å­¦ä¹ ç¬”  è®°</title>
      <link href="/2019/08/21/2019-08-21-%E6%95%B4%E4%BD%93%E4%BA%8C%E5%88%86%E5%AD%A6%E4%B9%A0/"/>
      <url>/2019/08/21/2019-08-21-%E6%95%B4%E4%BD%93%E4%BA%8C%E5%88%86%E5%AD%A6%E4%B9%A0/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><h2 id="æ•´ä½“äºŒåˆ†"><a href="#æ•´ä½“äºŒåˆ†" class="headerlink" title="æ•´ä½“äºŒåˆ†"></a>æ•´ä½“äºŒåˆ†</h2><p>åœ¨ä¿¡æ¯å­¦ç«èµ›ä¸­ï¼Œæœ‰ä¸€éƒ¨åˆ†é¢˜å¯ä»¥ä½¿ç”¨äºŒåˆ†çš„åŠæ³•æ¥è§£å†³ã€‚ä½†æ˜¯å½“è¿™ç§é¢˜ç›®æœ‰å¤šæ¬¡è¯¢é—®ä¸”æ¯æ¬¡è¯¢é—®æˆ‘ä»¬å¯¹æ¯ä¸ªæŸ¥è¯¢éƒ½ç›´æ¥äºŒåˆ†ï¼Œå¯èƒ½ä¼šæ”¶è·ä¸€ä¸ª TLEã€‚è¿™æ—¶å€™æˆ‘ä»¬å°±ä¼šç”¨åˆ°æ•´ä½“äºŒåˆ†ã€‚<strong>æ•´ä½“äºŒåˆ†çš„ä¸»ä½“æ€è·¯å°±æ˜¯æŠŠå¤šä¸ªæŸ¥è¯¢ä¸€èµ·è§£å†³ï¼Œæ‰€ä»¥è¿™æ˜¯ä¸€ä¸ªç¦»çº¿ç®—æ³•</strong>ï¼ˆæ‘˜è‡ª OI Wikiï¼‰</p><h3 id="é€‚ç”¨æ€§"><a href="#é€‚ç”¨æ€§" class="headerlink" title="é€‚ç”¨æ€§"></a>é€‚ç”¨æ€§</h3><p>å¯ä»¥ä½¿ç”¨æ•´ä½“äºŒåˆ†æ³•è§£å†³çš„é—®é¢˜å…·æœ‰å¦‚ä¸‹æ€§è´¨ï¼š</p><ol><li><p><strong>è¯¢é—®çš„ç­”æ¡ˆå…·æœ‰å¯äºŒåˆ†æ€§</strong></p></li><li><p><strong>ä¿®æ”¹å¯¹åˆ¤å®šç­”æ¡ˆçš„è´¡çŒ®äº’ç›¸ç‹¬ç«‹</strong> ï¼Œä¿®æ”¹ä¹‹é—´äº’ä¸å½±å“æ•ˆæœ</p></li><li><p>ä¿®æ”¹å¦‚æœå¯¹åˆ¤å®šç­”æ¡ˆæœ‰è´¡çŒ®ï¼Œ<strong>åˆ™è´¡çŒ®ä¸ºä¸€ç¡®å®šçš„ä¸åˆ¤å®šæ ‡å‡†æ— å…³çš„å€¼</strong></p></li><li><p><strong>è´¡çŒ®æ»¡è¶³äº¤æ¢å¾‹ï¼Œç»“åˆå¾‹ï¼Œå…·æœ‰å¯åŠ æ€§</strong></p></li><li><p>é¢˜ç›®å…è®¸ä½¿ç”¨ç¦»çº¿ç®—æ³•ï¼ˆæ˜¾ç„¶ï¼‰</p></li></ol><h3 id="æ€è·¯æˆ–æ¨¡æ¿"><a href="#æ€è·¯æˆ–æ¨¡æ¿" class="headerlink" title="æ€è·¯æˆ–æ¨¡æ¿"></a>æ€è·¯æˆ–æ¨¡æ¿</h3><p>ä¸€èˆ¬çš„äºŒåˆ†æ˜¯å¯¹è¿ç»­æŸæ¬¡æ“ä½œä¸‹ï¼ˆæ“ä½œæ•°ä¸º $mid$ çš„æ“ä½œï¼‰è¿›è¡Œåˆ¤å®šï¼Œæ ¹æ®åˆ¤å®šç»“æœä¿®æ”¹ç­”æ¡ˆå€¼åŸŸï¼Œå€¼åŸŸä¸æ–­ç¼©å°ï¼Œé€¼è¿‘æ­£ç¡®ç­”æ¡ˆçš„è¿‡ç¨‹ï¼Œ<strong>å¯ä»¥çœ‹å‡ºä¸€èˆ¬çš„äºŒåˆ†ä»…å¯¹ä¸€ä¸ªè¯¢é—®èµ·ä½œç”¨</strong></p><p>è€Œæ•´ä½“äºŒåˆ†å¯ä»¥å¤„ç†ä¸€å¨è¯¢é—®ï¼Œè‡ªç„¶éœ€è¦ä¸€ä¸ªå­˜å‚¨è¯¢é—®ç»“æœçš„æ•°ç»„ï¼Œç”±äºä¸€æ¬¡çŒœçš„ç­”æ¡ˆéœ€è¦æ‹¿å»åŒæ—¶ä¸å¤šä¸ªè¯¢é—®è¿›è¡Œåˆ¤å®šï¼Œæ•´ä½“äºŒåˆ†çš„å¤§è‡´æ€è·¯å¦‚ä¸‹ï¼š</p><ol><li>ç¡®å®šå¤„ç†è¯¢é—®çš„åŒºé—´ï¼š$[x,\;y]$ï¼ˆå³å¤„ç†ç¬¬ $x$ ä¸ªåˆ°ç¬¬ $y$ ä¸ªè¯¢é—®ï¼‰ï¼Œç¡®å®šç­”æ¡ˆå€¼åŸŸï¼š$[L,\;R]$ ï¼ˆäºŒåˆ†çš„çµé­‚ï¼‰</li><li>é¦–å…ˆï¼Œè‹¥è¿›è¡Œåˆ° $L=R$ çš„è¿™ä¸€æ­¥ï¼Œè¯´æ˜ç­”æ¡ˆå·²ç»ç¡®å®šï¼Œå°†å½“å‰åŒºé—´å†…è¯¢é—®çš„ç­”æ¡ˆå…¨éƒ¨èµ‹å€¼ä¸º $L$ ï¼Œå½“ç„¶è¿™åªæ˜¯æš‚æ—¶çš„ï¼Œä¸€ä¸ªè¯¢é—®çš„ç­”æ¡ˆå¯èƒ½è¢«èµ‹å€¼å¤šæ¬¡ï¼Œç„¶åç›´æ¥ <code>return</code></li><li>ç”¨çŒœçš„ç­”æ¡ˆ $mid$ åŒæ—¶ä¸åŒºé—´å†…çš„è¯¢é—®ä½œæ¯”è¾ƒï¼Œè®¾ç½®ä¸¤ä¸ªæ•°ç»„ $newL$ å’Œ $newR$ï¼Œå¯¹äºé‚£äº›ç­”æ¡ˆè¿‡å¤§çš„è¯¢é—®ï¼Œæ”¾å…¥ $newL$ ä¸­ï¼Œç­”æ¡ˆè¿‡å°çš„è¯¢é—®ï¼Œæ”¾å…¥ $newR$ ä¸­</li><li>åŒæ—¶æ›´æ–°ç­”æ¡ˆå€¼åŸŸå’Œè¯¢é—®åŒºé—´ï¼ŒæŒ‰ç…§å…ˆåé¡ºåºå°† $newL$ åˆ° $newR$ ä¸­çš„è¯¢é—®è¦†ç›–æ‰åŸæ¥åŒºé—´å†…çš„è¯¢é—®</li><li>é€’å½’å¤„ç†ï¼Œè‹¥ $newL$ ä¸­æœ‰ $xL$ ä¸ªè¯¢é—®ï¼Œåˆ™é€’å½’å¤„ç†çš„è¯¢é—®åŒºé—´åˆ†åˆ«ä¸ºï¼š$[x,\; x+xL-1]$ å’Œ $[x+xL,\; y]$ï¼Œç­”æ¡ˆå€¼åŸŸä¸º $[L,\;mid]$ å’Œ $[mid+1,\;R]$</li></ol><p>å¯ä»¥å‘ç°ï¼Œæ•´ä½“äºŒåˆ†å’Œ CDQ åˆ†æ²»ç›¸ä¼¼ï¼Œç¬¬ 4 æ­¥ç±»ä¼¼ CDQ åˆ†æ²»ä¸­çš„åˆå¹¶æ“ä½œï¼Œ<strong>è¿™é‡Œå¯ä»¥ç†è§£æˆåˆ’åˆ†ï¼Œå°†æœ‰äºŒåˆ†ä»·å€¼çš„è¯¢é—®åˆ’åˆ†åˆ°ä¸€èµ·ï¼Œä¿è¯ä¸‹ä¸€æ­¥äºŒåˆ†æ—¶ï¼Œå¯¹åº”åŒºé—´å†…è¯¢é—®çš„ç­”æ¡ˆä¸€å®šåœ¨å¯¹åº”çš„ç­”æ¡ˆå€¼åŸŸå†…ï¼Œå¦‚æœæ²¡æœ‰è¿™ä¸€æ­¥ï¼Œé‚£ä¹ˆå¾ˆå¤šè¯¢é—®çš„ç­”æ¡ˆéƒ½æ— æ³•ç²¾ç¡®</strong></p><p>æ€è·¯ä¸­ç¬¬ 3 æ­¥çš„æ¯”è¾ƒæˆ–æ£€éªŒæ˜¯å†³å®šæ—¶é—´å¤æ‚åº¦çš„å…³é”®ï¼Œé€šå¸¸è¿™ä¸€æ­¥éƒ½ä¼šé‡‡ç”¨ä¸€äº›æ•°æ®ç»“æ„ä¼˜åŒ–æ—¶é—´å¤æ‚åº¦</p><p>ä¸‹é¢æ ¹æ®è¿™ä¸ªæ€è·¯çœ‹å‡ é“ä¾‹é¢˜</p><h3 id="æ´›è°·P3834-ã€æ¨¡æ¿ã€‘å¯æŒä¹…åŒ–çº¿æ®µæ ‘-1ï¼ˆä¸»å¸­æ ‘ï¼‰"><a href="#æ´›è°·P3834-ã€æ¨¡æ¿ã€‘å¯æŒä¹…åŒ–çº¿æ®µæ ‘-1ï¼ˆä¸»å¸­æ ‘ï¼‰" class="headerlink" title="æ´›è°·P3834 ã€æ¨¡æ¿ã€‘å¯æŒä¹…åŒ–çº¿æ®µæ ‘ 1ï¼ˆä¸»å¸­æ ‘ï¼‰"></a>æ´›è°·P3834 ã€æ¨¡æ¿ã€‘å¯æŒä¹…åŒ–çº¿æ®µæ ‘ 1ï¼ˆä¸»å¸­æ ‘ï¼‰</h3><h4 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h4><p>ç»™å®šNä¸ªæ•´æ•°æ„æˆçš„åºåˆ—ï¼Œå°†å¯¹äºæŒ‡å®šçš„é—­åŒºé—´æŸ¥è¯¢å…¶åŒºé—´å†…çš„ç¬¬Kå°å€¼ã€‚</p><h4 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h4><p>ç¬¬ä¸€è¡ŒåŒ…å«ä¸¤ä¸ªæ­£æ•´æ•°Nã€Mï¼Œåˆ†åˆ«è¡¨ç¤ºåºåˆ—çš„é•¿åº¦å’ŒæŸ¥è¯¢çš„ä¸ªæ•°ã€‚</p><p>ç¬¬äºŒè¡ŒåŒ…å«Nä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºè¿™ä¸ªåºåˆ—å„é¡¹çš„æ•°å­—ã€‚</p><p>æ¥ä¸‹æ¥Mè¡Œæ¯è¡ŒåŒ…å«ä¸‰ä¸ªæ•´æ•°l,r,k , è¡¨ç¤ºæŸ¥è¯¢åŒºé—´[l,r]å†…çš„ç¬¬kå°å€¼ã€‚</p><h4 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h4><p>è¾“å‡ºåŒ…å«kè¡Œï¼Œæ¯è¡Œ1ä¸ªæ•´æ•°ï¼Œä¾æ¬¡è¡¨ç¤ºæ¯ä¸€æ¬¡æŸ¥è¯¢çš„ç»“æœ</p><h4 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h4><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">5 5</span><br><span class="line">25957 6405 15770 26287 26465 </span><br><span class="line">2 2 1</span><br><span class="line">3 4 1</span><br><span class="line">4 5 1</span><br><span class="line">1 2 2</span><br><span class="line">4 4 1</span><br></pre></td></tr></table></figure><h4 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h4><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">6405</span><br><span class="line">15770</span><br><span class="line">26287</span><br><span class="line">25957</span><br><span class="line">26287</span><br></pre></td></tr></table></figure><h4 id="Hint"><a href="#Hint" class="headerlink" title="Hint"></a>Hint</h4><p>20%çš„æ•°æ®ï¼Œ$1\leq N,M \leq 10$</p><p>50%çš„æ•°æ®ï¼Œ$1\leq N,M \leq 10^3$</p><p>80%çš„æ•°æ®ï¼Œ$1\leq N,M \leq 10^5$</p><p>100%çš„æ•°æ®ï¼Œ$1\leq N,M \leq 2\times 10^5$</p><p>æ•°åˆ—ä¸­çš„æ•° $a_i$ æ»¡è¶³ $-10^9\leq a_i \leq 10^9$</p><h4 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h4><p>è¿™ä¸ªé¢˜ä»¥å‰æ›¾æ˜¯<del>ä»¤äººé—»é£ä¸§èƒ†çš„</del>ä¸»å¸­æ ‘çš„æ¿å­é¢˜ï¼Œç”±äºé¢˜ç›®æ”¯æŒç¦»çº¿æ“ä½œï¼Œç°åœ¨æˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨æ•´ä½“äºŒåˆ†è§£å†³ï¼ŒæŠŠæ‰€æœ‰è¯¢é—®å­˜åˆ°æ•°ç»„é‡Œé¢ï¼Œå¯¹æ‰€æœ‰è¯¢é—®ï¼ŒäºŒåˆ†ç¬¬ $k$ å°çš„æ•°å¹¶æ£€éªŒï¼Œä»è€Œç¦»çº¿å¾—å‡ºå…¨éƒ¨è¯¢é—®çš„ç­”æ¡ˆå¹¶è¾“å‡º</p><p>å…·ä½“çš„è¯´ï¼Œ<strong>å¯¹äºåŒºé—´ $[x,\;y]$ å†…çš„è¯¢é—®ï¼ŒäºŒåˆ†ä¸€ä¸ª $mid$ï¼Œç„¶åå¯¹äºæ¯ä¸ªè¯¢é—®ï¼ŒæŸ¥è¯¢å¾—åˆ°åœ¨åŒºé—´å†…æœ‰ $C$ ä¸ªæ•° $mid$ å°ï¼Œ ä¸ªï¼Œé€šè¿‡æ¯”è¾ƒ $C$ å’Œ $k$ çš„å¤§å°åˆ’åˆ†è¿™ $y-x+1$ ä¸ªè¯¢é—®åˆ° $newL$ å’Œ $newR$ ä¸­ï¼Œç„¶åè¦†ç›–æ‰åŸæ¥çš„åŒºé—´ï¼Œé€’å½’å¤„ç†è¯¢é—®ï¼Œç›´åˆ° $L=R$ çš„æ—¶å€™ï¼Œå°±ç›´æ¥æŠŠåŒºé—´ $[x,\;y]$ å†…çš„è¯¢é—®ç­”æ¡ˆå…¨éƒ¨èµ‹å€¼ä¸º $L$</strong></p><p>åˆ’åˆ†æ—¶æ³¨æ„ï¼Œè‹¥è¦å°†æ“ä½œ $p$ åˆ’åˆ†è‡³ $newR$ ä¸­ï¼Œé‚£ä¹ˆè¦å°†å…¶å¯¹åº”çš„ $k$ å‡å» $C$ï¼ˆ$C$ ä¸ºå½“å‰åŒºé—´æ¯” $mid$ å°çš„æ•°çš„ä¸ªæ•°ï¼‰</p><p>ç»Ÿè®¡åœ¨åŒºé—´å†…æœ‰å¤šå°‘ä¸ªæ•°æ¯” $mid$ å°ï¼Œè¿™å¯ä»¥ç”¨æ ‘çŠ¶æ•°ç»„å®ç°ï¼ˆå°±åƒç»Ÿè®¡é€†åºå¯¹æ•°é‚£æ ·ï¼‰ï¼Œè¦æ³¨æ„æ ‘çŠ¶æ•°ç»„è¦åŠæ—¶æ¸…ç©ºï¼Œä»¥å…å¯¹ä¸‹ä¸€ä¸ªåŒºé—´çš„åˆ¤å®šäº§ç”Ÿå½±å“</p><h4 id="Codes"><a href="#Codes" class="headerlink" title="Codes"></a>Codes</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxn 200005</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> lowbit(x) (x&amp;-x)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> mid ((L+R)&gt;&gt;1)</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> inf=(<span class="type">int</span>)<span class="number">1e9</span>+<span class="number">1</span>; </span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> t&gt;<span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">fcin</span><span class="params">(t &amp;x)</span></span>&#123;</span><br><span class="line"><span class="type">int</span> sign=<span class="number">1</span>; x=<span class="number">0</span>; <span class="type">char</span> op=<span class="built_in">getchar</span>();</span><br><span class="line"><span class="keyword">while</span>(op&lt;<span class="string">&#x27;0&#x27;</span>||op&gt;<span class="string">&#x27;9&#x27;</span>)&#123;<span class="keyword">if</span>(op==<span class="string">&#x27;-&#x27;</span>) sign=<span class="number">-1</span>;op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line"><span class="keyword">while</span>(op&gt;=<span class="string">&#x27;0&#x27;</span>&amp;&amp;op&lt;=<span class="string">&#x27;9&#x27;</span>)&#123;x=x*<span class="number">10</span>+(op<span class="number">-48</span>);op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line">x*=sign;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">node</span>&#123;</span><br><span class="line"><span class="type">int</span> pos,val;</span><br><span class="line"><span class="type">int</span> id,l,r,k; <span class="type">int</span> type;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">get_asVal</span><span class="params">(<span class="type">int</span> p,<span class="type">int</span> v)</span></span>&#123;pos=p;val=v;type=<span class="number">1</span>;&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">get_asAsk</span><span class="params">(<span class="type">int</span> i,<span class="type">int</span> a,<span class="type">int</span> b,<span class="type">int</span> c)</span></span>&#123;id=i;l=a;r=b;k=c;type=<span class="number">2</span>;&#125;</span><br><span class="line">&#125;q[maxn&lt;&lt;<span class="number">1</span>],q1[maxn&lt;&lt;<span class="number">1</span>],q2[maxn&lt;&lt;<span class="number">1</span>];</span><br><span class="line"><span class="type">int</span> n,m,ans[maxn],T[maxn],cnt;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">updata</span><span class="params">(<span class="type">int</span> p,<span class="type">int</span> d)</span></span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=p;i&lt;=n;i+=<span class="built_in">lowbit</span>(i))</span><br><span class="line">T[i]+=d;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">res</span><span class="params">(<span class="type">int</span> p)</span></span>&#123;</span><br><span class="line"><span class="type">int</span> ret=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=p;i;i-=<span class="built_in">lowbit</span>(i))</span><br><span class="line">ret+=T[i];</span><br><span class="line"><span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">(<span class="type">int</span> L,<span class="type">int</span> R,<span class="type">int</span> x,<span class="type">int</span> y)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(L==R)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=x;i&lt;=y;i++)</span><br><span class="line"><span class="keyword">if</span>(q[i].type==<span class="number">2</span>) ans[q[i].id]=L;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125; <span class="type">int</span> qcnt1=<span class="number">0</span>,qcnt2=<span class="number">0</span>,t;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=x;i&lt;=y;i++)&#123;</span><br><span class="line"><span class="keyword">if</span>(q[i].type==<span class="number">1</span>)&#123;</span><br><span class="line"><span class="keyword">if</span>(q[i].val&lt;=mid) <span class="built_in">updata</span>(q[i].pos,<span class="number">1</span>),q1[++qcnt1]=q[i];</span><br><span class="line"><span class="keyword">else</span> q2[++qcnt2]=q[i];</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">t=<span class="built_in">res</span>(q[i].r)-<span class="built_in">res</span>(q[i].l<span class="number">-1</span>);</span><br><span class="line"><span class="keyword">if</span>(q[i].k&lt;=t) q1[++qcnt1]=q[i];</span><br><span class="line"><span class="keyword">else</span> q[i].k-=t,q2[++qcnt2]=q[i];</span><br><span class="line">&#125;</span><br><span class="line">&#125; <span class="built_in">memset</span>(T,<span class="number">0</span>,<span class="built_in">sizeof</span>(T));</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=qcnt1;i++) q[x+i<span class="number">-1</span>]=q1[i];</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=qcnt2;i++) q[x+i<span class="number">-1</span>+qcnt1]=q2[i];</span><br><span class="line"><span class="built_in">solve</span>(L,mid,x,x+qcnt1<span class="number">-1</span>);<span class="built_in">solve</span>(mid+<span class="number">1</span>,R,x+qcnt1,y);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;testin.txt&quot;</span>,<span class="string">&quot;r&quot;</span>,stdin);</span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;testout.txt&quot;</span>,<span class="string">&quot;w&quot;</span>,stdout);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"><span class="built_in">fcin</span>(n);<span class="built_in">fcin</span>(m);<span class="type">int</span> A,B,C,mL=inf,mR=-inf;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line"><span class="built_in">fcin</span>(A),q[++cnt].<span class="built_in">get_asVal</span>(i,A);</span><br><span class="line">mL=<span class="built_in">min</span>(mL,A);mR=<span class="built_in">max</span>(mR,A);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++)&#123;</span><br><span class="line"><span class="built_in">fcin</span>(A);<span class="built_in">fcin</span>(B);<span class="built_in">fcin</span>(C);</span><br><span class="line">q[++cnt].<span class="built_in">get_asAsk</span>(++ans[<span class="number">0</span>],A,B,C);</span><br><span class="line">&#125; <span class="built_in">solve</span>(mL,mR,<span class="number">1</span>,cnt);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=ans[<span class="number">0</span>];i++) <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,ans[i]);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ´›è°·P2617-Dynamic-Rankings"><a href="#æ´›è°·P2617-Dynamic-Rankings" class="headerlink" title="æ´›è°·P2617 Dynamic Rankings"></a>æ´›è°·P2617 Dynamic Rankings</h3><h4 id="Description-1"><a href="#Description-1" class="headerlink" title="Description"></a>Description</h4><p>ç»™å®šä¸€ä¸ªå«æœ‰nä¸ªæ•°çš„åºåˆ—a[1],a[2],a[3]â€¦â€¦a[n]ï¼Œç¨‹åºå¿…é¡»å›ç­”è¿™æ ·çš„è¯¢é—®ï¼šå¯¹äºç»™å®šçš„i,j,kï¼Œåœ¨a[i],a[i+1],a[i+2]â€¦â€¦a[j]ä¸­ç¬¬kå°çš„æ•°æ˜¯å¤šå°‘(1â‰¤kâ‰¤j-i+1)</p><p>å¹¶ä¸”ï¼Œä½ å¯ä»¥æ”¹å˜ä¸€äº›a[i]çš„å€¼ï¼Œæ”¹å˜åï¼Œç¨‹åºè¿˜èƒ½é’ˆå¯¹æ”¹å˜åçš„aç»§ç»­å›ç­”ä¸Šé¢çš„é—®é¢˜ã€‚</p><p>ä½ éœ€è¦ç¼–ä¸€ä¸ªè¿™æ ·çš„ç¨‹åºï¼Œä»è¾“å…¥æ–‡ä»¶ä¸­è¯»å…¥åºåˆ—aï¼Œç„¶åè¯»å…¥ä¸€ç³»åˆ—çš„æŒ‡ä»¤ï¼ŒåŒ…æ‹¬è¯¢é—®æŒ‡ä»¤å’Œä¿®æ”¹æŒ‡ä»¤ã€‚</p><h4 id="Input-1"><a href="#Input-1" class="headerlink" title="Input"></a>Input</h4><p>ç¬¬ä¸€è¡Œæœ‰ä¸¤ä¸ªæ­£æ•´æ•°n(1â‰¤nâ‰¤100000)ï¼Œm(1â‰¤mâ‰¤100000)ã€‚åˆ†åˆ«è¡¨ç¤ºåºåˆ—çš„é•¿åº¦å’ŒæŒ‡ä»¤çš„ä¸ªæ•°ã€‚</p><p>ç¬¬äºŒè¡Œæœ‰nä¸ªæ•°ï¼Œè¡¨ç¤ºa[1],a[2]â€¦â€¦a[n]ï¼Œè¿™äº›æ•°éƒ½å°äº10^9ã€‚æ¥ä¸‹æ¥çš„mè¡Œæè¿°æ¯æ¡æŒ‡ä»¤ï¼Œæ¯è¡Œçš„æ ¼å¼æ˜¯ä¸‹é¢ä¸¤ç§æ ¼å¼ä¸­çš„ä¸€ç§ã€‚ Q i j k æˆ–è€… C i t</p><ul><li>Q i j k ï¼ˆi,j,kæ˜¯æ•°å­—ï¼Œ1â‰¤iâ‰¤jâ‰¤n, 1â‰¤kâ‰¤j-i+1ï¼‰è¡¨ç¤ºè¯¢é—®æŒ‡ä»¤ï¼Œè¯¢é—®a[i]ï¼Œa[i+1]â€¦â€¦a[j]ä¸­ç¬¬kå°çš„æ•°ã€‚</li><li>C i t (1â‰¤iâ‰¤nï¼Œ0â‰¤tâ‰¤10^9)è¡¨ç¤ºæŠŠa[i]æ”¹å˜æˆä¸ºtã€‚</li></ul><h4 id="Output-1"><a href="#Output-1" class="headerlink" title="Output"></a>Output</h4><p>å¯¹äºæ¯ä¸€æ¬¡è¯¢é—®ï¼Œä½ éƒ½éœ€è¦è¾“å‡ºä»–çš„ç­”æ¡ˆï¼Œæ¯ä¸€ä¸ªè¾“å‡ºå å•ç‹¬çš„ä¸€è¡Œã€‚</p><h4 id="Sample-Input-1"><a href="#Sample-Input-1" class="headerlink" title="Sample Input"></a>Sample Input</h4><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">5 3</span><br><span class="line">3 2 1 4 7</span><br><span class="line">Q 1 4 3</span><br><span class="line">C 2 6</span><br><span class="line">Q 2 5 3</span><br></pre></td></tr></table></figure><h4 id="Sample-Output-1"><a href="#Sample-Output-1" class="headerlink" title="Sample Output"></a>Sample Output</h4><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">3</span><br><span class="line">6</span><br></pre></td></tr></table></figure><h4 id="Hint-1"><a href="#Hint-1" class="headerlink" title="Hint"></a>Hint</h4><p>10%çš„æ•°æ®ä¸­ï¼Œm,nâ‰¤100;</p><p>20%çš„æ•°æ®ä¸­ï¼Œm,nâ‰¤1000;</p><p>50%çš„æ•°æ®ä¸­ï¼Œm,nâ‰¤10000ã€‚</p><p>å¯¹äºæ‰€æœ‰æ•°æ®ï¼Œm,nâ‰¤100000</p><h4 id="åˆ†æ-1"><a href="#åˆ†æ-1" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h4><p>æœ¬é¢˜æ˜¯æ¶‰åŠä¿®æ”¹æ“ä½œçš„åŒºé—´ K å°å€¼ï¼Œè€Œåƒ CDQ åˆ†æ²»é‚£æ ·ï¼Œ<strong>æˆ‘ä»¬åŒæ ·å¯ä»¥å°†ä¿®æ”¹æ“ä½œå’Œè¯¢é—®æ“ä½œåˆå¹¶åˆ°ä¸€ä¸ªæ•°ç»„é‡Œé¢ï¼ˆä¸Šé¢çš„ä»£ç å·²ç»ä½“ç°äº†è¿™ä¸€ç‚¹ï¼‰</strong></p><p>åˆå¹¶ä¹‹ååŠ¨æ€å¤„ç†ï¼Œå¦‚æœæ˜¯ä¿®æ”¹æ“ä½œï¼Œå°±æ›´æ–°æ ‘çŠ¶æ•°ç»„ï¼ŒåŒæ—¶å°†è¿™ä¸ªæ“ä½œæ”¾åœ¨ $newL$ ä¸­ï¼Œ<strong>è¿™æ˜¯å› ä¸ºä¿®æ”¹æ“ä½œèƒ½å½±å“å…¶åé¢çš„æŸ¥è¯¢æ“ä½œï¼Œå› æ­¤éœ€è¦ä¼˜å…ˆå¤„ç†</strong>ï¼Œå¦‚æœæ˜¯æŸ¥è¯¢æ“ä½œï¼ŒæŒ‰ç…§ä¸Šä¸€ä¸ªé¢˜çš„å¤„ç†æ–¹æ³•å³å¯</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¿®æ”¹æ“ä½œæœ‰æ­£å‘çš„ï¼ˆæ·»åŠ å€¼ï¼‰ä¹Ÿæœ‰è´Ÿå‘çš„ï¼ˆæ“¦é™¤å€¼ï¼‰ï¼Œä½“ç°åœ¨é¢˜ç›®ä¸­å°±æ˜¯ä¸€ä¸ªå…ƒç´ çš„ä¿®æ”¹å¯ä»¥çœ‹åšå…ˆæ“¦é™¤è¿™ä¸ªå…ƒç´ ï¼Œå†æ·»åŠ ä¿®æ”¹åçš„å…ƒç´ ï¼Œä¸€å…± 2 ä¸ªä¿®æ”¹æ“ä½œï¼Œå› æ­¤ï¼Œä¸ºäº†ä¸å½±å“ä¸‹ä¸€æ¬¡åŒºé—´çš„æ£€éªŒï¼Œ<strong>å¤„ç†å®Œæ¯•åéœ€è¦å¯¹æ ‘çŠ¶æ•°ç»„å¤„ç†ï¼Œå³æŠŠå½“å‰åŒºé—´ $[x,\;y]$ å†…çš„ä¿®æ”¹æ“ä½œå…¨éƒ¨åå‘æ‰§è¡Œï¼ˆå…¶å®å°±æ˜¯ç³»æ•°ä¹˜ä¸Š -1ï¼‰</strong></p><h4 id="Codes-1"><a href="#Codes-1" class="headerlink" title="Codes"></a>Codes</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxn 200005</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> lowbit(x) (x&amp;-x)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> mid ((L+R)&gt;&gt;1)</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> inf=(<span class="type">int</span>)<span class="number">1e9</span>+<span class="number">1</span>; </span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> t&gt;<span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">fcin</span><span class="params">(t &amp;x)</span></span>&#123;</span><br><span class="line"><span class="type">int</span> sign=<span class="number">1</span>; x=<span class="number">0</span>; <span class="type">char</span> op=<span class="built_in">getchar</span>();</span><br><span class="line"><span class="keyword">while</span>(op&lt;<span class="string">&#x27;0&#x27;</span>||op&gt;<span class="string">&#x27;9&#x27;</span>)&#123;<span class="keyword">if</span>(op==<span class="string">&#x27;-&#x27;</span>) sign=<span class="number">-1</span>;op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line"><span class="keyword">while</span>(op&gt;=<span class="string">&#x27;0&#x27;</span>&amp;&amp;op&lt;=<span class="string">&#x27;9&#x27;</span>)&#123;x=x*<span class="number">10</span>+(op<span class="number">-48</span>);op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line">x*=sign;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">node</span>&#123;</span><br><span class="line"><span class="type">int</span> pos,val,alpha;</span><br><span class="line"><span class="type">int</span> id,l,r,k; <span class="type">int</span> type;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">get_asVal</span><span class="params">(<span class="type">int</span> p,<span class="type">int</span> v,<span class="type">int</span> al)</span></span>&#123;pos=p;val=v;alpha=al;type=<span class="number">1</span>;&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">get_asAsk</span><span class="params">(<span class="type">int</span> i,<span class="type">int</span> a,<span class="type">int</span> b,<span class="type">int</span> c)</span></span>&#123;id=i;l=a;r=b;k=c;type=<span class="number">2</span>;&#125;</span><br><span class="line">&#125;q[maxn&lt;&lt;<span class="number">2</span>],q1[maxn&lt;&lt;<span class="number">2</span>],q2[maxn&lt;&lt;<span class="number">2</span>];</span><br><span class="line"><span class="type">int</span> n,m,ans[maxn],T[maxn],cnt;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">updata</span><span class="params">(<span class="type">int</span> p,<span class="type">int</span> d)</span></span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=p;i&lt;=n;i+=<span class="built_in">lowbit</span>(i))</span><br><span class="line">T[i]+=d;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">res</span><span class="params">(<span class="type">int</span> p)</span></span>&#123;</span><br><span class="line"><span class="type">int</span> ret=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=p;i;i-=<span class="built_in">lowbit</span>(i))</span><br><span class="line">ret+=T[i];</span><br><span class="line"><span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">(<span class="type">int</span> L,<span class="type">int</span> R,<span class="type">int</span> x,<span class="type">int</span> y)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(x&gt;y) <span class="keyword">return</span>; </span><br><span class="line"><span class="keyword">if</span>(L==R)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=x;i&lt;=y;i++)</span><br><span class="line"><span class="keyword">if</span>(q[i].type==<span class="number">2</span>) ans[q[i].id]=L;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125; <span class="type">int</span> qcnt1=<span class="number">0</span>,qcnt2=<span class="number">0</span>,t;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=x;i&lt;=y;i++)&#123;</span><br><span class="line"><span class="keyword">if</span>(q[i].type==<span class="number">1</span>)&#123;</span><br><span class="line"><span class="keyword">if</span>(q[i].val&lt;=mid) </span><br><span class="line"><span class="built_in">updata</span>(q[i].pos,q[i].alpha),q1[++qcnt1]=q[i];</span><br><span class="line"><span class="keyword">else</span> q2[++qcnt2]=q[i];</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">t=<span class="built_in">res</span>(q[i].r)-<span class="built_in">res</span>(q[i].l<span class="number">-1</span>);</span><br><span class="line"><span class="keyword">if</span>(q[i].k&lt;=t) q1[++qcnt1]=q[i];</span><br><span class="line"><span class="keyword">else</span> q[i].k-=t,q2[++qcnt2]=q[i];</span><br><span class="line">&#125;</span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=qcnt1;i++)</span><br><span class="line"><span class="keyword">if</span>(q1[i].type==<span class="number">1</span>) <span class="built_in">updata</span>(q1[i].pos,-q1[i].alpha);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=qcnt1;i++) q[x+i<span class="number">-1</span>]=q1[i];</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=qcnt2;i++) q[x+i<span class="number">-1</span>+qcnt1]=q2[i];</span><br><span class="line"><span class="built_in">solve</span>(L,mid,x,x+qcnt1<span class="number">-1</span>);<span class="built_in">solve</span>(mid+<span class="number">1</span>,R,x+qcnt1,y);</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> s[maxn];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;testin.txt&quot;</span>,<span class="string">&quot;r&quot;</span>,stdin);</span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;testout.txt&quot;</span>,<span class="string">&quot;w&quot;</span>,stdout);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"><span class="built_in">fcin</span>(n);<span class="built_in">fcin</span>(m);<span class="type">int</span> A,B,C,mL=inf,mR=-inf;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line"><span class="built_in">fcin</span>(A),q[++cnt].<span class="built_in">get_asVal</span>(i,A,<span class="number">1</span>);</span><br><span class="line">s[i]=A;</span><br><span class="line">mL=<span class="built_in">min</span>(mL,A);mR=<span class="built_in">max</span>(mR,A);</span><br><span class="line">&#125; <span class="type">char</span> op;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++)&#123;</span><br><span class="line">cin&gt;&gt;op;</span><br><span class="line"><span class="keyword">if</span>(op==<span class="string">&#x27;Q&#x27;</span>)&#123;</span><br><span class="line"><span class="built_in">fcin</span>(A);<span class="built_in">fcin</span>(B);<span class="built_in">fcin</span>(C);</span><br><span class="line">q[++cnt].<span class="built_in">get_asAsk</span>(++ans[<span class="number">0</span>],A,B,C);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"><span class="built_in">fcin</span>(A);<span class="built_in">fcin</span>(B);</span><br><span class="line">mL=<span class="built_in">min</span>(mL,B);mR=<span class="built_in">max</span>(mR,B);</span><br><span class="line">q[++cnt].<span class="built_in">get_asVal</span>(A,s[A],<span class="number">-1</span>);s[A]=B;</span><br><span class="line">q[++cnt].<span class="built_in">get_asVal</span>(A,s[A],<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125; <span class="built_in">solve</span>(mL,mR,<span class="number">1</span>,cnt);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=ans[<span class="number">0</span>];i++) <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,ans[i]);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ´›è°·SP10264-METEORS-æµæ˜Ÿ"><a href="#æ´›è°·SP10264-METEORS-æµæ˜Ÿ" class="headerlink" title="æ´›è°·SP10264 METEORS - æµæ˜Ÿ"></a>æ´›è°·SP10264 METEORS - æµæ˜Ÿ</h3><h4 id="Description-2"><a href="#Description-2" class="headerlink" title="Description"></a>Description</h4><p>Byteotian Interstellar Unionæœ‰Nä¸ªæˆå‘˜å›½ã€‚ç°åœ¨å®ƒå‘ç°äº†ä¸€é¢—æ–°çš„æ˜Ÿçƒï¼Œè¿™é¢—æ˜Ÿçƒçš„è½¨é“è¢«åˆ†ä¸ºMä»½ï¼ˆç¬¬Mä»½å’Œç¬¬1ä»½ç›¸é‚»ï¼‰ï¼Œç¬¬iä»½ä¸Šæœ‰ç¬¬Aiä¸ªå›½å®¶çš„å¤ªç©ºç«™ã€‚<br>è¿™ä¸ªæ˜Ÿçƒç»å¸¸ä¼šä¸‹é™¨çŸ³é›¨ã€‚BIUå·²ç»é¢„æµ‹äº†æ¥ä¸‹æ¥Kåœºé™¨çŸ³é›¨çš„æƒ…å†µã€‚<br>BIUçš„ç¬¬iä¸ªæˆå‘˜å›½å¸Œæœ›èƒ½å¤Ÿæ”¶é›†Piå•ä½çš„é™¨çŸ³æ ·æœ¬ã€‚ä½ çš„ä»»åŠ¡æ˜¯åˆ¤æ–­å¯¹äºæ¯ä¸ªå›½å®¶ï¼Œå®ƒéœ€è¦åœ¨ç¬¬å‡ æ¬¡é™¨çŸ³é›¨ä¹‹åï¼Œæ‰èƒ½æ”¶é›†è¶³å¤Ÿçš„é™¨çŸ³ã€‚</p><h4 id="Input-2"><a href="#Input-2" class="headerlink" title="Input"></a>Input</h4><p>ç¬¬ä¸€è¡Œæ˜¯ä¸¤ä¸ªæ•°N,Mã€‚ ç¬¬äºŒè¡Œæœ‰Mä¸ªæ•°ï¼Œç¬¬iä¸ªæ•°Oiè¡¨ç¤ºç¬¬iæ®µè½¨é“ä¸Šæœ‰ç¬¬Oiä¸ªå›½å®¶çš„å¤ªç©ºç«™ã€‚<br>ç¬¬ä¸‰è¡Œæœ‰Nä¸ªæ•°ï¼Œç¬¬iä¸ªæ•°Piè¡¨ç¤ºç¬¬iä¸ªå›½å®¶å¸Œæœ›æ”¶é›†çš„é™¨çŸ³æ•°é‡ã€‚ ç¬¬å››è¡Œæœ‰ä¸€ä¸ªæ•°Kï¼Œè¡¨ç¤ºBIUé¢„æµ‹äº†æ¥ä¸‹æ¥çš„Kåœºé™¨çŸ³é›¨ã€‚<br>æ¥ä¸‹æ¥Kè¡Œï¼Œæ¯è¡Œæœ‰ä¸‰ä¸ªæ•°Li,Ri,Aiï¼Œè¡¨ç¤ºç¬¬Kåœºé™¨çŸ³é›¨çš„å‘ç”Ÿåœ°ç‚¹åœ¨ä»Lié¡ºæ—¶é’ˆåˆ°Riçš„åŒºé—´ä¸­ï¼ˆå¦‚æœLi&lt;=Riï¼Œå°±æ˜¯Li,Li+1,â€¦,Riï¼Œå¦åˆ™å°±æ˜¯Ri,Ri+1,â€¦,m-1,m,1,â€¦,Liï¼‰ï¼Œå‘åŒºé—´ä¸­çš„æ¯ä¸ªå¤ªç©ºç«™æä¾›Aiå•ä½çš„é™¨çŸ³æ ·æœ¬ã€‚</p><h4 id="Output-2"><a href="#Output-2" class="headerlink" title="Output"></a>Output</h4><p>Nè¡Œã€‚ç¬¬iè¡Œçš„æ•°Wiè¡¨ç¤ºç¬¬iä¸ªå›½å®¶åœ¨ç¬¬Wiæ³¢é™¨çŸ³é›¨ä¹‹åèƒ½å¤Ÿæ”¶é›†åˆ°è¶³å¤Ÿçš„é™¨çŸ³æ ·æœ¬ã€‚å¦‚æœåˆ°ç¬¬Kæ³¢ç»“æŸåä»ç„¶æ”¶é›†ä¸åˆ°ï¼Œè¾“å‡ºNIEã€‚</p><h4 id="Sample-Input-2"><a href="#Sample-Input-2" class="headerlink" title="Sample Input"></a>Sample Input</h4><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">3 5</span><br><span class="line">1 3 2 1 3</span><br><span class="line">10 5 7</span><br><span class="line">3</span><br><span class="line">4 2 4</span><br><span class="line">1 3 1</span><br><span class="line">3 5 2</span><br></pre></td></tr></table></figure><h4 id="Sample-Output-2"><a href="#Sample-Output-2" class="headerlink" title="Sample Output"></a>Sample Output</h4><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">3</span><br><span class="line">NIE</span><br><span class="line">1</span><br></pre></td></tr></table></figure><h4 id="Hint-2"><a href="#Hint-2" class="headerlink" title="Hint"></a>Hint</h4><p>25%çš„æ•°æ®ä¸­ï¼Œ$n,m,k \leq 1000$;</p><p>100%çš„æ•°æ®ä¸­ï¼Œ$n,m,k \leq 3\times 10^5ï¼Œ1\leq O_i \leq nï¼Œ1\leq P_i ,A_i \leq 10^9$;</p><h4 id="åˆ†æ-2"><a href="#åˆ†æ-2" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h4><p>æ•´ä½“äºŒåˆ†ï¼Œå½“ç„¶å°±æ˜¯äºŒåˆ†ç¬¬ $mid$ åœºæµæ˜Ÿé›¨ä¹‹åèƒ½ä¸èƒ½æ»¡è¶³æ¯ä¸ªå›½å®¶é‡‡é›†æ ·æœ¬çš„éœ€æ±‚ï¼Œæ ¹æ®èƒ½å¦æ»¡è¶³å°†å½“å‰ $[x,\;y]$ åŒºé—´ä¸­çš„å›½å®¶åˆ’åˆ†è‡³ $newL$ å’Œ $newR$</p><p>ç»Ÿè®¡ç¬¬ $mid$ åœºæµæ˜Ÿé›¨ä¹‹åï¼Œ$m$ ä¸ªç©ºé—´ç«™çš„æƒ…å†µï¼Œ<strong>åŒæ ·å¯é‡‡ç”¨æ ‘çŠ¶æ•°ç»„ï¼Œæ ¹æ®æ ‘çŠ¶æ•°ç»„å‰ç¼€å’Œçš„æ€§è´¨è¿›è¡ŒåŒºé—´æ›´æ–°</strong></p><p>å…·ä½“çš„è¯´ï¼Œç»™ $[L,\; R]$($L \leq R$) çš„ç©ºé—´ç«™å¢åŠ  $k$ ä¸ªé™¨çŸ³æ ·æœ¬ï¼Œå°±æ˜¯å…ˆ $updata(L,k)$ ï¼Œè¿™æ · $L$ åŠå…¶ä»¥åçš„ç©ºé—´ç«™å°±ä¼šå¤šå‡º $k$ æ¥ï¼Œä½†æ˜¯ $R$ ä»¥åçš„ç©ºé—´ç«™æ²¡æœ‰å¢åŠ é™¨çŸ³ï¼Œéœ€è¦å‡å»ï¼Œä¹Ÿå°±æ˜¯ $updata(R+1,-k)$ï¼Œè¿™é‡Œçš„ $k$ å¹¶ä¸ä¸€å®šä¸ºæ­£ï¼Œæ¯”å¦‚å½“å‰è¿›è¡Œåˆ° $x(x&gt;mid)$ åœºæµæ˜Ÿé›¨ï¼Œæˆ‘ä»¬éœ€è¦å°†æ—¶é—´å›é€€åˆ°ç¬¬ $mid$ åœºæµæ˜Ÿé›¨ï¼Œæ­¤å¤„çš„ $k$ å°±åº”ä¸ºè´Ÿå€¼</p><p>å¯¹äº $L&gt;R$ çš„æƒ…å†µï¼Œè§†ä½œ $[1,\;R]$ å’Œ $[R,\;L]$ çš„åŒæ—¶æ›´æ–°å³å¯ï¼Œå‰©ä¸‹çš„éƒ¨åˆ†å°±å’Œä¸Šè¿°çš„æ•´ä½“äºŒåˆ†ä»£ç éå¸¸ç±»ä¼¼äº†</p><p>ä¸ºäº†åˆ¤æ–­é¢˜ç›®ä¸­ <code>NIE</code> çš„æƒ…å†µï¼Œ<strong>æˆ‘ä»¬å¯ä»¥äººä¸ºå¢åŠ ç¬¬ $k+1$ åœºæµæ˜Ÿé›¨ï¼Œä½¿å…¶ç»™æ‰€æœ‰ç©ºé—´ç«™å¸¦æ¥æå¤§æ•°é‡çš„æ ·æœ¬ï¼ˆç®€è€Œè¨€ä¹‹å°±æ˜¯ä¸€å®šå¯ä»¥æ»¡è¶³æ‰€æœ‰ç©ºé—´ç«™çš„éœ€æ±‚ï¼‰ï¼Œ</strong>åŸæœ¬ä¸èƒ½åœ¨ $k$ åœºæµæ˜Ÿé›¨ç»“æŸä¹‹åæ”¶é›†å®Œçš„å›½å®¶å°±ä¼šåœ¨ $k+1$ ç»“æŸä¹‹åæ”¶é›†å®Œï¼Œæ ¹æ®è¿™ä¸ªåˆ¤æ–­æ˜¯å¦ <code>NIE</code> å³å¯</p><h4 id="Codes-2"><a href="#Codes-2" class="headerlink" title="Codes"></a>Codes</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> lowbit(x) (x&amp;-x)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> mid ((L+R)&gt;&gt;1)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ve(X) vector<span class="string">&lt;X&gt;</span>::iterator</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxn 300005</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> t&gt;<span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">fcin</span><span class="params">(t &amp;x)</span></span>&#123;</span><br><span class="line"><span class="type">int</span> sign=<span class="number">1</span>; x=<span class="number">0</span>; <span class="type">char</span> op=<span class="built_in">getchar</span>();</span><br><span class="line"><span class="keyword">while</span>(op&lt;<span class="string">&#x27;0&#x27;</span>||op&gt;<span class="string">&#x27;9&#x27;</span>)&#123;<span class="keyword">if</span>(op==<span class="string">&#x27;-&#x27;</span>) sign=<span class="number">-1</span>;op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line"><span class="keyword">while</span>(op&gt;=<span class="string">&#x27;0&#x27;</span>&amp;&amp;op&lt;=<span class="string">&#x27;9&#x27;</span>)&#123;x=x*<span class="number">10</span>+(op<span class="number">-48</span>);op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line">x*=sign;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">node</span>&#123;</span><br><span class="line"><span class="type">int</span> l,r,t;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">get</span><span class="params">(<span class="type">int</span> a,<span class="type">int</span> b,<span class="type">int</span> c)</span></span>&#123;l=a,r=b,t=c;&#125;</span><br><span class="line">&#125;q[maxn]; ll T[maxn];<span class="type">int</span> n,m,k;</span><br><span class="line"><span class="type">int</span> tar[maxn];vector&lt;<span class="type">int</span>&gt; a[maxn];</span><br><span class="line"><span class="type">int</span> id[maxn],ans[maxn],cur,s[maxn];</span><br><span class="line"><span class="type">bool</span> filled[maxn];</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">updata</span><span class="params">(<span class="type">int</span> p,<span class="type">int</span> d)</span></span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=p;i&lt;=m;i+=<span class="built_in">lowbit</span>(i))</span><br><span class="line">T[i]+=d;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">ll <span class="title">res</span><span class="params">(<span class="type">int</span> p)</span></span>&#123;</span><br><span class="line">ll ret=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=p;i;i-=<span class="built_in">lowbit</span>(i))</span><br><span class="line">ret+=T[i];</span><br><span class="line"><span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">change</span><span class="params">(<span class="type">int</span> pos,<span class="type">int</span> alpha)</span></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> delta q[pos].t</span></span><br><span class="line"><span class="keyword">if</span>(q[pos].l&lt;=q[pos].r)</span><br><span class="line"><span class="built_in">updata</span>(q[pos].l,delta*alpha),<span class="built_in">updata</span>(q[pos].r+<span class="number">1</span>,delta*alpha*<span class="number">-1</span>);</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="built_in">updata</span>(<span class="number">1</span>,delta*alpha),<span class="built_in">updata</span>(q[pos].r+<span class="number">1</span>,delta*alpha*<span class="number">-1</span>),</span><br><span class="line"><span class="built_in">updata</span>(q[pos].l,delta*alpha);</span><br><span class="line"><span class="meta">#<span class="keyword">undef</span> delta</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">(<span class="type">int</span> L,<span class="type">int</span> R,<span class="type">int</span> x,<span class="type">int</span> y)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(x&gt;y) <span class="keyword">return</span>;</span><br><span class="line"><span class="keyword">if</span>(L==R)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=x;i&lt;=y;i++) ans[id[i]]=L;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125; <span class="keyword">while</span>(cur&lt;=mid) <span class="built_in">change</span>(++cur,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">while</span>(cur&gt;mid) <span class="built_in">change</span>(cur--,<span class="number">-1</span>);</span><br><span class="line"><span class="type">int</span> cnt=<span class="number">0</span>; ll sum=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=x;i&lt;=y;i++)&#123;</span><br><span class="line">sum=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="built_in">ve</span>(<span class="type">int</span>) iter=a[id[i]].<span class="built_in">begin</span>();iter!=a[id[i]].<span class="built_in">end</span>();iter++)&#123;</span><br><span class="line">sum+=<span class="built_in">res</span>(*iter); <span class="keyword">if</span>(sum&gt;=tar[id[i]]) <span class="keyword">break</span>; </span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">if</span>(sum&gt;=tar[id[i]]) filled[id[i]]=<span class="literal">true</span>,cnt++;</span><br><span class="line"><span class="keyword">else</span> filled[id[i]]=<span class="literal">false</span>;</span><br><span class="line">&#125; <span class="type">int</span> p1=x,p2=x+cnt;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=x;i&lt;=y;i++)</span><br><span class="line"><span class="keyword">if</span>(filled[id[i]]) s[p1++]=id[i];</span><br><span class="line"><span class="keyword">else</span> s[p2++]=id[i];</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=x;i&lt;=y;i++) id[i]=s[i];</span><br><span class="line"><span class="built_in">solve</span>(L,mid,x,p1<span class="number">-1</span>);<span class="built_in">solve</span>(mid+<span class="number">1</span>,R,p1,p2<span class="number">-1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;testin.txt&quot;</span>,<span class="string">&quot;r&quot;</span>,stdin);</span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;testout.txt&quot;</span>,<span class="string">&quot;w&quot;</span>,stdout);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"><span class="built_in">fcin</span>(n);<span class="built_in">fcin</span>(m);<span class="type">int</span> x,y,z;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++) <span class="built_in">fcin</span>(x),a[x].<span class="built_in">push_back</span>(i);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++) <span class="built_in">fcin</span>(tar[i]); <span class="built_in">fcin</span>(k);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=k;i++)&#123;</span><br><span class="line"><span class="built_in">fcin</span>(x);<span class="built_in">fcin</span>(y);<span class="built_in">fcin</span>(z);</span><br><span class="line">q[i].<span class="built_in">get</span>(x,y,z);</span><br><span class="line">&#125; q[++k].<span class="built_in">get</span>(<span class="number">1</span>,n,(<span class="type">int</span>)<span class="number">1e9</span>+<span class="number">1</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++) id[i]=i;</span><br><span class="line"><span class="built_in">solve</span>(<span class="number">1</span>,k,<span class="number">1</span>,n);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line"><span class="keyword">if</span>(ans[i]==k) <span class="built_in">printf</span>(<span class="string">&quot;NIE\n&quot;</span>);</span><br><span class="line"><span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,ans[i]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åˆ†æ²» </tag>
            
            <tag> äºŒåˆ† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ•°è®º| SPFA | å›¾è®º | åˆ†æ²» | 20190820è€ƒè¯•è§£  é¢˜æŠ¥å‘Š</title>
      <link href="/2019/08/20/2019-08-20-0820%E8%80%83%E8%AF%95/"/>
      <url>/2019/08/20/2019-08-20-0820%E8%80%83%E8%AF%95/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><h2 id="é¢˜ç›®é™åˆ¶ä¸€è§ˆ"><a href="#é¢˜ç›®é™åˆ¶ä¸€è§ˆ" class="headerlink" title="é¢˜ç›®é™åˆ¶ä¸€è§ˆ"></a>é¢˜ç›®é™åˆ¶ä¸€è§ˆ</h2><div class="table-container"><table><thead><tr><th style="text-align:center">é¢˜ç›®</th><th style="text-align:center">æ—¶é—´é™åˆ¶</th><th style="text-align:center">ç©ºé—´é™åˆ¶</th></tr></thead><tbody><tr><td style="text-align:center">1. agent</td><td style="text-align:center">1000 MS</td><td style="text-align:center">256 MB</td></tr><tr><td style="text-align:center">2. earth</td><td style="text-align:center">1000 MS</td><td style="text-align:center">256 MB</td></tr><tr><td style="text-align:center">3. aurora</td><td style="text-align:center">2000 MS</td><td style="text-align:center">512 MB</td></tr></tbody></table></div><h2 id="1-ç‰¹å·¥ï¼ˆagent-cppï¼‰"><a href="#1-ç‰¹å·¥ï¼ˆagent-cppï¼‰" class="headerlink" title="1. ç‰¹å·¥ï¼ˆagent.cppï¼‰"></a>1. ç‰¹å·¥ï¼ˆagent.cppï¼‰</h2><h3 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h3><p>IMF(ä¸å¯èƒ½ä»»åŠ¡å°ç»„)æœ‰<em>N</em>ä¸ªAgentï¼Œæ¯ä¸ªAgentçš„èƒ½åŠ›å€¼äº’ä¸ç›¸åŒï¼Œç°åœ¨éƒ¨é•¿å…ˆç”Ÿæƒ³è¦æ´¾å‡º<em>A</em>,<em>B</em>ä¸¤é˜ŸAgentå»å‚åŠ ç‰¹åˆ«ä»»åŠ¡ã€‚ä½†æ˜¯å‚åŠ å¤§æˆ˜çš„ä¸¤ä¸ªé˜Ÿä¼è¦æ»¡è¶³ä¸¤ä¸ªè¦æ±‚ï¼š</p><p><em>1.</em> <em>A</em>é˜Ÿä¸­èƒ½åŠ›æœ€å¤§çš„Agentçš„èƒ½åŠ›å€¼è¦å°äº<em>B</em>é˜Ÿèƒ½åŠ›æœ€å¼±çš„Agentçš„èƒ½åŠ›å€¼ã€‚</p><p><em>2.</em> <em>A</em>,<em>B</em>ä¸¤é˜Ÿéƒ½è¦æœ‰äººå‚åŠ ã€‚</p><p>å¹¶ä¸æ˜¯æ‰€æœ‰çš„Agentéƒ½è¦å»å‚åŠ çš„ï¼Œå¿ƒæ€¥çš„éƒ¨é•¿å…ˆç”Ÿæƒ³çŸ¥é“æœ‰å¤šå°‘ç§å®‰æ’Agentçš„æ–¹æ¡ˆã€‚ç”±äºç­”æ¡ˆå¯èƒ½å¾ˆå¤§ï¼Œæ‰€ä»¥åªéœ€è¦ä½ æ±‚å‡ºç­”æ¡ˆæ¨¡ $10^9+7$ çš„å€¼å°±å¯ä»¥äº†ã€‚</p><h3 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h3><p>è¾“å…¥ä»…ä¸€è¡Œï¼Œä¸ºä¸€ä¸ªæ•´æ•° N</p><h3 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h3><p>è¾“å‡ºä¸€è¡Œä¸€ä¸ªæ•´æ•°ï¼Œä¸ºæ–¹æ¡ˆæ•°æ¨¡ $10^9+7$ çš„å€¼</p><h3 id="Sample-Input-1"><a href="#Sample-Input-1" class="headerlink" title="Sample Input #1"></a>Sample Input #1</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">3</span><br></pre></td></tr></table></figure><h3 id="Sample-Output-1"><a href="#Sample-Output-1" class="headerlink" title="Sample Output #1"></a>Sample Output #1</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">5</span><br></pre></td></tr></table></figure><h3 id="Sample-Input-2"><a href="#Sample-Input-2" class="headerlink" title="Sample Input #2"></a>Sample Input #2</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">6</span><br></pre></td></tr></table></figure><h3 id="Sample-Output-2"><a href="#Sample-Output-2" class="headerlink" title="Sample Output #2"></a>Sample Output #2</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">129</span><br></pre></td></tr></table></figure><h3 id="Hint"><a href="#Hint" class="headerlink" title="Hint"></a>Hint</h3><p>å¯¹äº20%çš„æ•°æ® <em>N</em>â‰¤10</p><p>å¯¹äº40%çš„æ•°æ® <em>N</em>â‰¤1000</p><p>å¯¹äº60%çš„æ•°æ® <em>N</em>â‰¤10^5</p><p>å¯¹äº100%çš„æ•°æ® <em>N</em>â‰¤10^9</p><h3 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h3><p>è¶…çº§åæ‚”çš„ä¸€ä¸ªé¢˜ï¼Œè€ƒå®Œè¯•æ‰å‘ç°æˆ‘çš„å¼å­ç¦»æ­£ç¡®çš„å¼å­ä¸€æ­¥ä¹‹é¥â€¦â€¦ç„¶è€Œå› æ­¤ TLE äº† 40 åˆ†â€¦â€¦</p><p>è¿™ä¸ªé¢˜è®¾ç‰¹å·¥èƒ½åŠ›ä¸º 1 åˆ° nï¼Œ<strong>è€ƒè™‘ A é˜Ÿä¸­èƒ½åŠ›å€¼æœ€å¤§çš„ç‰¹å·¥ä¸º $x$ ï¼Œé‚£ä¹ˆ B é˜Ÿæœ€å¤šåªèƒ½é€‰æ‹© $n-x$ ä¸ªç‰¹å·¥ï¼Œä¹Ÿå°±æ˜¯æ‰€æœ‰èƒ½åŠ›å€¼å¤§äº $x$ çš„ç‰¹å·¥</strong></p><p>æ•°æ®è¾ƒå°æ—¶ï¼Œåˆ—å‡º A æ‰€æœ‰å¯èƒ½çš„é€‰æ‹©æ–¹æ¡ˆï¼Œè‹¥èƒ½åŠ›ä¸º $x$ çš„ç‰¹å·¥æœ‰ $cnt$ æ¬¡åœ¨æ–¹æ¡ˆä¸­å……å½“èƒ½åŠ›æœ€å¤§çš„ç‰¹å·¥ï¼Œé‚£ä¹ˆæ–¹æ¡ˆæ•°å°±åº”è¯¥åŠ ä¸Š $cnt \times C<em>{n-x}^0+C</em>{n-x}^1+â€¦â€¦+C_{n-x}^{n-x}$ ï¼Œä¹Ÿå°±æ˜¯ $cnt \times (2^{n-x}-1)$</p><p>é€šè¿‡æ€»ç»“è§„å¾‹å‘ç°ï¼Œåœ¨æ‰€æœ‰å¯èƒ½çš„é€‰æ‹©æ–¹æ¡ˆä¸­ï¼Œä¸Šè¿°çš„ $cnt$ ä¸ $x$ æœ‰ç€ $cnt(x)=2^{x-1}$ çš„å…³ç³»ï¼Œå¯åˆ—å‡ºå¼å­ï¼š</p><p>$Ans=\sum_{i=1}^{n-1}(2^i-1)\times 2^{n-i-1}$ ï¼Œåªå¾ªç¯åˆ° $n-1$ æ˜¯å› ä¸ºè‡³å°‘ç•™ä¸€ä¸ªç‰¹å·¥ç»™ B é˜Ÿ</p><p><strong>ç„¶è€Œè¿™æ ·ç›´æ¥æš´åŠ›ç®—æ˜¾ç„¶æ˜¯è¦è¶…æ—¶çš„ï¼ˆN è¾¾åˆ°äº† $10^9$ è§„æ¨¡ï¼‰ï¼ŒæŠŠåŸå¼å±•å¼€ï¼š</strong></p><p>$Ans=\sum<em>{i=1}^{n-1}(2^i-1)\times 2^{n-i-1} = \sum</em>{i=1}^{n-1}(2^{n-1}-2^{n-i-1})=(n-1)\times 2^{n-1}-\sum_{i=1}^{n-1}2^{n-i-1}$</p><p>åé¢é‚£ä¸€å¨ç­‰æ¯”æ±‚å’Œï¼š$\sum_{i=1}^{n-1}2^{n-i-1} = 2^{n-2}\times \frac{1-(\frac{1}{2})^{n-1}}{\frac{1}{2}} = 2^{n-1}-1$</p><p>æ‰€ä»¥åŸå¼ï¼š$Ans=(n-1)\times 2^{n-1}-(2^{n-1}-1)=(n-2)\times 2^{n-1}+1$</p><p>åˆ°è¿™ä¸€æ­¥å°±å¯ä»¥ç›´æ¥å¿«é€Ÿå¹‚è®¡ç®—äº†</p><h3 id="Codes"><a href="#Codes" class="headerlink" title="Codes"></a>Codes</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxn 30000005</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="type">const</span> ll mod=(ll)<span class="number">1e9</span>+<span class="number">7</span>;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">fastpow</span><span class="params">(ll a,ll b)</span></span>&#123;</span><br><span class="line">ll res=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span>(b&gt;<span class="number">0</span>)&#123;</span><br><span class="line"><span class="keyword">if</span>(b&amp;<span class="number">1</span>) res=(res*a)%mod;</span><br><span class="line">a=(a*a)%mod;b&gt;&gt;=<span class="number">1</span>;</span><br><span class="line">&#125; <span class="keyword">return</span> res;</span><br><span class="line">&#125; ll n;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;agent.in&quot;</span>,<span class="string">&quot;r&quot;</span>,stdin);</span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;agent.out&quot;</span>,<span class="string">&quot;w&quot;</span>,stdout);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%lld&quot;</span>,&amp;n);</span><br><span class="line">ll tmp=<span class="built_in">fastpow</span>(<span class="number">2</span>,n<span class="number">-1</span>);</span><br><span class="line">ll ans=(n<span class="number">-2</span>)*tmp%mod;</span><br><span class="line">(ans+=<span class="number">1</span>)%=mod;<span class="built_in">printf</span>(<span class="string">&quot;%lld&quot;</span>,ans);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="2-å°å¥‡å›åœ°çƒï¼ˆearth-cppï¼‰"><a href="#2-å°å¥‡å›åœ°çƒï¼ˆearth-cppï¼‰" class="headerlink" title="2. å°å¥‡å›åœ°çƒï¼ˆearth.cppï¼‰"></a>2. å°å¥‡å›åœ°çƒï¼ˆearth.cppï¼‰</h2><h3 id="Description-1"><a href="#Description-1" class="headerlink" title="Description"></a>Description</h3><p>å¼€å­¦äº†ï¼Œå°å¥‡åœ¨å›åœ°çƒçš„è·¯ä¸Šï¼Œé‡åˆ°äº†ä¸€ä¸ªæ£˜æ‰‹çš„é—®é¢˜ã€‚</p><p>ç®€å•æ¥è¯´ï¼Œå®ƒè¦ä»æ ‡å·ä¸º1çš„æ˜Ÿçƒåˆ°æ ‡å·ä¸ºnçš„æ˜Ÿçƒï¼ŒæŸä¸€äº›æ˜Ÿçƒä¹‹é—´æœ‰èˆªçº¿ã€‚ç”±äºè¶…æ—¶ç©ºéš§é“çš„å­˜åœ¨ï¼Œä»ä¸€ä¸ªæ˜Ÿçƒåˆ°å¦ä¸€ä¸ªæ˜Ÿçƒæ—¶é—´å¯èƒ½ä¼šå€’æµï¼Œè€Œä¸”ï¼Œä»æ˜Ÿçƒaåˆ°bè€—è´¹çš„æ—¶é—´å’Œæ˜Ÿçƒbåˆ°aè€—è´¹çš„æ—¶é—´ä¸ä¸€å®šç›¸åŒã€‚</p><p>å®‡å®™æ³•è§„å®šï¼šâ€œç¦æ­¢åœ¨å‡ºå‘æ—¶é—´å‰åˆ°è¾¾ç›®çš„åœ°ã€‚â€</p><p>æ¯è‰˜é£èˆ¹ä¸Šéƒ½æœ‰é€Ÿåº¦è°ƒèŠ‚è£…ç½®ï¼Œå¯ä»¥è°ƒèŠ‚é£è¡Œçš„æ—¶é—´ã€‚å…¶åŠŸèƒ½å¯ä»¥ä½¿å¾—æ•´æ¬¡èˆªç¨‹ä¸­æ‰€æœ‰ä¸¤æ˜Ÿçƒé—´çš„é£è¡Œæ—¶é—´å¢åŠ æˆ–å‡å°‘ç›¸åŒçš„æ•´æ•°å€¼ã€‚ä½ çš„ä»»åŠ¡æ˜¯å¸®åŠ©å®ƒè°ƒæ•´é€Ÿåº¦è°ƒèŠ‚å™¨ï¼Œä½¿å¾—ä» 1 åˆ° n çš„æœ€çŸ­æ—¶é—´æ»¡è¶³å®‡å®™æ³•è§„å®š</p><h3 id="Input-1"><a href="#Input-1" class="headerlink" title="Input"></a>Input</h3><p>è¾“å…¥æ–‡ä»¶åŒ…å«å¤šç»„æ•°æ®ï¼Œç¬¬1ä¸ªæ•°ä¸ºTï¼Œè¡¨ç¤ºæ•°æ®ç»„æ•°ã€‚</p><p>å¯¹äºæ¯ç»„æ•°æ®ï¼Œè¾“å…¥ç¬¬1è¡Œä¸ºä¸¤ä¸ªæ­£æ•´æ•°nï¼Œmï¼Œä¸ºæ˜Ÿçƒçš„ä¸ªæ•°å’Œæ˜Ÿçƒé—´çš„è·¯çº¿æ•°ã€‚æ¥ä¸‹æ¥mè¡Œï¼Œæ¯è¡Œä¸‰ä¸ªæ•´æ•°iï¼Œjå’Œtï¼Œè¡¨ç¤ºç”±æ˜Ÿçƒiåˆ°æ˜Ÿçƒjé£è¡Œçš„æ—¶é—´ä¸ºtã€‚ç”±iåˆ°jæœ€å¤šåªä¼šæœ‰ä¸€æ¡é£è¡Œçº¿è·¯ã€‚</p><h3 id="Output-1"><a href="#Output-1" class="headerlink" title="Output"></a>Output</h3><p>è¾“å‡ºæ–‡ä»¶å…±Tè¡Œï¼Œæ¯ç»„æ•°æ®è¾“å‡ºä¸€è¡Œã€‚</p><p>å¦‚æœå¯ä»¥é€šè¿‡è°ƒèŠ‚é€Ÿåº¦è°ƒèŠ‚å™¨å®Œæˆä»»åŠ¡ï¼Œåˆ™è¾“å‡ºä¸€ä¸ªéè´Ÿæ•´æ•°ï¼Œè¡¨ç¤ºç”±æ˜Ÿçƒ1åˆ°æ˜Ÿçƒnçš„æœ€çŸ­æ—¶é—´ã€‚ï¼ˆæ³¨æ„æœ€çŸ­æ—¶é—´è¦å¤§äºæˆ–è€…ç­‰äº0ï¼‰ã€‚</p><p>å¦‚æœä¸èƒ½ç”±æ˜Ÿçƒ1åˆ°è¾¾æ˜Ÿçƒnï¼Œåˆ™è¾“å‡º-1ã€‚</p><h3 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1</span><br><span class="line">4 5</span><br><span class="line">1 2 1</span><br><span class="line">1 3 1</span><br><span class="line">2 3 -3</span><br><span class="line">3 1 1</span><br><span class="line">3 4 1</span><br></pre></td></tr></table></figure><h3 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2</span><br></pre></td></tr></table></figure><h3 id="Hint-1"><a href="#Hint-1" class="headerlink" title="Hint"></a>Hint</h3><p>ã€æ•°æ®èŒƒå›´ã€‘</p><p>1ï¼Œ2å·æµ‹è¯•ç‚¹ï¼Œä¿è¯æ‰€æœ‰æ˜Ÿçƒå‡ºåº¦ä¸è¶…è¿‡1</p><p>3ï¼Œ4å·æµ‹è¯•ç‚¹ï¼Œn&lt;=10</p><p>5ï¼Œ6å·æµ‹è¯•ç‚¹ï¼Œ-100&lt;=t&lt;=100</p><p>å¯¹äº100%çš„æ•°æ®T&lt;=10ï¼Œn&lt;=100ï¼Œm&lt;=n*(n-1)ï¼Œ-100000&lt;=t&lt;=100000</p><p>æ•°æ®éšæœºå’Œæ„é€ ç»“åˆç”Ÿæˆ</p><p>ã€æ ·ä¾‹è§£é‡Šã€‘</p><p>æŠŠé€Ÿåº¦æ§åˆ¶å™¨çš„å€¼è®¾ä¸º1,ç›¸å½“äºæ¯ä¸ªæ—¶é—´å€¼åŠ 1,å¾—åˆ°çš„æœ€çŸ­è·¯å¾„ä¸º1â†’2â†’3â†’4,æ‰€éœ€æ—¶é—´ä¸º2+(-2)+2=2ã€‚</p><h3 id="åˆ†æ-1"><a href="#åˆ†æ-1" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h3><p>æ ¹æ®é¢˜æ„ï¼Œæ˜¯æ±‚ä¸€ä¸ªåç§»é‡ $d$ï¼Œä½¿å¾—åŸæ¥çš„æ‰€æœ‰è·¯å¾„é•¿åº¦åŠ ä¸Šè¿™ä¸ª $d$ ä¹‹åå­˜åœ¨ä» 1 åˆ° n çš„éè´Ÿæœ€çŸ­è·¯å¾„</p><p>ä¸è€ƒè™‘è´Ÿç¯çš„å½±å“ï¼Œé‚£ä¹ˆè¿™ä¸ªé¢˜æ˜æ˜¾ <strong>äºŒåˆ†+SPFA</strong> è§£å†³</p><p>è‹¥è¦è€ƒè™‘è´Ÿç¯çš„é—®é¢˜ï¼Œåˆ™è¦æ³¨æ„ï¼š<strong>å¹¶éä»»æ„çš„è´Ÿç¯éƒ½ä¼šå¯¹æœ€çŸ­è·¯å¾„é€ æˆå½±å“ï¼Œåªè¦å›¾ä¸­å­˜åœ¨ä¸€æ¡ä¸ç»è¿‡è´Ÿç¯è€Œèƒ½ä» 1 åˆ°è¾¾ n çš„è·¯å¾„ï¼Œå°å¥‡å°±å¯ä»¥é€šè¿‡è¿™æ¡è·¯å¾„å›åˆ°åœ°çƒï¼Œè€Œä¸æ˜¯å»èµ°è´Ÿç¯</strong></p><p>ä¸¾ä¸€ä¸ªä¾‹å­ï¼šï¼ˆ$n=4$ï¼‰</p><div class="mermaid-wrap"><pre class="mermaid-src" hidden>  graph LR1--5--&gt;4;1--1--&gt;2;2--&quot;-100&quot;--&gt;3;3--&quot;-100&quot;--&gt;2  </pre></div><p>å›¾ä¸­ 2 å’Œ 3 å½¢æˆäº†è´Ÿç¯ï¼Œç„¶è€Œè¿™å¹¶ä¸æ„å‘³ç€éœ€è¦å¢åŠ åç§»é‡æ¥æ¶ˆé™¤è´Ÿç¯ï¼Œå› ä¸ºå°å¥‡å¯ä»¥èµ° $1\to 5$ è¿™ä¸€æ¡è·¯å¾„å›åˆ°åœ°çƒï¼Œå› æ­¤å°†åç§»é‡è®¾ç½®æˆ -5ï¼Œå¾—åˆ°çš„ç­”æ¡ˆæ˜¯ 0ï¼Œè€Œä¸æ˜¯ 105</p><p>æ³¨æ„åˆ°è¿™ä¸€ç‚¹ä¹‹åï¼Œæˆ‘å¼€å§‹çš„æƒ³æ³•æ˜¯ï¼š<strong>åœ¨å»æ‰å›¾ä¸­è´Ÿç¯ï¼ˆé€šè¿‡åç§»é‡å®ç°ï¼‰åæ‰¾åˆ°ä¸€æ¡ $1\to n$ çš„æœ€çŸ­è·¯å¾„ï¼Œå¹¶å°†è·¯å¾„ä¸Šçš„ç‚¹è®°å½•ï¼Œåˆ¤æ–­è´Ÿç¯æ—¶ï¼Œçœ‹è®°å½•çš„ç‚¹æ˜¯ä¸æ˜¯åœ¨è´Ÿç¯ä¸Šï¼Œå¦‚æœæ²¡æœ‰åœ¨è´Ÿç¯ä¸Šçš„è®°å½•ç‚¹ï¼Œå°±ä¸ç”¨å¢åŠ åç§»é‡</strong></p><p>è¿™ä¸ªæƒ³æ³•çœ‹ä¼¼æ­£ç¡®ï¼Œä½†æ˜¯å®ƒçš„è‡´å‘½ç¼ºé™·åœ¨äº <strong>SPFA æ±‚å‡ºçš„æœ€çŸ­è·¯å¾„éšç€å„ä¸ªè·¯å¾„çš„é•¿åº¦å˜åŒ–æ˜¯ä¼šå˜åŒ–çš„</strong>ï¼Œå¦‚ï¼š</p><div class="mermaid-wrap"><pre class="mermaid-src" hidden>  graph LR1--5--&gt;4;1--1--&gt;2;2--&quot;-100&quot;--&gt;3;3--&quot;-100&quot;--&gt;2  </pre></div><p>è¿™æ˜¯æ ·ä¾‹æ•°æ®æ„é€ å‡ºçš„å›¾ï¼Œç°åœ¨å®ƒçš„æœ€çŸ­è·¯å¾„ä¸º $1\to 2 \to 3\to 4$ï¼Œè·¯å¾„é•¿åº¦ä¸º -1ï¼Œè‹¥æŠŠè·¯å¾„é•¿åº¦ç»Ÿä¸€åç§» 3ï¼Œåˆ™å¾—åˆ°æ–°çš„æ„é€ å›¾ä¸ºï¼š</p><div class="mermaid-wrap"><pre class="mermaid-src" hidden>  graph LR1--5--&gt;4;1--1--&gt;2;2--&quot;-100&quot;--&gt;3;3--&quot;-100&quot;--&gt;2  </pre></div><p>ç°åœ¨çš„æœ€çŸ­è·¯å¾„ä¸å†æ˜¯ $1\to 2 \to 3\to 4$ï¼Œè€Œæ˜¯ $1\to 3\to 4$ï¼Œè€Œç­”æ¡ˆé‡‡ç”¨çš„è·¯å¾„æ˜¯å‰ä¸€ç§</p><p>è¿™å°±æ„å‘³ç€ï¼š<strong>å¦‚æœåªæ˜¯ä¸ºäº†å»æ‰è´Ÿç¯è€Œå°†åŸå›¾ä¸­çš„è·¯å¾„é•¿åº¦æ”¹å˜çš„è¯ï¼Œæœ€çŸ­è·¯å¾„æ˜¯ä¼šå˜åŒ–çš„ï¼Œè®°å½•çš„æœ€çŸ­è·¯å¾„æœ‰å¯èƒ½ä¸ç­”æ¡ˆé‡‡ç”¨çš„è·¯å¾„ä¸åŒï¼Œè¿™æ—¶å°±å¾ˆéš¾å¾—å‡ºæ­£ç¡®ç­”æ¡ˆï¼Œä¸Šè¿°ç®—æ³•ä¹Ÿå°±åªèƒ½æ‹¿åˆ° 40 åˆ†äº†</strong><del>ï¼ˆæ¯”çº¯äºŒåˆ†çš„ 50 åˆ†è¿˜ä½ï¼‰</del></p><p>æ­£ç¡®çš„åšæ³•æ˜¯ï¼š<strong>è®°å½•åŸå›¾ä¸­ä¸ 1 å·ç»“ç‚¹å’Œ n å·éƒ½è¿é€šçš„ç‚¹ï¼Œæ— è®ºæœ€çŸ­è·¯å¾„å¦‚ä½•å˜åŒ–ï¼Œä¸€å®šä¼šç»è¿‡è¿™äº›ç‚¹ä¸­çš„æŸäº›ç‚¹ï¼Œå› æ­¤ï¼Œåˆ¤æ–­è´Ÿç¯çš„æ—¶å€™åŒæ—¶åˆ¤æ–­è´Ÿç¯ä¸Šçš„ç‚¹æ˜¯ä¸æ˜¯ä¸ 1 å·ç»“ç‚¹å’Œ n å·éƒ½è¿é€šçš„ç‚¹ï¼Œå¦‚æœæ˜¯æ‰å¢åŠ åç§»</strong></p><p>ç¬¬ä¸€ä¸ªä¾‹å­è¯´æ˜å³ä½¿åŸå›¾å­˜åœ¨è´Ÿç¯ä¹Ÿæ˜¯å¯ä»¥æœ‰æœ€çŸ­è·¯å¾„çš„ï¼Œä½†æ˜¯ç”±äº SPFA ä¼šå°†æ‰€æœ‰çš„è¾¹åŠ å…¥é˜Ÿåˆ—è¿›è¡Œæ¾å¼›æ“ä½œï¼Œè¿™å°†å¯èƒ½å¯¼è‡´ SPFA å¡æ­»ï¼Œåªéœ€è¦<strong>è®© SPFA åœ¨åŠ è¾¹æ—¶åˆ¤æ–­ä¸‹ä¸€ä¸ªç‚¹æ˜¯ä¸æ˜¯æ‰€è°“çš„è¿é€šç‚¹å³å¯ï¼Œå› ä¸ºåœ¨ä¹‹å‰çš„è´Ÿç¯åˆ¤æ–­ä¸­å·²ç»ç¡®è®¤æ‰€æœ‰è¿é€šç‚¹éƒ½ä¸åœ¨è´Ÿç¯ä¸Šï¼Œæ‰€ä»¥ SPFA å¯ä»¥æ­£å¸¸è¿è¡Œ</strong></p><h3 id="Codes-1"><a href="#Codes-1" class="headerlink" title="Codes"></a>Codes</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxn 10000005</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxPRIME 664588</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line">ll mod;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> t&gt;<span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">fcin</span><span class="params">(t &amp;x)</span></span>&#123;</span><br><span class="line"><span class="type">int</span> sign=<span class="number">1</span>; x=<span class="number">0</span>; <span class="type">char</span> op=<span class="built_in">getchar</span>();</span><br><span class="line"><span class="keyword">while</span>(op&lt;<span class="string">&#x27;0&#x27;</span>||op&gt;<span class="string">&#x27;9&#x27;</span>)&#123;<span class="keyword">if</span>(op==<span class="string">&#x27;-&#x27;</span>) sign=<span class="number">-1</span>;op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line"><span class="keyword">while</span>(op&gt;=<span class="string">&#x27;0&#x27;</span>&amp;&amp;op&lt;=<span class="string">&#x27;9&#x27;</span>)&#123;x=x*<span class="number">10</span>+(op<span class="number">-48</span>);op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line">x*=sign;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> p[maxPRIME];<span class="type">bool</span> isp[maxn];</span><br><span class="line"><span class="type">int</span> n,m;ll JC[<span class="number">3</span>][maxn];</span><br><span class="line"><span class="function">ll <span class="title">Quickpow</span><span class="params">(ll b,ll p,ll K)</span></span>&#123;</span><br><span class="line">ll sol=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span>(p&gt;<span class="number">0</span>)&#123;</span><br><span class="line"><span class="keyword">if</span>(p%<span class="number">2</span>==<span class="number">1</span>) sol=(sol*b)%K;</span><br><span class="line">b=(b*b)%K;</span><br><span class="line">p/=<span class="number">2</span>;</span><br><span class="line">&#125; <span class="keyword">return</span> sol;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">PRIME</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="type">int</span> N=<span class="built_in">max</span>(n,m);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">2</span>;i&lt;=maxn;i++)&#123;</span><br><span class="line"><span class="keyword">if</span>(!isp[i]) p[++p[<span class="number">0</span>]]=i;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;i*p[j]&lt;=maxn;j++)&#123;</span><br><span class="line">isp[i*p[j]]=<span class="literal">true</span>;</span><br><span class="line"><span class="keyword">if</span>(i%p[j]==<span class="number">0</span>) <span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125; JC[<span class="number">0</span>][<span class="number">1</span>]=JC[<span class="number">1</span>][<span class="number">1</span>]=JC[<span class="number">2</span>][<span class="number">1</span>]=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">2</span>;i&lt;=maxn;i++)&#123;</span><br><span class="line">JC[<span class="number">0</span>][i]=JC[<span class="number">0</span>][i<span class="number">-1</span>]*i%mod;</span><br><span class="line"><span class="keyword">if</span>(!isp[i])&#123;</span><br><span class="line">JC[<span class="number">1</span>][i]=JC[<span class="number">1</span>][i<span class="number">-1</span>]*(i<span class="number">-1</span>)%mod;</span><br><span class="line">JC[<span class="number">2</span>][i]=JC[<span class="number">2</span>][i<span class="number">-1</span>]*i%mod; </span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">JC[<span class="number">1</span>][i]=JC[<span class="number">1</span>][i<span class="number">-1</span>];</span><br><span class="line">JC[<span class="number">2</span>][i]=JC[<span class="number">2</span>][i<span class="number">-1</span>];</span><br><span class="line">&#125; </span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;puzzled.in&quot;</span>,<span class="string">&quot;r&quot;</span>,stdin);</span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;puzzled.out&quot;</span>,<span class="string">&quot;w&quot;</span>,stdout);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"><span class="type">int</span> T;<span class="built_in">fcin</span>(T);<span class="built_in">fcin</span>(mod);</span><br><span class="line"><span class="built_in">PRIME</span>();<span class="type">int</span> x,y;</span><br><span class="line"><span class="keyword">while</span>(T--)&#123;</span><br><span class="line"><span class="built_in">fcin</span>(x);<span class="built_in">fcin</span>(y);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>,(JC[<span class="number">0</span>][x]*JC[<span class="number">1</span>][y])%mod*<span class="built_in">Quickpow</span>(JC[<span class="number">2</span>][y],mod<span class="number">-2</span>,mod)%mod);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="3-æå…‰ï¼ˆaurora-cppï¼‰"><a href="#3-æå…‰ï¼ˆaurora-cppï¼‰" class="headerlink" title="3. æå…‰ï¼ˆaurora.cppï¼‰"></a>3. æå…‰ï¼ˆaurora.cppï¼‰</h2><h3 id="Description-2"><a href="#Description-2" class="headerlink" title="Description"></a>Description</h3><p>å¤©ç©ºä¸­å‡ºç°äº†è®¸å¤šçš„åŒ—æå…‰ï¼Œè¿™äº›åŒ—æå…‰ç»„æˆäº†ä¸€ä¸ªé•¿åº¦ä¸ºnçš„æ­£æ•´æ•°æ•°åˆ—a[i],è¿œå¤ä¹‹é­”ä¹¦ä¸Šè®°è½½åˆ°ï¼š2ä¸ªä½ç½®çš„grazeå€¼ä¸ºä¸¤è€…ä½ç½®å·®ä¸æ•°å€¼å·®çš„å’Œï¼š</p><p><code>graze(x,y)=|x-y|+|a[x]-a[y]|</code>ã€‚</p><p>è¦æƒ³ç ´è§£å¤©ç½šï¼Œå°±å¿…é¡»æ”¯æŒ2ç§æ“ä½œï¼ˆkéƒ½æ˜¯æ­£æ•´æ•°ï¼‰ï¼š</p><p>Modify x kï¼šå°†ç¬¬xä¸ªæ•°çš„å€¼ä¿®æ”¹ä¸ºkã€‚</p><p>Query x kï¼šè¯¢é—®æœ‰å‡ ä¸ªiæ»¡è¶³graze(x,i)&lt;=kã€‚</p><p>ç”±äºä»å‰çš„å¤©ç½šè¢«åœ£ç‹lmcç ´è§£äº†ï¼Œæ‰€ä»¥rhlæ”¹è¿›äº†å¥¹çš„æ³•æœ¯ï¼Œè¯¢é—®ä¸ä»…è¦è€ƒè™‘å½“å‰æ•°åˆ—ï¼Œè¿˜è¦è€ƒè™‘ä»»æ„å†å²ç‰ˆæœ¬ï¼Œå³ç»Ÿè®¡ä»»æ„ä½ç½®ä¸Š<strong>å‡ºç°è¿‡</strong>çš„ä»»æ„æ•°å€¼ä¸å½“å‰çš„a[x]çš„grazeå€¼&lt;=kçš„å¯¹æ•°ã€‚ï¼ˆ<strong>æŸä½ç½®å¤šæ¬¡ä¿®æ”¹ä¸ºåŒæ ·çš„æ•°å€¼ï¼ŒæŒ‰å¤šæ¬¡ç»Ÿè®¡</strong>ï¼‰</p><h3 id="Input-2"><a href="#Input-2" class="headerlink" title="Input"></a>Input</h3><p>ç¬¬1è¡Œä¸¤ä¸ªæ•´æ•°n,qã€‚åˆ†åˆ«è¡¨ç¤ºæ•°åˆ—é•¿åº¦å’Œæ“ä½œæ•°ã€‚</p><p>ç¬¬2è¡Œnä¸ªæ­£æ•´æ•°ï¼Œä»£è¡¨åˆå§‹æ•°åˆ—ã€‚</p><p>ç¬¬3~q+2è¡Œæ¯è¡Œä¸€ä¸ªæ“ä½œã€‚</p><p>N&lt;=40000, ä¿®æ”¹æ“ä½œæ•°&lt;=60000, è¯¢é—®æ“ä½œæ•°&lt;=10000, Max{a[i]}(å«ä¿®æ”¹)&lt;=80000</p><p>è¾“å‡ºè‹¥å¹²è¡Œï¼Œæ¯è¡Œä¸€ä¸ªæ•°ï¼Œè¡¨ç¤ºæ¯æ¬¡æ¸…ç‚¹å­˜æ¬¾æ—¶é¢†è¢–æœ‰å¤šå°‘ä¸ªè´¦æˆ¿å¯ä¾›ä»–é€‰æ‹©</p><h3 id="Output-2"><a href="#Output-2" class="headerlink" title="Output"></a>Output</h3><p>å¯¹äºæ¯æ¬¡è¯¢é—®æ“ä½œï¼Œè¾“å‡ºä¸€ä¸ªéè´Ÿæ•´æ•°è¡¨ç¤ºç­”æ¡ˆ</p><h3 id="Sample-Input-1"><a href="#Sample-Input-1" class="headerlink" title="Sample Input"></a>Sample Input</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">3 5</span><br><span class="line">2 4 3</span><br><span class="line">Query 2 2</span><br><span class="line">Modify 1 3</span><br><span class="line">Query 2 2</span><br><span class="line">Modify 1 2</span><br><span class="line">Query 1 1</span><br></pre></td></tr></table></figure><h3 id="Sample-Output-1"><a href="#Sample-Output-1" class="headerlink" title="Sample Output"></a>Sample Output</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">2</span><br><span class="line">3</span><br><span class="line">3</span><br></pre></td></tr></table></figure><h3 id="Hint-2"><a href="#Hint-2" class="headerlink" title="Hint"></a>Hint</h3><p>å†™åœ¨äº†é¢˜ç›®ä¸­</p><h3 id="åˆ†æ-2"><a href="#åˆ†æ-2" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h3><p>åšæ³•ï¼š<strong>è½¬æ¢åæ ‡åï¼ŒCDQåˆ†æ²»çš„æ¨¡æ¿</strong></p><p>æŠŠåºåˆ—ä¸­çš„æ¯ä¸ªå…ƒç´  $a[x]$ çœ‹åš $(x,\;a[x])$ çš„åæ ‡ï¼Œå‘ç° <code>graze</code> å‡½æ•°å°±æ˜¯æ±‚ä¸¤ä¸ªåæ ‡ä¹‹é—´çš„<a href="https://baike.baidu.com/item/%E6%9B%BC%E5%93%88%E9%A1%BF%E8%B7%9D%E7%A6%BB/743092?fr=aladdin">æ›¼å“ˆé¡¿è·ç¦»</a><strong>ï¼Œä½†æ˜¯è¦ç»Ÿè®¡æ›¼å“ˆé¡¿è·ç¦»åœ¨æŸä¸ªèŒƒå›´å†…çš„ç‚¹å¯¹æ•°é‡å¾ˆå¤æ‚ï¼Œè€ƒè™‘è½¬åŒ–æˆå¦ä¸€ç§è·ç¦»ï¼š<a href="https://baike.baidu.com/item/%E5%88%87%E6%AF%94%E9%9B%AA%E5%A4%AB%E8%B7%9D%E7%A6%BB/8955729?fr=aladdin">åˆ‡æ¯”é›ªå¤«è·ç¦»</a></strong></p><p>åˆ‡æ¯”é›ªå¤«è·ç¦»å®šä¹‰ä¸ºå¹³é¢ä¸¤ç‚¹ä¹‹é—´çš„æ¨ªçºµåæ ‡å·®å€¼çš„è¾ƒå¤§å€¼ï¼Œä¹Ÿå°±æ˜¯ $max(x_1-x_2,\;y_1-y_2)$ ï¼Œ<strong>åœ¨å¹³é¢ä¸­ï¼Œç‚¹çš„åæ ‡ $(x,\;y)$ å¯ä»¥é€šè¿‡è½¬æ¢ $(x,\;y)\to (x-y,\;x+y)$ æ¥è®©åŸæ¥çš„æ›¼å“ˆé¡¿è·ç¦»å˜ä¸ºæ–°åæ ‡ç³»ä¸‹çš„åˆ‡æ¯”é›ªå¤«è·ç¦»</strong></p><p>è¿™æ ·åšäº†ä¹‹åï¼Œç»Ÿè®¡åˆ‡æ¯”é›ªå¤«è·ç¦»åœ¨æŸä¸ªèŒƒå›´ $k$ å†…çš„æ€è·¯å°±å¾ˆç®€å•äº†ï¼Œè®¾å‚ç…§ç‚¹ä¸º $(x,\;y)$ï¼Œé‚£ä¹ˆæ»¡è¶³è¦æ±‚çš„ç‚¹å°±ä½äºåæ ‡ $(x-k,\;y-k)$ åˆ°åæ ‡ $(x+k,\;y+k)$ å›´æˆçš„çŸ©å½¢ä¹‹ä¸­ï¼Œåˆ°è¿™ä¸€æ­¥å°±æ˜¯ä¸€ä¸ªä¸‰ç»´ååºçš„é—®é¢˜ï¼Œä¸Š CDQåˆ†æ²»çš„æ¨¡æ¿è§£å†³</p><p><strong>è‡³äºé¢˜ç›®ä¸­çš„å¯æŒä¹…åŒ–ï¼Œå…¶å®å°±æ˜¯åœ¨ä¿®æ”¹æ—¶å°†ä¿®æ”¹åçš„ç‚¹å†æ¬¡æ’å…¥ä¸€é</strong></p><p>æœ¬é¢˜è¿˜è¦æ³¨æ„çš„ä¸€ç‚¹å°±æ˜¯è´Ÿæ•°åæ ‡çš„åç§»ï¼Œç”±äºåæ ‡è½¬æ¢æ—¶è¿ç»­åšå‡æ³•æœ‰å¯èƒ½å˜ä¸ºå¾ˆå°çš„è´Ÿæ•°ï¼Œå› æ­¤åç§»é‡è¦è®¾ç½®å¤§ä¸€ç‚¹</p><h3 id="Codes-2"><a href="#Codes-2" class="headerlink" title="Codes"></a>Codes</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// pro 3 violence </span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxn 60005</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> lowbit(x) (x&amp;-x)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> mid ((L+R)&gt;&gt;1)</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> offset=<span class="number">300000</span>;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> t&gt;<span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">fcin</span><span class="params">(t &amp;x)</span></span>&#123;</span><br><span class="line"><span class="type">int</span> sign=<span class="number">1</span>; x=<span class="number">0</span>; <span class="type">char</span> op=<span class="built_in">getchar</span>();</span><br><span class="line"><span class="keyword">while</span>(op&lt;<span class="string">&#x27;0&#x27;</span>||op&gt;<span class="string">&#x27;9&#x27;</span>)&#123;<span class="keyword">if</span>(op==<span class="string">&#x27;-&#x27;</span>) sign=<span class="number">-1</span>;op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line"><span class="keyword">while</span>(op&gt;=<span class="string">&#x27;0&#x27;</span>&amp;&amp;op&lt;=<span class="string">&#x27;9&#x27;</span>)&#123;x=x*<span class="number">10</span>+(op<span class="number">-48</span>);op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line">x*=sign;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">node</span>&#123;</span><br><span class="line"><span class="type">int</span> px,py,type,val;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">get</span><span class="params">(<span class="type">int</span> typ,<span class="type">int</span> x,<span class="type">int</span> y,<span class="type">int</span> v)</span></span>&#123;</span><br><span class="line">type=typ;px=x;py=y;val=v;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">bool</span> <span class="keyword">operator</span> &lt;(<span class="type">const</span> node &amp;x)<span class="type">const</span>&#123;</span><br><span class="line"><span class="keyword">if</span>(px!=x.px) <span class="keyword">return</span> px&lt;x.px;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">return</span> type&lt;x.type;</span><br><span class="line">&#125;</span><br><span class="line">&#125;op[maxn*<span class="number">5</span>],tmp[maxn*<span class="number">5</span>];</span><br><span class="line"><span class="type">int</span> n,m,opn,a[maxn],ans[maxn];</span><br><span class="line"><span class="type">int</span> T[offset*<span class="number">2</span>+<span class="number">5</span>],maxy;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">updata</span><span class="params">(<span class="type">int</span> p,<span class="type">int</span> d)</span></span>&#123;</span><br><span class="line">p+=offset;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=p;i&lt;=<span class="number">500000</span>;i+=<span class="built_in">lowbit</span>(i))</span><br><span class="line">T[i]+=d;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">clear</span><span class="params">(<span class="type">int</span> p)</span></span>&#123;</span><br><span class="line">p+=offset;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=p;i&lt;=<span class="number">500000</span>;i+=<span class="built_in">lowbit</span>(i))</span><br><span class="line"><span class="keyword">if</span>(T[i]) T[i]=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">res</span><span class="params">(<span class="type">int</span> p)</span></span>&#123;</span><br><span class="line"><span class="type">int</span> ans=<span class="number">0</span>;p+=offset;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=p;i;i-=<span class="built_in">lowbit</span>(i))</span><br><span class="line"> ans+=T[i];</span><br><span class="line"><span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">AddNode</span><span class="params">(<span class="type">int</span> posx,<span class="type">int</span> posy)</span></span>&#123;</span><br><span class="line"><span class="type">int</span> newx=posx+posy;</span><br><span class="line"><span class="type">int</span> newy=posx-posy;</span><br><span class="line">maxy=<span class="built_in">max</span>(maxy,newy);</span><br><span class="line">op[++opn].<span class="built_in">get</span>(<span class="number">1</span>,newx,newy,<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">AddQuery</span><span class="params">(<span class="type">int</span> pos,<span class="type">int</span> k)</span></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ox pos</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> oy a[pos]</span></span><br><span class="line"><span class="type">int</span> A=ox+oy-k;</span><br><span class="line"><span class="type">int</span> B=ox-oy-k; <span class="comment">// å·¦ä¸Šè§’ </span></span><br><span class="line"><span class="type">int</span> C=ox+oy+k;</span><br><span class="line"><span class="type">int</span> D=ox-oy+k; <span class="comment">// å³ä¸‹è§’  </span></span><br><span class="line">ans[<span class="number">0</span>]++;</span><br><span class="line">op[++opn].<span class="built_in">get</span>(<span class="number">2</span>,A<span class="number">-1</span>,D,ans[<span class="number">0</span>]);</span><br><span class="line">op[++opn].<span class="built_in">get</span>(<span class="number">2</span>,C,B<span class="number">-1</span>,ans[<span class="number">0</span>]);</span><br><span class="line">op[++opn].<span class="built_in">get</span>(<span class="number">3</span>,C,D,ans[<span class="number">0</span>]);</span><br><span class="line">op[++opn].<span class="built_in">get</span>(<span class="number">3</span>,A<span class="number">-1</span>,B<span class="number">-1</span>,ans[<span class="number">0</span>]);</span><br><span class="line"><span class="meta">#<span class="keyword">undef</span> ox</span></span><br><span class="line"><span class="meta">#<span class="keyword">undef</span> oy</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">cdq</span><span class="params">(<span class="type">int</span> L,<span class="type">int</span> R)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(L==R) <span class="keyword">return</span>;</span><br><span class="line"><span class="built_in">cdq</span>(L,mid);<span class="built_in">cdq</span>(mid+<span class="number">1</span>,R);</span><br><span class="line"><span class="type">int</span> u=L,v=mid+<span class="number">1</span>,p=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span>(u&lt;=mid &amp;&amp; v&lt;=R)&#123;</span><br><span class="line"><span class="keyword">if</span>(op[u]&lt;op[v])&#123;</span><br><span class="line"><span class="keyword">if</span>(op[u].type==<span class="number">1</span>) <span class="built_in">updata</span>(op[u].py,<span class="number">1</span>);</span><br><span class="line">tmp[p++]=op[u++];</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"><span class="keyword">if</span>(op[v].type==<span class="number">2</span>) ans[op[v].val]-=<span class="built_in">res</span>(op[v].py);</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(op[v].type==<span class="number">3</span>) ans[op[v].val]+=<span class="built_in">res</span>(op[v].py);</span><br><span class="line">tmp[p++]=op[v++];</span><br><span class="line">&#125;</span><br><span class="line">&#125;<span class="keyword">while</span>(u&lt;=mid)&#123;</span><br><span class="line"><span class="keyword">if</span>(op[u].type==<span class="number">1</span>) <span class="built_in">updata</span>(op[u].py,<span class="number">1</span>);</span><br><span class="line">tmp[p++]=op[u++];</span><br><span class="line">&#125;<span class="keyword">while</span>(v&lt;=R)&#123;</span><br><span class="line"><span class="keyword">if</span>(op[v].type==<span class="number">2</span>) ans[op[v].val]-=<span class="built_in">res</span>(op[v].py);</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(op[v].type==<span class="number">3</span>) ans[op[v].val]+=<span class="built_in">res</span>(op[v].py);</span><br><span class="line">tmp[p++]=op[v++]; </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;p;i++)&#123;</span><br><span class="line"><span class="built_in">clear</span>(tmp[i].py);</span><br><span class="line">op[i+L]=tmp[i];</span><br><span class="line">&#125;</span><br><span class="line">&#125; <span class="type">char</span> in[<span class="number">21</span>];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;aurora.in&quot;</span>,<span class="string">&quot;r&quot;</span>,stdin);</span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;aurora.out&quot;</span>,<span class="string">&quot;w&quot;</span>,stdout);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"><span class="built_in">fcin</span>(n);<span class="built_in">fcin</span>(m);maxy=<span class="number">-2139062143</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line"><span class="built_in">fcin</span>(a[i]);<span class="built_in">AddNode</span>(i,a[i]); </span><br><span class="line">&#125; <span class="type">int</span> x,k;</span><br><span class="line"><span class="keyword">while</span>(m--)&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,in);</span><br><span class="line"><span class="built_in">fcin</span>(x);<span class="built_in">fcin</span>(k);</span><br><span class="line"><span class="keyword">if</span>(in[<span class="number">0</span>]==<span class="string">&#x27;M&#x27;</span>)&#123;</span><br><span class="line">a[x]=k;</span><br><span class="line"><span class="built_in">AddNode</span>(x,a[x]);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"><span class="built_in">AddQuery</span>(x,k);</span><br><span class="line">&#125; </span><br><span class="line">&#125; </span><br><span class="line"><span class="built_in">cdq</span>(<span class="number">1</span>,opn);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=ans[<span class="number">0</span>];i++) <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,ans[i]);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°è®º </tag>
            
            <tag> åˆ†æ²» </tag>
            
            <tag> å›¾è®º </tag>
            
            <tag> SPFA </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>VB.NET | 2048å°æ¸¸æˆï¼</title>
      <link href="/2019/08/12/2019-08-12-2048%E5%B0%8F%E6%B8%B8%E6%88%8F/"/>
      <url>/2019/08/12/2019-08-12-2048%E5%B0%8F%E6%B8%B8%E6%88%8F/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><p><img src="https://s2.ax1x.com/2019/08/13/mCvc4O.png" alt="pic"></p><p>æš‘æœŸåˆ·é¢˜å¤ªæ— èŠï¼Ÿæ¥è¯•ä¸€ä¸‹è¿™æ¬¾å¼±æ™ºå°æ¸¸æˆï¼š<strong>2048</strong> ï¼</p><p>å‚è€ƒäº†ç½‘ç»œä¸Šç»å…¸çš„ 2048 ç©æ³•ï¼Œé™„åŠ  8Ã—8ï¼Œ16Ã—16 ç©æ³•ï¼Œå†æ—¶ 2 å¤©èµ¶å·¥å®Œæˆçš„ <strong>2048</strong> å°æ¸¸æˆï¼</p><p>é™„1ï¼šä¸‹è½½é“¾æ¥ï¼ˆè§£å‹åï¼Œ<code>A2048.exe</code> å°±æ˜¯æ¸¸æˆæ–‡ä»¶ï¼Œæ³¨æ„ <code>images</code> æ–‡ä»¶å¤¹ä¸èƒ½ä¸¢ï¼ï¼‰</p><p><a href="https://github.com/Yan2u/A-2048">https://github.com/Yan2u/A-2048</a></p><p>é™„2ï¼šæ¯”è¾ƒç®€é™‹çš„æ¸¸æˆç•Œé¢æˆªå›¾</p><p><img src="https://s2.ax1x.com/2019/08/14/mkTaut.png" alt="pic2"></p><p><img src="https://s2.ax1x.com/2019/08/14/mkTdDP.png" alt="pic3"></p><p><img src="https://s2.ax1x.com/2019/08/14/mkTNjI.png" alt="pic4"></p>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> VB.NET </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ•°è®º| ç»„åˆæ•°å­¦ | Polyaå®šç†ï¼šå­¦ä¹   ç¬”è®°</title>
      <link href="/2019/07/25/2019-07-25-Polya%E5%AE%9A%E7%90%86/"/>
      <url>/2019/07/25/2019-07-25-Polya%E5%AE%9A%E7%90%86/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><h2 id="Polya-å®šç†"><a href="#Polya-å®šç†" class="headerlink" title="Polya å®šç†"></a>Polya å®šç†</h2><p>Redfield-Polya ï¼ˆPÃ³lya enumeration theoremï¼Œç®€ç§°PETï¼‰å®šç†æ˜¯<a href="https://baike.baidu.com/item/ç»„åˆæ•°å­¦/821134">ç»„åˆæ•°å­¦</a>ç†è®ºä¸­æœ€é‡è¦çš„å®šç†ä¹‹ä¸€ã€‚</p><p>å…¶æå‡ºè€…æ³¢é‡Œäºšåœ¨ä¼—å¤šæ•°å­¦çš„åˆ†æ”¯ï¼šå‡½æ•°è®ºã€å˜åˆ†å­¦ã€æ¦‚ç‡è®ºã€æ•°è®ºã€ç»„åˆæ•°å­¦ä»¥åŠè®¡ç®—æ•°å­¦å’Œåº”ç”¨æ•°å­¦é¢†åŸŸä¸­ï¼Œéƒ½é¢‡æœ‰å»ºæ ‘ï¼Œä»–å…±å‘è¡¨äº†200å¤šç¯‡è‘—åè®ºæ–‡ï¼Œä»¥ä»–çš„åå­—å‘½åçš„Polyaè®¡æ•°å®šç†ï¼Œåˆ™æ˜¯è¿‘ä»£ç»„åˆæ•°å­¦çš„é‡è¦å·¥å…·ã€‚æ³¢é‡Œäºšè¿˜æ˜¯æ°å‡ºçš„æ•°å­¦æ•™è‚²å®¶ï¼Œæœ‰è‘—ä¸°å¯Œçš„æ•°å­¦æ•™è‚²æ€æƒ³å’Œç²¾æ¹›çš„æ•°å­¦æ•™å­¦è‰ºæœ¯ï¼Œä»–å¯¹æ•°å­¦æ€ç»´ä¸€èˆ¬è§„å¾‹çš„ç ”ç©¶ï¼Œå ªç§°æ˜¯å¯¹äººç±»æ€æƒ³å®åº“çš„ç‰¹æ®Šè´¡çŒ®ã€‚</p><p>Polya å®šç†å¯ä»¥ç”¨<strong>äºè§£å†³å…³äºé›†åˆäº’å¼‚çŠ¶æ€çš„è®¡æ•°é—®é¢˜ï¼Œæ˜¯è§£å†³æ­¤ç±»é—®é¢˜çš„ç®€æ´é«˜æ•ˆçš„ä¸€ä¸ªå·¥å…·</strong></p><h2 id="ä¾‹é¢˜å¼•å…¥"><a href="#ä¾‹é¢˜å¼•å…¥" class="headerlink" title="ä¾‹é¢˜å¼•å…¥"></a>ä¾‹é¢˜å¼•å…¥</h2><h3 id="æè¿°"><a href="#æè¿°" class="headerlink" title="æè¿°"></a>æè¿°</h3><p>æŠŠä¸€ä¸ª $2\times 2$ çš„æ–¹æ ¼æ£‹ç›˜ç”¨é»‘ç™½ä¸¤è‰²æ¶‚è‰²ï¼Œè§„å®šç»è¿‡æ—‹è½¬é‡åˆçš„å›¾æ¡ˆæ˜¯ä¸€ç§å›¾æ¡ˆï¼Œé—®èƒ½æ¶‚å‡ºå¤šå°‘ç§ä¸åŒçš„å›¾æ¡ˆï¼Ÿ</p><h3 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h3><p>ä¸è€ƒè™‘æ—‹è½¬ï¼Œæ‰€æœ‰æ¶‚è‰²æ–¹æ¡ˆå¦‚ä¸‹å›¾ï¼š</p><p><img src="https://s2.ax1x.com/2019/07/25/eeoH0g.png" alt="pic1"></p><p>å¯ä»¥å‘ç°å›¾ä¸­å…±æœ‰ 16 ç§æ¶‚è‰²æ–¹æ¡ˆï¼Œ<strong>ä½†æ˜¯æŠŠç»è¿‡æ—‹è½¬çš„ $\begin{Bmatrix} 1&amp;2&amp;3&amp;4 \end{Bmatrix}$ï¼Œ$\begin{Bmatrix} 5&amp;6&amp;7&amp;8 \end{Bmatrix}$ï¼Œ$\begin{Bmatrix} 9&amp;10&amp;11&amp;12 \end{Bmatrix}$ï¼Œ$\begin{Bmatrix} 13&amp;14 \end{Bmatrix}$ éƒ½ç®—ä½œä¸€ç§æ–¹æ¡ˆï¼Œæˆ‘ä»¬å‘ç°æ–¹æ¡ˆæ•°å…¶å®åªæœ‰ 6 ç§</strong></p><p>é—®é¢˜è§„æ¨¡è¾ƒå°æ—¶ï¼Œæˆ‘ä»¬å›ºç„¶å¯ä»¥é€šè¿‡æšä¸¾æ‰€æœ‰å¯èƒ½çš„æƒ…å†µè®¡ç®—å¾—å‡ºæ»¡è¶³é¢˜ç›®æ¡ä»¶çš„æƒ…å†µæ•°ç›®ï¼Œä½†å¦‚æœæˆ‘ä»¬é¢å¯¹äº†ä¸€ä¸ª $20\times 20$ï¼Œç”šè‡³ $200\times 200$ï¼Œç©·ä¸¾ç®—æ³•åœ¨é‚£æ—¶å°†ä¼šè¾¾åˆ° $O(2^{200})$ çš„æ—¶é—´å¤æ‚åº¦ï¼Œå°±è¿è®¡ç®—æœºä¹Ÿä¸èƒ½ä¿è¯åœ¨æœ‰ç”Ÿä¹‹å¹´ç»™æˆ‘ä»¬é—®é¢˜çš„ç­”æ¡ˆ</p><p>äºæ˜¯ï¼Œæ•°å­¦å®¶å°±å¼€å§‹ç ”ç©¶è¿™ç±»é—®é¢˜çš„å…±æ€§ï¼Œè¯•å›¾å¾—å‡ºè¿™ç±»é—®é¢˜çš„é€šå¼ï¼Œç„¶åå°±æœ‰äº† <strong>Polya å®šç†</strong></p><h2 id="é¢„å¤‡çŸ¥è¯†"><a href="#é¢„å¤‡çŸ¥è¯†" class="headerlink" title="é¢„å¤‡çŸ¥è¯†"></a>é¢„å¤‡çŸ¥è¯†</h2><h3 id="ç¾¤"><a href="#ç¾¤" class="headerlink" title="ç¾¤"></a>ç¾¤</h3><p>è‹¥ä¸€ä¸ªä¸€ä¸ªé›†åˆ $G$ å’ŒäºŒå…ƒè¿ç®— $a \bullet b$ ï¼Œæ»¡è¶³ä¸‹åˆ—æ¡ä»¶ï¼š</p><ol><li><strong>å°é—­æ€§ï¼š</strong>å¯¹äº $\forall a,\;b\in G$ï¼Œæœ‰ $(a \bullet b)\in G$</li><li><strong>ç»“åˆå¾‹ï¼š</strong>å¯¹äº $\forall a,\;b,\;c\in G$ï¼Œæœ‰ $(a\bullet b)\bullet c=a\bullet (b\bullet c)$ </li><li><strong>å•ä½å…ƒï¼š</strong>å¯¹äº $\forall a\in G$ï¼Œ å­˜åœ¨ $e\in G$ï¼Œä½¿å¾— $a\bullet e=a$</li><li><strong>é€†å…ƒï¼š</strong>å¯¹äº $\forall a\in G$ï¼Œå­˜åœ¨ $f\in G$ï¼Œä½¿å¾— $a\bullet f=f\bullet a=e$ï¼Œä¸”è®° $f=a^{-1}$</li></ol><p><strong>åˆ™ç§°é›†åˆ $G$ æ˜¯è¿ç®—æ³•åˆ™ $\bullet$ ä¸‹çš„ä¸€ä¸ªç¾¤ï¼Œ $\bullet$ é€šå¸¸è¡¨ç¤ºä¹˜æ³•è¿ç®—ï¼Œæ­¤æ—¶åˆ™ç§° $G$ æ˜¯ä¸€ä¸ªä¹˜æ³•ç¾¤</strong></p><p>ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼šå¯¹äº $\forall a\in Z$ï¼Œå³æ‰€æœ‰æ•´æ•°ç»„æˆçš„é›†åˆï¼Œåœ¨åŠ æ³•åŸåˆ™ä¸‹æ»¡è¶³ä¸Šé¢å››ä¸ªæ¡ä»¶ï¼Œå…¶ä¸­ 1ï¼Œ2 å¾ˆå¥½è§£é‡Šï¼Œå•ä½å…ƒåˆ™æ˜¯ 0ï¼Œé€†å…ƒåˆ™æ˜¯ $a$ çš„å¯¹åº”ç›¸åæ•°ï¼Œè¿™ä¸ªç¾¤ä¾¿å«åš <strong>æ•´æ•°åŠ æ³•ç¾¤</strong></p><p>ç¾¤æŒ‰ç…§é›†åˆä¸­å…ƒç´ ä¸ªæ•°åˆ†ä¸º <strong>æ— é™ç¾¤</strong> å’Œ <strong>æœ‰é™ç¾¤</strong>ï¼Œ<strong>Polyaå®šç†</strong> ä¸»è¦é’ˆå¯¹æœ‰é™ç¾¤è¿›è¡Œåˆ†ææ“ä½œ</p><h3 id="ç½®æ¢å’Œç½®æ¢ç¾¤"><a href="#ç½®æ¢å’Œç½®æ¢ç¾¤" class="headerlink" title="ç½®æ¢å’Œç½®æ¢ç¾¤"></a>ç½®æ¢å’Œç½®æ¢ç¾¤</h3><p>ç®€å•æ¥è¯´ï¼Œ<strong>ç½®æ¢å°±æ˜¯æŠŠé›†åˆ $A$ ä¸­çš„æ‰€æœ‰å…ƒç´  $a_i$ é‡æ–°æ’åˆ—ï¼Œå½¢æˆé›†åˆ $B$ï¼Œç„¶ååšæ˜ å°„</strong> $a_i \to b_i,\;i\in[1,\;n]$ ï¼Œä¾‹å¦‚ï¼š</p><p>$\begin{pmatrix} 1&amp;2&amp;3&amp;4\\2&amp;3&amp;4&amp;1 \end{pmatrix}$ï¼Œä¸‹é¢çš„ $\begin{pmatrix} 2&amp;3&amp;4&amp;1 \end{pmatrix}$ï¼Œå°±æ˜¯å¯¹ä¸Šé¢çš„ $\begin{pmatrix} 1&amp;2&amp;3&amp;4 \end{pmatrix}$ çš„é‡æ–°æ’åˆ—ï¼Œå¹¶æ˜ å°„ $1\to2$ï¼Œ$2\to3$ï¼Œ$3\to4$ï¼Œ$4\to1$ï¼Œç½®æ¢ç¾¤å°±æ˜¯ <strong>è‹¥å¹²ä¸ªç½®æ¢ç»„æˆçš„é›†åˆå’Œç½®æ¢ä¹‹é—´çš„äºŒå…ƒè¿ç®—æ³•åˆ™æ„æˆçš„ç¾¤</strong>ï¼Œè¿™ç§ç½®æ¢ä¹‹é—´çš„äºŒå…ƒè¿ç®—æ³•åˆ™å¯ä»¥ç†è§£æˆæ˜¯ <strong>è¿ç»­æ˜ å°„ï¼ˆæˆ–è€…æ˜¯å‘é‡æ±‚å’Œï¼‰</strong>ï¼Œä¾‹å¦‚ç½®æ¢ä¹‹é—´çš„è¿ç®—ï¼šï¼ˆè¿ç®—ç¬¦å®šä¹‰ä¸º $\bullet$ ï¼‰</p><p>$\begin{pmatrix} 1&amp;2&amp;3&amp;4\\3&amp;1&amp;2&amp;4 \end{pmatrix} \bullet \begin{pmatrix} 1&amp;2&amp;3&amp;4\\4&amp;3&amp;2&amp;1 \end{pmatrix}=\begin{pmatrix} 1&amp;2&amp;3&amp;4\\3&amp;1&amp;2&amp;4 \end{pmatrix} \bullet \begin{pmatrix} 3&amp;1&amp;2&amp;4\\2&amp;4&amp;3&amp;1 \end{pmatrix} = \begin{pmatrix} 1&amp;2&amp;3&amp;4\\2&amp;4&amp;3&amp;1\end{pmatrix}$</p><p><strong>å¯ä»¥å‘ç°è¿ç®—ç»“æœæ˜¯è¿ç»­æ˜ å°„çš„ç»“æœ</strong>ï¼Œå¦‚ $1\to3\to2$ï¼Œ$2\to1\to4$ï¼Œ$3\to2\to3$ï¼Œ$4\to4\to1$</p><p><strong>å¯ä»¥è¯æ˜ï¼Œè¿™æ ·çš„è¿ç®—æ³•åˆ™å’Œç½®æ¢ä¹‹é—´æ„æˆçš„é›†åˆæ»¡è¶³æ„æˆç¾¤çš„ 4 ä¸ªæ¡ä»¶</strong></p><p>ç°åœ¨ï¼Œ<strong>è®¾é¡ºæ—¶é’ˆè½¬åŠ¨ 0åº¦ï¼Œ90åº¦ï¼Œ180åº¦ï¼Œ270åº¦ ä¸ºåŸæ¥çš„ 16 ç§æ–¹æ¡ˆçš„å››ä¸ªç½®æ¢</strong>ï¼Œå¯ä»¥å¾—åˆ°ï¼š</p><p>$\begin{pmatrix} a_1=&amp;1&amp;2&amp;3&amp;4&amp;5&amp;6&amp;7&amp;8&amp;9&amp;10&amp;11&amp;12&amp;13&amp;14&amp;15&amp;16\\ a_2=&amp;2&amp;3&amp;4&amp;1&amp;6&amp;7&amp;8&amp;5&amp;12&amp;11&amp;9&amp;10&amp;14&amp;13&amp;15&amp;16\\ a_3=&amp;3&amp;4&amp;1&amp;2&amp;7&amp;8&amp;5&amp;6&amp;10&amp;9&amp;12&amp;11&amp;13&amp;14&amp;15&amp;16\\ a_4=&amp;4&amp;1&amp;2&amp;3&amp;8&amp;5&amp;6&amp;7&amp;11&amp;12&amp;10&amp;9&amp;14&amp;13&amp;15&amp;16 \end{pmatrix}$</p><p>ä¸‹é¢ï¼Œæˆ‘ä»¬å¯¹ä¸Šè¿° 4 ç§ç½®æ¢æ·±å…¥ç ”ç©¶</p><h4 id="ä¸åŠ¨ç½®æ¢ç±»ï¼š-Z-K"><a href="#ä¸åŠ¨ç½®æ¢ç±»ï¼š-Z-K" class="headerlink" title="ä¸åŠ¨ç½®æ¢ç±»ï¼š$Z_K$"></a>ä¸åŠ¨ç½®æ¢ç±»ï¼š$Z_K$</h4><p>è®¾ $G$ æ˜¯ $1â€¦â€¦n$ çš„ä¸€ä¸ªç½®æ¢ç¾¤ï¼Œä¸” $K$ æ˜¯ $G$ çš„é›†åˆä¸­çš„ä¸€ä¸ªå…ƒç´ ï¼Œ<strong>$G$ ä¸­ä½¿å¾— $K$ æ˜ å°„ä¹‹åä¸å˜çš„ç½®æ¢ç»„æˆçš„é›†åˆç§°ä¹‹ä¸º Kä¸åŠ¨ç½®æ¢ç±»</strong>ï¼š$Z_K$ï¼Œé€šå¸¸ç”¨ $\lvert Z_K \rvert$ è¡¨ç¤ºè¿™ä¸ªé›†åˆå½“ä¸­çš„å…ƒç´ ä¸ªæ•°ï¼Œå¦‚ä¸Šè¿°ä¾‹å­ä¸­ï¼š</p><ol><li>K=1 æ—¶ï¼Œä½¿å¾— 1 åœ¨æ˜ å°„ä¹‹åä¿æŒä¸å˜çš„ç½®æ¢åªæœ‰ $a_1$ï¼Œæ•… $Z_1=\begin{Bmatrix} a_1 \end{Bmatrix}$ï¼Œ$\lvert Z_1 \rvert=1$</li><li>K=13 æ—¶ï¼Œä½¿å¾— 13 æ˜ å°„ä¹‹åä¸å˜çš„ç½®æ¢åªæœ‰ $a<em>1$ï¼Œ$a_3$ï¼Œæ•… $Z</em>{13}=\begin{Bmatrix} a<em>1&amp;a_3 \end{Bmatrix}$ï¼Œ$\lvert Z</em>{13} \rvert=2$</li><li>K=15 æ—¶ï¼Œä½¿å¾— 15 æ˜ å°„ä¹‹ä¿æŒä¸å˜çš„ç½®æ¢æœ‰ $a<em>1$ï¼Œ$a_2$ï¼Œ$a_3$ï¼Œ$a_4$ï¼Œæ•… $Z</em>{15}=\begin{Bmatrix} a<em>1&amp;a_2&amp;a_3&amp;a_4 \end{Bmatrix}$ï¼Œ$\lvert Z</em>{15} \rvert=4$</li></ol><h4 id="ç­‰ä»·ç½®æ¢ç±»ï¼š-E-K"><a href="#ç­‰ä»·ç½®æ¢ç±»ï¼š-E-K" class="headerlink" title="ç­‰ä»·ç½®æ¢ç±»ï¼š$E_K$"></a>ç­‰ä»·ç½®æ¢ç±»ï¼š$E_K$</h4><p>è®¾ $G$ æ˜¯ $1â€¦â€¦n$ çš„ä¸€ä¸ªç½®æ¢ç¾¤ï¼Œä¸” $K$ æ˜¯ $G$ çš„é›†åˆä¸­çš„ä¸€ä¸ªå…ƒç´ ï¼Œ$K$ <strong>åœ¨ $G$ ä¸­çš„ç½®æ¢ä½œç”¨ä¸‹èƒ½å˜åŒ–åˆ°çš„å…ƒç´ ç»„æˆçš„é›†åˆå«åš $K$ çš„ç­‰ä»·ç½®æ¢ç±»ï¼š</strong>$E_K$ï¼Œé€šå¸¸ç”¨ $\lvert E_K \rvert$ è¡¨ç¤ºè¿™ä¸ªé›†åˆå½“ä¸­çš„å…ƒç´ ä¸ªæ•°ï¼Œå¦‚ä¸Šè¿°ä¾‹å­ä¸­ï¼š</p><ol><li>K=1 æ—¶ï¼Œ1 èƒ½å˜åŒ–åˆ°çš„å…ƒç´ é›†åˆä¸º $\begin{Bmatrix} 1&amp;2&amp;3&amp;4 \end{Bmatrix}$ï¼Œæ•… $\lvert E_1 \rvert=4$</li><li>K=13 æ—¶ï¼Œ13 èƒ½å˜åŒ–åˆ°çš„å…ƒç´ é›†åˆä¸º $\begin{Bmatrix} 13&amp;14 \end{Bmatrix}$ï¼Œæ•… $\lvert E_{13} \rvert=2$</li><li>K=15 æ—¶ï¼Œ15 èƒ½å˜åŒ–åˆ°çš„å…ƒç´ é›†åˆä¸º $\begin{Bmatrix} 15 \end{Bmatrix}$ï¼Œæ•… $\lvert E_{15} \rvert=1$</li></ol><p>å¯ä»¥å‘ç°<strong>å¯¹äºç¾¤ $G$ ä¸­çš„ä»»ä¸€å…ƒç´  $K$ï¼Œæ€»æœ‰ $\lvert E_K \rvert \times \lvert Z_K \rvert = \lvert G \rvert$</strong>ï¼Œè¯æ˜è¿‡ç¨‹è¾ƒä¸ºå¤æ‚ï¼Œåœ¨æ­¤ä¸è¯¦ç»†å±•å¼€</p><h3 id="Burnside-å¼•ç†"><a href="#Burnside-å¼•ç†" class="headerlink" title="Burnside å¼•ç†"></a>Burnside å¼•ç†</h3><p>è‹¥è®¾å‡½æ•° $f(x,\;y)$ è¡¨ç¤ºå…ƒç´  $x$ åœ¨ç½®æ¢ $a_y$ çš„æ˜ å°„ä¸‹æ˜¯å¦å‘ç”Ÿæ”¹å˜ï¼Œå¹¶å®šä¹‰å‡½æ•° $a_i(x)=y$ è¡¨ç¤º $x$ åœ¨ $a_i$ ç½®æ¢ä¸‹çš„æ˜ å°„</p><p>åˆ™ $f(x,y)=\begin{cases} 1,\quad a_y(x)=x \\ 0, \quad a_y(x)\neq x \end{cases}$ï¼Œä¸‹é¢æˆ‘ä»¬çœ‹çœ‹å¯¹äºä¸Šè¿° 4 ä¸ªæœ‰å…³æ—‹è½¬çš„ç½®æ¢ä¸­ $f(x,y)$ çš„æƒ…å†µ</p><div class="table-container"><table><thead><tr><th style="text-align:center">å…ƒç´  / ç½®æ¢</th><th style="text-align:center">$a_1$</th><th style="text-align:center">$a_2$</th><th style="text-align:center">$a_3$</th><th style="text-align:center">$a_4$</th></tr></thead><tbody><tr><td style="text-align:center">1</td><td style="text-align:center">1</td><td style="text-align:center">0</td><td style="text-align:center">0</td><td style="text-align:center">0</td></tr><tr><td style="text-align:center">2</td><td style="text-align:center">1</td><td style="text-align:center">0</td><td style="text-align:center">0</td><td style="text-align:center">0</td></tr><tr><td style="text-align:center">3</td><td style="text-align:center">1</td><td style="text-align:center">0</td><td style="text-align:center">0</td><td style="text-align:center">0</td></tr><tr><td style="text-align:center">â€¦â€¦</td><td style="text-align:center">â€¦â€¦</td><td style="text-align:center">â€¦â€¦</td><td style="text-align:center">â€¦â€¦</td><td style="text-align:center">â€¦â€¦</td></tr><tr><td style="text-align:center">16</td><td style="text-align:center">1</td><td style="text-align:center">1</td><td style="text-align:center">1</td><td style="text-align:center">1</td></tr><tr><td style="text-align:center">Sum()</td><td style="text-align:center">16</td><td style="text-align:center">2</td><td style="text-align:center">4</td><td style="text-align:center">2</td></tr></tbody></table></div><p><strong>å¯ä»¥å‘ç° $\sum<em>{i=1}^{16}\lvert Z_i \rvert=\sum</em>{j=1}^4Sum(j)$ï¼Œå…¶ä¸­ $Sum(j)$ ä¸ºä¸Šè¡¨ä¸­çš„ $a_j$ å¯¹åº”åˆ—ä¹‹å’Œï¼Œä¹Ÿå°±æ˜¯åœ¨ç½®æ¢ $a_j$ ä¸‹ä¿æŒä¸å˜çš„å…ƒç´ ä¸ªæ•°</strong>ï¼Œæˆ‘ä»¬å¯ä»¥ç§°ç»è¿‡æ—‹è½¬é‡åˆçš„å¤šç§æ¶‚è‰²æ–¹æ¡ˆï¼ˆè‡³å°‘ 2 ç§ï¼‰ç»„æˆçš„é›†åˆä¸ºä¸€ä¸ªç­‰ä»·ç±» $E$ï¼Œåˆ™åŸæ¥çš„ 16 ç§æ¶‚è‰²æ–¹æ¡ˆä¸­å®é™…ä¸ŠåŒ…å«äº† 4 ä¸ªç­‰ä»·ç±»ï¼Œä¸º $\begin{Bmatrix} 1&amp;2&amp;3&amp;4 \end{Bmatrix}$ï¼Œ$\begin{Bmatrix} 5&amp;6&amp;7&amp;8 \end{Bmatrix}$ï¼Œ$\begin{Bmatrix} 9&amp;10&amp;11&amp;12 \end{Bmatrix}$ï¼Œ$\begin{Bmatrix} 13&amp;14 \end{Bmatrix}$</p><p>å¯ä»¥å‘ç°å½“ $i$ å’Œ $j$ åŒå±ä¸€ä¸ªç­‰ä»·ç±»æ—¶ï¼Œ$\lvert Z_i \rvert = \lvert Z_j \rvert$ï¼Œè®¾åŸæ–¹æ¡ˆé›†åˆä¸­å­˜åœ¨ $m$ ä¸ªç­‰ä»·ç±»</p><p>åˆ™ $\sum<em>{i=1}^n \lvert Z_i \rvert =\sum</em>{i=1}^m\sum<em>{K\in E_i}\lvert Z_K \rvert=\sum</em>{i=1}^m \lvert E_i \rvert \times \lvert Z_i \rvert=m \times \lvert G \rvert$ï¼Œè¿™ä¸ªå¼å­åªæ˜¯ç®€å•å˜å½¢ï¼Œæœ¬è´¨å’Œä¸Šè¿°å¼å­ç›¸åŒ</p><p><strong>Burnside å¼•ç†ï¼š</strong>é›†åˆä¸­å­˜åœ¨çš„æ‰€æœ‰äº’å¼‚ç»„åˆçŠ¶æ€çš„ä¸ªæ•°å°±æ˜¯ç­‰ä»·ç±»çš„ä¸ªæ•°ï¼Œå³ $m=\frac{\sum<em>{i=1}^n\lvert Z_i \rvert}{\lvert G \rvert}$ï¼Œç”±äºä¸Šè¿°çš„ç­‰ä»·å…³ç³»ä¹Ÿå¯ä»¥å†™æˆ $m=\frac{\sum</em>{j=1}^4Sum(j)}{\lvert G \rvert}$ï¼Œè¿™é‡Œçš„ $\lvert G \rvert$ æ˜¯æŒ‡ç½®æ¢çš„ä¸ªæ•°ï¼Œä¸º 4</p><p>ç»“åˆè¿™ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬å‘ç° $m=\frac{16+2+4+2}{4}=6$ï¼Œä¸æšä¸¾å¾—åˆ°çš„ç­”æ¡ˆå»åˆ</p><p>æœ‰äº† <strong>Burnside å¼•ç†</strong>ï¼Œå·²ç»å¯ä»¥å¤§å¤§é™ä½è®¡æ•°çš„æ—¶é—´å¤æ‚åº¦äº†ï¼Œå¯æ˜¯æˆ‘ä»¬å‘ç° $Sum(j)$ å¹¶ä¸æ˜¯é‚£ä¹ˆçš„å¥½ç®—ï¼Œç°åœ¨ç›´æ¥é‡‡ç”¨æœç´¢çš„æ–¹æ³•çš„è¯å°†ä¼šè¾¾åˆ° $O(n\times \lvert G \rvert \times N)$ï¼Œåˆ†åˆ«è¡¨ç¤ºå…ƒç´ ä¸ªæ•°ï¼ˆæ¶‚è‰²çš„æ–¹æ¡ˆæ•°ï¼‰ï¼Œç½®æ¢ä¸ªæ•°ï¼ˆæ­¤ä¾‹ä¸­ä¸º4ï¼‰å’Œå®é™…çš„æ–¹æ ¼æ•°ï¼Œæ˜¾ç„¶è¿˜æ˜¯ä¼šè¶…æ—¶ï¼Œ<strong>Polya ç®—æ³•å°±æ—¨åœ¨å¯»æ‰¾ä¸€ç§ç®€ä¾¿çš„è®¡ç®— $Sum(j)$ çš„æ–¹æ³•ï¼Œè¿›ä¸€æ­¥ä¼˜åŒ–</strong></p><h2 id="Polya-å®šç†-1"><a href="#Polya-å®šç†-1" class="headerlink" title="Polya å®šç†"></a>Polya å®šç†</h2><h3 id="é«˜çº§å¾ªç¯"><a href="#é«˜çº§å¾ªç¯" class="headerlink" title="é«˜çº§å¾ªç¯"></a>é«˜çº§å¾ªç¯</h3><p>è®°ä¸€ç§å¯¹äº $\begin{pmatrix} a_1&amp;a_2&amp;a_3&amp;â€¦â€¦&amp;a_n \end{pmatrix}$ çš„é«˜çº§å¾ªç¯ä¸ºå®ƒçš„ä¸€ä¸ªç½®æ¢ï¼Œå¹¶æ»¡è¶³ï¼š</p><p> $\begin{pmatrix} a_1&amp;a_2&amp;a_3&amp;â€¦â€¦&amp;a_n \end{pmatrix} \Rightarrow \begin{pmatrix} a_1&amp;a_2&amp;a_3&amp;â€¦â€¦&amp;a_n \\ a_2&amp;a_3&amp;a_4&amp;â€¦â€¦&amp;a_1  \end{pmatrix} $ï¼Œè¿™æ ·çš„æ¶‰åŠ $n$ ä¸ªå…ƒç´ çš„é«˜çº§å¾ªç¯ç§°ä¹‹ä¸º <strong>né˜¶å¾ªç¯</strong></p><p><strong>æ¯ä¸ªç½®æ¢éƒ½å¯ä»¥ç”±è‹¥å¹²ä¸ªäº’ä¸ç›¸äº¤çš„å¾ªç¯ç»„æˆï¼ˆäº’ä¸ç›¸äº¤æ˜¯æŒ‡ä¸¤ä¸ªå¾ªç¯æ²¡æœ‰å…¬å…±å…ƒç´ ï¼‰å¦‚ï¼š</strong></p><p>$ \begin{pmatrix} 1&amp;2&amp;3&amp;4&amp;5 \\ 3&amp;5&amp;1&amp;4&amp;2  \end{pmatrix}= \begin{pmatrix} 1&amp;3  \end{pmatrix} \bullet \begin{pmatrix} 2&amp;5  \end{pmatrix} \bullet \begin{pmatrix} 4  \end{pmatrix} = \begin{pmatrix} 1&amp;3 \\ 3&amp;1  \end{pmatrix} \bullet \begin{pmatrix} 2&amp;5 \\ 5&amp;2  \end{pmatrix} \bullet \begin{pmatrix} 4 \\ 4  \end{pmatrix}$ï¼Œï¼ˆå®šä¹‰ $\bullet$ è¡¨ç¤ºè¿æ¥æˆ–åˆå¹¶ï¼‰</p><p>å¯¹äºæ¯ä¸ªç½®æ¢éƒ½æœ‰ä¸”ä»…æœ‰è¿™æ ·ä¸€ç§è¢«è¡¨ç¤ºä¸ºå¾ªç¯çš„æ–¹å¼ï¼Œä¸”å®šä¹‰å¾ªç¯èŠ‚çš„ä¸ªæ•° $C$ ä¸ºç»„æˆçš„å¾ªç¯ä¸ªæ•°ï¼Œå¦‚ä¸Šä¾‹ä¸­å¾ªç¯èŠ‚æ•° $C=3$</p><p>æŒ‰ç…§ä¸Šè¿°è§„åˆ™ï¼Œç»™ $2\times 2$ çš„æ–¹æ ¼ç¼–å·ï¼Œæ—‹è½¬ä¹‹åå¦‚å›¾ï¼š</p><p><img src="https://s2.ax1x.com/2019/07/25/emp8eA.png" alt="pic2"></p><p>å®šä¹‰ 4 ä¸ªç½®æ¢ä¸ºï¼šè½¬ 0åº¦ï¼Œ90åº¦ï¼Œ180åº¦ï¼Œ270åº¦ï¼Œç”¨ $g$ è¡¨ç¤ºç½®æ¢ï¼Œ$C(g)$ è¡¨ç¤ºç½®æ¢å¯¹åº”çš„å¾ªç¯èŠ‚ä¸ªæ•°ï¼Œåˆ™ï¼š</p><ol><li><p>è½¬ 0 åº¦æ—¶ï¼Œ$g_1=\begin{pmatrix} 1&amp;2&amp;3&amp;4 \\ 1&amp;2&amp;3&amp;4  \end{pmatrix}=(1)\bullet(2)\bullet(3)\bullet(4)$ï¼Œæ•… $C(g_1)=4$</p></li><li><p>è½¬ 90 åº¦æ—¶ï¼Œ$g_2=\begin{pmatrix} 1&amp;2&amp;3&amp;4 \\ 3&amp;2&amp;4&amp;1  \end{pmatrix}=(4\quad 3\quad2\quad 1)$ï¼Œæ•… $C(g_2)=1$</p></li><li><p>è½¬ 180 åº¦æ—¶ï¼Œ$g_3=\begin{pmatrix} 1&amp;2&amp;3&amp;4 \\ 3&amp;4&amp;1&amp;2  \end{pmatrix}=(1\quad 3)\bullet(2\quad 4)$ï¼Œæ•… $C(g_3)=2$</p></li><li><p>è½¬ 270 åº¦æ—¶ï¼Œ$g_4=\begin{pmatrix} 1&amp;2&amp;3&amp;4 \\ 2&amp;1&amp;4&amp;3  \end{pmatrix}=(1\quad 2\quad 3\quad 4)$ï¼Œæ•… $C(g_4)=1$</p></li></ol><p>è¿›ä¸€æ­¥ç ”ç©¶å‘ç°ï¼Œ$Sum(i)=2^{C(g_i)}$ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œ<strong>è¯¥ç½®æ¢ä¸‹ä¸å˜çš„æ¶‚è‰²æ–¹æ¡ˆæ•°å’Œä»¥å®ƒå¯¹åº”çš„å¾ªç¯èŠ‚ä¸ªæ•°ä¸ºæŒ‡æ•°ï¼Œæ¶‚è‰²é€‰æ‹©æ•°ä¸ºåº•æ•°çš„å¹‚ç›¸åŒ</strong>ï¼Œè‹¥æœ‰ $T$ ç§é¢œè‰²å¯ä»¥æ¶‚ï¼Œåˆ™æ­¤å¤„åº”ä¸º $Sum(i)=T^{C(g_i)}$ </p><p><strong>Polya å®šç†ï¼š</strong>è®¾ $G$ æ˜¯ $p$ ä¸ªå¯¹è±¡çš„ä¸€ä¸ªç½®æ¢ç¾¤ï¼Œç”¨ $T$ ç§é¢œè‰²æŸ“è‰² $p$ ä¸ªå¯¹è±¡ï¼Œåˆ™æœ¬è´¨ä¸åŒçš„æ–¹æ¡ˆæ•°ä¸ºï¼š</p><p>$m=\frac{1}{\lvert G \rvert}\times \sum_{i=1}^sT^{C(g_i)}$ï¼Œå…¶ä¸­ $s$ ä¸ºç½®æ¢çš„ä¸ªæ•°</p><p>åˆ©ç”¨ <strong>Polya å®šç†</strong> çš„æ—¶é—´å¤æ‚åº¦ä¸º $O(s\times N)$ï¼Œåˆ†åˆ«ä¸ºç½®æ¢çš„ä¸ªæ•°å’Œæ ¼å­æ€»æ•°ï¼Œåœ¨å‰é¢çš„å¼•ç†ä¸Šå®ç°äº†ä¼˜åŒ–</p><h2 id="é™„è¨€"><a href="#é™„è¨€" class="headerlink" title="é™„è¨€"></a>é™„è¨€</h2><p>å¯¹äºä¸€å¼€å¤´æå‡ºçš„ä¾‹å­ï¼Œåˆ©ç”¨ <strong>Polya å®šç†</strong> æ±‚å‡ºè¡¨è¾¾å¼ä¹‹åï¼Œå…¶å®è¿˜å¯ä»¥ç»§ç»­æ‰¾è§„å¾‹ï¼Œæœ€åç­”æ¡ˆçš„æ–¹æ¡ˆæ•°åº”ä¸ºï¼š<br>$m=\frac{1}{4}\times (T^{n^2}+T^{\frac{n^2+3}{4}}+T^{\frac{n^2+1}{2}}+T^{\frac{n^2+3}{4}})$</p><p>è¿™ä¸æˆ‘ä»¬å‰é¢é€šè¿‡æšä¸¾å’Œå½’çº³è¡¨è¾¾å¼è®¡ç®—å‡ºæ¥çš„ç»“æœå®Œå…¨ä¸€è‡´</p><p>å‚è€ƒæ–‡çŒ®ï¼š<a href="https://wenku.baidu.com/view/bf92a95f804d2b160b4ec0be.html">Polyaå®šç†â€”â€”ç¬¦æ–‡æ°</a></p>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°è®º </tag>
            
            <tag> ç»„åˆæ•°å­¦ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è‡ªåˆ¶çš„å¯¹æ‹å™¨ï¼</title>
      <link href="/2019/07/24/2019-07-24-%E5%AF%B9%E6%8B%8D%E5%99%A8/"/>
      <url>/2019/07/24/2019-07-24-%E5%AF%B9%E6%8B%8D%E5%99%A8/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p><strong>å¯¹æ‹æ˜¯å¸®åŠ©æˆ‘ä»¬æ£€éªŒç®—æ³•æ­£ç¡®æ€§ï¼ˆæˆ–è€…å¸®åŠ©æˆ‘ä»¬æ­»äº†ç”¨é«˜çº§ç®—æ³•çš„å¿ƒï¼‰çš„æå…¶æœ‰æ•ˆçš„æ–¹å¼</strong>ï¼Œæœ€è¿‘ä¸Šç½‘æŸ¥äº†æŸ¥å¯¹æ‹å™¨çš„å†™æ³•å’Œæ£€éªŒå™¨çš„å†™æ³•ï¼Œæ”¾ä¸€ä¸ªæ¯”è¾ƒèŠ±å“¨çš„å¯¹æ‹ä¸æ£€éªŒå™¨åœ¨è¿™ï¼Œæœ‰æ”¹è¿›æ„è§çš„ DALAO ä»¬ä¹Ÿå¯ä»¥æå‡ºæ¥~</p><p>åœ¨å¼€å§‹ä¹‹å‰ï¼Œå¯èƒ½éœ€è¦äº†è§£ä»¥ä¸‹ä¸œè¥¿ï¼š</p><ol><li>æ•´ä¸ªå¯¹æ‹å™¨å¹¶æ²¡æœ‰ä½¿ç”¨ <code>freopen</code> ï¼Œå¹¶ä¸”åœ¨å¯¹æ‹å™¨å¤´æ–‡ä»¶ï¼ˆä»¥ä¸‹æœ‰è¯´æ˜ï¼‰é‡Œä¹Ÿä¸å…è®¸ä½¿ç”¨ <code>freopen</code>ï¼Œå› ä¸º<strong>å¯¹æ‹ç¨‹åºä¼šé¢‘ç¹çš„åœ¨æ§åˆ¶å°å’Œæ–‡ä»¶è¾“å…¥è¾“å‡ºæµä¹‹é—´åˆ‡æ¢</strong>ï¼Œæ‰€ä»¥æˆ‘é‡‡ç”¨çš„æ˜¯ <code>ifstream</code> å’Œ <code>ofstream</code></li><li><code>ifstream</code> å’Œ <code>ofstream</code> æ˜¯å¯¹åº”è¾“å…¥è¾“å‡ºæµçš„æ•°æ®ç±»å‹ï¼Œå¤´æ–‡ä»¶ä¸º <code>include &lt;fstream&gt;</code>ï¼Œå®ä¾‹åŒ–ä»¥åå¯ä»¥ç”¨ç±»ä¼¼ <code>cin</code> å’Œ <code>cout</code> çš„å½¢å¼å¾€æ–‡ä»¶é‡Œé¢è¾“å…¥å†…å®¹æˆ–ä»æ–‡ä»¶é‡Œé¢è¯»å–å†…å®¹ï¼Œå†™å…¥å’Œè¯»å–çš„æœºåˆ¶ä¹Ÿå’Œ <code>cin</code> å’Œ <code>cout</code> ç›¸ä¼¼ï¼Œä¾‹å¦‚ï¼Œå¾€ <code>TEST.txt</code> å†™å…¥å†…å®¹ <code>Hello World!</code></li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ofstream ofile;</span><br><span class="line">ofile.<span class="built_in">open</span>(<span class="string">&quot;TEST.txt&quot;</span>);</span><br><span class="line">ofile&lt;&lt;<span class="string">&quot;Hello World!&quot;</span>;</span><br></pre></td></tr></table></figure><ol><li>ç”±äºåœ¨éšæœºæ•°ç”Ÿæˆæ—¶ä¸éœ€è¦ç”¨åˆ° <code>ifstream</code>ï¼ˆå°±æ˜¯è¯´ä¸ç”¨è‡ªå·±å†™ï¼‰æ‰€ä»¥åœ¨æ­¤ä¸å¤šä»‹ç»ï¼Œé‚£ä¹ˆä½¿ç”¨ <code>ofstream</code> ä¸ºç»å…¸çš„ A+B Problem ç”Ÿæˆä¸€ç»„æ•°æ®åˆ° input.txt é‡Œé¢ï¼Œå°±æ˜¯ï¼š</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">srand</span>(<span class="built_in">time</span>(<span class="number">0</span>));</span><br><span class="line">ofstream ofile;</span><br><span class="line">ofile.<span class="built_in">open</span>(<span class="string">&quot;input.txt&quot;</span>);</span><br><span class="line">ofile&lt;&lt;<span class="built_in">rand</span>()&lt;&lt;<span class="string">&#x27; &#x27;</span>&lt;&lt;<span class="built_in">rand</span>();</span><br><span class="line">ofile.<span class="built_in">close</span>(); <span class="comment">// å…³é—­æ–‡ä»¶</span></span><br></pre></td></tr></table></figure><h2 id="ç»„æˆéƒ¨åˆ†"><a href="#ç»„æˆéƒ¨åˆ†" class="headerlink" title="ç»„æˆéƒ¨åˆ†"></a>ç»„æˆéƒ¨åˆ†</h2><p>æˆ‘å†™çš„å¯¹æ‹ç¨‹åºåŒ…å«ä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ï¼š</p><ol><li>éšæœºæ•°å¤´æ–‡ä»¶ data.hï¼ˆæ³¨æ„ä¸æ˜¯CPPï¼ç›´æ¥å°†å¯¹æ‹çš„ä»£ç å†™åˆ°ä¸€ä¸ªå«åš <code>makedata</code> çš„æ— å‚æ•°ä¸”ä¸º <code>void</code> å‹çš„å‡½æ•°é‡Œé¢å³å¯ï¼Œä¸å†™ <code>main()</code> å‡½æ•°ï¼‰ï¼Œå¤´æ–‡ä»¶ä¸ç”¨ç¼–è¯‘ç›´æ¥ä¿å­˜å³å¯</li><li>æ ‡å‡†ç¨‹åº <code>std.exe</code> ï¼Œæ³¨æ„æ˜¯ç¼–è¯‘å¥½çš„å¯æ‰§è¡Œæ–‡ä»¶ä¸æ˜¯æºä»£ç  </li><li>è¦å¯¹æ‹çš„ç¨‹åº <code>my.exe</code> ï¼Œæ³¨æ„æ˜¯ç¼–è¯‘å¥½çš„å¯æ‰§è¡Œæ–‡ä»¶ä¸æ˜¯æºä»£ç </li><li>ç»Ÿä¸€çš„æ–‡ä»¶è¾“å…¥ä» <code>testin.txt</code> é‡Œé¢è¾“å…¥ï¼Œè¾“å‡ºæ—¶ï¼Œæ ‡å‡†ç¨‹åºè¾“å‡ºåˆ° <code>r_testout.txt</code>ï¼Œè¦å¯¹æ‹çš„ç¨‹åºè¾“å‡ºåˆ° <code>testout.txt</code> ï¼ˆå½“ç„¶ä¹Ÿå¯ä»¥è¿›å…¥æ£€éªŒå™¨é‡Œé¢æ›´æ”¹æ–‡ä»¶åï¼‰</li><li><strong>ä»¥ä¸Šæ–‡ä»¶å’Œæ£€éªŒå™¨å¿…é¡»å¤„åœ¨åŒä¸€ç›®å½•ä¸‹</strong></li></ol><h3 id="æ“ä½œæ–¹æ³•"><a href="#æ“ä½œæ–¹æ³•" class="headerlink" title="æ“ä½œæ–¹æ³•"></a>æ“ä½œæ–¹æ³•</h3><ol><li>åœ¨ä¸‹æ–¹å¤åˆ¶æ£€éªŒå™¨çš„æºä»£ç ï¼Œç¼–è¯‘åç”Ÿæˆä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ï¼Œ<strong>å°†ä¸Šè¿°çš„æ‰€æœ‰æ–‡ä»¶æ”¾åˆ°åŒä¸€ç›®å½•ä¸‹</strong>ï¼Œè¿è¡Œæ£€éªŒå™¨</li><li>ä¸€æ¥ä¼šæç¤ºä½ æ£€æŸ¥éœ€è¦çš„ç¨‹åºä»¥åŠæ–‡ä»¶ï¼ˆå…¶ä¸­è¾“å‡ºè¾“å‡ºæ–‡ä»¶å¯ä»¥ä¸ç”¨ä¸“é—¨åˆ›å»ºï¼Œä½†æ˜¯ä¸€å®šè¦å†™åœ¨ç¨‹åºçš„æ–‡ä»¶è¾“å…¥è¾“å‡ºçš„ä»£ç å†…å¹¶ç¼–è¯‘é€šè¿‡ï¼‰ç¡®å®šæ— è¯¯åè¾“å…¥ <code>y</code>ï¼Œéšåè¾“å…¥æ•°æ®ç»„æ•°å°±å¯ä»¥å¼€å§‹å¯¹æ‹äº†</li><li>å¦‚æœè¦ä¿®æ”¹æ–‡ä»¶åï¼Œå¯ä»¥è¿›å…¥æ£€éªŒå…¶æºä»£ç ï¼Œä¿®æ”¹å¯¹åº”çš„éƒ¨åˆ†å³å¯</li></ol><h2 id="æºä»£ç "><a href="#æºä»£ç " class="headerlink" title="æºä»£ç "></a>æºä»£ç </h2><h3 id="æ£€éªŒå™¨æºä»£ç ï¼ˆJudge-cppï¼‰"><a href="#æ£€éªŒå™¨æºä»£ç ï¼ˆJudge-cppï¼‰" class="headerlink" title="æ£€éªŒå™¨æºä»£ç ï¼ˆJudge.cppï¼‰"></a>æ£€éªŒå™¨æºä»£ç ï¼ˆJudge.cppï¼‰</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdlib&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;fstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;windows.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;data.h&quot;</span> <span class="comment">// éšæœºæ•°å¤´æ–‡ä»¶</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">char</span> op;<span class="type">int</span> n;</span><br><span class="line"><span class="type">char</span> s1[<span class="number">1000001</span>],s2[<span class="number">1000001</span>];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">srand</span>((<span class="type">unsigned</span>)<span class="built_in">time</span>(<span class="literal">NULL</span>));</span><br><span class="line">ifstream infile1,infile2,rdfile;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;æ¬¢è¿ä½¿ç”¨å¯¹æ‹å™¨ï¼\n&quot;</span>);</span><br><span class="line"><span class="built_in">SetConsoleTextAttribute</span>(<span class="built_in">GetStdHandle</span>(STD_OUTPUT_HANDLE), FOREGROUND_INTENSITY | FOREGROUND_BLUE);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;è¯·ç¡®ä¿ä»¥ä¸‹æ–‡ä»¶ä¸å¯¹æ‹å™¨åœ¨åŒä¸€ç›®å½•å†…ï¼š\n&quot;</span>);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;å¯¹æ‹ç¨‹åºï¼šstd.exe\n&quot;</span>);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;æµ‹è¯•ç¨‹åºï¼šmy.exe\n&quot;</span>);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;éšæœºæ•°å¤´æ–‡ä»¶ï¼šdata.h\n&quot;</span>);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;å¯¹æ‹è¾“å‡ºï¼šr_testout.txt\n&quot;</span>);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;æµ‹è¯•è¾“å‡ºï¼štestout.txt\n&quot;</span>);</span><br><span class="line"><span class="built_in">SetConsoleTextAttribute</span>(<span class="built_in">GetStdHandle</span>(STD_OUTPUT_HANDLE), FOREGROUND_INTENSITY | FOREGROUND_RED |</span><br><span class="line">FOREGROUND_GREEN | FOREGROUND_BLUE);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;ç¡®å®šå¼€å§‹å¯¹æ‹è¯·è¾“å…¥[y]\n&quot;</span>);</span><br><span class="line">cin&gt;&gt;op;<span class="keyword">if</span>(op!=<span class="string">&#x27;y&#x27;</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;cls&quot;</span>); <span class="type">int</span> col=<span class="number">0</span>;<span class="type">bool</span> sign=<span class="literal">true</span>;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;è¾“å…¥æ•°æ®ç»„æ•°ï¼š&quot;</span>);<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;------------------------------\n&quot;</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line"><span class="built_in">makedata</span>();</span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;my.exe&quot;</span>); <span class="comment">// åœ¨è¿™é‡Œä¿®æ”¹è¦å¯¹æ‹çš„ç¨‹åºå</span></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;std.exe&quot;</span>); col=<span class="number">0</span>;<span class="comment">// åœ¨è¿™é‡Œä¿®æ”¹æ ‡å‡†ç­”æ¡ˆç¨‹åºå</span></span><br><span class="line">infile1.<span class="built_in">open</span>(<span class="string">&quot;testout.txt&quot;</span>);<span class="comment">// åœ¨è¿™é‡Œä¿®æ”¹å¯¹æ‹ç¨‹åºè¾“å‡ºæ–‡ä»¶çš„åå­—</span></span><br><span class="line">infile2.<span class="built_in">open</span>(<span class="string">&quot;r_testout.txt&quot;</span>);<span class="comment">// åœ¨è¿™é‡Œæ ‡å‡†ç¨‹åºè¾“å‡ºæ–‡ä»¶çš„åå­—</span></span><br><span class="line"><span class="keyword">while</span>(!infile1.<span class="built_in">eof</span>() &amp;&amp; !infile2.<span class="built_in">eof</span>())&#123;</span><br><span class="line">col++;sign=<span class="literal">true</span>;</span><br><span class="line">infile1.<span class="built_in">getline</span>(s1,<span class="number">1000000</span>);</span><br><span class="line">infile2.<span class="built_in">getline</span>(s2,<span class="number">1000000</span>);</span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">strcmp</span>(s1,s2))&#123;</span><br><span class="line"><span class="built_in">SetConsoleTextAttribute</span>(<span class="built_in">GetStdHandle</span>(STD_OUTPUT_HANDLE), FOREGROUND_INTENSITY | FOREGROUND_RED);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;#%d:åœ¨ç¬¬ %d è¡Œï¼Œæ ‡å‡†è¾“å‡º %sï¼Œæµ‹è¯•è¾“å‡º %s\n&quot;</span>,i,col,s2,s1);</span><br><span class="line"><span class="built_in">SetConsoleTextAttribute</span>(<span class="built_in">GetStdHandle</span>(STD_OUTPUT_HANDLE), FOREGROUND_INTENSITY | FOREGROUND_RED |</span><br><span class="line">FOREGROUND_GREEN | FOREGROUND_BLUE);sign=<span class="literal">false</span>;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(sign)&#123;</span><br><span class="line"><span class="built_in">SetConsoleTextAttribute</span>(<span class="built_in">GetStdHandle</span>(STD_OUTPUT_HANDLE), FOREGROUND_INTENSITY | FOREGROUND_GREEN);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;#%d:æµ‹è¯•è¾“å‡ºä¸å¯¹æ‹è¾“å‡ºä¸€è‡´\n&quot;</span>,i);</span><br><span class="line"><span class="built_in">SetConsoleTextAttribute</span>(<span class="built_in">GetStdHandle</span>(STD_OUTPUT_HANDLE), FOREGROUND_INTENSITY | FOREGROUND_RED |</span><br><span class="line">FOREGROUND_GREEN | FOREGROUND_BLUE);</span><br><span class="line">&#125;</span><br><span class="line">infile1.<span class="built_in">close</span>();</span><br><span class="line">infile2.<span class="built_in">close</span>();</span><br><span class="line">&#125; <span class="built_in">printf</span>(<span class="string">&quot;------------------------------\n&quot;</span>);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d ç»„&quot;</span>,n);</span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;echo è¯„æµ‹å®Œæˆ &amp; pause&gt;nul&quot;</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="éšæœºæ•°æºä»£ç æ ·ä¾‹ï¼ˆdata-hï¼‰"><a href="#éšæœºæ•°æºä»£ç æ ·ä¾‹ï¼ˆdata-hï¼‰" class="headerlink" title="éšæœºæ•°æºä»£ç æ ·ä¾‹ï¼ˆdata.hï¼‰"></a>éšæœºæ•°æºä»£ç æ ·ä¾‹ï¼ˆdata.hï¼‰</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;ctime&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdlib&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;fstream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">makedata</span><span class="params">()</span></span>&#123;</span><br><span class="line">ofstream ofile;</span><br><span class="line">ofile.<span class="built_in">open</span>(<span class="string">&quot;testin.txt&quot;</span>);<span class="comment">// åœ¨è¿™é‡ŒæŒ‡å®šè¾“å…¥æ–‡ä»¶çš„åå­—</span></span><br><span class="line">    <span class="comment">// ä»¥ä¸‹å†…å®¹æ ¹æ®é¢˜ç›®éœ€è¦ç¼–å†™ï¼Œç”Ÿæˆç¬¦åˆé¢˜ç›®çš„æ•°æ®</span></span><br><span class="line"><span class="type">int</span> n=<span class="built_in">rand</span>()%<span class="number">40</span>;</span><br><span class="line">ofile&lt;&lt;n&lt;&lt;<span class="string">&#x27; &#x27;</span>&lt;&lt;<span class="built_in">rand</span>()%<span class="number">2000000</span>+<span class="number">2000000</span>&lt;&lt;<span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++) ofile&lt;&lt;<span class="built_in">rand</span>()%<span class="number">2000000</span>&lt;&lt;<span class="string">&#x27; &#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h2><p>æ¬¢è¿å„ä½ DALAO æå‡ºæ”¹è¿›å»ºè®®æˆ–è€…ä¸æˆ‘äº¤æµï¼ï¼ï¼</p><p>2019 / 07 / 24</p>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C++ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é€’æ¨ | çŸ©é˜µ | SPFA | æ¨¡æ‹Ÿ | æ•°è®º | 20190723è€ƒ  è¯•ï¼šè§£é¢˜æŠ¥å‘Š</title>
      <link href="/2019/07/23/2019-07-23-190723%E8%80%83%E8%AF%95/"/>
      <url>/2019/07/23/2019-07-23-190723%E8%80%83%E8%AF%95/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><h2 id="é¢˜ç›®é™åˆ¶ä¸€è§ˆ"><a href="#é¢˜ç›®é™åˆ¶ä¸€è§ˆ" class="headerlink" title="é¢˜ç›®é™åˆ¶ä¸€è§ˆ"></a>é¢˜ç›®é™åˆ¶ä¸€è§ˆ</h2><div class="table-container"><table><thead><tr><th style="text-align:center">é¢˜ç›®</th><th style="text-align:center">æ—¶é—´é™åˆ¶</th><th style="text-align:center">ç©ºé—´é™åˆ¶</th></tr></thead><tbody><tr><td style="text-align:center">1. traffic</td><td style="text-align:center">$1000$ MS</td><td style="text-align:center">$128$ MB</td></tr><tr><td style="text-align:center">2. paint</td><td style="text-align:center">$1000$ MS</td><td style="text-align:center">$512$ MB</td></tr><tr><td style="text-align:center">3. airline</td><td style="text-align:center">$1000$ MS</td><td style="text-align:center">$128$ MB</td></tr></tbody></table></div><h2 id="1-è½¦æµé‡ï¼ˆtraffic-cppï¼‰"><a href="#1-è½¦æµé‡ï¼ˆtraffic-cppï¼‰" class="headerlink" title="1. è½¦æµé‡ï¼ˆtraffic.cppï¼‰"></a>1. è½¦æµé‡ï¼ˆtraffic.cppï¼‰</h2><h3 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h3><p>å·¥äººæ‰“ç®—ç”¨ä¸€ç»„ä¼ æ„Ÿå™¨æµ‹é‡å…¬è·¯ä¸Šçš„è½¦æµé‡ï¼Œæ¯ä¸ªä¼ æ„Ÿå™¨è¢«ç”¨æ¥æµ‹é‡ä¸€å°æ®µè·¯é¢ä¸Šçš„è½¦æµé‡çš„æ•°å€¼ã€‚ä¸å¹¸çš„æ˜¯ï¼ŒæŸä¸€å¤©è£…æœ‰ä¼ æ„Ÿå™¨çš„ç›’å­è¿›äº†æ°´ï¼Œä¹‹åå®ƒä»¬å°±ä¸èƒ½ç²¾ç¡®çš„æµ‹é‡äº†ã€‚ç°åœ¨æ¯ä¸ªä¼ æ„Ÿå™¨åªèƒ½è¾“å‡ºä¸€ä¸ªå¯èƒ½ç»“æœçš„èŒƒå›´ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªä¼ æ„Ÿå™¨å¯èƒ½ä¼šç»™å‡ºèŒƒå›´[7,13]ï¼Œè¡¨ç¤ºåœ¨è¿™æ®µè·¯é¢ä¸Šçš„è½¦æµé‡ä¸å°äº7ï¼Œå¹¶ä¸”ä¸å¤§äº13ã€‚</p><p>é«˜é€Ÿè·¯è¦æµ‹é‡çš„è¿™ä¸€æ®µé•¿Nè‹±é‡Œï¼Œå½“ç„¶é«˜é€Ÿè·¯éƒ½æ˜¯å•å‘çš„ï¼Œä»ç¬¬1è‹±é‡Œé©¶å‘ç¬¬Nè‹±é‡Œã€‚å·¥äººæƒ³è¦å®‰è£…Nä¸ªä¼ æ„Ÿå™¨â€”â€”æ¯ä¸ªç›‘æµ‹1è‹±é‡Œé•¿çš„è·¯æ®µã€‚åœ¨å…¶ä¸­æŸäº›è·¯æ®µä¸Šï¼Œæœ‰èƒ½å¤Ÿä½¿å¾—è½¦è¾†è¿›å…¥é«˜é€Ÿå…¬è·¯çš„ä¸ŠåŒé“ï¼Œåœ¨è¿™æ ·çš„è·¯æ®µä¸Šï¼Œå·¥äººä¼šå°†ä¼ æ„Ÿå™¨è£…åœ¨ä¸ŠåŒé“ä¸Šï¼Œæµ‹é‡æµå…¥çš„è½¦æµé‡ã€‚åœ¨æŸäº›è·¯æ®µä¸Šæœ‰èƒ½å¤Ÿä½¿å¾—è½¦è¾†ç¦»å¼€é«˜é€Ÿå…¬è·¯çš„ä¸‹åŒé“ï¼Œåœ¨è¿™æ ·çš„è·¯æ®µä¸Šï¼Œå·¥äººä¼šå°†ä¼ æ„Ÿå™¨è£…åœ¨ä¸‹åŒé“ä¸Šã€‚æ¯ä¸€ä¸ªè·¯æ®µåŒ…å«è‡³å¤šä¸€ä¸ªåŒé“ã€‚å¦‚æœåœ¨å…¬è·¯çš„ä¸€ä¸ªè·¯æ®µä¸Šæ²¡æœ‰ä¸ŠåŒé“æˆ–ä¸‹åŒé“ï¼Œå·¥äººå°±å°†ä¼ æ„Ÿå™¨è£…åœ¨é«˜é€Ÿå…¬è·¯çš„ä¸»è·¯ä¸Šã€‚</p><p>ç»™å®šNä¸ªä¼ æ„Ÿå™¨çš„è¯»æ•°ï¼Œè¯·æ±‚å‡ºåœ¨é«˜é€Ÿå…¬è·¯ç¬¬1è‹±é‡Œä¹‹å‰å’Œç¬¬Nè‹±é‡Œä¹‹åè½¦æµé‡çš„æœ€ä¸ºå‡†ç¡®çš„å¯èƒ½èŒƒå›´ã€‚è¿™äº›èŒƒå›´åº”å½“ä¸æ‰€æœ‰Nä¸ªä¼ æ„Ÿå™¨çš„è¯»æ•°ç›¸ä¸€è‡´ã€‚</p><h3 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h3><p>è¾“å…¥çš„ç¬¬ä¸€è¡ŒåŒ…å«Nï¼ˆ1â‰¤Nâ‰¤100ï¼‰ã€‚ä½™ä¸‹Nè¡Œæ¯è¡ŒæŒ‰ä»ç¬¬1è‹±é‡Œè‡³ç¬¬Nè‹±é‡Œçš„é¡ºåºæè¿°ä¸€æ®µ1è‹±é‡Œé•¿çš„è·¯æ®µã€‚æ¯è¡ŒåŒ…å«ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä¸ºâ€onâ€ï¼ˆå¦‚æœè¿™æ®µè·¯ä¸Šæœ‰ä¸€ä¸ªä¸ŠåŒé“ï¼‰ï¼Œâ€offâ€ï¼ˆå¦‚æœè¿™æ®µè·¯ä¸Šæœ‰ä¸€ä¸ªä¸‹åŒé“ï¼‰ï¼Œæˆ–è€…æ˜¯â€noneâ€ï¼ˆå¦‚æœè¿™æ®µè·¯ä¸Šæ²¡æœ‰åŒé“ï¼‰ï¼Œç„¶åæ˜¯ä¸¤ä¸ªèŒƒå›´ä¸º0â€¦1000çš„æ•´æ•°ï¼Œè¡¨ç¤ºè¿™æ®µè·¯ä¸Šçš„ä¼ æ„Ÿå™¨çš„è¯»æ•°æ‰€ç»™å‡ºçš„ä¸‹ç•Œã€ä¸Šç•Œã€‚è‡³å°‘ä¸€ä¸ªé«˜é€Ÿå…¬è·¯è·¯æ®µçš„æè¿°ä¼šæ˜¯â€noneâ€ã€‚</p><h3 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h3><p>è¾“å‡ºçš„ç¬¬ä¸€è¡ŒåŒ…å«ä¸¤ä¸ªæ•´æ•°ï¼Œä¸ºç¬¬1è‹±é‡Œä¹‹å‰çš„è½¦æµé‡çš„æœ€å‡†ç¡®çš„å¯èƒ½èŒƒå›´ã€‚ç¬¬äºŒè¡ŒåŒ…å«ä¸¤ä¸ªæ•´æ•°ï¼Œä¸ºç¬¬Nè‹±é‡Œä¹‹åçš„è½¦æµé‡çš„æœ€å‡†ç¡®çš„å¯èƒ½èŒƒå›´ã€‚è¾“å…¥ä¿è¯å­˜åœ¨ç¬¦åˆè¦æ±‚çš„è§£ã€‚</p><h3 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">4</span><br><span class="line">on 1 1</span><br><span class="line">none 10 14</span><br><span class="line">none 11 15</span><br><span class="line">off 2 3</span><br></pre></td></tr></table></figure><h3 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">10 13</span><br><span class="line">8 12</span><br></pre></td></tr></table></figure><h3 id="Hint"><a href="#Hint" class="headerlink" title="Hint"></a>Hint</h3><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œè·¯æ®µ2å’Œè·¯æ®µ3çš„è¯»æ•°ç»„åˆåœ¨ä¸€èµ·å‘Šè¯‰æˆ‘ä»¬é€šè¿‡è¿™ä¸¤ä¸ªè·¯æ®µçš„è½¦æµé‡ä¸ºèŒƒå›´$[11,14]$ä¹‹é—´çš„æŸä¸ªå€¼ï¼Œå› ä¸ºåªæœ‰è¿™ä¸ªèŒƒå›´ä¸ä¸¤ä¸ªè¯»æ•°$[10,14]$å’Œ$[11,15]$å‡ä¸€è‡´ã€‚åœ¨ç¬¬1è‹±é‡Œï¼Œæ°æœ‰1å•ä½çš„è½¦è¾†é€šè¿‡ä¸ŠåŒé“è¿›å…¥ï¼Œæ‰€ä»¥åœ¨ç¬¬1è‹±é‡Œä¹‹å‰ï¼Œè½¦æµé‡ä¸€å®šåœ¨èŒƒå›´$[10,13]$ä¹‹å†…ã€‚åœ¨ç¬¬4è‹±é‡Œï¼Œ2å•ä½åˆ°3å•ä½ä¹‹é—´çš„è½¦è¾†é€šè¿‡ä¸‹åŒé“ç¦»å¼€ï¼Œæ‰€ä»¥è¿™æ®µè·¯ä¹‹åå¯èƒ½çš„è½¦æµé‡èŒƒå›´ä¸º$[8,12]$ã€‚</p><h3 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h3><p><strong>ç®€å•çš„æ¨¡æ‹Ÿ</strong>ï¼Œå¯ä»¥é€šè¿‡é¢„å¤„ç†<strong>æŠŠè¿ç»­çš„ä¸”æ²¡æœ‰åŒé“çš„è·¯æ®µçš„ Lï¼ŒR å€¼å–äº¤é›†ï¼ŒæŠŠæœ‰åŒé“çš„è¿ç»­è·¯æ®µåˆå¹¶èµ·æ¥è®¡ç®—å½±å“æµé‡å¯èƒ½çš„æœ€å¤§å€¼å’Œæœ€å°å€¼</strong></p><p>è¦è®¡ç®— 1 è‹±é‡Œä¹‹å‰çš„æµé‡ï¼Œä»å‰å¾€åæ‰«ä¸€éï¼Œé‡åˆ°æœ‰åŒé“çš„å°±è®¡ç®—å’Œæ›´æ–°é€ æˆå½±å“çš„æœ€å¤§å€¼å’Œæœ€å°å€¼ï¼Œé‡åˆ°æ²¡æœ‰åŒé“çš„å°±ä¸å½“å‰çš„ç­”æ¡ˆå–äº¤é›†ï¼ˆæ­¤æ—¶è¦æŠŠå½±å“åŠ ä¸Šå»ï¼‰ï¼Œå¯¹äº N è‹±é‡Œä¹‹åçš„æµé‡ï¼Œå¯ä»¥å½“ä½œæ˜¯åè¿‡æ¥æ±‚ 1 è‹±é‡Œä¹‹å‰çš„æµé‡ï¼Œæ‰€ä»¥åç€å†æ‰«ä¸€éï¼ŒæŠŠä¸Šä¸‹é“é€ æˆçš„å½±å“åè¿‡æ¥è®¡ç®—å³å¯</p><p><del>è€ƒè¯•çš„æ—¶å€™å› ä¸ºæ²¡æœ‰å…¨éƒ¨æ‰«ä¸€éåªå¾—äº† 70 åˆ†â€¦â€¦ï¼ˆæˆ‘çœŸæ˜¯è¶Šæ¥è¶Šå¼±äº†ï¼‰</del></p><h3 id="Codes"><a href="#Codes" class="headerlink" title="Codes"></a>Codes</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxn 101</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> t&gt;<span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">fcin</span><span class="params">(t &amp;x)</span></span>&#123;</span><br><span class="line"><span class="type">int</span> sign=<span class="number">1</span>; x=<span class="number">0</span>; <span class="type">char</span> op=<span class="built_in">getchar</span>();</span><br><span class="line"><span class="keyword">while</span>(op&lt;<span class="string">&#x27;0&#x27;</span>||op&gt;<span class="string">&#x27;9&#x27;</span>)&#123;<span class="keyword">if</span>(op==<span class="string">&#x27;-&#x27;</span>) sign=<span class="number">-1</span>;op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line"><span class="keyword">while</span>(op&gt;=<span class="string">&#x27;0&#x27;</span>&amp;&amp;op&lt;=<span class="string">&#x27;9&#x27;</span>)&#123;x=x*<span class="number">10</span>+(op<span class="number">-48</span>);op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line">x*=sign;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">node</span>&#123;</span><br><span class="line"><span class="type">int</span> L,R;<span class="type">int</span> k;</span><br><span class="line"><span class="comment">// k=0,1,2 ==&gt; on,none,off </span></span><br><span class="line">&#125;a[maxn],road[maxn];</span><br><span class="line"><span class="type">int</span> n,cnt; <span class="type">char</span> op[<span class="number">11</span>];</span><br><span class="line"><span class="function">node <span class="title">calc</span><span class="params">(node x,node y,<span class="type">int</span> cnt)</span></span>&#123;</span><br><span class="line">node z;</span><br><span class="line"><span class="keyword">if</span>(cnt==<span class="number">1</span>) z=&#123;<span class="built_in">max</span>(x.L,y.L),<span class="built_in">min</span>(x.R,y.R),cnt&#125;;</span><br><span class="line"><span class="keyword">else</span> z=&#123;x.L+y.L,x.R+y.R,cnt&#125;;</span><br><span class="line"><span class="keyword">return</span> z;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">node T=a[i];i++;</span><br><span class="line"><span class="keyword">while</span>(a[i].k==T.k)&#123;</span><br><span class="line">T=<span class="built_in">calc</span>(T,a[i],T.k);</span><br><span class="line">i++;</span><br><span class="line">&#125; road[++cnt]=T;i--;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span>&#123;</span><br><span class="line">node ansR=(node)&#123;<span class="number">-2139062143</span>,<span class="number">2139062143</span>&#125;,ansL=(node)&#123;<span class="number">-2139062143</span>,<span class="number">2139062143</span>&#125;;</span><br><span class="line"><span class="type">int</span> deltaL=<span class="number">0</span>,deltaR=<span class="number">0</span>;</span><br><span class="line"><span class="comment">// Get ansL </span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=cnt;i++)&#123;</span><br><span class="line"><span class="keyword">if</span>(road[i].k==<span class="number">0</span>)&#123;</span><br><span class="line">deltaL+=road[i].L;</span><br><span class="line">deltaR+=road[i].R;</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(road[i].k==<span class="number">1</span>)&#123;</span><br><span class="line">ansL.L=<span class="built_in">max</span>(ansL.L,road[i].L-deltaR);</span><br><span class="line">ansL.R=<span class="built_in">min</span>(ansL.R,road[i].R-deltaL);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">deltaL-=road[i].R;</span><br><span class="line">deltaR-=road[i].L;</span><br><span class="line">&#125;</span><br><span class="line">&#125; deltaL=<span class="number">0</span>;deltaR=<span class="number">0</span>;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d %d\n&quot;</span>,<span class="built_in">max</span>(ansL.L,<span class="number">0</span>),<span class="built_in">max</span>(ansL.R,<span class="number">0</span>));</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=cnt;i;i--)&#123;</span><br><span class="line"><span class="keyword">if</span>(road[i].k==<span class="number">0</span>)&#123;</span><br><span class="line">deltaL-=road[i].R;</span><br><span class="line">deltaR-=road[i].L;</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(road[i].k==<span class="number">1</span>)&#123;</span><br><span class="line">ansR.L=<span class="built_in">max</span>(ansR.L,road[i].L-deltaR);</span><br><span class="line">ansR.R=<span class="built_in">min</span>(ansR.R,road[i].R-deltaL);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">deltaL+=road[i].L;</span><br><span class="line">deltaR+=road[i].R;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d %d&quot;</span>,<span class="built_in">max</span>(ansR.L,<span class="number">0</span>),<span class="built_in">max</span>(ansR.R,<span class="number">0</span>)); </span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;traffic.in&quot;</span>,<span class="string">&quot;r&quot;</span>,stdin);</span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;traffic.out&quot;</span>,<span class="string">&quot;w&quot;</span>,stdout);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"><span class="built_in">fcin</span>(n);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,op);<span class="built_in">fcin</span>(a[i].L);<span class="built_in">fcin</span>(a[i].R);</span><br><span class="line"><span class="keyword">if</span>(op[<span class="number">1</span>]==<span class="string">&#x27;n&#x27;</span>) a[i].k=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(op[<span class="number">1</span>]==<span class="string">&#x27;o&#x27;</span>) a[i].k=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">else</span> a[i].k=<span class="number">2</span>;</span><br><span class="line">&#125; <span class="built_in">init</span>();</span><br><span class="line"><span class="built_in">solve</span>();</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="2-åˆ·å¢™ï¼ˆpaint-cppï¼‰"><a href="#2-åˆ·å¢™ï¼ˆpaint-cppï¼‰" class="headerlink" title="2. åˆ·å¢™ï¼ˆpaint.cppï¼‰"></a>2. åˆ·å¢™ï¼ˆpaint.cppï¼‰</h2><h3 id="Description-1"><a href="#Description-1" class="headerlink" title="Description"></a>Description</h3><p>Todobeè¦æŠŠå¥¹çš„å¯å®¤å¼„å¾—æ¼‚æ¼‚é…¿é…¿ï¼Œæ‰€ä»¥å¥¹ç®¡Yashem66è¦äº†ä¸€äº›å¢™çº¸ã€‚</p><p>Todobeæœ‰ä¸€é¢å¢™ï¼Œå¯åˆ†ä¸ºnå—ï¼ŒYashem66æä¾›çš„æ‰€æœ‰å¢™çº¸éƒ½æ˜¯ç»Ÿä¸€è§„æ ¼çš„ï¼Œå‡åªå¯è¦†ç›–è¿ç»­kå—å®Œæ•´çš„å¢™é¢ï¼Œä½†æ˜¯æœ‰mç§ä¸åŒçš„é¢œè‰²çš„å¢™çº¸ï¼Œæ¯ç§é¢œè‰²çš„å¢™çº¸éƒ½æœ‰æ— é™å¼ ã€‚Todobeè¦ç”¨è¿™äº›å¢™çº¸æŠŠå¢™è´´æ»¡ï¼Œå¢™çº¸ä¸å¯ä»¥è£å‰ªï¼Œå¢™çº¸ä¸å¢™çº¸ä¹‹é—´å¯ä»¥æœ‰é‡å éƒ¨åˆ†ã€‚å½“å¢™çº¸é‡å æ—¶ï¼Œåªèƒ½çœ‹åˆ°æœ€å¤–å±‚çš„å¢™çº¸é¢œè‰²ã€‚</p><p>Todobeæƒ³çŸ¥é“å¥¹ä»¥ä¸åŒçš„æ–¹å¼è´´å¢™çº¸ï¼Œå…±èƒ½è´´å‡ºå¤šå°‘ç§ä¸åŒé…è‰²æ–¹æ¡ˆçš„å¢™é¢ï¼Œä¸¤ç§æ–¹æ¡ˆä¸åŒå½“ä¸”ä»…å½“ä¸¤ç§æ–¹æ¡ˆä¸­è‡³å°‘æœ‰ä¸€å—å¢™é¢çš„é¢œè‰²ä¸åŒã€‚</p><h3 id="Input-1"><a href="#Input-1" class="headerlink" title="Input"></a>Input</h3><p>è¾“å…¥ä¸€è¡Œ3ä¸ªæ•´æ•°n,m,kã€‚</p><h3 id="Output-1"><a href="#Output-1" class="headerlink" title="Output"></a>Output</h3><p>è¾“å‡ºä¸€è¡Œä¸€ä¸ªæ•´æ•°ä»£è¡¨æ–¹æ¡ˆæ•°é‡ï¼Œç­”æ¡ˆå–æ¨¡1e9+7ã€‚</p><h3 id="Sample-Input-1"><a href="#Sample-Input-1" class="headerlink" title="Sample Input #1"></a>Sample Input #1</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">3 2 2</span><br></pre></td></tr></table></figure><h3 id="Sample-Output-1"><a href="#Sample-Output-1" class="headerlink" title="Sample Output #1"></a>Sample Output #1</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">6</span><br></pre></td></tr></table></figure><h3 id="Sample-Input-2"><a href="#Sample-Input-2" class="headerlink" title="Sample Input #2"></a>Sample Input #2</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">10 4 3</span><br></pre></td></tr></table></figure><h3 id="Sample-Output-2"><a href="#Sample-Output-2" class="headerlink" title="Sample Output #2"></a>Sample Output #2</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">371740</span><br></pre></td></tr></table></figure><h3 id="Hint-1"><a href="#Hint-1" class="headerlink" title="Hint"></a>Hint</h3><p>å¯¹äºæ ·ä¾‹è¾“å…¥1ï¼Œæˆ‘ä»¬å‡è®¾ä¸¤ç§é¢œè‰²åˆ†åˆ«æ˜¯A,B</p><p>é‚£ä¹ˆ6ç§æ–¹æ¡ˆåˆ†åˆ«æ˜¯ï¼šAAAï¼ŒAABï¼ŒABBï¼ŒBAAï¼ŒBBAï¼ŒBBB</p><p>ã€æ•°æ®èŒƒå›´ä¸çº¦å®šã€‘</p><p>å¯¹äº0%çš„æ•°æ®ï¼Œä¸æ ·ä¾‹æ•°æ®ç›¸åŒ;</p><p>å¯¹äº20%çš„æ•°æ®ï¼Œn&lt;=10,m&lt;=5;</p><p>å¯¹äºå¦20%çš„æ•°æ®n&lt;=500; </p><p>å¯¹äºå¦20%çš„æ•°æ®n&lt;=10^5;</p><p>å¯¹äº100%çš„æ•°æ®n&lt;=2^31-1,m&lt;=10^5ï¼Œk&lt;=100ã€‚</p><h3 id="åˆ†æ-1"><a href="#åˆ†æ-1" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h3><p>åº”è¯¥æ˜¯è€ƒè¯•ä¸­æœ€éš¾çš„é¢˜äº†ï¼Œè¿™é“é¢˜æ­£å‘æ€è€ƒä¸å¥½æƒ³ï¼Œå¯ä»¥é€†å‘è€ƒè™‘ä¸€ä¸‹ï¼Œæ¯ç§å¢™çº¸éƒ½èƒ½è¦†ç›–è¿ç»­ $k$ å—å¢™ï¼Œå®ƒä»¬ä¹‹é—´åˆå¯ä»¥ç›¸äº’è¦†ç›–ï¼Œå¯ä»¥çŸ¥é“ï¼Œ<strong>ä¸ç®¡å¢™çº¸ä¹‹é—´çš„è¦†ç›–å…³ç³»å¦‚ä½•ï¼Œä¸€å®šå­˜åœ¨ä¸€ç§é¢œè‰²çœ‹èµ·æ¥è¿ç»­è¦†ç›–äº† $k$ å—å¢™é¢ï¼Œä¸€æ—¦æ»¡è¶³è¿™ä¸ªæ¡ä»¶ï¼Œå‰©ä¸‹çš„ $n-k$ å—å¢™é¢å½¢æˆçš„ä»»ä½•çš„é¢œè‰²å’Œé¡ºåºéƒ½æ˜¯å¯ä»¥é€šè¿‡è¦†ç›–å¾—åˆ°çš„åˆæ³•æ–¹æ¡ˆ</strong>ï¼Œæ‰€ä»¥æƒ³åˆ°åˆæ³•çš„æ–¹æ¡ˆæ•°åº”è¯¥æ˜¯æ‰€æœ‰æ–¹æ¡ˆæ•°å‡å»ä¸åˆæ³•çš„æ–¹æ¡ˆæ•°</p><p>ç”±äº $n$ å—å¢™ï¼Œæ¯å—å¢™éƒ½æœ‰å¯èƒ½æ¶‚ä¸Š $1\to m$ çš„é¢œè‰²ï¼Œæ€»çš„æ–¹æ¡ˆæ•°åº”è¯¥ä¸º $m^n$ ç§ï¼ˆä¸è€ƒè™‘è¿ç»­ $k$ å—ä¸ºåŒä¸€ç§é¢œè‰²ï¼‰ï¼Œè®¾ $f[i]$ è¡¨ç¤ºæ¶‚åˆ°ç¬¬ $i$ å—å¢™éƒ½æ²¡æœ‰è¿ç»­ $k$ å—å¢™æ˜¯ä¸€ç§é¢œè‰²çš„æ–¹æ¡ˆæ•°ï¼Œ åˆ™ $ans=m^n-f[n]$ï¼Œè€ƒè™‘æ€ä¹ˆé€’æ¨å¾—åˆ° $f[n]$</p><p>å¯ä»¥å‘ç°æ­¤å¤„ $f[n]$ çš„å®šä¹‰å’Œ <strong>æ ¸ç”µç«™é—®é¢˜</strong> ä¸­çš„ $f[n]$ å®šä¹‰å¾ˆç›¸ä¼¼ï¼Œè€ƒè™‘ <strong>æ ¸ç”µç«™é—®é¢˜</strong> ä¸­çš„ $f[n]$ ï¼Œè¦ä½¿å¾—å‰ $n$ ä¸ªååº”å †ä¸çˆ†ç‚¸ï¼Œè‹¥åœ¨ $n$ ä½ç½®ä¸æ”¾ååº”å †ï¼Œé‚£ä¹ˆåªéœ€ $n-1$ ä½ç½®ä¸çˆ†ç‚¸å³å¯ï¼Œè‹¥åœ¨ $n$ ä½ç½®æ”¾ååº”å †è€Œä¸åœ¨ $n-1$ ä½ç½®æ”¾ï¼Œåˆ™éœ€è¦ $n-2$ ä½ç½®ä¸çˆ†ç‚¸ï¼Œä»¥æ­¤ç±»æ¨åˆ° $n-k$ ä½ç½®ï¼Œé‚£ä¹ˆå°±å¾—åˆ°ï¼š</p><p>$f[n]=\sum_{i=n-k}^{n-1}f[i]$ï¼Œç‰¹åˆ«åœ°ï¼Œå½“ $n&lt;k$ æ—¶ï¼Œ$f[n]=2^n$</p><p>é‚£ä¹ˆè¿™ä¸ªé¢˜åœ¨ $n\geq k$ æ—¶å’Œ <strong>æ ¸ç”µç«™é—®é¢˜</strong> éå¸¸ç›¸ä¼¼ï¼Œåœ¨ $n&lt;k$ æ—¶å¯ä»¥é€‰æ‹©çš„æœ‰ $m-1$ ç§é¢œè‰²ï¼ˆé™¤äº†è‡ªå·±ä¹‹å¤–ï¼‰ï¼Œé‚£ä¹ˆé€’æ¨æ–¹ç¨‹ä¸ºï¼š</p><p>$f[n]=\left(\sum_{i=n-k}^{n-1}f[i]\right)\times (m-1)$ï¼Œç‰¹åˆ«åœ°ï¼Œå½“ $n&lt;k$ æ—¶ï¼Œ$f[n]=m^n$</p><p><strong>å¾—åˆ°äº†è¿™ä¸ªæ–¹ç¨‹è¿˜æ²¡å®Œï¼Œç”±äº $n\leq 2^{31}-1$ï¼Œç›´æ¥è®¡ç®—æ˜¾ç„¶ä¼šè¶…æ—¶ï¼Œè€ƒè™‘ç”¨çŸ©é˜µåŠ é€Ÿè®¡ç®—ï¼š</strong></p><p>è®¾ï¼š$F(k)=\begin{bmatrix}f(k)&amp;f(k-1)&amp;f(k-2)&amp;â€¦&amp;f(1)\end{bmatrix}$</p><p>åˆ™ï¼š$F(k+1)=\begin{bmatrix}f(k+1)&amp;f(k)&amp;f(k-1)&amp;â€¦&amp;f(2)\end{bmatrix}$</p><p>è€ƒè™‘ $F(k) \times A=F(k+1)$ï¼Œæ¼”ç®—å¾—åˆ° $A$ çš„è¡¨è¾¾å¼ä¸ºï¼š</p><p>$A=\begin{bmatrix}m-1&amp;1&amp;0&amp;0&amp;0&amp;0&amp;â€¦&amp;0\\ m-1&amp;0&amp;1&amp;0&amp;0&amp;0&amp;â€¦&amp;0\\ m-1&amp;0&amp;0&amp;1&amp;0&amp;0&amp;â€¦&amp;0\\ m-1&amp;0&amp;0&amp;0&amp;1&amp;0&amp;â€¦&amp;0\\ m-1&amp;0&amp;0&amp;0&amp;0&amp;1&amp;â€¦&amp;0\\ â€¦&amp;â€¦&amp;â€¦&amp;â€¦&amp;â€¦&amp;â€¦&amp;â€¦&amp;â€¦\\ m-1&amp;0&amp;0&amp;0&amp;0&amp;0&amp;â€¦&amp;1\end{bmatrix}$ï¼Œç„¶åæ‰¾è§„å¾‹ï¼Œå‘ç°ä¸€å…±æœ‰ $k-1$ è¡Œï¼Œ$k$ åˆ—ï¼Œä¸”ç¬¬ä¸€åˆ—çš„æ•°éƒ½ä¸º $m-1$ï¼Œé™¤å»ç¬¬ä¸€åˆ—çš„çŸ©é˜µå¯¹è§’çº¿ä¸Šä¸º $1$ ï¼Œå…¶ä»–åœ°æ–¹ä¸º $0$</p><p>æ­¤æ—¶ $F(n)=F(k)\times A^{n-k}$ ï¼Œç”¨ <strong>çŸ©é˜µå¿«é€Ÿå¹‚</strong> å°±å¯ä»¥æé«˜è¿ç®—çš„é€Ÿåº¦äº†</p><h3 id="Codes-1"><a href="#Codes-1" class="headerlink" title="Codes"></a>Codes</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxn 110</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line">ll mod=(ll)<span class="number">1e9</span>+<span class="number">7</span>;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">mat</span>&#123; </span><br><span class="line">    ll val[maxn][maxn];</span><br><span class="line">    <span class="type">int</span> row,col; <span class="comment">// è¡Œ åˆ—  </span></span><br><span class="line">    <span class="built_in">mat</span>(<span class="type">int</span> n=<span class="number">-1</span>,<span class="type">int</span> m=<span class="number">-1</span>,<span class="type">int</span> __sourceval=<span class="number">0</span>)&#123;</span><br><span class="line">        <span class="keyword">if</span>(n==<span class="number">-1</span> &amp;&amp; m==<span class="number">-1</span>) <span class="keyword">return</span>;</span><br><span class="line">        row=n; col=m;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=row;i++)</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=col;j++) </span><br><span class="line">                val[i][j]=__sourceval;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">put</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=row;i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=col;j++) cout&lt;&lt;val[i][j]&lt;&lt;<span class="string">&#x27; &#x27;</span>;</span><br><span class="line">            cout&lt;&lt;<span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">get</span><span class="params">(<span class="type">int</span> n,<span class="type">int</span> m)</span></span>&#123;  </span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=m;j++) cin&gt;&gt;val[i][j];</span><br><span class="line">        row=n;col=m;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">get</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=row;i++)</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=col;j++) cin&gt;&gt;val[i][j];</span><br><span class="line">    &#125;</span><br><span class="line">    mat <span class="keyword">operator</span> *(<span class="type">const</span> mat &amp;obj)<span class="type">const</span>&#123; </span><br><span class="line">        <span class="comment">// çŸ©é˜µä¹˜æ³•   </span></span><br><span class="line">        <span class="function">mat <span class="title">ret</span><span class="params">(row,obj.col,<span class="number">0</span>)</span></span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=row;i++)</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=obj.col;j++)</span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> k=<span class="number">1</span>;k&lt;=col;k++)</span><br><span class="line">                    ret.val[i][j]+=val[i][k]*obj.val[k][j];</span><br><span class="line">        ret.row=row;</span><br><span class="line">        ret.col=obj.col;</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">mat <span class="title">mul</span><span class="params">(mat B,ll md)</span></span>&#123;</span><br><span class="line">        <span class="comment">// çŸ©é˜µ a*b % p </span></span><br><span class="line">        <span class="function">mat <span class="title">ret</span><span class="params">(row,B.col,<span class="number">0</span>)</span></span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=row;i++)</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=B.col;j++)</span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> k=<span class="number">1</span>;k&lt;=col;k++)</span><br><span class="line">                    (ret.val[i][j]+=</span><br><span class="line">                    val[i][k]*B.val[k][j])%=md;</span><br><span class="line">        ret.row=row;</span><br><span class="line">        ret.col=B.col;</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">ll m,n,k,ans;</span><br><span class="line"><span class="function">ll <span class="title">Quickpow</span><span class="params">(ll b,ll p,ll K)</span></span>&#123;</span><br><span class="line">ll sol=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span>(p&gt;<span class="number">0</span>)&#123;</span><br><span class="line"><span class="keyword">if</span>(p%<span class="number">2</span>==<span class="number">1</span>) sol=(sol*b)%K;</span><br><span class="line">b=(b*b)%K;</span><br><span class="line">p/=<span class="number">2</span>;</span><br><span class="line">&#125; <span class="keyword">return</span> sol;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">mat <span class="title">Fastpow</span><span class="params">(mat A,ll b,ll p)</span></span>&#123;</span><br><span class="line">    <span class="comment">// çŸ©é˜µå¿«é€Ÿå¹‚ </span></span><br><span class="line">    <span class="function">mat <span class="title">res</span><span class="params">(A.row,A.col)</span></span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=res.row;i++) res.val[i][i]=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(b&gt;<span class="number">0</span>)&#123;</span><br><span class="line">        <span class="keyword">if</span>(b&amp;<span class="number">1</span>) res=res.<span class="built_in">mul</span>(A,p);</span><br><span class="line">        A=A.<span class="built_in">mul</span>(A,p);</span><br><span class="line">        b&gt;&gt;=<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;paint.in&quot;</span>,<span class="string">&quot;r&quot;</span>,stdin);</span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;paint.out&quot;</span>,<span class="string">&quot;w&quot;</span>,stdout);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line">cin&gt;&gt;n&gt;&gt;m&gt;&gt;k;k--;</span><br><span class="line">ans=<span class="built_in">Quickpow</span>(m,n,mod);</span><br><span class="line"><span class="function">mat <span class="title">A</span><span class="params">(<span class="number">1</span>,k)</span>,<span class="title">T</span><span class="params">(k,k+<span class="number">1</span>,<span class="number">0</span>)</span></span>;</span><br><span class="line">A.val[<span class="number">1</span>][k]=m;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=k<span class="number">-1</span>;i;i--) A.val[<span class="number">1</span>][i]=(A.val[<span class="number">1</span>][i+<span class="number">1</span>]*m%mod);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=k;i++) T.val[i][<span class="number">1</span>]=m<span class="number">-1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=k;i++) T.val[i][i+<span class="number">1</span>]=<span class="number">1</span>;</span><br><span class="line">T=<span class="built_in">Fastpow</span>(T,n-k,mod);A=A.<span class="built_in">mul</span>(T,mod);</span><br><span class="line">ans=(ans-A.val[<span class="number">1</span>][<span class="number">1</span>]+mod)%mod;cout&lt;&lt;ans;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="3-èˆªçº¿ï¼ˆairline-cppï¼‰"><a href="#3-èˆªçº¿ï¼ˆairline-cppï¼‰" class="headerlink" title="3. èˆªçº¿ï¼ˆairline.cppï¼‰"></a>3. èˆªçº¿ï¼ˆairline.cppï¼‰</h2><h3 id="Description-2"><a href="#Description-2" class="headerlink" title="Description"></a>Description</h3><p>Farmer Johnæ­£åœ¨ä¸€ä¸ªæ–°çš„é”€å”®åŒºåŸŸå¯¹ä»–çš„ç‰›å¥¶é”€å”®æ–¹æ¡ˆè¿›è¡Œè°ƒæŸ¥ã€‚ä»–æƒ³æŠŠç‰›å¥¶é€åˆ°Tä¸ªåŸé•‡ (1 &lt;= T &lt;= 25,000)ï¼Œç¼–å·ä¸º1åˆ°Tã€‚è¿™äº›åŸé•‡ä¹‹é—´é€šè¿‡Ræ¡é“è·¯ (1 &lt;= R &lt;= 50,000ï¼Œç¼–å·ä¸º1åˆ°R) å’ŒPæ¡èˆªçº¿ (1 &lt;= P &lt;= 50,000ï¼Œç¼–å·ä¸º1åˆ°P) è¿æ¥ã€‚æ¯æ¡é“è·¯iæˆ–è€…èˆªçº¿iè¿æ¥åŸé•‡Ai (1 &lt;= Ai &lt;= T)åˆ°Bi (1 &lt;= Bi &lt;= T)ï¼ŒèŠ±è´¹ä¸ºCiã€‚å¯¹äºé“è·¯ï¼Œ0 &lt;= Ci &lt;= 10,000ï¼›ç„¶è€Œèˆªçº¿çš„èŠ±è´¹å¾ˆç¥å¥‡ï¼ŒèŠ±è´¹Ciå¯èƒ½æ˜¯è´Ÿæ•°(-10,000 &lt;= Ci &lt;= 10,000)ã€‚é“è·¯æ˜¯åŒå‘çš„ï¼Œå¯ä»¥ä»Aiåˆ°Biï¼Œä¹Ÿå¯ä»¥ä»Biåˆ°Aiï¼ŒèŠ±è´¹éƒ½æ˜¯Ciã€‚ç„¶è€Œèˆªçº¿ä¸ä¹‹ä¸åŒï¼Œåªå¯ä»¥ä»Aiåˆ°Biã€‚äº‹å®ä¸Šï¼Œç”±äºæœ€è¿‘ææ€–ä¸»ä¹‰å¤ªåš£å¼ ï¼Œä¸ºäº†ç¤¾ä¼šå’Œè°ï¼Œå‡ºå°äº†ä¸€äº›æ”¿ç­–ä¿è¯ï¼šå¦‚æœæœ‰ä¸€æ¡èˆªçº¿å¯ä»¥ä»Aiåˆ°Biï¼Œé‚£ä¹ˆä¿è¯ä¸å¯èƒ½é€šè¿‡ä¸€äº›é“è·¯å’Œèˆªçº¿ä»Biå›åˆ°Aiã€‚ç”±äºFJçš„å¥¶ç‰›ä¸–ç•Œå…¬è®¤ååˆ†ç»™åŠ›ï¼Œä»–éœ€è¦è¿é€å¥¶ç‰›åˆ°æ¯ä¸€ä¸ªåŸé•‡ã€‚ä»–æƒ³æ‰¾åˆ°ä»å‘é€ä¸­å¿ƒåŸé•‡S(1 &lt;= S &lt;= T) æŠŠå¥¶ç‰›é€åˆ°æ¯ä¸ªåŸé•‡çš„æœ€ä¾¿å®œçš„æ–¹æ¡ˆï¼Œæˆ–è€…çŸ¥é“è¿™æ˜¯ä¸å¯èƒ½çš„ã€‚</p><h3 id="Input-2"><a href="#Input-2" class="headerlink" title="Input"></a>Input</h3><p>ç¬¬1è¡Œï¼šå››ä¸ªç©ºæ ¼éš”å¼€çš„æ•´æ•°: T, R, P, and S </p><p>ç¬¬2åˆ°R+1è¡Œï¼šä¸‰ä¸ªç©ºæ ¼éš”å¼€çš„æ•´æ•°ï¼ˆè¡¨ç¤ºä¸€æ¡é“è·¯ï¼‰ï¼šAi, Bi å’Œ Ci</p><p>ç¬¬R+2åˆ°R+P+1è¡Œï¼šä¸‰ä¸ªç©ºæ ¼éš”å¼€çš„æ•´æ•°ï¼ˆè¡¨ç¤ºä¸€æ¡èˆªçº¿ï¼‰ï¼šAi, Bi å’Œ Ci</p><h3 id="Output-2"><a href="#Output-2" class="headerlink" title="Output"></a>Output</h3><p>ç¬¬1åˆ°Tè¡Œï¼šä»Såˆ°è¾¾åŸé•‡ i çš„æœ€å°èŠ±è´¹ï¼Œå¦‚æœä¸å­˜åœ¨è¾“å‡ºâ€NO PATHâ€ã€‚</p><h3 id="Sample-Input-1"><a href="#Sample-Input-1" class="headerlink" title="Sample Input"></a>Sample Input</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">6 3 3 4</span><br><span class="line">1 2 5</span><br><span class="line">3 4 5</span><br><span class="line">5 6 10</span><br><span class="line">3 5 -100</span><br><span class="line">4 6 -100</span><br><span class="line">1 3 -10</span><br></pre></td></tr></table></figure><h3 id="Sample-Output-1"><a href="#Sample-Output-1" class="headerlink" title="Sample Output"></a>Sample Output</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">NO PATH</span><br><span class="line">NO PATH</span><br><span class="line">5</span><br><span class="line">0</span><br><span class="line">-95</span><br><span class="line">-100</span><br></pre></td></tr></table></figure><h3 id="Hint-2"><a href="#Hint-2" class="headerlink" title="Hint"></a>Hint</h3><p>ã€æ ·ä¾‹è¾“å…¥è§£é‡Šã€‘</p><p>ä¸€å…±å…­ä¸ªåŸé•‡ã€‚åœ¨1-2ï¼Œ3-4ï¼Œ5-6ä¹‹é—´æœ‰é“è·¯ï¼ŒèŠ±è´¹åˆ†åˆ«æ˜¯5ï¼Œ5ï¼Œ10ã€‚åŒæ—¶æœ‰ä¸‰æ¡èˆªçº¿ï¼š3-&gt;5ï¼Œ</p><p>4-&gt;6å’Œ1-&gt;3ï¼ŒèŠ±è´¹åˆ†åˆ«æ˜¯-100ï¼Œ-100ï¼Œ-10ã€‚FJçš„ä¸­å¿ƒåŸé•‡åœ¨åŸé•‡4ã€‚</p><p>ã€æ ·ä¾‹è¾“å‡ºè§£é‡Šã€‘</p><p>FJçš„å¥¶ç‰›ä»4å·åŸé•‡å¼€å§‹ï¼Œå¯ä»¥é€šè¿‡é“è·¯åˆ°è¾¾3å·åŸé•‡ã€‚ç„¶åä»–ä»¬ä¼šé€šè¿‡èˆªçº¿è¾¾åˆ°5å’Œ6å·åŸé•‡ã€‚</p><p>ä½†æ˜¯ä¸å¯èƒ½åˆ°è¾¾1å’Œ2å·åŸé•‡ã€‚</p><h3 id="åˆ†æ-2"><a href="#åˆ†æ-2" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h3><p>è¿™ä¸ªé¢˜çœ‹ä¼¼æ˜¯ SPFA çš„è£¸é¢˜ï¼ˆå®é™…ä¸Šä¹Ÿå·®ä¸å¤šï¼‰ï¼Œä½†æ˜¯æ ¹æ® USACO çš„å°¿æ€§ï¼Œä¸€å®šä¼šå‡ºå‡ ä¸ªç¨ å¯†å›¾çš„æµ‹è¯•ç‚¹æ¥å¡ SPFAï¼Œå› æ­¤éœ€è¦è®¾è®¡ä¸€äº›ä¼˜åŒ–ç®—æ³•</p><blockquote><p><strong>åšæ³•ä¸€ï¼šSPFA + SLF ä¼˜åŒ–</strong></p></blockquote><h4 id="SPFA-çš„-SLF-ä¼˜åŒ–ï¼ˆSmall-Label-Firstï¼‰"><a href="#SPFA-çš„-SLF-ä¼˜åŒ–ï¼ˆSmall-Label-Firstï¼‰" class="headerlink" title="SPFA çš„ SLF ä¼˜åŒ–ï¼ˆSmall Label Firstï¼‰"></a>SPFA çš„ SLF ä¼˜åŒ–ï¼ˆSmall Label Firstï¼‰</h4><p><strong>ä¼˜åŒ–æ€è·¯</strong>ï¼šå°†åŸé˜Ÿåˆ—æ”¹æˆåŒç«¯é˜Ÿåˆ—ï¼Œå¯¹è¦åŠ å…¥é˜Ÿåˆ—çš„ç‚¹ $p$ï¼Œå¦‚æœ $dist[p]$ å°äºé˜Ÿå¤´å…ƒç´  $u$ çš„ $dist[u]$ï¼Œå°†å…¶æ’å…¥åˆ°é˜Ÿå¤´ï¼Œå¦åˆ™æ’å…¥åˆ°é˜Ÿå°¾ã€‚</p><p><strong>å®ç°ï¼š</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">SPFA</span><span class="params">(<span class="type">int</span> s)</span></span>&#123;</span><br><span class="line">    deque&lt;<span class="type">int</span>&gt; q;</span><br><span class="line">  ...</span><br><span class="line">    <span class="keyword">if</span>(!vis[to[i]])&#123;</span><br><span class="line">        <span class="keyword">if</span>(!q.empty &amp;&amp; dist[to[i]]&lt;dist[q.<span class="built_in">front</span>()]) q.<span class="built_in">push_front</span>(to[i]);</span><br><span class="line">        <span class="keyword">else</span> q.<span class="built_in">push_back</span>(to[i]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="SPFA-çš„-LLL-ä¼˜åŒ–ï¼ˆLarge-Label-Lastï¼‰"><a href="#SPFA-çš„-LLL-ä¼˜åŒ–ï¼ˆLarge-Label-Lastï¼‰" class="headerlink" title="SPFA çš„ LLL ä¼˜åŒ–ï¼ˆLarge Label Lastï¼‰"></a>SPFA çš„ LLL ä¼˜åŒ–ï¼ˆLarge Label Lastï¼‰</h4><p><strong>ä¼˜åŒ–æ€è·¯</strong>ï¼šå¯¹æ¯ä¸ªè¦å‡ºé˜Ÿçš„é˜Ÿå¤´å…ƒç´  $u$ï¼Œæ¯”è¾ƒ $dist[u]$ å’Œé˜Ÿåˆ—ä¸­ç‚¹çš„ $dist$ çš„å¹³å‡å€¼ï¼Œå¦‚æœ $dist[u]$ æ›´å¤§ï¼Œå°†å…¶å¼¹å‡ºæ”¾åˆ°é˜Ÿå°¾ï¼Œç„¶åå–é˜Ÿé¦–å…ƒç´ è¿›è¡Œç›¸åŒæ“ä½œï¼Œç›´åˆ°é˜Ÿå¤´å…ƒç´ çš„ $dist$ å°äºç­‰äºå¹³å‡å€¼ã€‚</p><p><strong>å®ç°ï¼š</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">SPFA</span><span class="params">(<span class="type">int</span> s)</span></span>&#123;</span><br><span class="line">    deque&lt;<span class="type">int</span>&gt; q;</span><br><span class="line">    <span class="keyword">while</span>(dist[q.<span class="built_in">front</span>()]*cnt&gt;sum)&#123;</span><br><span class="line">        x=q.<span class="built_in">front</span>();</span><br><span class="line">        q.<span class="built_in">pop_front</span>();q.<span class="built_in">push_back</span>(x);</span><br><span class="line">    &#125;...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è®²é“ç†è¿™ 2 ä¸ªä¼˜åŒ–æ–¹å¼äº’ä¸å¹²æ‰°ï¼Œç»“åˆä½¿ç”¨åº”è¯¥æ•ˆæœä¼šæ›´å¥½çš„ï¼Œä½†æ˜¯å®é™…æµ‹è¯•å´æ˜¯ï¼š</p><div class="table-container"><table><thead><tr><th style="text-align:center">ä¼˜åŒ–æ–¹å¼</th><th style="text-align:center">é€šè¿‡æµ‹è¯•ç‚¹æ•°ç›®ï¼ˆ/16ï¼‰</th><th style="text-align:center">å¾—åˆ†ï¼ˆ/100ï¼‰</th></tr></thead><tbody><tr><td style="text-align:center">SPFA</td><td style="text-align:center">13</td><td style="text-align:center">87</td></tr><tr><td style="text-align:center">SPFA + SLF + LLL</td><td style="text-align:center">13</td><td style="text-align:center">87</td></tr><tr><td style="text-align:center">SPFA + SLF</td><td style="text-align:center">16</td><td style="text-align:center">100</td></tr></tbody></table></div><blockquote><p><strong>åšæ³•äºŒï¼šSPFA + å¼ºè¿é€šåˆ†é‡ç¼©ç‚¹ ä¼˜åŒ–</strong></p></blockquote><p>æ ¹æ®é¢˜æ„å¯ä»¥å‘ç°å›¾ä¸­ä¸å¯èƒ½å­˜åœ¨è´Ÿç¯çš„æƒ…å†µï¼ˆæ— å‘è¾¹æ„æˆçš„ç¯ä¸€å®šæ˜¯æ­£ç¯ï¼‰ï¼Œ<strong>è€Œä¸”é€šè¿‡ $A\to B$ åå°±ä¸å¯èƒ½å†å›åˆ° $A$ äº†ï¼Œç»“åˆé¢˜ç›®ä¸­å­˜åœ¨æœ‰å‘è¾¹ï¼Œå¯ä»¥å‘ç°åŸå›¾éå¸¸åƒä¸€ä¸ªæœ‰å‘æ— ç¯ DAG å›¾</strong>ï¼Œåªè¦æŠŠæ‰€æœ‰æ„æˆç¯çš„æ— å‘è¾¹ç¼©ç‚¹ï¼Œå°±å¯ä»¥åœ¨æ–°çš„å›¾ä¸Šè·‘ SPFA äº†</p><p>å¯¹äº $dist[u]$ï¼Œè‹¥ $u$ å’Œ $s$ å¤„åœ¨åŒä¸€ä¸ªè¿é€šåˆ†é‡å†…ï¼Œåˆ™ç›´æ¥åœ¨é‡Œé¢ SPFAï¼Œå¦åˆ™å°±å…ˆé¢„å¤„ç†å‡º $dist[p]$ çš„å€¼ï¼Œå…¶ä¸­ $p$ æ˜¯è¿é€šåˆ†é‡çš„ä»£è¡¨ï¼Œç„¶åè®¾ $S$ ä»£è¡¨ $s$ æ‰€å¤„çš„è¿é€šåˆ†é‡ï¼ˆç¼©ç‚¹åçš„æ–°ç‚¹ï¼‰ï¼Œåˆ™ $dist[u]=dist[p]+distâ€™[S]$</p><h3 id="Codes-2"><a href="#Codes-2" class="headerlink" title="Codes"></a>Codes</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;deque&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxn 25001</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxm 150001</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> t&gt;<span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">fcin</span><span class="params">(t &amp;x)</span></span>&#123;</span><br><span class="line"><span class="type">int</span> sign=<span class="number">1</span>; x=<span class="number">0</span>; <span class="type">char</span> op=<span class="built_in">getchar</span>();</span><br><span class="line"><span class="keyword">while</span>(op&lt;<span class="string">&#x27;0&#x27;</span>||op&gt;<span class="string">&#x27;9&#x27;</span>)&#123;<span class="keyword">if</span>(op==<span class="string">&#x27;-&#x27;</span>) sign=<span class="number">-1</span>;op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line"><span class="keyword">while</span>(op&gt;=<span class="string">&#x27;0&#x27;</span>&amp;&amp;op&lt;=<span class="string">&#x27;9&#x27;</span>)&#123;x=x*<span class="number">10</span>+(op<span class="number">-48</span>);op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line">x*=sign;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> to[maxm],w[maxm],nxt[maxm];</span><br><span class="line"><span class="type">int</span> head[maxn],tot,dist[maxn];</span><br><span class="line"><span class="type">int</span> T,R,P,S;<span class="type">bool</span> vis[maxn];</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">PAIR</span>&#123;</span><br><span class="line"><span class="type">int</span> dis,node;</span><br><span class="line"><span class="type">bool</span> <span class="keyword">operator</span> &lt;(<span class="type">const</span> PAIR &amp;obj)<span class="type">const</span>&#123;</span><br><span class="line"><span class="keyword">return</span> dis&lt;obj.dis;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">Eadd</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> v,<span class="type">int</span> W)</span></span>&#123;</span><br><span class="line">to[++tot]=v;nxt[tot]=head[u];</span><br><span class="line">w[tot]=W;head[u]=tot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">SPFA</span><span class="params">(<span class="type">int</span> s)</span></span>&#123;</span><br><span class="line"><span class="comment">// advanced by SLF </span></span><br><span class="line"><span class="built_in">memset</span>(dist,<span class="number">127</span>,<span class="built_in">sizeof</span>(dist));</span><br><span class="line">deque&lt;<span class="type">int</span>&gt; q; <span class="type">int</span> x=<span class="number">0</span>,cnt=<span class="number">1</span>,sum=<span class="number">0</span>;</span><br><span class="line">q.<span class="built_in">push_back</span>(s);dist[s]=<span class="number">0</span>;vis[x]=<span class="literal">true</span>;</span><br><span class="line"><span class="keyword">while</span>(!q.<span class="built_in">empty</span>())&#123;</span><br><span class="line">x=q.<span class="built_in">front</span>();</span><br><span class="line">q.<span class="built_in">pop_front</span>();</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=head[x];i;i=nxt[i])</span><br><span class="line"><span class="keyword">if</span>(dist[to[i]]&gt;dist[x]+w[i])&#123;</span><br><span class="line">dist[to[i]]=dist[x]+w[i];</span><br><span class="line"><span class="keyword">if</span>(!vis[to[i]])&#123;</span><br><span class="line">vis[to[i]]=<span class="literal">true</span>;cnt++;sum+=dist[to[i]];</span><br><span class="line"><span class="keyword">if</span>(!q.<span class="built_in">empty</span>() &amp;&amp; dist[to[i]]&gt;=dist[q.<span class="built_in">front</span>()]) q.<span class="built_in">push_back</span>(to[i]);</span><br><span class="line"><span class="keyword">else</span> q.<span class="built_in">push_front</span>(to[i]);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">vis[x]=<span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;airline.in&quot;</span>,<span class="string">&quot;r&quot;</span>,stdin);</span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;airline.out&quot;</span>,<span class="string">&quot;w&quot;</span>,stdout);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"><span class="type">int</span> x,y,z;</span><br><span class="line"><span class="built_in">fcin</span>(T);<span class="built_in">fcin</span>(R);<span class="built_in">fcin</span>(P);<span class="built_in">fcin</span>(S);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=R;i++)&#123;</span><br><span class="line"><span class="built_in">fcin</span>(x);<span class="built_in">fcin</span>(y);<span class="built_in">fcin</span>(z);</span><br><span class="line"><span class="built_in">Eadd</span>(x,y,z);<span class="built_in">Eadd</span>(y,x,z);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=P;i++)&#123;</span><br><span class="line"><span class="built_in">fcin</span>(x);<span class="built_in">fcin</span>(y);<span class="built_in">fcin</span>(z);</span><br><span class="line"><span class="built_in">Eadd</span>(x,y,z);</span><br><span class="line">&#125; <span class="built_in">SPFA</span>(S);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=T;i++)&#123;</span><br><span class="line"><span class="keyword">if</span>(dist[i]==<span class="number">2139062143</span>) <span class="built_in">printf</span>(<span class="string">&quot;NO PATH&quot;</span>);</span><br><span class="line"><span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,dist[i]);</span><br><span class="line"><span class="built_in">putchar</span>(<span class="string">&#x27;\n&#x27;</span>);</span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°è®º </tag>
            
            <tag> SPFA </tag>
            
            <tag> æ¨¡æ‹Ÿ </tag>
            
            <tag> é€’æ¨ </tag>
            
            <tag> çŸ©é˜µ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŠ¨æ€è§„åˆ’ | 01åˆ†æ•°è§„åˆ’ | å¹¶æŸ¥é›†  \ | æ‹“æ‰‘æ’åº | äºŒåˆ†| å›¾è®º | 20190716è€ƒè¯•  ï¼šè§£é¢˜æŠ¥å‘Š</title>
      <link href="/2019/07/16/2019-07-16-0716%E8%80%83%E8%AF%95/"/>
      <url>/2019/07/16/2019-07-16-0716%E8%80%83%E8%AF%95/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><h2 id="é¢˜ç›®é™åˆ¶ä¸€è§ˆ"><a href="#é¢˜ç›®é™åˆ¶ä¸€è§ˆ" class="headerlink" title="é¢˜ç›®é™åˆ¶ä¸€è§ˆ"></a>é¢˜ç›®é™åˆ¶ä¸€è§ˆ</h2><div class="table-container"><table><thead><tr><th style="text-align:center">é¢˜ç›®</th><th style="text-align:center">æ—¶é—´é™åˆ¶</th><th style="text-align:center">ç©ºé—´é™åˆ¶</th></tr></thead><tbody><tr><td style="text-align:center">1. magician</td><td style="text-align:center">$1000$ MS</td><td style="text-align:center">$128$ MB</td></tr><tr><td style="text-align:center">2. seq</td><td style="text-align:center">$1000$ MS</td><td style="text-align:center">$128$ MB</td></tr><tr><td style="text-align:center">3. show</td><td style="text-align:center">$1000$ MS</td><td style="text-align:center">$128$ MB</td></tr></tbody></table></div><h2 id="1-é»‘é­”æ³•å¸ˆä¹‹é—¨ï¼ˆmagician-cppï¼‰"><a href="#1-é»‘é­”æ³•å¸ˆä¹‹é—¨ï¼ˆmagician-cppï¼‰" class="headerlink" title="1. é»‘é­”æ³•å¸ˆä¹‹é—¨ï¼ˆmagician.cppï¼‰"></a>1. é»‘é­”æ³•å¸ˆä¹‹é—¨ï¼ˆmagician.cppï¼‰</h2><h3 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h3><p>ç»è¿‡äº† 16 ä¸ªå·¥ä½œæ—¥çš„ç´§å¼ å¿™ç¢Œï¼Œæœªæ¥çš„äººç±»ç»ˆäºæ”¶é›†åˆ°äº†è¶³å¤Ÿçš„èƒ½æºã€‚ç„¶è€Œåœ¨ä¸ Violet æ˜Ÿçƒçš„æˆ˜äº‰ä¸­ï¼Œç”±äº Z å‰¯å®˜çš„æ„šè ¢ï¼Œåœ°çƒçš„é¢†è¢– applepi è¢«é‚ªæ¶çš„é»‘é­”æ³•å¸ˆ Vani å›šç¦åœ¨äº† Violet æ˜Ÿçƒã€‚ä¸ºäº†é‡å¯ NescafÃ©è¿™ä¸€å®ä¼Ÿçš„ç§‘æŠ€å·¥ç¨‹ï¼Œäººç±»æ´¾å‡ºäº†ä¸€æ”¯ç”± HQX 1äººç»„æˆçš„ç²¾è‹±é˜Ÿä¼ï¼Œç©¿è¶Šæ—¶ç©ºéš§é“ï¼Œå»å¾€ Violet æ˜Ÿçƒæ‹¯æ•‘é¢†è¢– applepiã€‚</p><p> applepi è¢«å›šç¦çš„åœ°ç‚¹åªæœ‰ä¸€æ‰‡é—¨ï¼Œå½“åœ°äººç§°å®ƒä¸ºâ€œé»‘é­”æ³•å¸ˆä¹‹é—¨â€ã€‚è¿™æ‰‡é—¨ä¸Šç”»ç€ä¸€å¼ æ— å‘æ— æƒå›¾ï¼Œè€Œæ‰“å¼€è¿™æ‰‡é—¨çš„å¯†ç å°±æ˜¯å›¾ä¸­æ¯ä¸ªç‚¹çš„åº¦æ•°å¤§äºé›¶ä¸”éƒ½æ˜¯å¶æ•°çš„å­å›¾çš„ä¸ªæ•° å¯¹ 1000000009 å–æ¨¡çš„å€¼ã€‚æ­¤å¤„å­å›¾ (V, E) å®šä¹‰ä¸ºï¼šç‚¹é›† Vå’Œè¾¹é›† E éƒ½æ˜¯åŸå›¾çš„ä»»æ„å­é›†ï¼Œ å…¶ä¸­ E ä¸­çš„è¾¹çš„ç«¯ç‚¹éƒ½åœ¨ Vä¸­ã€‚ ä½†æ˜¯ Vani è®¤ä¸ºè¿™æ ·çš„å¯†ç è¿‡äºç®€å•ï¼Œå› æ­¤é—¨ä¸Šçš„å›¾æ˜¯åŠ¨æ€çš„ã€‚èµ·åˆå›¾ä¸­åªæœ‰ N ä¸ªé¡¶ç‚¹ è€Œæ²¡æœ‰è¾¹ã€‚Vani å»ºé€ çš„é—¨æ§ç³»ç»Ÿå…±æ“ä½œ M æ¬¡ï¼Œæ¯æ¬¡å¾€å›¾ä¸­æ·»åŠ ä¸€æ¡è¾¹ã€‚ä½ å¿…é¡»åœ¨æ¯æ¬¡æ“ä½œ åéƒ½å¡«å†™æ­£ç¡®çš„å¯†ç ï¼Œæ‰èƒ½å¤Ÿæ‰“å¼€é»‘é­”æ³•å¸ˆçš„ç‰¢ç‹±ï¼Œå»æ‹¯æ•‘ä¼Ÿå¤§çš„é¢†è¢– applepiã€‚</p><h3 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h3><p>ç¬¬ä¸€è¡ŒåŒ…å«ä¸¤ä¸ªæ•´æ•° N å’Œ Mã€‚ æ¥ä¸‹æ¥ M è¡Œï¼Œæ¯è¡Œä¸¤ä¸ªæ•´æ•° Aå’Œ Bï¼Œä»£è¡¨é—¨æ§ç³»ç»Ÿæ·»åŠ äº†ä¸€æ¡æ— å‘è¾¹ (A, B)ã€‚ </p><h3 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h3><p>è¾“å‡ºä¸€å…± M è¡Œï¼Œè¡¨ç¤ºæ¯æ¬¡æ“ä½œåçš„å¯†ç ã€‚</p><h3 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">4 8</span><br><span class="line">3 1</span><br><span class="line">3 2</span><br><span class="line">2 1</span><br><span class="line">2 1</span><br><span class="line">1 3</span><br><span class="line">1 4</span><br><span class="line">2 4</span><br><span class="line">2 3</span><br></pre></td></tr></table></figure><h3 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">0 </span><br><span class="line">0</span><br><span class="line">1 </span><br><span class="line">3</span><br><span class="line">7</span><br><span class="line">7</span><br><span class="line">15</span><br><span class="line">31 </span><br></pre></td></tr></table></figure><h3 id="Hint"><a href="#Hint" class="headerlink" title="Hint"></a>Hint</h3><p>ç¬¬ä¸‰æ¬¡æ·»åŠ ä¹‹åï¼Œå­˜åœ¨ä¸€ä¸ªæ»¡è¶³æ¡ä»¶çš„å­å›¾ {1, 2, 3}ï¼ˆå…¶ä¸­ 1, 2, 3 æ˜¯æ•°æ®ä¸­è¾¹çš„æ ‡å·ï¼‰ã€‚</p><p>ç¬¬å››æ¬¡æ·»åŠ ä¹‹åï¼Œå­˜åœ¨ä¸‰ä¸ªå­å›¾ {1, 2, 3}ï¼Œ{1, 2, 4}ï¼Œ{3, 4}ã€‚</p><p>ã€æ•°æ®èŒƒå›´ã€‘</p><p>å¯¹äº 30% çš„æ•°æ®ï¼ŒN, Mâ‰¤10ã€‚ å¯¹äº 100% çš„æ•°æ®ï¼ŒNâ‰¤200000ï¼ŒMâ‰¤300000ã€‚</p><h3 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h3><p>è€ƒè¯•æ—¶ä¸€çœ‹åˆ°è¿™ä¸ªé¢˜ï¼Œè„‘å­é‡Œå„ç§ç»Ÿè®¡ç‚¹çš„åº¦æ•°è¿˜æœ‰æ’åˆ—ç»„åˆæ…åœ¨ä¸€èµ·ï¼Œæ„Ÿè§‰è¿‡äºå¤æ‚å°±æœæ–­æ”¾å¼ƒå»åšäº†ç¬¬ä¸‰é¢˜ï¼Œ<del>è€ƒå®Œè¯•æ‰çŸ¥é“è¿™ä¸ªé¢˜æ˜¯æœ€ç®€å•çš„ï¼Ÿ</del></p><p>å¯ä»¥å‘ç°ä¸€ä¸ªç®€å•ç¯ä¸Šçš„æ‰€æœ‰ç‚¹éƒ½æ»¡è¶³åº¦æ•°å¤§äº 0 ä¸”åº¦æ•°ä¸ºå¶æ•° 2 çš„æ¡ä»¶ï¼Œæ‰€ä»¥ç®€å•ç¯å°±å¯ä»¥çœ‹ä½œä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„å­å›¾ï¼ˆå¦‚æœæ˜¯ 2 ä¸ªç‚¹å½¢æˆç®€å•ç¯åˆ™éœ€ä»–ä»¬ä¹‹é—´è¿æœ‰ 2 æ¡æ— å‘è¾¹ï¼‰</p><p>è®¾æŸä¸€æ—¶åˆ»å›¾ä¸­å­˜åœ¨ $n$ ä¸ªç¯ï¼Œåˆ™æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„å­å›¾çš„ä¸ªæ•°å°±æ˜¯ä»è¿™ $n$ ä¸ªç¯ä¸­é€‰ï¼Œæ¯ä¸ªç¯éƒ½æœ‰é€‰å’Œä¸é€‰ä¸¤ç§çŠ¶æ€ï¼Œåˆå› ä¸ºä¸èƒ½ä¸€ä¸ªç¯éƒ½ä¸é€‰æ‰€ä»¥ $ans=2^n-1$</p><p>ç”±äºé¢˜ç›®ä¸æ–­åŠ è¾¹çš„æ“ä½œï¼Œ<strong>ç®€å•ç¯çš„ä¸ªæ•°æ˜æ˜¾æ˜¯å¢åŠ æˆ–è€…ä¸å˜çš„</strong>ï¼Œç”¨å¹¶æŸ¥é›†ç»´æŠ¤ç‚¹çš„é›†åˆå…³ç³»ï¼Œå¦‚æœè¦åŠ è¾¹çš„ä¸¤ä¸ªç‚¹å±äºåŒä¸€ä¸ªé›†åˆå°±ç¯æ•°+1ï¼Œå¦åˆ™æŠŠä»–ä»¬ä¿©åˆå¹¶åˆ°ä¸€ä¸ªé›†åˆå°±å®Œäº†</p><h3 id="Codes"><a href="#Codes" class="headerlink" title="Codes"></a>Codes</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxn 200001</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> mod 1000000009</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> t&gt;<span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">fcin</span><span class="params">(t &amp;x)</span></span>&#123;</span><br><span class="line"><span class="type">int</span> sign=<span class="number">1</span>; x=<span class="number">0</span>; <span class="type">char</span> op=<span class="built_in">getchar</span>();</span><br><span class="line"><span class="keyword">while</span>(op&lt;<span class="string">&#x27;0&#x27;</span>||op&gt;<span class="string">&#x27;9&#x27;</span>)&#123;<span class="keyword">if</span>(op==<span class="string">&#x27;-&#x27;</span>) sign=<span class="number">-1</span>;op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line"><span class="keyword">while</span>(op&gt;=<span class="string">&#x27;0&#x27;</span>&amp;&amp;op&lt;=<span class="string">&#x27;9&#x27;</span>)&#123;x=x*<span class="number">10</span>+(op<span class="number">-48</span>);op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line">x*=sign;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> f[maxn];<span class="type">int</span> n,m;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">Sfind</span><span class="params">(<span class="type">int</span> x)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(f[x]==x) <span class="keyword">return</span> x;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">return</span> f[x]=<span class="built_in">Sfind</span>(f[x]);</span><br><span class="line">&#125;</span><br><span class="line">ll ans=<span class="number">1</span>;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;magician.in&quot;</span>,<span class="string">&quot;r&quot;</span>,stdin);</span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;magician.out&quot;</span>,<span class="string">&quot;w&quot;</span>,stdout);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"><span class="built_in">fcin</span>(n);<span class="built_in">fcin</span>(m);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++) f[i]=i;</span><br><span class="line"><span class="type">int</span> x,y;<span class="type">int</span> fx,fy;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++)&#123;</span><br><span class="line"><span class="built_in">fcin</span>(x);<span class="built_in">fcin</span>(y);</span><br><span class="line">fx=<span class="built_in">Sfind</span>(x);fy=<span class="built_in">Sfind</span>(y);</span><br><span class="line"><span class="keyword">if</span>(fx==fy) ans=(ans&lt;&lt;<span class="number">1</span>)%mod;</span><br><span class="line"><span class="keyword">else</span> f[fx]=fy;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>,ans<span class="number">-1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="2-æ£€æµ‹åºåˆ—ï¼ˆseq-cppï¼‰"><a href="#2-æ£€æµ‹åºåˆ—ï¼ˆseq-cppï¼‰" class="headerlink" title="2. æ£€æµ‹åºåˆ—ï¼ˆseq.cppï¼‰"></a>2. æ£€æµ‹åºåˆ—ï¼ˆseq.cppï¼‰</h2><h3 id="Description-1"><a href="#Description-1" class="headerlink" title="Description"></a>Description</h3><p>æœ‰Mï¼ˆ1â‰¤Mâ‰¤50,000ï¼‰ä¸ªåºåˆ—ï¼ˆç§°ä½œæ£€æµ‹åºåˆ—ï¼‰ï¼Œ æ¯ä¸ªåºåˆ—æœ‰miä¸ªä¸åŒçš„æ•°å­—ï¼Œä¸”æ¯ä¸ªæ•°å­—éƒ½å±äº[1,N]ï¼Œå…¶ä¸­1â‰¤Nâ‰¤10^5ã€‚æ¯ä¸ªåºåˆ—æè¿°äº†æ•°å­—é—´çš„ç›¸å¯¹ä½ç½®å…³ç³»ï¼ˆè°åœ¨å‰è°åœ¨åï¼‰ï¼Œæ¯”å¦‚åºåˆ—2ã€5ã€1 æè¿°äº†2åœ¨5çš„å‰é¢ï¼Œ5åœ¨1çš„å‰é¢ã€‚</p><p>æ±‚ä¸€ä¸ªå­—å…¸åºæœ€å°çš„1â€¦Nçš„æ’åˆ—ï¼Œä¸”å°½å¯èƒ½å¤šçš„æ»¡è¶³å‰è‹¥å¹²ä¸ªæ£€æµ‹åºåˆ—æè¿°çš„ç›¸å¯¹ä½ç½®å…³ç³»ã€‚</p><h3 id="Input-1"><a href="#Input-1" class="headerlink" title="Input"></a>Input</h3><p>ç¬¬ä¸€è¡ŒåŒ…å«Nå’ŒMã€‚æ¥ä¸‹æ¥çš„Mè¡Œï¼Œæ¯è¡Œæè¿°äº†ä¸€ä¸ªæ£€æµ‹åºåˆ—ï¼šç¬¬ä¸€ä¸ªæ•°æ˜¯miï¼Œç´§è·ŸåŒä¸€è¡Œåé¢æ˜¯miä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºä¸€ä¸ªæ£€æµ‹åºåˆ—ã€‚æ‰€æœ‰miçš„å’Œè‡³å¤šä¸º200,000ã€‚</p><h3 id="Output-1"><a href="#Output-1" class="headerlink" title="Output"></a>Output</h3><p>å¦‚é¢˜ç›®æè¿°ï¼Œè¾“å‡ºNä¸ªç©ºæ ¼åˆ†éš”çš„æ•´æ•°ï¼Œç»™å‡ºä¸€ä¸ª1â€¦Nçš„æ’åˆ—ã€‚</p><h3 id="Sample-Input-1"><a href="#Sample-Input-1" class="headerlink" title="Sample Input"></a>Sample Input</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">4 3</span><br><span class="line">3 1 2 3</span><br><span class="line">2 4 2</span><br><span class="line">3 3 4 1</span><br></pre></td></tr></table></figure><h3 id="Sample-Output-1"><a href="#Sample-Output-1" class="headerlink" title="Sample Output"></a>Sample Output</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1 4 2 3</span><br></pre></td></tr></table></figure><h3 id="Hint-1"><a href="#Hint-1" class="headerlink" title="Hint"></a>Hint</h3><p>æ— </p><h3 id="åˆ†æ-1"><a href="#åˆ†æ-1" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h3><p>åšæ³•ï¼š<strong>äºŒåˆ†éœ€è¦æ»¡è¶³å‰ $mid$ ä¸ªæ£€æµ‹åºåˆ—ï¼Œè¿æœ‰å‘è¾¹è·‘æ‹“æ‰‘æ’åº</strong></p><p>å¦‚é¢˜ç›®æ‰€è¯´ï¼Œåªéœ€è¦å°½é‡æ»¡è¶³å‰è‹¥å¹²ä¸ªæ£€æµ‹åºåˆ—ï¼Œå¯ä»¥äºŒåˆ†ç­”æ¡ˆ $mid$ è¡¨ç¤ºéœ€è¦æ»¡è¶³å‰ $mid$ ä¸ªæ£€æµ‹åºåˆ—ï¼ŒæŒ‰ç…§åºåˆ—çš„æ•°å­—ä»å‰å¾€åè¿æœ‰å‘è¾¹ï¼Œç„¶åè·‘æ‹“æ‰‘æ’åºï¼Œè‹¥å›¾ä¸­å­˜åœ¨ç¯åˆ™è¯´æ˜è¿™ $mid$ ä¸ªæ£€æµ‹åºåˆ—ä¸èƒ½åŒæ—¶æ»¡è¶³ï¼Œå¦åˆ™ $mid$ å¯ä»¥æ›´å¤§</p><h3 id="Codes-1"><a href="#Codes-1" class="headerlink" title="Codes"></a>Codes</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">pragma</span> GCC optimize(3)</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxn 100001</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxm maxn*2</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> t&gt;<span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">fcin</span><span class="params">(t &amp;x)</span></span>&#123;</span><br><span class="line"><span class="type">int</span> sign=<span class="number">1</span>; x=<span class="number">0</span>; <span class="type">char</span> op=<span class="built_in">getchar</span>();</span><br><span class="line"><span class="keyword">while</span>(op&lt;<span class="string">&#x27;0&#x27;</span>||op&gt;<span class="string">&#x27;9&#x27;</span>)&#123;<span class="keyword">if</span>(op==<span class="string">&#x27;-&#x27;</span>) sign=<span class="number">-1</span>;op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line"><span class="keyword">while</span>(op&gt;=<span class="string">&#x27;0&#x27;</span>&amp;&amp;op&lt;=<span class="string">&#x27;9&#x27;</span>)&#123;x=x*<span class="number">10</span>+(op<span class="number">-48</span>);op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line">x*=sign;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> to[maxm],nxt[maxm],head[maxn];</span><br><span class="line"><span class="type">int</span> tot,out_[maxn],ans[maxn];</span><br><span class="line"><span class="type">int</span> n,m,indeg[maxn];</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; mi[<span class="number">50001</span>];</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">Eadd</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> v)</span></span>&#123;</span><br><span class="line">to[++tot]=v;nxt[tot]=head[u];</span><br><span class="line">head[u]=tot;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">topp</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">int</span> qh;</span><br><span class="line">priority_queue&lt; <span class="type">int</span>,vector&lt;<span class="type">int</span>&gt;,greater&lt;<span class="type">int</span>&gt; &gt; wait;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++) <span class="keyword">if</span>(indeg[i]==<span class="number">0</span>) wait.<span class="built_in">push</span>(i);</span><br><span class="line"><span class="keyword">while</span>(!wait.<span class="built_in">empty</span>())&#123;</span><br><span class="line">qh=wait.<span class="built_in">top</span>();</span><br><span class="line">out_[++out_[<span class="number">0</span>]]=qh;</span><br><span class="line">wait.<span class="built_in">pop</span>();</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=head[qh];i;i=nxt[i])</span><br><span class="line"><span class="keyword">if</span>(--indeg[to[i]]==<span class="number">0</span>) wait.<span class="built_in">push</span>(to[i]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> out_[<span class="number">0</span>]==n; </span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">check</span><span class="params">(<span class="type">int</span> k)</span></span>&#123;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt;::iterator iter;</span><br><span class="line">out_[<span class="number">0</span>]=<span class="number">0</span>;<span class="built_in">memset</span>(indeg,<span class="number">0</span>,<span class="built_in">sizeof</span>(indeg));</span><br><span class="line"><span class="built_in">memset</span>(head,<span class="number">0</span>,<span class="built_in">sizeof</span>(head));tot=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=k;i++)</span><br><span class="line"><span class="keyword">for</span>(iter=mi[i].<span class="built_in">begin</span>();iter+<span class="number">1</span>!=mi[i].<span class="built_in">end</span>();iter++)</span><br><span class="line"><span class="built_in">Eadd</span>(*iter,*(iter+<span class="number">1</span>)),indeg[*(iter+<span class="number">1</span>)]++;</span><br><span class="line"><span class="keyword">return</span> <span class="built_in">topp</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="type">int</span> L=<span class="number">1</span>,R=m;</span><br><span class="line"><span class="type">int</span> mid=(L+R)&gt;&gt;<span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span>(L&lt;R)&#123;</span><br><span class="line">mid=(L+R)&gt;&gt;<span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">check</span>(mid)) L=mid+<span class="number">1</span>;</span><br><span class="line"><span class="keyword">else</span> R=mid;</span><br><span class="line">&#125;</span><br><span class="line">out_[<span class="number">0</span>]=<span class="number">0</span>;<span class="built_in">memset</span>(indeg,<span class="number">0</span>,<span class="built_in">sizeof</span>(indeg));</span><br><span class="line"><span class="built_in">memset</span>(head,<span class="number">0</span>,<span class="built_in">sizeof</span>(head));tot=<span class="number">0</span>;</span><br><span class="line"><span class="built_in">check</span>(mid);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=out_[<span class="number">0</span>];i++) <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>,out_[i]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;seq.in&quot;</span>,<span class="string">&quot;r&quot;</span>,stdin);</span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;seq.out&quot;</span>,<span class="string">&quot;w&quot;</span>,stdout);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"><span class="type">int</span> x,y;</span><br><span class="line"><span class="built_in">fcin</span>(n);<span class="built_in">fcin</span>(m);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++)&#123;</span><br><span class="line"><span class="built_in">fcin</span>(x);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=x;j++)</span><br><span class="line"><span class="built_in">fcin</span>(y),mi[i].<span class="built_in">push_back</span>(y); </span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">solve</span>();</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="3-è¾¾ç‰›ç§€ï¼ˆshow-cppï¼‰"><a href="#3-è¾¾ç‰›ç§€ï¼ˆshow-cppï¼‰" class="headerlink" title="3. è¾¾ç‰›ç§€ï¼ˆshow.cppï¼‰"></a>3. è¾¾ç‰›ç§€ï¼ˆshow.cppï¼‰</h2><h3 id="Description-2"><a href="#Description-2" class="headerlink" title="Description"></a>Description</h3><p>ç¼–å·ä¸º1â€¦Nçš„å¥¶ç‰›ï¼ç¬¬iå¤´å¥¶ç‰›é‡é‡ä¸ºwiï¼Œæ‰è‰ºæ°´å¹³ä¸ºtiï¼Œä¸¤è€…éƒ½æ˜¯æ•´æ•°ã€‚</p><p>åœ¨åˆ°è¾¾æ—¶ï¼ŒHQX å°±è¢«ä»Šå¹´è¾¾ç‰›ç§€çš„æ–°è§„åˆ™å“åˆ°äº†ï¼š</p><p>ï¼ˆä¸€ï¼‰å‚åŠ æ¯”èµ›çš„ä¸€ç»„å¥¶ç‰›å¿…é¡»æ€»é‡é‡è‡³å°‘ä¸ºWï¼ˆè¿™æ˜¯ä¸ºäº†ç¡®ä¿æ˜¯å¼ºå¤§çš„é˜Ÿä¼åœ¨æ¯”èµ›ï¼Œè€Œä¸ä»…æ˜¯å¼ºå¤§çš„æŸå¤´å¥¶ç‰›ï¼‰ï¼Œå¹¶ä¸”</p><p>ï¼ˆäºŒï¼‰æ€»æ‰è‰ºå€¼ä¸æ€»é‡é‡çš„æ¯”å€¼æœ€å¤§çš„ä¸€ç»„è·å¾—èƒœåˆ©ã€‚</p><p>HQXæ³¨æ„åˆ°ä»–çš„æ‰€æœ‰å¥¶ç‰›çš„æ€»é‡é‡ä¸å°äºWï¼Œæ‰€ä»¥ä»–èƒ½å¤Ÿæ´¾å‡ºç¬¦åˆè§„åˆ™ï¼ˆä¸€ï¼‰çš„é˜Ÿä¼ã€‚å¸®åŠ©ä»–ç¡®å®šè¿™æ ·çš„é˜Ÿä¼ä¸­èƒ½å¤Ÿè¾¾åˆ°çš„æœ€ä½³çš„æ‰è‰ºä¸é‡é‡çš„æ¯”å€¼ã€‚</p><h3 id="Input-2"><a href="#Input-2" class="headerlink" title="Input"></a>Input</h3><p>è¾“å…¥çš„ç¬¬ä¸€è¡ŒåŒ…å«Nï¼ˆ1â‰¤Nâ‰¤250ï¼‰å’ŒWï¼ˆ1â‰¤Wâ‰¤1000ï¼‰ã€‚ä¸‹é¢Nè¡Œï¼Œæ¯è¡Œç”¨ä¸¤ä¸ªæ•´æ•°wiï¼ˆ1â‰¤wiâ‰¤10^6ï¼‰å’Œtiï¼ˆ1â‰¤tiâ‰¤10^3ï¼‰æè¿°äº†ä¸€å¤´å¥¶ç‰›ã€‚</p><h3 id="Output-2"><a href="#Output-2" class="headerlink" title="Output"></a>Output</h3><p>è¯·æ±‚å‡ºHQXç”¨ä¸€ç»„æ€»é‡é‡æœ€å°‘ä¸ºWçš„å¥¶ç‰›æœ€å¤§å¯èƒ½è¾¾åˆ°çš„æ€»æ‰è‰ºå€¼ä¸æ€»é‡é‡çš„æ¯”å€¼ã€‚å¦‚æœä½ çš„ç­”æ¡ˆæ˜¯Aï¼Œè¾“å‡º1000Aå‘ä¸‹å–æ•´çš„å€¼ï¼Œä»¥ä½¿å¾—è¾“å‡ºæ˜¯æ•´æ•°ï¼ˆå½“é—®é¢˜ä¸­çš„æ•°ä¸æ˜¯ä¸€ä¸ªæ•´æ•°çš„æ—¶å€™ï¼Œå‘ä¸‹å–æ•´æ“ä½œåœ¨å‘ä¸‹èˆå…¥åˆ°æ•´æ•°çš„æ—¶å€™å»é™¤æ‰€æœ‰å°æ•°éƒ¨åˆ†ï¼‰ã€‚</p><h3 id="Sample-Input-2"><a href="#Sample-Input-2" class="headerlink" title="Sample Input"></a>Sample Input</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">3 15</span><br><span class="line">20 21</span><br><span class="line">10 11</span><br><span class="line">30 31</span><br></pre></td></tr></table></figure><h3 id="Sample-Output-2"><a href="#Sample-Output-2" class="headerlink" title="Sample Output"></a>Sample Output</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1066</span><br></pre></td></tr></table></figure><h3 id="Hint-2"><a href="#Hint-2" class="headerlink" title="Hint"></a>Hint</h3><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæ€»ä½“æ¥çœ‹æœ€ä½³çš„æ‰è‰ºä¸é‡é‡çš„æ¯”å€¼åº”è¯¥æ˜¯ä»…ç”¨ä¸€å¤´æ‰è‰ºå€¼ä¸º11ã€é‡é‡ä¸º10çš„å¥¶ç‰›ï¼Œä½†æ˜¯ç”±äºæˆ‘ä»¬éœ€è¦è‡³å°‘15å•ä½çš„é‡é‡ï¼Œæœ€ä¼˜è§£æœ€ç»ˆä¸ºä½¿ç”¨è¿™å¤´å¥¶ç‰›åŠ ä¸Šæ‰è‰ºå€¼ä¸º21ã€é‡é‡ä¸º20çš„å¥¶ç‰›ã€‚è¿™æ ·çš„è¯æ‰è‰ºä¸é‡é‡çš„æ¯”å€¼ä¸º(11+21)/(10+20) = 32/30 = 1.0666666â€¦ï¼Œä¹˜ä»¥1000å‘ä¸‹å–æ•´ä¹‹åå¾—åˆ°1066ã€‚</p><h3 id="åˆ†æ-2"><a href="#åˆ†æ-2" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h3><blockquote><p><strong>åšæ³•ä¸€ï¼š01åˆ†æ•°è§„åˆ’ + èƒŒåŒ… DP</strong></p></blockquote><p>çœ‹åˆ°â€œæ‰è‰ºä¸é‡é‡çš„æ¯”å€¼æœ€å¤§â€å°±ä¼šæƒ³èµ· 01 åˆ†æ•°è§„åˆ’çš„æ€è·¯ï¼Œè¦æ±‚ $\sum t[i]\div \sum w[i]$ çš„æœ€å¤§å€¼ï¼Œè®¾ç­”æ¡ˆä¸º $x$ ï¼ŒåŸå¼å˜å½¢å¾— $\sum (t[i]-w[i]\times x)$ </p><p>äºŒåˆ† $x$ ï¼Œå¸¦å…¥è¿›è¡ŒèƒŒåŒ… DP å³å¯ï¼Œæ³¨æ„å®æ•°åŸŸä¸Šçš„äºŒåˆ†ç²¾åº¦é—®é¢˜</p><blockquote><p><strong>åšæ³•äºŒï¼šDP</strong></p></blockquote><p>è®¾ $f[i][j]$ è¡¨ç¤ºè€ƒè™‘äº†ç¬¬ $i$ å¤´ç‰›ï¼Œå½“å‰çš„æ€»é‡é‡ä¸º $j$ çš„æ¯”å€¼çš„æœ€å¤§å€¼ï¼Œè½¬ç§»æ–¹ç¨‹ä¸ºï¼š</p><ol><li>ä¸é€‰æ‹©ç¬¬ $i+1$ å¤´å¥¶ç‰›ï¼š$f[i+1][j]=max(f[i+1][j],\;f[i][j])$</li><li>é€‰æ‹©ç¬¬ $i+1$ å¤´å¥¶ç‰›ï¼š$f[i+1][j+w[i]]=max(f[i+1][j+w[i],\;x)$</li></ol><p>å…¶ä¸­ $i\in[1,\;n-1]$ï¼Œ$j\in[0,\;W]$</p><p>è¿™ä¸ª $x$ å°±æ˜¯é€‰æ‹©ç¬¬ $i+1$ å¤´å¥¶ç‰›åï¼Œæ–°çš„æ€»æ‰è‰ºå€¼å’Œæ€»é‡é‡çš„æ¯”å€¼ï¼Œç”±äº $x$ ä¸èƒ½ç›´æ¥ç”± $f[i][j]$ å¾—åˆ°ï¼Œéœ€è¦æ–°è®¾ $s[i][j]$ è¡¨ç¤º $f[i][j]$ å¯¹åº”çš„æ€»æ‰è‰ºå€¼ï¼Œ $p[i][j]$ è¡¨ç¤º $f[i][j]$ å¯¹åº”çš„æ€»é‡é‡ï¼Œäºæ˜¯ï¼š</p><p>$f[i+1][j+w[i]]=max(f[i+1][j+w[i]],\;(s[i][j]+t[i+1])\div(p[i][j]+w[i+1])$</p><p>$s[i][j]$ å’Œ $p[i][j]$ åœ¨ $f[i][j]$ å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ä¸€èµ·æ›´æ–°ï¼Œ<strong>ä½†æ˜¯æ³¨æ„åˆ° $f[i][j]$ é‡Œé¢ $j$ æ˜¯è¡¨ç¤ºé‡é‡çš„ï¼Œè€Œå¯¹åº”çš„ $p[i][j]$ ä¹Ÿæ˜¯è¡¨ç¤ºé‡é‡çš„ï¼Œçœ‹èµ·æ¥æ˜¯é‡å¤è¡¨ç¤ºäº†é‡é‡ï¼Œå®é™…ä¸Šæ˜¯å› ä¸ºé¿å… MLEï¼Œè½¬ç§»æ–¹ç¨‹çš„ $j$ åªå¼€åˆ°äº† $W$(1000) ,è€Œé¢˜ç›®ä¸­å¥¶ç‰›çš„é‡é‡å’Œå¯èƒ½è¿œå¤§äºè¿™ä¸ªå€¼ï¼Œåœ¨ $j&gt;W$ æ—¶å¯ä»¥æŠŠå®ƒç´¯ç§¯åˆ° $j=W$ ä¹Ÿå°±æ˜¯ $f[i][W]$ æ¥è½¬ç§»ï¼Œä½†æ˜¯è¦å¯¹åº”çœŸå®çš„é‡é‡å’Œï¼Œæ‰€ä»¥æ–°è®¾çš„ $p[i][j]$ æ˜¯ç”¨æ¥è¡¨ç¤º $f[i][j]$ å¯¹åº”çš„å®é™…é‡é‡å’Œ</strong></p><p>è¾¹ç•Œä¸º $f[1][w[1]]=t[1]\div w[1]$ï¼Œæœ€åçš„ç­”æ¡ˆåœ¨ $f[1\to n][W]$ é‡Œé¢å–æœ€å¤§å€¼</p><h3 id="Codes-2"><a href="#Codes-2" class="headerlink" title="Codes"></a>Codes</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxn 251</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxs 1001</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> v(x) (x&gt;maxw?maxw:x)</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> t&gt;<span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">fcin</span><span class="params">(t &amp;x)</span></span>&#123;</span><br><span class="line"><span class="type">int</span> sign=<span class="number">1</span>; x=<span class="number">0</span>; <span class="type">char</span> op=<span class="built_in">getchar</span>();</span><br><span class="line"><span class="keyword">while</span>(op&lt;<span class="string">&#x27;0&#x27;</span>||op&gt;<span class="string">&#x27;9&#x27;</span>)&#123;<span class="keyword">if</span>(op==<span class="string">&#x27;-&#x27;</span>) sign=<span class="number">-1</span>;op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line"><span class="keyword">while</span>(op&gt;=<span class="string">&#x27;0&#x27;</span>&amp;&amp;op&lt;=<span class="string">&#x27;9&#x27;</span>)&#123;x=x*<span class="number">10</span>+(op<span class="number">-48</span>);op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line">x*=sign;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> n,maxw;</span><br><span class="line"><span class="type">int</span> t[maxn],w[maxn];</span><br><span class="line"><span class="type">int</span> s[maxn][maxs],p[maxn][maxs];</span><br><span class="line"><span class="type">double</span> f[maxn][maxs];</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">dp</span><span class="params">()</span></span>&#123;</span><br><span class="line">f[<span class="number">1</span>][<span class="built_in">v</span>(w[<span class="number">1</span>])]=(<span class="type">double</span>)t[<span class="number">1</span>]/(<span class="type">double</span>)w[<span class="number">1</span>];</span><br><span class="line">s[<span class="number">1</span>][<span class="built_in">v</span>(w[<span class="number">1</span>])]=t[<span class="number">1</span>];p[<span class="number">1</span>][<span class="built_in">v</span>(w[<span class="number">1</span>])]=w[<span class="number">1</span>];</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n<span class="number">-1</span>;i++)</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;=maxw;j++)&#123;</span><br><span class="line"><span class="keyword">if</span>(f[i][j]&gt;f[i+<span class="number">1</span>][j])&#123;</span><br><span class="line">f[i+<span class="number">1</span>][j]=f[i][j];</span><br><span class="line">s[i+<span class="number">1</span>][j]=s[i][j];</span><br><span class="line">p[i+<span class="number">1</span>][j]=p[i][j];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>((<span class="type">double</span>)(s[i][j]+t[i+<span class="number">1</span>])/(<span class="type">double</span>)(p[i][j]+w[i+<span class="number">1</span>])&gt;f[i+<span class="number">1</span>][<span class="built_in">v</span>(p[i][j]+w[i+<span class="number">1</span>])])&#123;</span><br><span class="line">f[i+<span class="number">1</span>][<span class="built_in">v</span>(p[i][j]+w[i+<span class="number">1</span>])]=(<span class="type">double</span>)(s[i][j]+t[i+<span class="number">1</span>])/(<span class="type">double</span>)(p[i][j]+w[i+<span class="number">1</span>]);</span><br><span class="line">s[i+<span class="number">1</span>][<span class="built_in">v</span>(p[i][j]+w[i+<span class="number">1</span>])]=s[i][j]+t[i+<span class="number">1</span>];</span><br><span class="line">p[i+<span class="number">1</span>][<span class="built_in">v</span>(p[i][j]+w[i+<span class="number">1</span>])]=p[i][j]+w[i+<span class="number">1</span>];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">double</span> ans=<span class="number">0.0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++) ans=<span class="built_in">max</span>(ans,f[i][maxw]);</span><br><span class="line">ans*=<span class="number">1000.0</span>;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%lld&quot;</span>,(<span class="type">long</span> <span class="type">long</span>)ans); </span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;show.in&quot;</span>,<span class="string">&quot;r&quot;</span>,stdin);</span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;show.out&quot;</span>,<span class="string">&quot;w&quot;</span>,stdout);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"><span class="built_in">fcin</span>(n);<span class="built_in">fcin</span>(maxw);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line"><span class="built_in">fcin</span>(w[i]),<span class="built_in">fcin</span>(t[i]);</span><br><span class="line"><span class="built_in">dp</span>();</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŠ¨æ€è§„åˆ’ </tag>
            
            <tag> äºŒåˆ† </tag>
            
            <tag> å›¾è®º </tag>
            
            <tag> å¹¶æŸ¥é›† </tag>
            
            <tag> 01åˆ†æ•°è§„åˆ’ </tag>
            
            <tag> æ‹“æ‰‘æ’åº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ¨¡æ‹Ÿ | SPFA | é€’æ¨ | å¹¶æŸ¥é›† | 20190713è€ƒè¯•  ï¼šè§£é¢˜æŠ¥å‘Š</title>
      <link href="/2019/07/13/2019-07-13-0713%E8%80%83%E8%AF%95/"/>
      <url>/2019/07/13/2019-07-13-0713%E8%80%83%E8%AF%95/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><h2 id="é¢˜ç›®é™åˆ¶ä¸€è§ˆ"><a href="#é¢˜ç›®é™åˆ¶ä¸€è§ˆ" class="headerlink" title="é¢˜ç›®é™åˆ¶ä¸€è§ˆ"></a>é¢˜ç›®é™åˆ¶ä¸€è§ˆ</h2><div class="table-container"><table><thead><tr><th style="text-align:center">é¢˜ç›®</th><th style="text-align:center">æ—¶é—´é™åˆ¶</th><th style="text-align:center">ç©ºé—´é™åˆ¶</th></tr></thead><tbody><tr><td style="text-align:center">1. buckets</td><td style="text-align:center">$1000$ MS</td><td style="text-align:center">$256$ MB</td></tr><tr><td style="text-align:center">2. factory</td><td style="text-align:center">$1000$ MS</td><td style="text-align:center">$256$ MB</td></tr><tr><td style="text-align:center">3. dining</td><td style="text-align:center">$1000$ MS</td><td style="text-align:center">$512$ MB</td></tr></tbody></table></div><h2 id="1-æ•‘ç«ï¼ˆbuckets-cppï¼‰"><a href="#1-æ•‘ç«ï¼ˆbuckets-cppï¼‰" class="headerlink" title="1. æ•‘ç«ï¼ˆbuckets.cppï¼‰"></a>1. æ•‘ç«ï¼ˆbuckets.cppï¼‰</h2><h3 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h3><p>å†œåœºä¸Šèµ·ç«äº†ï¼Œå¥¶ç‰›ä»¬æ­£åœ¨ç´§æ€¥èµ¶å»ç­ç«ï¼</p><p>å†œåœºå¯ä»¥ç”¨ä¸€ä¸ªåƒè¿™æ ·çš„10Ã—10çš„å­—ç¬¦æ–¹é˜µæ¥æè¿°ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">..........</span><br><span class="line">..........</span><br><span class="line">..........</span><br><span class="line">..B.......</span><br><span class="line">..........</span><br><span class="line">.....R....</span><br><span class="line">..........</span><br><span class="line">..........</span><br><span class="line">.....L....</span><br><span class="line">..........</span><br></pre></td></tr></table></figure><p>å­—ç¬¦â€™Bâ€™è¡¨ç¤ºæ­£ç€ç«çš„ç‰›æ£šã€‚å­—ç¬¦â€™Lâ€™è¡¨ç¤ºä¸€ä¸ªæ¹–ï¼Œè€Œå­—ç¬¦â€™Râ€™è¡¨ç¤ºå†œåœºä¸Šçš„ä¸€å—å·¨å¤§å²©çŸ³ã€‚</p><p>å¥¶ç‰›ä»¬æƒ³è¦æ²¿ç€ä¸€æ¡æ¹–åˆ°ç‰›æ£šä¹‹é—´çš„è·¯å¾„ç»„æˆä¸€æ¡â€œæ°´æ¡¶ä¼ é€’é˜Ÿåˆ—â€ï¼Œè¿™æ ·å¥¹ä»¬å°±å¯ä»¥æ²¿ç€è¿™æ¡è·¯å¾„ä¼ é€’æ°´æ¡¶æ¥å¸®åŠ©ç­ç«ã€‚å½“ä¸¤å¤´å¥¶ç‰›åœ¨ä¸œå—è¥¿åŒ—å››ä¸ªæ–¹å‘ä¸Šç›¸é‚»æ—¶æ°´æ¡¶å¯ä»¥åœ¨å¥¹ä»¬ä¹‹é—´ä¼ é€’ã€‚è¿™å¯¹äºæ¹–è¾¹çš„å¥¶ç‰›ä¹Ÿæ˜¯å¯¹çš„â€”â€”å¥¶ç‰›åªèƒ½åœ¨ç´§æŒ¨ç€æ¹–çš„æ—¶å€™æ‰èƒ½ç”¨æ°´æ¡¶ä»æ¹–é‡Œå–æ°´ã€‚ç±»ä¼¼åœ°ï¼Œå¥¶ç‰›åªèƒ½åœ¨ç´§æŒ¨ç€ç‰›æ£šçš„æ—¶å€™æ‰èƒ½ç”¨æ°´å»ç­ç‰›æ£šçš„ç«ã€‚</p><p>è¯·å¸®åŠ©æ±‚å‡ºå¥¶ç‰›ä»¬ä¸ºäº†ç»„æˆè¿™æ ·çš„â€œæ°´æ¡¶ä¼ é€’é˜Ÿåˆ—â€éœ€è¦å æ®çš„â€™.â€™æ ¼å­çš„æœ€å°æ•°é‡ã€‚</p><p>å¥¶ç‰›ä¸èƒ½ç«™åœ¨å²©çŸ³æ‰€åœ¨çš„æ–¹æ ¼ä¹‹å†…ï¼Œæ­¤å¤–ä¿è¯ç‰›æ£šå’Œæ¹–ä¸æ˜¯ç›¸é‚»çš„ã€‚</p><h3 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h3><p>è¾“å…¥åŒ…å«10è¡Œï¼Œæ¯è¡Œ10ä¸ªå­—ç¬¦ï¼Œæè¿°è¿™ä¸ªå†œåœºçš„å¸ƒå±€ã€‚è¾“å…¥ä¿è¯å›¾æ¡ˆä¸­æ°æœ‰ä¸€ä¸ªå­—ç¬¦â€™Bâ€™ã€ä¸€ä¸ªå­—ç¬¦â€™Lâ€™ä»¥åŠä¸€ä¸ªå­—ç¬¦â€™Râ€™ã€‚</p><h3 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h3><p>è¾“å‡ºä¸€ä¸ªæ•´æ•°ï¼Œä¸ºç»„æˆä¸€æ¡å¯è¡Œçš„æ°´æ¡¶ä¼ é€’é˜Ÿåˆ—æ‰€éœ€è¦çš„å¥¶ç‰›çš„æœ€å°æ•°é‡ã€‚</p><h3 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">..........</span><br><span class="line">..........</span><br><span class="line">..........</span><br><span class="line">..B.......</span><br><span class="line">..........</span><br><span class="line">.....R....</span><br><span class="line">..........</span><br><span class="line">..........</span><br><span class="line">.....L....</span><br><span class="line">..........</span><br></pre></td></tr></table></figure><h3 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">7</span><br></pre></td></tr></table></figure><h3 id="Hint"><a href="#Hint" class="headerlink" title="Hint"></a>Hint</h3><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œä»¥ä¸‹æ˜¯ä¸€ä¸ªå¯è¡Œçš„æ–¹æ¡ˆï¼Œä½¿ç”¨äº†æœ€å°æ•°é‡çš„å¥¶ç‰›ï¼ˆ7ï¼‰ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">..........</span><br><span class="line">..........</span><br><span class="line">..........</span><br><span class="line">..B.......</span><br><span class="line">..C.......</span><br><span class="line">..CC.R....</span><br><span class="line">...CCC....</span><br><span class="line">.....C....</span><br><span class="line">.....L....</span><br><span class="line">..........</span><br></pre></td></tr></table></figure><h3 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h3><blockquote><p><strong>åšæ³•ä¸€ï¼šBFSï¼ˆ100åˆ†ï¼‰</strong></p></blockquote><p>ç”¨ <strong>æ´ªæ°´å¡«å……æ³•</strong> å¡«è¡¨ï¼Œè®¾ $f[i][j]=min(f[i][j],f[iâ€™][jâ€™]+1)$ ï¼Œ$iâ€™$ å’Œ $jâ€™$ æ¥è‡ªäºä¸Šä¸‹å·¦å³çš„æ ¼å­</p><p>è¾¹ç•Œä¸º $f[sx][sy]=0$ è¡¨ç¤ºä¸º $L$ çš„æ ¼å­åæ ‡</p><blockquote><p><strong>åšæ³•äºŒï¼šè®¡ç®—ï¼ˆ100åˆ†ï¼‰</strong></p></blockquote><p>å‘ç°æ•°æ®ä¸­åªæœ‰ä¸€å—å²©çŸ³ $R$ï¼Œé‚£ä¹ˆæ˜¾ç„¶ä» $L$ æ ¼å­èµ°ä¸€ä¸ª L å½¢è·¯çº¿åˆ° B æ ¼å­å°±è¡Œäº†ï¼Œå› ä¸º L å½¢è·¯çº¿æœ‰ä¸¤æ¡ï¼Œä¸å¯èƒ½å…¨è¢« $R$ é˜»æŒ¡æ‰€ä»¥ä¸€å®šå¯ä»¥èµ°é€š</p><h3 id="Codes"><a href="#Codes" class="headerlink" title="Codes"></a>Codes</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxn 13</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> pair&lt;pair&lt;<span class="type">int</span>,<span class="type">int</span>&gt;,<span class="type">int</span>&gt; pp;</span><br><span class="line"><span class="type">char</span> M[maxn][maxn];<span class="type">bool</span> vis[maxn][maxn];</span><br><span class="line"><span class="type">int</span> offX[]=&#123;<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">-1</span>&#125;,offY[]=&#123;<span class="number">1</span>,<span class="number">-1</span>,<span class="number">0</span>,<span class="number">0</span>&#125;;</span><br><span class="line"><span class="type">int</span> f[maxn][maxn];<span class="type">int</span> sx,sy,ex,ey;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">10</span>;i++)</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=<span class="number">10</span>;j++)&#123;</span><br><span class="line"><span class="keyword">if</span>(M[i][j]==<span class="string">&#x27;L&#x27;</span>)&#123;sx=i;sy=j;<span class="keyword">continue</span>;&#125;</span><br><span class="line"><span class="keyword">if</span>(M[i][j]==<span class="string">&#x27;B&#x27;</span>)&#123;ex=i;ey=j;<span class="keyword">continue</span>;&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">memset</span>(f,<span class="number">127</span>,<span class="built_in">sizeof</span>(f));</span><br><span class="line">queue&lt;pp&gt; q; pp head; <span class="type">int</span> newx,newy;</span><br><span class="line">q.<span class="built_in">push</span>(<span class="built_in">make_pair</span>(<span class="built_in">make_pair</span>(sx,sy),<span class="number">0</span>));</span><br><span class="line">f[sx][sy]=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span>(!q.<span class="built_in">empty</span>())&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> x head.first.first</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> y head.first.second</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> z head.second</span></span><br><span class="line">head=q.<span class="built_in">front</span>();q.<span class="built_in">pop</span>();</span><br><span class="line"><span class="keyword">if</span>(vis[x][y]) <span class="keyword">continue</span>;</span><br><span class="line">vis[x][y]=<span class="literal">true</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">4</span>;i++)&#123;</span><br><span class="line">newx=x+offX[i];newy=y+offY[i];</span><br><span class="line"><span class="keyword">if</span>(newx&lt;<span class="number">1</span> || newx&gt;<span class="number">10</span> || newy&lt;<span class="number">1</span> || newy&gt;<span class="number">10</span>) <span class="keyword">continue</span>;</span><br><span class="line"><span class="keyword">if</span>(M[newx][newy]==<span class="string">&#x27;R&#x27;</span>) <span class="keyword">continue</span>;</span><br><span class="line">f[newx][newy]=<span class="built_in">min</span>(f[newx][newy],f[x][y]+<span class="number">1</span>);</span><br><span class="line">q.<span class="built_in">push</span>(<span class="built_in">make_pair</span>(<span class="built_in">make_pair</span>(newx,newy),z+<span class="number">1</span>));</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;buckets.in&quot;</span>,<span class="string">&quot;r&quot;</span>,stdin);</span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;buckets.out&quot;</span>,<span class="string">&quot;w&quot;</span>,stdout);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">10</span>;i++) <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,&amp;M[i][<span class="number">1</span>]);</span><br><span class="line"><span class="built_in">solve</span>();</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,f[ex][ey]<span class="number">-1</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="2-å¥¶ç‰›å·¥å‚ï¼ˆfactory-cppï¼‰"><a href="#2-å¥¶ç‰›å·¥å‚ï¼ˆfactory-cppï¼‰" class="headerlink" title="2.å¥¶ç‰›å·¥å‚ï¼ˆfactory.cppï¼‰"></a>2.å¥¶ç‰›å·¥å‚ï¼ˆfactory.cppï¼‰</h2><h3 id="Description-1"><a href="#Description-1" class="headerlink" title="Description"></a>Description</h3><p>ç‰›å¥¶ç”Ÿæ„æ­£çº¢çº¢ç«ç«ï¼Farmer Johnçš„ç‰›å¥¶åŠ å·¥å‚å†…æœ‰Nä¸ªåŠ å·¥ç«™ï¼Œç¼–å·ä¸º1â€¦Nï¼ˆ1â‰¤Nâ‰¤100ï¼‰ï¼Œä»¥åŠNâˆ’1æ¡é€šé“ï¼Œæ¯æ¡è¿æ¥æŸä¸¤ä¸ªåŠ å·¥ç«™ã€‚ï¼ˆé€šé“å»ºè®¾å¾ˆæ˜‚è´µï¼Œæ‰€ä»¥Farmer Johné€‰æ‹©ä½¿ç”¨äº†æœ€å°æ•°é‡çš„é€šé“ï¼Œä½¿å¾—ä»æ¯ä¸ªåŠ å·¥ç«™å‡ºå‘éƒ½å¯ä»¥åˆ°è¾¾æ‰€æœ‰å…¶ä»–åŠ å·¥ç«™ï¼‰ã€‚</p><p>ä¸ºäº†åˆ›æ–°å’Œæå‡æ•ˆç‡ï¼ŒFarmer Johnåœ¨æ¯æ¡é€šé“ä¸Šå®‰è£…äº†ä¼ é€å¸¦ã€‚ä¸å¹¸çš„æ˜¯ï¼Œå½“ä»–æ„è¯†åˆ°ä¼ é€å¸¦æ˜¯å•å‘çš„å·²ç»å¤ªæ™šäº†ï¼Œç°åœ¨æ¯æ¡é€šé“åªèƒ½æ²¿ç€ä¸€ä¸ªæ–¹å‘é€šè¡Œäº†ï¼æ‰€ä»¥ç°åœ¨çš„æƒ…å†µä¸å†æ˜¯ä»æ¯ä¸ªåŠ å·¥ç«™å‡ºå‘éƒ½èƒ½å¤Ÿåˆ°è¾¾å…¶ä»–åŠ å·¥ç«™äº†ã€‚</p><p>ç„¶è€Œï¼ŒFarmer Johnè®¤ä¸ºäº‹æƒ…å¯èƒ½è¿˜ä¸ç®—å®Œå…¨å¤±è´¥ï¼Œåªè¦è‡³å°‘è¿˜å­˜åœ¨ä¸€ä¸ªåŠ å·¥ç«™iæ»¡è¶³ä»å…¶ä»–æ¯ä¸ªåŠ å·¥ç«™å‡ºå‘éƒ½å¯ä»¥åˆ°è¾¾åŠ å·¥ç«™iã€‚æ³¨æ„ä»å…¶ä»–ä»»æ„ä¸€ä¸ªåŠ å·¥ç«™jå‰å¾€åŠ å·¥ç«™iå¯èƒ½ä¼šç»è¿‡iå’Œjä¹‹é—´çš„ä¸€äº›ä¸­é—´ç«™ç‚¹ã€‚è¯·å¸®åŠ©Farmer Johnæ±‚å‡ºæ˜¯å¦å­˜åœ¨è¿™æ ·çš„åŠ å·¥ç«™iã€‚</p><h3 id="Input-1"><a href="#Input-1" class="headerlink" title="Input"></a>Input</h3><p>è¾“å…¥çš„ç¬¬ä¸€è¡ŒåŒ…å«ä¸€ä¸ªæ•´æ•°Nï¼Œä¸ºåŠ å·¥ç«™çš„æ•°é‡ã€‚ä»¥ä¸‹Nâˆ’1è¡Œæ¯è¡ŒåŒ…å«ä¸¤ä¸ªç©ºæ ¼åˆ†éš”çš„æ•´æ•°aiå’Œbiï¼Œæ»¡è¶³1â‰¤ai,biâ‰¤Nä»¥åŠaiâ‰ biã€‚è¿™è¡¨ç¤ºæœ‰ä¸€æ¡ä»åŠ å·¥ç«™aiå‘åŠ å·¥ç«™biç§»åŠ¨çš„ä¼ é€å¸¦ï¼Œä»…å…è®¸æ²¿ä»aiåˆ°biçš„æ–¹å‘ç§»åŠ¨ã€‚</p><h3 id="Output-1"><a href="#Output-1" class="headerlink" title="Output"></a>Output</h3><p>å¦‚æœå­˜åœ¨åŠ å·¥ç«™iæ»¡è¶³å¯ä»¥ä»ä»»æ„å…¶ä»–åŠ å·¥ç«™å‡ºå‘éƒ½å¯ä»¥åˆ°è¾¾åŠ å·¥ç«™iï¼Œè¾“å‡ºæœ€å°çš„æ»¡è¶³æ¡ä»¶çš„iã€‚å¦åˆ™ï¼Œè¾“å‡ºâˆ’1ã€‚</p><h3 id="Sample-Input-1"><a href="#Sample-Input-1" class="headerlink" title="Sample Input"></a>Sample Input</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">3</span><br><span class="line">1 2</span><br><span class="line">3 2</span><br></pre></td></tr></table></figure><h3 id="Sample-Output-1"><a href="#Sample-Output-1" class="headerlink" title="Sample Output"></a>Sample Output</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2</span><br></pre></td></tr></table></figure><h3 id="Hint-1"><a href="#Hint-1" class="headerlink" title="Hint"></a>Hint</h3><p>æ— </p><h3 id="åˆ†æ-1"><a href="#åˆ†æ-1" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h3><blockquote><p><strong>åšæ³•ä¸€ï¼šæš´åŠ› + DFSï¼ˆ100åˆ†ï¼‰</strong></p></blockquote><p>çœ‹åˆ° $N\leq100$ æˆ‘ä»¬å°±çŸ¥é“è¿™ä¸ªé¢˜æœ‰å¤šæ°´äº†ï¼Œå­˜äº†åå›¾ä¹‹åç›´æ¥å¯¹æ¯ä¸ªç‚¹æš´åŠ›åœ° DFS ä¸€éçœ‹èƒ½ä¸èƒ½éå†åˆ°æ‰€æœ‰ç‚¹ï¼ŒæŠŠæœ€å…ˆæ»¡è¶³æ¡ä»¶çš„è¾“å‡ºå°±è¡Œ</p><blockquote><p><strong>åšæ³•äºŒï¼šæš´åŠ› + å¹¶æŸ¥é›†ï¼ˆ100åˆ†ï¼‰</strong></p></blockquote><p>ç¨å¾®ä¼˜é›…ä¸€ç‚¹çš„æš´åŠ›ï¼Œç»´æŠ¤æ¯ä¸ªç‚¹çš„å¹¶æŸ¥é›† $f(i)$ ï¼Œæ¯æ¬¡è¿è¾¹ $u\to v$ å°±æŠŠ $f(u)$ æ¬è¿› $f(v)$ é‡Œé¢å³å¯ï¼Œæœ€ååˆ¤æ–­æœ‰æ²¡æœ‰ç‚¹çš„ $siz(f(i))=n$ ï¼Œç”±äºæ•°æ®å¤ªæ°´ï¼Œç”šè‡³ä¸éœ€è¦å¯å‘å¼åˆå¹¶</p><h3 id="Codes-1"><a href="#Codes-1" class="headerlink" title="Codes"></a>Codes</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxn 101</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxm maxn*2</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> t&gt;<span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">fcin</span><span class="params">(t &amp;x)</span></span>&#123;</span><br><span class="line"><span class="type">int</span> sign=<span class="number">1</span>; x=<span class="number">0</span>; <span class="type">char</span> op=<span class="built_in">getchar</span>();</span><br><span class="line"><span class="keyword">while</span>(op&lt;<span class="string">&#x27;0&#x27;</span>||op&gt;<span class="string">&#x27;9&#x27;</span>)&#123;<span class="keyword">if</span>(op==<span class="string">&#x27;-&#x27;</span>) sign=<span class="number">-1</span>;op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line"><span class="keyword">while</span>(op&gt;=<span class="string">&#x27;0&#x27;</span>&amp;&amp;op&lt;=<span class="string">&#x27;9&#x27;</span>)&#123;x=x*<span class="number">10</span>+(op<span class="number">-48</span>);op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line">x*=sign;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> to[maxm],nxt[maxm],head[maxn];</span><br><span class="line"><span class="type">int</span> tot,n;<span class="type">bool</span> vis[maxn];<span class="type">int</span> cnt;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">Eadd</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> v)</span></span>&#123;</span><br><span class="line">to[++tot]=v;nxt[tot]=head[u];</span><br><span class="line">head[u]=tot;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dfs</span><span class="params">(<span class="type">int</span> u)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(vis[u]) <span class="keyword">return</span>;</span><br><span class="line">cnt++;vis[u]=<span class="literal">true</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=head[u];i;i=nxt[i])</span><br><span class="line"><span class="built_in">dfs</span>(to[i]);</span><br><span class="line">&#125; </span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;factory.in&quot;</span>,<span class="string">&quot;r&quot;</span>,stdin);</span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;factory.out&quot;</span>,<span class="string">&quot;w&quot;</span>,stdout);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"><span class="built_in">fcin</span>(n); <span class="type">int</span> x,y;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;n;i++)&#123;<span class="built_in">fcin</span>(x);<span class="built_in">fcin</span>(y);<span class="built_in">Eadd</span>(y,x);&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line"><span class="built_in">memset</span>(vis,<span class="literal">false</span>,<span class="built_in">sizeof</span>(vis));cnt=<span class="number">0</span>;</span><br><span class="line"><span class="built_in">dfs</span>(i);<span class="keyword">if</span>(cnt==n)&#123;<span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,i);<span class="keyword">return</span> <span class="number">0</span>;&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;-1&quot;</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="3-å¥¶ç‰›è§…é£Ÿï¼ˆdining-cppï¼‰"><a href="#3-å¥¶ç‰›è§…é£Ÿï¼ˆdining-cppï¼‰" class="headerlink" title="3.å¥¶ç‰›è§…é£Ÿï¼ˆdining.cppï¼‰"></a>3.å¥¶ç‰›è§…é£Ÿï¼ˆdining.cppï¼‰</h2><h3 id="Description-2"><a href="#Description-2" class="headerlink" title="Description"></a>Description</h3><p>æ¼«é•¿çš„ä¸€å¤©ç»“æŸäº†ï¼Œé¥¥å›°äº¤åŠ çš„å¥¶ç‰›ä»¬å‡†å¤‡è¿”å›ç‰›æ£šã€‚å†œåœºç”±Nç‰‡ç‰§åœºç»„æˆï¼ˆ2â‰¤Nâ‰¤50,000ï¼‰ï¼Œæ–¹ä¾¿èµ·è§ç¼–å·ä¸º1â€¦Nã€‚æ‰€æœ‰å¥¶ç‰›éƒ½è¦å‰å¾€ä½äºç‰§åœºNçš„ç‰›æ£šã€‚å…¶ä»–Nâˆ’1ç‰‡ç‰§åœºä¸­æ¯ç‰‡æœ‰ä¸€å¤´å¥¶ç‰›ã€‚å¥¶ç‰›ä»¬å¯ä»¥é€šè¿‡Mæ¡æ— å‘çš„å°è·¯åœ¨ç‰§åœºä¹‹é—´ç§»åŠ¨ï¼ˆ1â‰¤Mâ‰¤100,000ï¼‰ã€‚ç¬¬iæ¡å°è·¯è¿æ¥ç‰§åœºaiå’Œbiï¼Œé€šè¿‡éœ€è¦æ—¶é—´tiã€‚æ¯å¤´å¥¶ç‰›éƒ½å¯ä»¥ç»è¿‡ä¸€äº›å°è·¯å›åˆ°ç‰›æ£šã€‚</p><p>ç”±äºé¥¥é¥¿ï¼Œå¥¶ç‰›ä»¬å¾ˆä¹äºåœ¨ä»–ä»¬å›å®¶çš„è·¯ä¸Šåœç•™ä¸€æ®µæ—¶é—´è§…é£Ÿã€‚å†œåœºé‡Œæœ‰K(1â‰¤Kâ‰¤n)ä¸ªæœ‰ç¾å‘³çš„å¹²è‰æ†ï¼Œç¬¬iiä¸ªå¹²è‰æ†çš„ç¾å‘³å€¼ä¸ºyiã€‚æ¯å¤´å¥¶ç‰›éƒ½æƒ³è¦åœ¨å¥¹å›ç‰›æ£šçš„è·¯ä¸Šåœ¨æŸä¸€ä¸ªå¹²è‰æ†å¤„åœç•™ï¼Œä½†æ˜¯å¥¹è¿™æ ·åšä»…å½“ç»è¿‡è¿™ä¸ªå¹²è‰æ†ä½¿å¥¹å›ç‰›æ£šçš„æ—¶é—´å¢åŠ ä¸è¶…è¿‡è¿™ä¸ªå¹²è‰æ†çš„ç¾å‘³å€¼ã€‚æ³¨æ„ä¸€å¤´å¥¶ç‰›ä»…ä»…â€œæ­£å¼åœ°â€åœ¨ä¸€ä¸ªå¹²è‰æ†å¤„å› è¿›é£Ÿè€Œåœç•™ï¼Œå³ä½¿å¥¹çš„è·¯å¾„ä¸Šç»è¿‡å…¶ä»–æ”¾æœ‰å¹²è‰æ†çš„ç‰§åœºï¼›å¥¹ä¼šç®€å•åœ°æ— è§†å…¶ä»–çš„å¹²è‰æ†ã€‚</p><h3 id="Input-2"><a href="#Input-2" class="headerlink" title="Input"></a>Input</h3><p>è¾“å…¥çš„ç¬¬ä¸€è¡ŒåŒ…å«ä¸‰ä¸ªç©ºæ ¼åˆ†éš”çš„æ•´æ•°Nï¼ŒMå’ŒKã€‚ä»¥ä¸‹Mè¡Œæ¯è¡ŒåŒ…å«ä¸‰ä¸ªæ•´æ•°aiï¼Œbiå’Œtiï¼Œè¡¨ç¤ºç‰§åœºaiå’Œbiä¹‹é—´æœ‰ä¸€æ¡éœ€è¦tiæ—¶é—´é€šè¿‡çš„å°è·¯ï¼ˆaiä¸ç­‰äºbiï¼Œtiä¸ºä¸è¶…è¿‡10^4çš„æ­£æ•´æ•°ï¼‰ã€‚</p><p>ä»¥ä¸‹Kè¡Œï¼Œæ¯è¡Œä»¥ä¸¤ä¸ªæ•´æ•°æè¿°äº†ä¸€ä¸ªå¹²è‰æ†ï¼šè¯¥å¹²è‰æ†æ‰€åœ¨ç‰§åœºçš„ç¼–å·ï¼Œä»¥åŠå®ƒçš„ç¾å‘³å€¼ï¼ˆä¸€ä¸ªä¸è¶…è¿‡10^9çš„æ­£æ•´æ•°ï¼‰ã€‚åŒä¸€ç‰‡ç‰§åœºä¸­å¯èƒ½ä¼šæœ‰å¤šä¸ªå¹²è‰æ†ã€‚</p><h3 id="Output-2"><a href="#Output-2" class="headerlink" title="Output"></a>Output</h3><p>è¾“å‡ºåŒ…å«Nâˆ’1è¡Œã€‚å¦‚æœç‰§åœºié‡Œçš„å¥¶ç‰›å¯ä»¥åœ¨å›ç‰›æ£šçš„è·¯ä¸Šå‰å¾€æŸä¸€ä¸ªå¹²è‰æ†å¹¶ä¸”åœ¨æ­¤è¿›é£Ÿï¼Œåˆ™ç¬¬iè¡Œä¸ºä¸€ä¸ªæ•´æ•°1ï¼Œå¦åˆ™ä¸ºä¸€ä¸ªæ•´æ•°0ã€‚</p><h3 id="Sample-Input-2"><a href="#Sample-Input-2" class="headerlink" title="Sample Input"></a>Sample Input</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">4 5 1</span><br><span class="line">1 4 10</span><br><span class="line">2 1 20</span><br><span class="line">4 2 3</span><br><span class="line">2 3 5</span><br><span class="line">4 3 2</span><br><span class="line">2 7</span><br></pre></td></tr></table></figure><h3 id="Sample-Output-2"><a href="#Sample-Output-2" class="headerlink" title="Sample Output"></a>Sample Output</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1</span><br><span class="line">1</span><br><span class="line">1</span><br></pre></td></tr></table></figure><h3 id="Hint-2"><a href="#Hint-2" class="headerlink" title="Hint"></a>Hint</h3><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œç‰§åœº3é‡Œçš„å¥¶ç‰›å¯ä»¥åœç•™è¿›é£Ÿï¼Œå› ä¸ºå¥¹å›å»çš„æ—¶é—´ä»…ä¼šå¢åŠ 6ï¼ˆä»2å¢åŠ åˆ°8ï¼‰ï¼Œè€Œè¿™ä¸ªå¢åŠ é‡å¹¶æ²¡æœ‰è¶…è¿‡å¹²è‰æ†çš„ç¾å‘³å€¼7ã€‚ç‰§åœº2é‡Œçš„å¥¶ç‰›æ˜¾ç„¶å¯ä»¥åƒæ‰ç‰§åœº2é‡Œçš„å¹²è‰ï¼Œå› ä¸ºè¿™å¹¶ä¸ä¼šå¯¼è‡´å¥¹çš„æœ€ä½³è·¯å¾„å‘ç”Ÿå˜åŒ–ã€‚å¯¹äºç‰§åœº1é‡Œçš„å¥¶ç‰›æ˜¯ä¸€ä¸ªæœ‰è¶£çš„æƒ…å†µï¼Œå› ä¸ºçœ‹èµ·æ¥å¥¹çš„æœ€ä½³è·¯å¾„ï¼ˆ10ï¼‰å¯èƒ½ä¼šå› ä¸ºå‰å»è¿›é£Ÿè€Œæœ‰è¿‡å¤§çš„å¢åŠ é‡ã€‚ç„¶è€Œï¼Œç¡®å®å­˜åœ¨ä¸€æ¡è·¯å¾„ä½¿å¾—å¥¹å¯ä»¥å‰å»å¹²è‰æ†å¤„åœç•™ï¼šå…ˆåˆ°ç‰§åœº4ï¼Œç„¶åå»ç‰§åœº2ï¼ˆåƒè‰ï¼‰ï¼Œç„¶åå›åˆ°ç‰§åœº4ã€‚</p><h3 id="åˆ†æ-2"><a href="#åˆ†æ-2" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h3><blockquote><p><strong>åšæ³•ä¸€ï¼šSPFA + å°‘é‡é€’æ¨ï¼ˆ100åˆ†ï¼‰</strong></p></blockquote><p>é¦–å…ˆç”¨ SPFA æ±‚å‡ºæ‰€æœ‰ç‚¹åˆ°ç‚¹ n çš„å•æºæœ€çŸ­è·¯å¾„ï¼Œè€ƒè™‘ç»è¿‡æœ‰å¹²è‰çš„ç‰§åœºå¯¹äºå¥¶ç‰›å¿ƒç†çš„å½±å“</p><p>è®¾ $dist[i][0]$ è¡¨ç¤ºåŸæœ¬çš„å•æºæœ€çŸ­è·¯å¾„ï¼Œ$dist[i][1]$ è¡¨ç¤ºåœ¨æŸä¸€ä¸ªç‰§åœºåƒè¿‡è‰åå¿ƒç†ä¸Šçš„æœ€çŸ­è·¯å¾„ï¼Œæ˜¾ç„¶ï¼Œè‹¥å¯¹äºå¥¶ç‰› $i$ æœ‰ $dist[i][1]\leq dist[i][0]$ï¼Œåˆ™å¥¶ç‰› $i$ æ˜¯å¯ä»¥åƒäº†è‰å†èµ°å›ç‰›æ£šçš„</p><p>å…¶å®åœ¨ç¬¬ä¸€éç”¨ SPFA æ±‚ $dist[i][0]$ çš„æ—¶å€™å¯ä»¥æŠŠ $dist[i][1]$ é¡ºå¸¦æ±‚äº†ï¼Œå…·ä½“æ˜¯ï¼š</p><p>$dist[iâ€™][1]=min(dist[i][1]+w,\;dist[i][0]+w-f[iâ€™])$ </p><p>å…¶ä¸­ $iâ€™$ è¡¨ç¤º SPFA å½“å‰è€ƒè™‘çš„ä¸‹ä¸€ä¸ªç‚¹ï¼Œ$f[iâ€™]$ è¡¨ç¤ºå…¶ç¾å‘³ç¨‹åº¦ï¼Œ<strong>æ³¨æ„è¦ä¸¥æ ¼æ§åˆ¶ $dist[i][1]$ ä¸ºåƒäº†è‰æ‰èƒ½å½¢æˆçš„æœ€çŸ­è·¯å¾„ï¼Œå¯ä»¥å°†æ²¡æœ‰å¹²è‰çš„ç‚¹å¼„æˆ $f[x]=-inf$</strong> </p><blockquote><p><strong>åšæ³•äºŒï¼šä¸¤æ¬¡ SPFAï¼ˆ100åˆ†ï¼‰</strong></p></blockquote><p>ç¬¬ä¸€é SPFA æ±‚å„ä¸ªç‚¹åˆ° n çš„å•æºæœ€çŸ­è·¯å¾„ï¼Œç¬¬äºŒé SPFA å¼€å§‹æ—¶ä¸è¦å°† $dist$ æ•°ç»„å…¨éƒ¨èµ‹å€¼ INFï¼Œ<strong>å°†å¸¦æœ‰å¹²è‰çš„é‚£å‡ ä¸ªç‚¹çš„ $dist$ å€¼è®¾å®šæˆç¾å‘³ç¨‹åº¦ï¼Œn ç‚¹çš„ $dist$ ä¸ºé›¶ï¼Œå…¶ä»–ç‚¹çš„ $dist$ è®¾ç½®ä¸º INF å³å¯æ±‚å‡ºé€šè¿‡åƒè‰èµ°å‡ºçš„åˆ° n ç‚¹çš„æœ€çŸ­è·¯å¾„</strong>ï¼Œå‰©ä¸‹çš„éƒ¨åˆ†å¤„ç†æ€è·¯åŒåšæ³•ä¸€</p><h3 id="Codes-2"><a href="#Codes-2" class="headerlink" title="Codes"></a>Codes</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxn 100001</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxm maxn*2</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> t&gt;<span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">fcin</span><span class="params">(t &amp;x)</span></span>&#123;</span><br><span class="line"><span class="type">int</span> sign=<span class="number">1</span>; x=<span class="number">0</span>; <span class="type">char</span> op=<span class="built_in">getchar</span>();</span><br><span class="line"><span class="keyword">while</span>(op&lt;<span class="string">&#x27;0&#x27;</span>||op&gt;<span class="string">&#x27;9&#x27;</span>)&#123;<span class="keyword">if</span>(op==<span class="string">&#x27;-&#x27;</span>) sign=<span class="number">-1</span>;op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line"><span class="keyword">while</span>(op&gt;=<span class="string">&#x27;0&#x27;</span>&amp;&amp;op&lt;=<span class="string">&#x27;9&#x27;</span>)&#123;x=x*<span class="number">10</span>+(op<span class="number">-48</span>);op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line">x*=sign;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> deli[maxn];</span><br><span class="line"><span class="type">int</span> dist[maxn][<span class="number">2</span>];</span><br><span class="line"><span class="type">int</span> to[maxm],w[maxm],nxt[maxm];</span><br><span class="line"><span class="type">int</span> head[maxn],tot;<span class="type">bool</span> vis[maxn];</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">Eadd</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> v,<span class="type">int</span> ww)</span></span>&#123;</span><br><span class="line">to[++tot]=v;w[tot]=ww;</span><br><span class="line">nxt[tot]=head[u];head[u]=tot;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> n,m,k;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">SPFA</span><span class="params">(<span class="type">int</span> s)</span></span>&#123;</span><br><span class="line"><span class="built_in">memset</span>(dist,<span class="number">0x3f</span>,<span class="built_in">sizeof</span>(dist));</span><br><span class="line">queue&lt;<span class="type">int</span>&gt; q;</span><br><span class="line">dist[s][<span class="number">0</span>]=<span class="number">0</span>;</span><br><span class="line">vis[s]=<span class="literal">true</span>;</span><br><span class="line"><span class="type">int</span> qhead; q.<span class="built_in">push</span>(s);</span><br><span class="line"><span class="keyword">while</span>(!q.<span class="built_in">empty</span>())&#123;</span><br><span class="line">qhead=q.<span class="built_in">front</span>();q.<span class="built_in">pop</span>();</span><br><span class="line">vis[qhead]=<span class="literal">false</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=head[qhead];i;i=nxt[i])&#123;</span><br><span class="line"><span class="keyword">if</span>(dist[to[i]][<span class="number">0</span>]&gt;dist[qhead][<span class="number">0</span>]+w[i])&#123;</span><br><span class="line">dist[to[i]][<span class="number">0</span>]=dist[qhead][<span class="number">0</span>]+w[i];</span><br><span class="line"><span class="keyword">if</span>(!vis[to[i]])&#123;</span><br><span class="line">q.<span class="built_in">push</span>(to[i]);</span><br><span class="line">vis[to[i]]=<span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(dist[to[i]][<span class="number">1</span>]&gt;dist[qhead][<span class="number">1</span>]+w[i])&#123;</span><br><span class="line">dist[to[i]][<span class="number">1</span>]=dist[qhead][<span class="number">1</span>]+w[i];</span><br><span class="line"><span class="keyword">if</span>(!vis[to[i]])&#123;</span><br><span class="line">q.<span class="built_in">push</span>(to[i]);</span><br><span class="line">vis[to[i]]=<span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(dist[to[i]][<span class="number">1</span>]&gt;dist[qhead][<span class="number">0</span>]+w[i]-deli[to[i]])&#123;</span><br><span class="line">dist[to[i]][<span class="number">1</span>]=dist[qhead][<span class="number">0</span>]+w[i]-deli[to[i]];</span><br><span class="line"><span class="keyword">if</span>(!vis[to[i]])&#123;</span><br><span class="line">q.<span class="built_in">push</span>(to[i]);</span><br><span class="line">vis[to[i]]=<span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;dining.in&quot;</span>,<span class="string">&quot;r&quot;</span>,stdin);</span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;dining.out&quot;</span>,<span class="string">&quot;w&quot;</span>,stdout);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"><span class="built_in">fcin</span>(n);<span class="built_in">fcin</span>(m);<span class="built_in">fcin</span>(k);</span><br><span class="line"><span class="type">int</span> x,y,z,fx,fy;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++)&#123;</span><br><span class="line"><span class="built_in">fcin</span>(x);<span class="built_in">fcin</span>(y);<span class="built_in">fcin</span>(z);</span><br><span class="line"><span class="built_in">Eadd</span>(x,y,z);<span class="built_in">Eadd</span>(y,x,z);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">memset</span>(deli,<span class="number">-0x3f</span>,<span class="built_in">sizeof</span>(deli));</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=k;i++)&#123;</span><br><span class="line"><span class="built_in">fcin</span>(x);<span class="built_in">fcin</span>(y);</span><br><span class="line">deli[x]=<span class="built_in">max</span>(deli[x],y);</span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">if</span>(deli[n]&gt;<span class="number">0</span>)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n<span class="number">-1</span>;i++) <span class="built_in">printf</span>(<span class="string">&quot;1\n&quot;</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">SPFA</span>(n);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n<span class="number">-1</span>;i++)&#123;</span><br><span class="line"><span class="keyword">if</span>(dist[i][<span class="number">0</span>]&gt;=dist[i][<span class="number">1</span>]) <span class="built_in">printf</span>(<span class="string">&quot;1\n&quot;</span>);</span><br><span class="line"><span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">&quot;0\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SPFA </tag>
            
            <tag> æ¨¡æ‹Ÿ </tag>
            
            <tag> é€’æ¨ </tag>
            
            <tag> å¹¶æŸ¥é›† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¯å‘å¼åˆå¹¶ | äºŒåˆ† | çº¿æ®µæ ‘ | ä¸»  å¸­æ ‘ | 20190712è€ƒè¯•ï¼šè§£é¢˜æŠ¥å‘Š</title>
      <link href="/2019/07/12/2019-07-12-0712%E8%80%83%E8%AF%95%E6%8A%A5%E5%91%8A/"/>
      <url>/2019/07/12/2019-07-12-0712%E8%80%83%E8%AF%95%E6%8A%A5%E5%91%8A/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><h2 id="é¢˜ç›®é™åˆ¶ä¸€è§ˆ"><a href="#é¢˜ç›®é™åˆ¶ä¸€è§ˆ" class="headerlink" title="é¢˜ç›®é™åˆ¶ä¸€è§ˆ"></a>é¢˜ç›®é™åˆ¶ä¸€è§ˆ</h2><div class="table-container"><table><thead><tr><th style="text-align:center">é¢˜ç›®</th><th style="text-align:center">æ—¶é—´é™åˆ¶</th><th style="text-align:center">ç©ºé—´é™åˆ¶</th></tr></thead><tbody><tr><td style="text-align:center">1. pudding</td><td style="text-align:center">$1000$ MS</td><td style="text-align:center">$256$ M</td></tr><tr><td style="text-align:center">2. trouble</td><td style="text-align:center">$1000$ MS</td><td style="text-align:center">$256$ M</td></tr><tr><td style="text-align:center">3. tree</td><td style="text-align:center">$1000$ MS</td><td style="text-align:center">$256$ M</td></tr></tbody></table></div><h2 id="1-æ¢¦å¹»å¸ƒä¸ï¼ˆpudding-cppï¼‰"><a href="#1-æ¢¦å¹»å¸ƒä¸ï¼ˆpudding-cppï¼‰" class="headerlink" title="1. æ¢¦å¹»å¸ƒä¸ï¼ˆpudding.cppï¼‰"></a><a href="https://www.luogu.org/problemnew/show/P3201">1. æ¢¦å¹»å¸ƒä¸ï¼ˆpudding.cppï¼‰</a></h2><h3 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h3><p>Nä¸ªå¸ƒä¸æ‘†æˆä¸€è¡Œ,è¿›è¡ŒMæ¬¡æ“ä½œ.æ¯æ¬¡å°†æŸä¸ªé¢œè‰²çš„å¸ƒä¸å…¨éƒ¨å˜æˆå¦ä¸€ç§é¢œè‰²çš„,ç„¶åå†è¯¢é—®å½“å‰ä¸€å…±æœ‰å¤šå°‘æ®µé¢œè‰².ä¾‹å¦‚é¢œè‰²åˆ†åˆ«ä¸º1,2,2,1çš„å››ä¸ªå¸ƒä¸ä¸€å…±æœ‰3æ®µé¢œè‰².</p><h3 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h3><p>ç¬¬ä¸€è¡Œç»™å‡ºN,Mè¡¨ç¤ºå¸ƒä¸çš„ä¸ªæ•°å’Œå¥½å‹çš„æ“ä½œæ¬¡æ•°.<br>ç¬¬äºŒè¡ŒNä¸ªæ•°A1,A2â€¦Anè¡¨ç¤ºç¬¬iä¸ªå¸ƒä¸çš„é¢œè‰²ä»ç¬¬ä¸‰è¡Œèµ·æœ‰Mè¡Œ,å¯¹äºæ¯ä¸ªæ“ä½œ,è‹¥ç¬¬ä¸€ä¸ªæ•°å­—æ˜¯1è¡¨ç¤ºè¦å¯¹é¢œè‰²è¿›è¡Œæ”¹å˜ï¼Œå…¶åçš„ä¸¤ä¸ªæ•´æ•°X,Yè¡¨ç¤ºå°†æ‰€æœ‰é¢œè‰²ä¸ºXçš„å˜ä¸ºYï¼ŒXå¯èƒ½ç­‰äºY.<br>è‹¥ç¬¬ä¸€ä¸ªæ•°å­—ä¸º2è¡¨ç¤ºè¦è¿›è¡Œè¯¢é—®å½“å‰æœ‰å¤šå°‘æ®µé¢œè‰²ï¼Œè¿™æ—¶ä½ åº”è¯¥è¾“å‡ºä¸€ä¸ªæ•´æ•°. </p><h3 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h3><p>é’ˆå¯¹ç¬¬äºŒç±»æ“ä½œå³è¯¢é—®ï¼Œä¾æ¬¡è¾“å‡ºå½“å‰æœ‰å¤šå°‘æ®µé¢œè‰².</p><h3 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">4 3</span><br><span class="line">1 2 2 1</span><br><span class="line">2</span><br><span class="line">1 2 1</span><br><span class="line">2</span><br></pre></td></tr></table></figure><h3 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">3</span><br><span class="line">1</span><br></pre></td></tr></table></figure><h3 id="Hint"><a href="#Hint" class="headerlink" title="Hint"></a>Hint</h3><p>1&lt;=n,m&lt;=100,000; 0&lt;Ai,x,y&lt;1,000,000</p><h3 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h3><blockquote><p><strong>åšæ³•ä¸€ï¼šæš´åŠ›ï¼ˆ50åˆ†ï¼‰</strong></p></blockquote><p>è€ƒè¯•æ—¶æƒ³çš„æš´åŠ›æ–¹æ³•ï¼Œç”¨ $fir[x]$ å’Œ $las[x]$ è®°å½•é¢œè‰² $x$ ç¬¬ä¸€æ¬¡å’Œæœ€åä¸€æ¬¡å‡ºç°çš„ä½ç½®ï¼Œä¿®æ”¹æ—¶åªéœ€è¦åœ¨è¿™ä¸¤ä¸ªç‚¹ä¹‹é—´å¾ªç¯ä¿®æ”¹å³å¯</p><p>åˆå¹¶ $x$ åˆ° $y$ å°±æ˜¯ $fir[y]=min(fir[x],\;fir[y])$ï¼Œ$las[y]=max(las[x],\;las[y])$ å¾—äº†ä¸€åŠçš„åˆ†</p><blockquote><p><strong>åšæ³•äºŒï¼šæš´åŠ› + å¯å‘å¼åˆå¹¶ï¼ˆ100åˆ†ï¼‰</strong></p></blockquote><p>åº”è¯¥ç®—æ˜¯è€ƒè¯•æ—¶çš„æƒ³æ³•æ›´è¿›ä¸€æ­¥ï¼Œè€ƒè™‘ç”¨ç±»ä¼¼å‰å‘æ˜Ÿçš„æ–¹å¼å­˜å‚¨é¢œè‰² $x$ å‡ºç°çš„æ‰€æœ‰ä½ç½®ï¼Œç„¶åç»Ÿè®¡ä¸€æ¬¡åŸåºåˆ—å¾—åˆ°æœ€åˆçš„ $ans$ï¼Œ<strong>å¯ä»¥å‘ç°å¥½å‹æ“ä½œä¹‹åçš„ $ansâ€™\leq ans$ ï¼Œå› æ­¤åªéœ€åœ¨åŸæ¥çš„ $ans$ ä¸Šåšå‡æ³•å³å¯</strong></p><p>ç»“åˆå¯å‘å¼åˆå¹¶ï¼Œç”¨ $siz(x)$ å­˜é¢œè‰² $x$ å‡ºç°çš„æ¬¡æ•°ï¼Œ<strong>æ¯æ¬¡è¦†ç›–æ—¶ $x\to y$ é€‰æ‹©æŠŠ $siz$ è¾ƒå°çš„é‚£ä¸€ä¸ªåˆå¹¶åˆ°è¾ƒå¤§çš„é‚£ä¸€ä¸ªä¸Šå»ï¼Œç”±äºæœ€åçš„é›¶æ•£é¢œè‰²æ®µé•¿åº¦ä¼šè¶Šæ¥è¶ŠçŸ­ï¼Œå› æ­¤åˆå¹¶çš„æ—¶é—´å¤æ‚åº¦ä¼šé€æ­¥é™ä½ï¼ˆæœ€åç”šè‡³è¾¾åˆ°è¿‘ä¼¼ $O(1)$ çš„å¤æ‚åº¦ï¼‰</strong>ï¼Œä½†æ˜¯è¿™æ ·åšæœ‰äº›æ—¶å€™ä¼šè¿èƒŒé¢˜ç›®çš„è¦æ±‚ï¼Œå› æ­¤ç”¨ $vis(x)$ è¡¨ç¤º $x$ ç»è¿‡ä¿®æ”¹åçš„å®é™…é¢œè‰²ï¼Œåˆå¹¶æ—¶è‹¥ $siz(x)&gt;siz(y)$ åˆ™ $swap(vis(x),\;vis(y))$ å†åˆå¹¶ </p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxn 1000001</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> t&gt;<span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">fcin</span><span class="params">(t &amp;x)</span></span>&#123;</span><br><span class="line"><span class="type">int</span> sign=<span class="number">1</span>; x=<span class="number">0</span>; <span class="type">char</span> op=<span class="built_in">getchar</span>();</span><br><span class="line"><span class="keyword">while</span>(op&lt;<span class="string">&#x27;0&#x27;</span>||op&gt;<span class="string">&#x27;9&#x27;</span>)&#123;<span class="keyword">if</span>(op==<span class="string">&#x27;-&#x27;</span>) sign=<span class="number">-1</span>;op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line"><span class="keyword">while</span>(op&gt;=<span class="string">&#x27;0&#x27;</span>&amp;&amp;op&lt;=<span class="string">&#x27;9&#x27;</span>)&#123;x=x*<span class="number">10</span>+(op<span class="number">-48</span>);op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line">x*=sign;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> fir[maxn],las[maxn],nex[maxn];</span><br><span class="line"><span class="type">int</span> vis[maxn];<span class="type">int</span> n,m,siz[maxn];</span><br><span class="line"><span class="type">int</span> ans;<span class="type">int</span> a[maxn];</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">merge</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> y)</span></span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=las[x];i;i=nex[i]) ans-=(a[i<span class="number">-1</span>]==y)+(a[i+<span class="number">1</span>]==y);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=las[x];i;i=nex[i]) a[i]=y;</span><br><span class="line">nex[fir[x]]=las[y];las[y]=las[x];siz[y]+=siz[x];</span><br><span class="line">fir[x]=siz[x]=las[x]=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;pudding.in&quot;</span>,<span class="string">&quot;r&quot;</span>,stdin);</span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;pudding.out&quot;</span>,<span class="string">&quot;w&quot;</span>,stdout);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"><span class="built_in">fcin</span>(n);<span class="built_in">fcin</span>(m);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line"><span class="built_in">fcin</span>(a[i]);vis[a[i]]=a[i];</span><br><span class="line">ans+=a[i]!=a[i<span class="number">-1</span>];</span><br><span class="line"><span class="keyword">if</span>(!las[a[i]]) fir[a[i]]=i;</span><br><span class="line">siz[a[i]]++;nex[i]=las[a[i]];las[a[i]]=i;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> op,x,y;</span><br><span class="line"><span class="keyword">while</span>(m--)&#123;</span><br><span class="line"><span class="built_in">fcin</span>(op);</span><br><span class="line"><span class="keyword">if</span>(op==<span class="number">1</span>)&#123;</span><br><span class="line"><span class="built_in">fcin</span>(x);<span class="built_in">fcin</span>(y);<span class="keyword">if</span>(x==y) <span class="keyword">continue</span>;</span><br><span class="line"><span class="keyword">if</span>(siz[vis[x]]&gt;siz[vis[y]]) <span class="built_in">swap</span>(vis[x],vis[y]);</span><br><span class="line"><span class="keyword">if</span>(!siz[vis[x]]) <span class="keyword">continue</span>;</span><br><span class="line"><span class="built_in">merge</span>(vis[x],vis[y]);</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,ans);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="2-çš‡å¸çš„çƒ¦æ¼ï¼ˆtrouble-cppï¼‰"><a href="#2-çš‡å¸çš„çƒ¦æ¼ï¼ˆtrouble-cppï¼‰" class="headerlink" title="2. çš‡å¸çš„çƒ¦æ¼ï¼ˆtrouble.cppï¼‰"></a><a href="https://www.luogu.org/problemnew/show/P3201">2. çš‡å¸çš„çƒ¦æ¼ï¼ˆtrouble.cppï¼‰</a></h2><h3 id="Description-1"><a href="#Description-1" class="headerlink" title="Description"></a>Description</h3><p>ç»è¿‡å¤šå¹´çš„æ€æˆ®ï¼Œç§¦çš‡ç»ˆäºç»Ÿä¸€äº†ä¸­å›½ã€‚ä¸ºäº†æŠµå¾¡å¤–æ¥çš„ä¾µç•¥ï¼Œä»–å‡†å¤‡åœ¨å›½åœŸè¾¹å¢ƒå®‰ç½®nåå°†å†›ã€‚ä¸å¹¸çš„æ˜¯è¿™nåå°†å†›ç¾½ç¿¼æ¸ä¸°ï¼Œå¼€å§‹å±•éœ²ä»–ä»¬çš„ç‹¼å­é‡å¿ƒäº†ã€‚ä»–ä»¬æ‹’ç»è¿°èŒã€æ‹’ç»æ¥å—çš‡å¸çš„åœ£æ—¨ã€‚</p><p>ç§¦çš‡å·²ç»å‡†å¤‡å¥½äº†ç§˜å¯†å¤„å†³è¿™äº›æ— ç¤¼çš„è¾¹é˜²å¤§å°†ã€‚</p><p>ä¸è¿‡ä¸ºé˜²å…µå˜ï¼Œä»–å†³å®šå…ˆæˆäºˆè¿™äº›å°†å†›ä¸€äº›å‹‹ç« ï¼Œä¸ºè‡ªå·±èµ¢å¾—æˆ˜ç•¥æ—¶é—´ã€‚å°†å†›ä»¬å¬è¯´ä»–ä»¬å³å°†è¢«æˆäºˆå‹‹ç« éƒ½å¾ˆå¼€å¿ƒï¼Œä»–ä»¬çº·çº·ä¸Šä¹¦è¡¨ç¤ºæ„Ÿè°¢ã€‚ç¬¬iä¸ªå°†å†›è¦æ±‚å¾—åˆ°aiæšä¸åŒé¢œè‰²çš„å‹‹ç« ã€‚ä½†æ˜¯è¿™äº›å°†å†›éƒ½å¾ˆå‚²æ°”ï¼Œå¦‚æœä¸¤ä¸ªç›¸é‚»çš„å°†å†›æ‹¥æœ‰é¢œè‰²ç›¸åŒçš„å‹‹ç« ä»–ä»¬å°±ä¼šè®¤ä¸ºçš‡å¸ä¸å°Šé‡ä»–ä»¬ï¼Œä¼šç«‹å³é€ åï¼ˆç¼–å·ä¸ºiçš„å°†å†›å’Œç¼–å·ä¸ºi+1çš„å°†å†›ç›¸é‚»ï¼›å› ä¸ºä»–ä»¬é©»æ‰çš„è¾¹å¢ƒå¯ä»¥ç±»ä¼¼çœ‹æˆä¸€ä¸ªåœ†å½¢ï¼Œæ‰€ä»¥ç¼–å·1å’Œç¼–å·nçš„å°†å†›ä¹Ÿç›¸é‚»ï¼‰ã€‚</p><p>çš‡å¸ä¸å¾—ä¸æ»¡è¶³æ¯ä¸ªå°†å†›çš„è¦æ±‚ï¼Œä½†å¯¹ä»–ä»¬çš„é£æ‰¬è·‹æ‰ˆæ„Ÿåˆ°å¾ˆæ°”æ„¤ã€‚äºæ˜¯çš‡å¸å†³å®šé“¸é€ å°½é‡å°‘ç§ç±»çš„å‹‹ç« æ¥æ»¡è¶³è¿™äº›ç‹‚å¦„è€…çš„è¦æ±‚ã€‚è¯·é—®ä»–è‡³å°‘è¦é“¸é€ å¤šå°‘ç§é¢œè‰²çš„å‹‹ç« ï¼Ÿ</p><h3 id="Input-1"><a href="#Input-1" class="headerlink" title="Input"></a>Input</h3><p>ç¬¬ä¸€è¡Œæœ‰ä¸€ä¸ªæ•´æ•°n(1&lt;=n&lt;=20000)ã€‚</p><p>æ¥ä¸‹æ¥nè¡Œæ¯è¡Œä¸€ä¸ªæ•´æ•°aiï¼Œè¡¨ç¤ºç¬¬iä¸ªå°†å†›è¦æ±‚å¾—åˆ°å¤šå°‘ç§å‹‹ç« ã€‚(1&lt;=ai&lt;=100000)</p><h3 id="Output-1"><a href="#Output-1" class="headerlink" title="Output"></a>Output</h3><p>è¾“å‡ºä¸€ä¸ªæ•´æ•°ï¼Œå³æœ€å°‘éœ€è¦å¤šå°‘ç§å‹‹ç« ã€‚</p><h3 id="Sample-Input-1"><a href="#Sample-Input-1" class="headerlink" title="Sample Input"></a>Sample Input</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">4</span><br><span class="line">2 2 1 1</span><br></pre></td></tr></table></figure><h3 id="Sample-Output-1"><a href="#Sample-Output-1" class="headerlink" title="Sample Output"></a>Sample Output</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">4</span><br></pre></td></tr></table></figure><h3 id="Hint-1"><a href="#Hint-1" class="headerlink" title="Hint"></a>Hint</h3><p>1&lt;=n,m&lt;=100,000; 0&lt;Ai,x,y&lt;1,000,000</p><h3 id="åˆ†æ-1"><a href="#åˆ†æ-1" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h3><blockquote><p><strong>åšæ³•ä¸€ï¼šçæï¼ˆ60åˆ†ï¼‰</strong></p></blockquote><p>è€ƒè¯•æ—¶ï¼Œæ‰‹ç®—äº†å‡ ä¸ªæ ·ä¾‹ï¼ˆéƒ½æ˜¯n=4ï¼‰å‘ç°æœ€å°çš„å‹‹ç« æ•°å°±æ˜¯åºåˆ—ä¸­ç›¸é‚»å…ƒç´ å’Œçš„æœ€å¤§å€¼ï¼Œå³</p><p>$ans=max(a[1]+a[n],\; a[i]+a<a href="i\in[1,\;n-1]">i+1</a>)$</p><p>è€ƒå®Œäº†æ‰å‘ç° æ²¡æœ‰è€ƒè™‘å¥‡æ•°æƒ…å†µï¼Œä¾‹å¦‚ä¸€ä¸ªåä¾‹å°±æ˜¯ $5\quad 5\quad 5$ ï¼Œç­”æ¡ˆåº”æ˜¯ 15ï¼Œä½†æ˜¯ç¨‹åºè¾“å‡º 10</p><blockquote><p><strong>åšæ³•äºŒï¼šäºŒåˆ† + é€’æ¨ï¼ˆ100åˆ†ï¼‰</strong></p></blockquote><p>äºŒåˆ†æœ€å¤§çš„å‹‹ç« æ•° $mid$ï¼Œè®¾ $max(i)$ ä¸º $i$ å·å°†å†›å’Œ 1 å·å°†å†›æœ€å¤šä¼šæœ‰å¤šå°‘ä¸ªç›¸åŒçš„å‹‹ç« ï¼Œ$min(i)$ åˆ™è¡¨ç¤ºæœ€å°‘çš„ç›¸åŒæ•°ï¼Œ<strong>å¯¹äº $max(i)$ï¼Œå› ä¸º $i$ å·å°†å†›æœ€å¤šæœ‰ $a[i]$ ä¸ªå‹‹ç« ï¼Œåˆ $i$ å·å°†å†›å’Œ $i-1$ å·å°†å†›ä¸èƒ½æœ‰ç›¸åŒçš„å‹‹ç« ï¼Œåˆ™æœ€å¤šæœ‰ $a[1]-max(i-1)$ ä¸ªå‹‹ç« å’Œ 1 å·å°†å†›ç›¸åŒï¼Œå³</strong></p><p>$max(i)=min(a[i],\;a[1]-max(i-1))$</p><p><strong>åˆæ ¹æ®å®¹æ–¥åŸç†å¯ä»¥å¾—å‡º $min(i)$ çš„è¡¨è¾¾å¼</strong></p><p>$min(i)=max(0,\;a[1]+a[i-1]-max(i-1)+a[i]-mid)$</p><p>å…¶ä¸­ä¹Ÿå¯ä¸å†™ $max$ï¼Œåªè¦ $min(n)\leq0$ å°±èƒ½è¯´æ˜ $n$ å·å°†å†›ä¸ä¼šä¸ 1 å·å°†å†›å†²çªï¼Œå½“å‰çš„å‹‹ç« æ•°è¿˜å¯ä»¥æ›´å°‘ï¼Œå¦åˆ™åªèƒ½å¢åŠ å‹‹ç« æ•°</p><blockquote><p><strong>åšæ³•ä¸‰ï¼šæ•°å­¦åŸç†ï¼ˆ100åˆ†ï¼‰</strong></p></blockquote><p>åšæ³•ä¸€åœ¨ n ä¸ºå¶æ•°æ—¶æ˜¯å¯è¡Œçš„ï¼Œå› ä¸ºæ€»èƒ½ç»™å°†å†›ä»¬ä¸¤ä¸¤é…å¯¹ï¼Œäºæ˜¯å¯ä»¥å•ç‹¬è€ƒè™‘ n ä¸ºå¥‡æ•°çš„æƒ…å†µï¼Œ<strong>ç”±äºå¥‡æ•°æ¡ä»¶ä¸‹ï¼Œ$n$ å’Œ 1 çš„ç›¸é‚»å…³ç³»ä¸å¯å¿½ç•¥ï¼Œå› æ­¤æ¯ä¸€ä¸ªç§ç±»çš„å‹‹ç« éƒ½åªèƒ½ä½¿ç”¨$\lfloor \frac{n}{2} \rfloor$ (è¡¨ç¤ºå‘ä¸‹å–æ•´) çš„æ¬¡æ•°</strong>ï¼Œé‚£ä¹ˆå°±å¯ä»¥æ¨å‡º</p><p>$ans=\lceil sum\div \lfloor \frac{n}{2} \rfloor \rceil$ ï¼ˆå› ä¸ºä¸èƒ½å‘æ”¾ä¸è¶³ä¸€ä¸ªçš„å‹‹ç« ï¼Œæ‰€ä»¥ $ans$ å‘ä¸Šå–æ•´ï¼‰</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxn 20002 </span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> t&gt;<span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">fcin</span><span class="params">(t &amp;x)</span></span>&#123;</span><br><span class="line"><span class="type">int</span> sign=<span class="number">1</span>; x=<span class="number">0</span>; <span class="type">char</span> op=<span class="built_in">getchar</span>();</span><br><span class="line"><span class="keyword">while</span>(op&lt;<span class="string">&#x27;0&#x27;</span>||op&gt;<span class="string">&#x27;9&#x27;</span>)&#123;<span class="keyword">if</span>(op==<span class="string">&#x27;-&#x27;</span>) sign=<span class="number">-1</span>;op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line"><span class="keyword">while</span>(op&gt;=<span class="string">&#x27;0&#x27;</span>&amp;&amp;op&lt;=<span class="string">&#x27;9&#x27;</span>)&#123;x=x*<span class="number">10</span>+(op<span class="number">-48</span>);op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line">x*=sign;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> a[maxn],n;</span><br><span class="line"><span class="type">int</span> ans=<span class="number">0</span>,sum;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;trouble.in&quot;</span>,<span class="string">&quot;r&quot;</span>,stdin);</span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;trouble.out&quot;</span>,<span class="string">&quot;w&quot;</span>,stdout);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"><span class="built_in">fcin</span>(n);<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++) <span class="built_in">fcin</span>(a[i]),sum+=a[i];</span><br><span class="line">ans=<span class="built_in">max</span>(ans,a[<span class="number">1</span>]+a[n]);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n<span class="number">-1</span>;i++) ans=<span class="built_in">max</span>(ans,a[i]+a[i+<span class="number">1</span>]);</span><br><span class="line"><span class="keyword">if</span>(!n&amp;<span class="number">1</span>) <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,ans);</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line">n=n/<span class="number">2</span>;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,<span class="built_in">max</span>((<span class="type">int</span>)<span class="built_in">ceil</span>((<span class="type">double</span>)sum/(<span class="type">double</span>)n),ans));</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="3-äºŒå‰æ ‘ï¼ˆtree-cppï¼‰"><a href="#3-äºŒå‰æ ‘ï¼ˆtree-cppï¼‰" class="headerlink" title="3. äºŒå‰æ ‘ï¼ˆtree.cppï¼‰"></a>3. äºŒå‰æ ‘ï¼ˆtree.cppï¼‰</h2><h3 id="Description-2"><a href="#Description-2" class="headerlink" title="Description"></a>Description</h3><p>ç°åœ¨æœ‰ä¸€æ£µäºŒå‰æ ‘ï¼Œæ‰€æœ‰éå¶å­èŠ‚ç‚¹éƒ½æœ‰ä¸¤ä¸ªå­©å­ã€‚åœ¨æ¯ä¸ªå¶å­èŠ‚ç‚¹ä¸Šæœ‰ä¸€ä¸ªæƒå€¼(æœ‰nä¸ªå¶å­èŠ‚ç‚¹ï¼Œæ»¡è¶³è¿™äº›æƒå€¼ä¸º1..nçš„ä¸€ä¸ªæ’åˆ—)ã€‚å¯ä»¥ä»»æ„äº¤æ¢æ¯ä¸ªéå¶å­èŠ‚ç‚¹çš„å·¦å³å­©å­ã€‚</p><p>è¦æ±‚è¿›è¡Œä¸€ç³»åˆ—äº¤æ¢ï¼Œä½¿å¾—æœ€ç»ˆæ‰€æœ‰å¶å­èŠ‚ç‚¹çš„æƒå€¼æŒ‰ç…§ä¸­åºéå†å†™å‡ºæ¥ï¼Œé€†åºå¯¹ä¸ªæ•°æœ€å°‘ã€‚</p><h3 id="Input-2"><a href="#Input-2" class="headerlink" title="Input"></a>Input</h3><p>ç¬¬ä¸€è¡Œnä¸‹é¢æ¯è¡Œï¼Œä¸€ä¸ªæ•°x</p><p>å¦‚æœx==0ï¼Œè¡¨ç¤ºè¿™ä¸ªèŠ‚ç‚¹éå¶å­èŠ‚ç‚¹ï¼Œé€’å½’åœ°å‘ä¸‹è¯»å…¥å…¶å·¦å­©å­å’Œå³å­©å­çš„ä¿¡æ¯ï¼Œ</p><p>å¦‚æœx!=0ï¼Œè¡¨ç¤ºè¿™ä¸ªèŠ‚ç‚¹æ˜¯å¶å­èŠ‚ç‚¹ï¼Œæƒå€¼ä¸ºxã€‚</p><h3 id="Output-2"><a href="#Output-2" class="headerlink" title="Output"></a>Output</h3><p>ä¸€è¡Œï¼Œæœ€å°‘é€†åºå¯¹ä¸ªæ•°ã€‚</p><h3 id="Sample-Input-2"><a href="#Sample-Input-2" class="headerlink" title="Sample Input"></a>Sample Input</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">3</span><br><span class="line">0 0 3 1 2</span><br></pre></td></tr></table></figure><h3 id="Sample-Output-2"><a href="#Sample-Output-2" class="headerlink" title="Sample Output"></a>Sample Output</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">14</span><br></pre></td></tr></table></figure><h3 id="Hint-2"><a href="#Hint-2" class="headerlink" title="Hint"></a>Hint</h3><p>ä¸€è¡Œï¼Œæœ€å°‘é€†åºå¯¹ä¸ªæ•°ã€‚</p><h3 id="åˆ†æ-2"><a href="#åˆ†æ-2" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h3><blockquote><p><strong>åšæ³•ä¸€ï¼šçæï¼ˆ4åˆ†ï¼‰</strong></p></blockquote><p>è€ƒè¯•æ—¶æƒ³çš„æ˜¯åªèƒ½äº¤æ¢å¶å­èŠ‚ç‚¹ï¼Œé‚£ä¹ˆé‚£äº›åªæœ‰ä¸€ä¸ªå¶å­èŠ‚ç‚¹çš„éå¶å­èŠ‚ç‚¹å°±ä¸èƒ½åŠ¨ï¼Œå› æ­¤æŠŠæ‰€æœ‰çš„å¶å­èŠ‚ç‚¹æŒ‰ç…§å‡åºäº¤æ¢ä¹‹åç›´æ¥ä¸­åºéå†ï¼Œç„¶åæ ‘çŠ¶æ•°ç»„æ±‚éå†åçš„åºåˆ—çš„é€†åºå¯¹æ•°</p><blockquote><p><strong>åšæ³•äºŒï¼šæš´åŠ› + ä¸»å¸­æ ‘ï¼ˆ100åˆ†ï¼‰</strong></p></blockquote><p>å¯ä»¥å¯¹æ¯ä¸ªå¶å­èŠ‚ç‚¹å»ºç«‹ä¸€é¢—çº¿æ®µæ ‘æ¥ç»Ÿè®¡é€†åºå¯¹æ•°ï¼Œæ¯æ¬¡è®¿é—®åˆ°ä¸€ä¸ªéå¶å­èŠ‚ç‚¹éƒ½æš´åŠ›åœ°æ¥äº¤æ¢ä¸€ä¸‹å·¦å³å­æ ‘çš„ä½ç½®ï¼Œçœ‹äº¤æ¢å‰å’Œäº¤æ¢åå½¢æˆçš„é€†åºå¯¹æ•°å“ªä¸€ä¸ªæ›´å°‘ï¼Œç”±æ­¤å¾—å‡ºç­”æ¡ˆ</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxn 400003</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> mid ((L+R)&gt;&gt;1)</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> t&gt;<span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">fcin</span><span class="params">(t &amp;x)</span></span>&#123;</span><br><span class="line"><span class="type">int</span> sign=<span class="number">1</span>; x=<span class="number">0</span>; <span class="type">char</span> op=<span class="built_in">getchar</span>();</span><br><span class="line"><span class="keyword">while</span>(op&lt;<span class="string">&#x27;0&#x27;</span>||op&gt;<span class="string">&#x27;9&#x27;</span>)&#123;<span class="keyword">if</span>(op==<span class="string">&#x27;-&#x27;</span>) sign=<span class="number">-1</span>;op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line"><span class="keyword">while</span>(op&gt;=<span class="string">&#x27;0&#x27;</span>&amp;&amp;op&lt;=<span class="string">&#x27;9&#x27;</span>)&#123;x=x*<span class="number">10</span>+(op<span class="number">-48</span>);op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line">x*=sign;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> ch[maxn][<span class="number">2</span>],w[maxn],newp=<span class="number">1</span>;</span><br><span class="line"><span class="type">int</span> lc[maxn&lt;&lt;<span class="number">4</span>],rc[maxn&lt;&lt;<span class="number">4</span>],nodes;</span><br><span class="line">ll val[maxn&lt;&lt;<span class="number">4</span>],cnt[<span class="number">2</span>];<span class="type">int</span> root[maxn];</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">pushup</span><span class="params">(<span class="type">int</span> k)</span></span>&#123;</span><br><span class="line">val[k]=val[lc[k]]+val[rc[k]];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">init</span><span class="params">(<span class="type">int</span> k)</span></span>&#123;</span><br><span class="line"><span class="built_in">fcin</span>(w[k]);</span><br><span class="line"><span class="keyword">if</span>(!w[k])&#123;</span><br><span class="line">ch[k][<span class="number">0</span>]=++newp;</span><br><span class="line"><span class="built_in">init</span>(ch[k][<span class="number">0</span>]);</span><br><span class="line">ch[k][<span class="number">1</span>]=++newp;</span><br><span class="line"><span class="built_in">init</span>(ch[k][<span class="number">1</span>]);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">build</span><span class="params">(<span class="type">int</span> &amp;k,<span class="type">int</span> L,<span class="type">int</span> R,<span class="type">int</span> pos)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(!k) k=++nodes;</span><br><span class="line"><span class="keyword">if</span>(L==R)&#123;val[k]=<span class="number">1</span>;<span class="keyword">return</span>;&#125;</span><br><span class="line"><span class="keyword">if</span>(pos&lt;=mid) <span class="built_in">build</span>(lc[k],L,mid,pos);</span><br><span class="line"><span class="keyword">else</span> <span class="built_in">build</span>(rc[k],mid+<span class="number">1</span>,R,pos);</span><br><span class="line"><span class="built_in">pushup</span>(k);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">unite</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> y)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(!x||!y) <span class="keyword">return</span> x?x:y;</span><br><span class="line">cnt[<span class="number">0</span>]+=(ll)val[rc[x]]*val[lc[y]];</span><br><span class="line">cnt[<span class="number">1</span>]+=(ll)val[lc[x]]*val[rc[y]];</span><br><span class="line">lc[x]=<span class="built_in">unite</span>(lc[x],lc[y]);</span><br><span class="line">rc[x]=<span class="built_in">unite</span>(rc[x],rc[y]);</span><br><span class="line"><span class="built_in">pushup</span>(x);<span class="keyword">return</span> x;</span><br><span class="line">&#125;</span><br><span class="line">ll ans;<span class="type">int</span> n;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dfs</span><span class="params">(<span class="type">int</span> k)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(!k) <span class="keyword">return</span>;</span><br><span class="line"><span class="built_in">dfs</span>(ch[k][<span class="number">0</span>]);<span class="built_in">dfs</span>(ch[k][<span class="number">1</span>]);</span><br><span class="line"><span class="keyword">if</span>(!w[k])&#123;</span><br><span class="line"><span class="built_in">memset</span>(cnt,<span class="number">0</span>,<span class="built_in">sizeof</span>(cnt));</span><br><span class="line">root[k]=<span class="built_in">unite</span>(root[ch[k][<span class="number">0</span>]],root[ch[k][<span class="number">1</span>]]);</span><br><span class="line">ans+=<span class="built_in">min</span>(cnt[<span class="number">0</span>],cnt[<span class="number">1</span>]);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;tree.in&quot;</span>,<span class="string">&quot;r&quot;</span>,stdin);</span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;tree.out&quot;</span>,<span class="string">&quot;w&quot;</span>,stdout);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"><span class="built_in">fcin</span>(n);<span class="built_in">init</span>(<span class="number">1</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=newp;i++)</span><br><span class="line"><span class="keyword">if</span>(w[i]) <span class="built_in">build</span>(root[i],<span class="number">1</span>,n,w[i]);</span><br><span class="line"><span class="built_in">dfs</span>(<span class="number">1</span>);<span class="built_in">printf</span>(<span class="string">&quot;%lld&quot;</span>,ans);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> äºŒåˆ† </tag>
            
            <tag> çº¿æ®µæ ‘ </tag>
            
            <tag> ä¸»å¸­æ ‘ </tag>
            
            <tag> å¯å‘å¼åˆå¹¶ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å›¾è®º | æœ€å°ç”Ÿæˆæ ‘ | åŠ¨æ€è§„åˆ’ |  \ çº¿æ®µæ ‘ | ä¸»å¸­æ ‘ | 20190710è€ƒè¯•ï¼šè§£é¢˜  æŠ¥å‘Š</title>
      <link href="/2019/07/10/2019-07-10-0710%E8%80%83%E8%AF%95/"/>
      <url>/2019/07/10/2019-07-10-0710%E8%80%83%E8%AF%95/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><h2 id="é¢˜ç›®é™åˆ¶ä¸€è§ˆ"><a href="#é¢˜ç›®é™åˆ¶ä¸€è§ˆ" class="headerlink" title="é¢˜ç›®é™åˆ¶ä¸€è§ˆ"></a>é¢˜ç›®é™åˆ¶ä¸€è§ˆ</h2><div class="table-container"><table><thead><tr><th style="text-align:center">é¢˜ç›®</th><th style="text-align:center">æ—¶é—´é™åˆ¶</th><th style="text-align:center">å†…å­˜é™åˆ¶</th></tr></thead><tbody><tr><td style="text-align:center">æŠ“è›‡ Snake</td><td style="text-align:center">$1000$ MS</td><td style="text-align:center">$256$ MB</td></tr><tr><td style="text-align:center">åˆ†ç»„è¡Œèµ° Walk</td><td style="text-align:center">$1000$ MS</td><td style="text-align:center">$512$ MB</td></tr><tr><td style="text-align:center">è°ˆç¬‘é£ç”Ÿ Talk</td><td style="text-align:center">$2000$ MS</td><td style="text-align:center">$512$ MB</td></tr></tbody></table></div><h2 id="Problem-1-æŠ“è›‡-Snake"><a href="#Problem-1-æŠ“è›‡-Snake" class="headerlink" title="Problem#1.    æŠ“è›‡ Snake"></a><a href="https://www.luogu.org/problemnew/show/P5424">Problem#1.    æŠ“è›‡ Snake</a></h2><h3 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h3><p>ä¼ è¯´ï¼Œæ•°åƒå¹´å‰åœ£å¸•ç‰¹é‡Œå…‹æ¶ˆç­äº†å“å°”å…°æ‰€æœ‰çš„è›‡ã€‚ç„¶è€Œï¼Œè›‡ä»¬ç°åœ¨å·åœŸé‡æ¥äº†ï¼åœ£å¸•ç‰¹é‡Œå…‹èŠ‚æ˜¯åœ¨æ¯å¹´çš„3æœˆ17æ—¥ï¼Œæ‰€ä»¥å°æ˜è¦ç”¨å½»åº•æ¸…é™¤å“å°”å…°æ‰€æœ‰çš„è›‡æ¥çºªå¿µåœ£å¸•ç‰¹é‡Œå…‹ã€‚å°æ˜è£…å¤‡äº†ä¸€ä¸ªæ•ç½‘ï¼Œç”¨æ¥æ•æ‰Nç»„æ’æˆä¸€è¡Œçš„è›‡ï¼ˆ1â‰¤Nâ‰¤400ï¼‰ã€‚å°æ˜å¿…é¡»æŒ‰ç…§è¿™äº›ç»„åœ¨è¿™ä¸€è¡Œä¸­å‡ºç°çš„é¡ºåºæ•æ‰æ¯ä¸€ç»„çš„æ‰€æœ‰è›‡ã€‚æ¯å½“å°æ˜æŠ“å®Œä¸€ç»„è›‡ä¹‹åï¼Œå¥¹å°±ä¼šå°†è›‡æ”¾åœ¨ç¬¼å­é‡Œï¼Œç„¶åå¸¦ç€ç©ºçš„æ•ç½‘å¼€å§‹æ•æ‰ä¸‹ä¸€ç»„ã€‚</p><p>ä¸€ä¸ªå¤§å°ä¸ºsçš„æ•ç½‘æ„å‘³ç€å°æ˜å¯ä»¥æŠ“ä½ä»»æ„åŒ…å«gæ¡çš„ä¸€ç»„è›‡ï¼Œå…¶ä¸­gâ‰¤sã€‚ç„¶è€Œï¼Œæ¯å½“å°æ˜ç”¨å¤§å°ä¸ºsçš„æ•ç½‘æŠ“ä½äº†ä¸€ç»„gæ¡è›‡ï¼Œå°±æ„å‘³ç€æµªè´¹äº†sâˆ’gçš„ç©ºé—´ã€‚å°æ˜å¯ä»¥ä»»æ„è®¾å®šæ•ç½‘çš„åˆå§‹å¤§å°ï¼Œå¹¶ä¸”å¥¹å¯ä»¥æ”¹å˜Kæ¬¡æ•ç½‘å¤§å°ï¼ˆ1â‰¤K&lt;Nï¼‰ã€‚</p><p>è¯·å‘Šè¯‰å°æ˜å¥¹æ•æ‰å®Œæ‰€æœ‰ç»„çš„è›‡ä¹‹åå¯ä»¥è¾¾åˆ°çš„æ€»æµªè´¹ç©ºé—´çš„æœ€å°å€¼ã€‚</p><h3 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h3><p>è¾“å…¥çš„ç¬¬ä¸€è¡ŒåŒ…å«Nå’ŒKã€‚ç¬¬äºŒè¡ŒåŒ…å«Nä¸ªæ•´æ•°a1,â€¦,aNï¼Œå…¶ä¸­aiï¼ˆ0â‰¤aiâ‰¤10^6ï¼‰ä¸ºç¬¬iç»„è›‡çš„æ•°é‡ã€‚</p><h3 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h3><p>è¾“å‡ºä¸€ä¸ªæ•´æ•°ï¼Œä¸ºå°æ˜æŠ“ä½æ‰€æœ‰è›‡çš„æ€»æµªè´¹ç©ºé—´çš„æœ€å°å€¼ã€‚</p><h3 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">6 2</span><br><span class="line">7 9 8 2 3 2</span><br></pre></td></tr></table></figure><h3 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">3</span><br></pre></td></tr></table></figure><h3 id="Hint"><a href="#Hint" class="headerlink" title="Hint"></a>Hint</h3><p>å°æ˜å¯ä»¥è®¾ç½®å¥¹çš„æ•ç½‘å¼€å§‹æ—¶å¤§å°ä¸º7ã€‚å½“å¥¹æŠ“å®Œç¬¬ä¸€ç»„è›‡ä¹‹åï¼Œå¥¹å°†å¥¹çš„æ•ç½‘çš„å¤§å°è°ƒæ•´ä¸º9ï¼Œä¿æŒè¿™ä¸ªå¤§å°ç›´åˆ°æŠ“å®Œç¬¬4ç»„è›‡ï¼Œå†å°†æ•ç½‘å¤§å°è°ƒæ•´ä¸º3ã€‚æ€»æµªè´¹ç©ºé—´ä¸º (7âˆ’7)+(9âˆ’9)+(9âˆ’8)+(3âˆ’2)+(3âˆ’3)+(3âˆ’2)=3ã€‚</p><h3 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h3><blockquote><p><strong>åšæ³•ä¸€ï¼šDPï¼Œç©ºé—´äºŒç»´ + $O(n^3)$ æ—¶é—´å¤æ‚åº¦</strong></p></blockquote><p>è®¾ $f[i][j]$ è¡¨ç¤ºæŠ“åˆ°ç¬¬ $i$ ç»„è›‡ï¼Œå¹¶ä¸”æ”¹å˜äº† $j$ æ¬¡ç½‘çš„å¤§å°çš„æœ€å°çš„æµªè´¹ç©ºé—´ï¼Œåˆ™è½¬ç§»æ–¹ç¨‹ä¸ºï¼š</p><p>$f[i][j]=min(f[i][j],\;f[k][j-1]+r[k+1][i])$</p><p>å…¶ä¸­ $k$ æ˜¯æšä¸¾çš„ä¸­è½¬ç‚¹ï¼Œ$r[k+1][j]$ è¡¨ç¤º $[k+1,\;j]$ è¿™æ®µåŒºé—´å†…å‰©ä½™ç©ºé—´çš„æœ€å°å€¼ï¼Œ$r[k+1][j]$ å¯ä»¥ç”¨è¿™æ®µåŒºé—´å†…çš„æœ€å¤§å…ƒç´  $max[k+1][j]$ å‡å»æ¯ä¸ªå…ƒç´ ç´¯åŠ å¾—åˆ°ï¼Œè¿›ä¸€æ­¥åŒ–ç®€å°±æ˜¯ï¼š</p><p>$r[k+1][j]=max[k+1][j]\times(j-(k+1)+1)-sum[k+1][j]$ ï¼Œå…¶ä¸­ $sum[k+1][j]$ ä¸ºåŒºé—´å’Œ</p><p>ç”±äº $max[i][j]$ï¼Œ$sum[i][j]$ï¼Œ$r[i][j]$ éƒ½å¯ä»¥é€šè¿‡é¢„å¤„ç†å¾—åˆ°ï¼Œæ‰€ä»¥å®ƒä»¬çš„æ—¶é—´å¤æ‚åº¦å¯ä»¥å¿½ç•¥ä¸è®¡</p><blockquote><p><strong>åšæ³•äºŒï¼šDPï¼Œç©ºé—´ä¸‰ç»´ + $O(n^3)$ æ—¶é—´å¤æ‚åº¦ + æ»šåŠ¨ä¼˜åŒ–</strong></p></blockquote><p>è®¾ $f[i][j][k]$ è¡¨ç¤ºè¡¨ç¤ºæŠ“åˆ°ç¬¬ $i$ ç»„è›‡ï¼Œå¹¶ä¸”æ”¹å˜äº† $j$ æ¬¡ç½‘çš„å¤§å°ï¼Œç°åœ¨çš„ç½‘çš„å¤§å°ä¸º $a[k]$ çš„æœ€å°æµªè´¹ï¼Œåˆ™è½¬ç§»æ–¹ç¨‹ä¸ºï¼š</p><p>$f[i][j][k]=min(f[i][j][k]ï¼Œf[i-1][j-1][kâ€™])+a[k]-a[i]\quad(kâ€™\in[1ï¼Œn]ï¼Œa[k]\geq a[i])$ </p><p>è¿™ç§æ–¹æ³•æ˜¯è€ƒè¯•çš„æ—¶å€™å†™çš„ï¼Œå¾ˆå®¹æ˜“æƒ³åˆ°çš„ä¸€ä¸ªæ€è·¯ï¼Œè™½ç„¶å°æ˜æ¯æ¬¡æ”¹å˜ç½‘å¤§å°çš„æ—¶å€™å¯ä»¥ä»»æ„ï¼Œä½†æ˜¯ç›´æ¥æ”¹å˜æˆæŸä¸€ç»„è›‡çš„æ•°é‡æ˜¾ç„¶æ˜¯æœ€æ˜æ™ºçš„é€‰æ‹©</p><p>ç®—æ³•çœ‹ä¸Šå»åƒæ˜¯ $O(n^4)$ çš„æ—¶é—´å¤æ‚åº¦ï¼Œ<strong>ç„¶è€Œæ³¨æ„åˆ° $f[i-1][j-1][k]$ ä¸€éfor å¾ªç¯ç®—å®Œä¹‹åä¸ä¼šå†ç®—äº†ï¼Œäºæ˜¯æˆ‘ç”¨äº†ä¸€ä¸ª $f[i][j][0]$ å­˜å‚¨ $min{f[i][j][k]ï¼Œk\in[1ï¼Œn]}$ å¥½åƒå°±èƒ½æŠŠæ—¶é—´æå‡åˆ° $O(n^3)$ çš„æ°´å¹³ï¼ˆç›¸å½“äºé¢„å¤„ç†å§ï¼‰</strong></p><p>æœ€ååŠ ä¸€ä¸ªæ»šåŠ¨ä¼˜åŒ–å°±èƒ½ 2MB è¿‡äº†ï¼ˆåŸé¢˜çš„ç©ºé—´é™åˆ¶ä¸º $128$ MBï¼Œä¸æ˜¯ $256$ MBï¼‰</p><h3 id="Codes"><a href="#Codes" class="headerlink" title="Codes"></a>Codes</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxn 401</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> t&gt;<span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">fcin</span><span class="params">(t &amp;x)</span></span>&#123;</span><br><span class="line"><span class="type">int</span> sign=<span class="number">1</span>; x=<span class="number">0</span>; <span class="type">char</span> op=<span class="built_in">getchar</span>();</span><br><span class="line"><span class="keyword">while</span>(op&lt;<span class="string">&#x27;0&#x27;</span>||op&gt;<span class="string">&#x27;9&#x27;</span>)&#123;<span class="keyword">if</span>(op==<span class="string">&#x27;-&#x27;</span>) sign=<span class="number">-1</span>;op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line"><span class="keyword">while</span>(op&gt;=<span class="string">&#x27;0&#x27;</span>&amp;&amp;op&lt;=<span class="string">&#x27;9&#x27;</span>)&#123;x=x*<span class="number">10</span>+(op<span class="number">-48</span>);op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line">x*=sign;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> f[<span class="number">2</span>][maxn][maxn];</span><br><span class="line"><span class="type">int</span> a[maxn],n,k;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;snake.in&quot;</span>,<span class="string">&quot;r&quot;</span>,stdin);</span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;snake.out&quot;</span>,<span class="string">&quot;w&quot;</span>,stdout);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"><span class="built_in">fcin</span>(n);<span class="built_in">fcin</span>(k);</span><br><span class="line"><span class="built_in">memset</span>(f,<span class="number">127</span>,<span class="built_in">sizeof</span>(f));</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line"><span class="built_in">fcin</span>(a[i]);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line"><span class="keyword">if</span>(a[i]&gt;=a[<span class="number">1</span>]) f[<span class="number">1</span>][<span class="number">0</span>][i]=a[i]-a[<span class="number">1</span>];</span><br><span class="line">f[<span class="number">1</span>][<span class="number">0</span>][<span class="number">0</span>]=<span class="built_in">min</span>(f[<span class="number">1</span>][<span class="number">0</span>][<span class="number">0</span>],f[<span class="number">1</span>][<span class="number">0</span>][i]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">2</span>;i&lt;=n;i++)&#123;</span><br><span class="line"><span class="built_in">memset</span>(f[i&amp;<span class="number">1</span>],<span class="number">127</span>,<span class="built_in">sizeof</span>(f[i&amp;<span class="number">1</span>]));</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;=k;j++)</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> p=<span class="number">1</span>;p&lt;=n;p++)&#123;</span><br><span class="line"><span class="keyword">if</span>(a[p]&lt;a[i]) <span class="keyword">continue</span>;</span><br><span class="line">f[i&amp;<span class="number">1</span>][j][p]=<span class="built_in">min</span>(f[i&amp;<span class="number">1</span>][j][p],f[(i<span class="number">-1</span>)&amp;<span class="number">1</span>][j][p]+a[p]-a[i]);</span><br><span class="line"><span class="keyword">if</span>(j&gt;=<span class="number">1</span>) f[i&amp;<span class="number">1</span>][j][p]=<span class="built_in">min</span>(f[i&amp;<span class="number">1</span>][j][p],f[(i<span class="number">-1</span>)&amp;<span class="number">1</span>][j<span class="number">-1</span>][<span class="number">0</span>]+a[p]-a[i]);</span><br><span class="line">f[i&amp;<span class="number">1</span>][j][<span class="number">0</span>]=<span class="built_in">min</span>(f[i&amp;<span class="number">1</span>][j][<span class="number">0</span>],f[i&amp;<span class="number">1</span>][j][p]);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,f[n&amp;<span class="number">1</span>][k][<span class="number">0</span>]);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="Problem-2-åˆ†ç»„è¡Œèµ°-walk"><a href="#Problem-2-åˆ†ç»„è¡Œèµ°-walk" class="headerlink" title="Problem#2.    åˆ†ç»„è¡Œèµ° walk"></a><a href="https://www.luogu.org/problemnew/show/P5425">Problem#2.    åˆ†ç»„è¡Œèµ° walk</a></h2><h3 id="Description-1"><a href="#Description-1" class="headerlink" title="Description"></a>Description</h3><p>å°æ˜å–œæ¬¢å…»å® ç‰©ï¼Œæƒ³è¦å°†ç¼–å·ä¸º1â€¦Nçš„Nåªå® ç‰©ï¼ˆNâ‰¤7500ï¼‰åˆ†ä¸ºéç©ºçš„Kç»„ï¼ˆ2â‰¤Kâ‰¤Nï¼‰ï¼Œä½¿å¾—ä»»æ„ä¸¤åªæ¥è‡ªä¸åŒç»„çš„å® ç‰©éƒ½éœ€è¦èµ°ä¸€å®šçš„è·ç¦»æ‰èƒ½ç›¸é‡ã€‚å® ç‰©xå’Œå® ç‰©yï¼ˆå…¶ä¸­1â‰¤x&lt;yâ‰¤Nï¼‰æ„¿æ„ä¸ºäº†è§é¢èµ° (2019201913x+2019201949y) mod 2019201997è‹±é‡Œã€‚ç»™å®šä¸€ä¸ªå°†Nåªå® ç‰©åˆ†ä¸ºKä¸ªéç©ºå°ç»„çš„åˆ†ç»„æ–¹æ¡ˆï¼Œä»¤Mä¸ºä»»æ„ä¸¤å¤´æ¥è‡ªä¸åŒç»„çš„å® ç‰©æ„¿æ„ä¸ºäº†è§é¢è¡Œèµ°çš„è‹±é‡Œæ•°çš„æœ€å°å€¼ã€‚ä¸ºäº†æµ‹è¯•å® ç‰©ä»¬ç›¸äº’ä¹‹é—´çš„å¿ è¯šåº¦ï¼Œå°æ˜æƒ³è¦å°†Nå¤´å® ç‰©ä»¥æœ€ä½³çš„æ–¹å¼åˆ†ä¸ºKç»„ï¼Œä½¿å¾—Må°½å¯èƒ½å¤§ã€‚</p><h3 id="Input-1"><a href="#Input-1" class="headerlink" title="Input"></a>Input</h3><p>è¾“å…¥ä»…æœ‰ä¸€è¡Œï¼ŒåŒ…å«Nå’ŒKï¼Œç”¨ç©ºæ ¼åˆ†éš”ã€‚</p><h3 id="Output-1"><a href="#Output-1" class="headerlink" title="Output"></a>Output</h3><p>è¾“å‡ºæœ€ä¼˜çš„Mã€‚</p><h3 id="Sample-Input-1"><a href="#Sample-Input-1" class="headerlink" title="Sample Input"></a>Sample Input</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">3 2</span><br></pre></td></tr></table></figure><h3 id="Sample-Output-1"><a href="#Sample-Output-1" class="headerlink" title="Sample Output"></a>Sample Output</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2019201769</span><br></pre></td></tr></table></figure><h3 id="Hint-1"><a href="#Hint-1" class="headerlink" title="Hint"></a>Hint</h3><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå® ç‰©1å’Œå® ç‰©2æ„¿æ„ä¸ºäº†è§é¢èµ°2019201817è‹±é‡Œã€‚å® ç‰©2å’Œå® ç‰©3æ„¿æ„èµ°2019201685è‹±é‡Œã€‚å® ç‰©1å’Œå® ç‰©3æ„¿æ„èµ°2019201769è‹±é‡Œã€‚æ‰€ä»¥ï¼Œå°†å® ç‰©1å•ç‹¬åˆ†ä¸ºä¸€ç»„ï¼Œå® ç‰©2å’Œå® ç‰©3åˆ†ä¸ºä¸€ç»„ï¼ŒM=min(2019201817,2019201769)=2019201769ï¼ˆè¿™æ˜¯æˆ‘ä»¬åœ¨è¿™ä¸ªé—®é¢˜ä¸­èƒ½å¤Ÿè¾¾åˆ°çš„æœ€ä½³ç»“æœï¼‰ã€‚</p><h3 id="åˆ†æ-1"><a href="#åˆ†æ-1" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h3><blockquote><p><strong>å¸¸è§„æ€è·¯ #1.    æœ€å°ç”Ÿæˆæ ‘</strong></p></blockquote><p>è€ƒè™‘å°†æ¯ä¸€å¯¹å® ç‰© $(xï¼Œy)(x&lt;y)$ çš„è·ç¦»è®¡ç®—å‡ºæ¥å¹¶ç®—æˆä¸€æ¡æ— å‘è¾¹ï¼Œé‚£ä¹ˆåˆ’åˆ†å‡º K ä¸ªé›†åˆä¹‹åï¼ŒåŸæœ¬è¿é€šçš„å›¾ä¼šå‡ºç° K ä¸ªè¿é€šæ”¯ï¼Œé‚£ä¹ˆé—®é¢˜å°±è½¬åŒ–ä¸ºï¼š<strong>æ‰¾åˆ°ä¸€ä¸ªæœ€å°çš„ $d<em>{min}$ï¼Œä½¿å¾—å»æ‰æƒå€¼å¤§äº$d</em>{min}$ çš„è¾¹ä¹‹åï¼ŒåŸå›¾è¢«åˆ†ä¸º K ä¸ªè¿é€šæ”¯</strong></p><p>é‚£ä¹ˆæ­¤é¢˜çš„æ€è·¯å°±å’Œ<a href="http://wuyanxi.top/%E9%A2%98%E7%9B%AE/2019/03/22/%E5%8C%97%E6%9E%81%E9%80%9A%E8%AE%AF%E7%BD%91%E7%BB%9C.html">åŒ—æé€šè®¯ç½‘ç»œ</a> ä¸€æ¨¡ä¸€æ ·äº†ï¼Œæ³¨æ„åˆ° $N\leq7500$ï¼Œæ„å‘³ç€åŠ å…¥çš„è¾¹æ•°ä¸º $N\times (N-1)$ ä¼šè¾¾åˆ°ä¸€ä¸ªå·¨å¤§çš„æ•°é‡çº§ï¼Œæ­¤æ—¶è¿›è¡Œ Kruskal çš„æ’åºæ“ä½œä¼šæ¶ˆè€—å¾ˆå¤šæ—¶é—´ï¼Œæ‰€ä»¥æ±‚æœ€å°ç”Ÿæˆæ ‘çš„æ—¶å€™å¯ä»¥é‡‡ç”¨ Prim ç®—æ³•</p><blockquote><p><strong>è¿›é˜¶æ€è·¯ #2.    è´ªå¿ƒ<em>ï¼ˆBy <a href="https://www.luogu.org/blog/108191/">LTX</a>ï¼‰</em></strong></p></blockquote><p>è®¾ $f(x)=min{dist(i,x)ï¼Œi\in [1ï¼Œn]ï¼Œi\neq x}$ï¼Œå³ä¸º $x$ ä¸å…¶ä»–å® ç‰©ä¹‹é—´çš„æœ€çŸ­è·ç¦»</p><p><strong>åŒä¸Šè¿°æœ€å°ç”Ÿæˆæ ‘çš„æ€æƒ³æœ‰ç€ç›¸ä¼¼ä¹‹å¤„ï¼Œç­”æ¡ˆä¸ºç¬¬ $n-k+1$ å¤§çš„ $f(x)$ å€¼</strong></p><blockquote><p><strong>è¿›é˜¶æ€è·¯ #3.    æ‰¾è§„å¾‹</strong></p></blockquote><p>è®¾ $P=2019201997$ï¼Œåˆ™ $d(x,y)=((P-84)x+(P-48)y)\mod P$</p><p>åŒ–ç®€ï¼š$((P-84)x+(P-48)y)\mod P \Leftrightarrow ((-84x-48y)\mod P+P)\mod P$ </p><p>ç”±äº$x&lt;y\leq7500$ ï¼Œæ‰€ä»¥è®¤ä¸º $(-84x-48y)\mod P=-84x-48y+P$</p><p><strong>åˆ™åŸå¼ï¼š$D=-84x-48y+P$ï¼Œå¯ä»¥å‘ç°ï¼Œè¦ä½¿ $D$ å°½é‡å¤§ï¼Œå°±æ˜¯è®© $x$ å°½é‡å°ï¼Œç”±äºé€‰å‡ºäº†éç©º $K$ ç»„ï¼ŒæŠŠ $1\to K-1$ çš„æ¯ä¸ªå…ƒç´ ç‹¬è‡ªæˆç»„ï¼Œç„¶å $K\to N$ çš„å…ƒç´ åˆ†æˆä¸€ç»„</strong></p><p>é‚£ä¹ˆç­”æ¡ˆå°±æ˜¯ $D=-84x-48y+P$ ï¼Œæ—¶é—´å¤æ‚åº¦ä»…ä»… $O(1)$</p><h3 id="Codes-1"><a href="#Codes-1" class="headerlink" title="Codes"></a>Codes</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxn 7502</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxm maxn*(maxn-1)</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> t&gt;<span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">fcin</span><span class="params">(t &amp;x)</span></span>&#123;</span><br><span class="line"><span class="type">int</span> sign=<span class="number">1</span>; x=<span class="number">0</span>; <span class="type">char</span> op=<span class="built_in">getchar</span>();</span><br><span class="line"><span class="keyword">while</span>(op&lt;<span class="string">&#x27;0&#x27;</span>||op&gt;<span class="string">&#x27;9&#x27;</span>)&#123;<span class="keyword">if</span>(op==<span class="string">&#x27;-&#x27;</span>) sign=<span class="number">-1</span>;op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line"><span class="keyword">while</span>(op&gt;=<span class="string">&#x27;0&#x27;</span>&amp;&amp;op&lt;=<span class="string">&#x27;9&#x27;</span>)&#123;x=x*<span class="number">10</span>+(op<span class="number">-48</span>);op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line">x*=sign;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> n,k;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> ll <span class="title">pets</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> y)</span></span>&#123;</span><br><span class="line"><span class="keyword">return</span> ((ll)<span class="number">2019201913</span>*x+(ll)<span class="number">2019201949</span>*y)%<span class="number">2019201997</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;walk.in&quot;</span>,<span class="string">&quot;r&quot;</span>,stdin);</span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;walk.out&quot;</span>,<span class="string">&quot;w&quot;</span>,stdout);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"><span class="built_in">fcin</span>(n);<span class="built_in">fcin</span>(k);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%lld&quot;</span>,<span class="built_in">pets</span>(k<span class="number">-1</span>,n));</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="Problem-3-è°ˆç¬‘é£ç”Ÿ-talk"><a href="#Problem-3-è°ˆç¬‘é£ç”Ÿ-talk" class="headerlink" title="Problem#3.    è°ˆç¬‘é£ç”Ÿ talk"></a><a href="https://www.luogu.org/problemnew/show/P3899">Problem#3.    è°ˆç¬‘é£ç”Ÿ talk</a></h2><h3 id="Description-2"><a href="#Description-2" class="headerlink" title="Description"></a>Description</h3><p>è®¾ T ä¸ºä¸€æ£µæœ‰æ ¹æ ‘ï¼Œæˆ‘ä»¬åšå¦‚ä¸‹çš„å®šä¹‰ï¼š</p><p>â€¢ è®¾ a å’Œ b ä¸º T ä¸­çš„ä¸¤ä¸ªä¸åŒèŠ‚ç‚¹ã€‚å¦‚æœ a æ˜¯ b çš„ç¥–å…ˆï¼Œé‚£ä¹ˆç§°â€œa æ¯” b ä¸çŸ¥é“é«˜æ˜åˆ°å“ªé‡Œå»äº†â€ã€‚</p><p>â€¢ è®¾ a å’Œ b ä¸º T ä¸­çš„ä¸¤ä¸ªä¸åŒèŠ‚ç‚¹ã€‚å¦‚æœ a ä¸ b åœ¨æ ‘ä¸Šçš„è·ç¦»ä¸è¶…è¿‡æŸä¸ªç»™å®šå¸¸æ•° xï¼Œé‚£ä¹ˆç§°â€œa ä¸ b è°ˆç¬‘é£ç”Ÿâ€ã€‚</p><p>ç»™å®šä¸€æ£µ n ä¸ªèŠ‚ç‚¹çš„æœ‰æ ¹æ ‘ Tï¼ŒèŠ‚ç‚¹çš„ç¼–å·ä¸º 1 âˆ¼ nï¼Œæ ¹èŠ‚ç‚¹ä¸º 1 å·èŠ‚ç‚¹ã€‚ä½ éœ€è¦å›ç­” q ä¸ªè¯¢é—®ï¼Œè¯¢é—®ç»™å®šä¸¤ä¸ªæ•´æ•° p å’Œ kï¼Œé—®æœ‰å¤šå°‘ä¸ªæœ‰åºä¸‰å…ƒç»„ (a; b; c) æ»¡è¶³ï¼š</p><ol><li>aã€ b å’Œ c ä¸º T ä¸­ä¸‰ä¸ªä¸åŒçš„ç‚¹ï¼Œä¸” a ä¸º p å·èŠ‚ç‚¹ï¼›</li><li>a å’Œ b éƒ½æ¯” c ä¸çŸ¥é“é«˜æ˜åˆ°å“ªé‡Œå»äº†ï¼›</li><li>a å’Œ b è°ˆç¬‘é£ç”Ÿã€‚è¿™é‡Œè°ˆç¬‘é£ç”Ÿä¸­çš„å¸¸æ•°ä¸ºç»™å®šçš„ kã€‚</li></ol><h3 id="Input-2"><a href="#Input-2" class="headerlink" title="Input"></a>Input</h3><p>è¾“å…¥æ–‡ä»¶çš„ç¬¬ä¸€è¡Œå«æœ‰ä¸¤ä¸ªæ­£æ•´æ•° n å’Œ qï¼Œåˆ†åˆ«ä»£è¡¨æœ‰æ ¹æ ‘çš„ç‚¹æ•°ä¸è¯¢é—®çš„ä¸ªæ•°ã€‚</p><p>æ¥ä¸‹æ¥ n âˆ’ 1 è¡Œï¼Œæ¯è¡Œæè¿°ä¸€æ¡æ ‘ä¸Šçš„è¾¹ã€‚æ¯è¡Œå«æœ‰ä¸¤ä¸ªæ•´æ•° u å’Œ vï¼Œä»£è¡¨åœ¨èŠ‚ç‚¹ u å’Œ v ä¹‹é—´æœ‰ä¸€æ¡è¾¹ã€‚</p><p>æ¥ä¸‹æ¥ q è¡Œï¼Œæ¯è¡Œæè¿°ä¸€ä¸ªæ“ä½œã€‚ç¬¬ i è¡Œå«æœ‰ä¸¤ä¸ªæ•´æ•°ï¼Œåˆ†åˆ«è¡¨ç¤ºç¬¬ i ä¸ªè¯¢é—®çš„ p å’Œ kã€‚</p><h3 id="Output-2"><a href="#Output-2" class="headerlink" title="Output"></a>Output</h3><p>è¾“å‡º q è¡Œï¼Œæ¯è¡Œå¯¹åº”ä¸€ä¸ªè¯¢é—®ï¼Œä»£è¡¨è¯¢é—®çš„ç­”æ¡ˆã€‚</p><h3 id="Sample-Input-2"><a href="#Sample-Input-2" class="headerlink" title="Sample Input"></a>Sample Input</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">5 3</span><br><span class="line">1 2</span><br><span class="line">1 3</span><br><span class="line">2 4</span><br><span class="line">4 5</span><br><span class="line">2 2</span><br><span class="line">4 1</span><br><span class="line">2 3</span><br></pre></td></tr></table></figure><h3 id="Sample-Output-2"><a href="#Sample-Output-2" class="headerlink" title="Sample Output"></a>Sample Output</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">3</span><br><span class="line">1</span><br><span class="line">3</span><br></pre></td></tr></table></figure><h3 id="Hint-2"><a href="#Hint-2" class="headerlink" title="Hint"></a>Hint</h3><p>æ ·ä¾‹ä¸­çš„æ ‘å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://cdn.luogu.org/upload/pic/6858.png" alt="pic"></p><p>å¯¹äºç¬¬ä¸€ä¸ªå’Œç¬¬ä¸‰ä¸ªè¯¢é—®ï¼Œåˆæ³•çš„ä¸‰å…ƒç»„æœ‰ (2,1,4)ã€ (2,1,5) å’Œ (2,4,5)ã€‚</p><p>å¯¹äºç¬¬äºŒä¸ªè¯¢é—®ï¼Œåˆæ³•çš„ä¸‰å…ƒç»„åªæœ‰ (4,2,5)ã€‚</p><p>æ‰€æœ‰æµ‹è¯•ç‚¹çš„æ•°æ®è§„æ¨¡å¦‚ä¸‹ï¼š</p><p><img src="https://cdn.luogu.org/upload/pic/6859.png" alt="pic2"></p><h3 id="åˆ†æ-2"><a href="#åˆ†æ-2" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h3><blockquote><p>æ˜¾ç„¶å¦‚æœbåœ¨aä¸Šé¢å¯ä»¥ç›´æ¥ç®—</p><p>è€ƒè™‘åœ¨aå­æ ‘ä¸­çš„æƒ…å†µ</p><p>ç”±äºè¦æ±‚çš„ç­”æ¡ˆæ˜¯ä¸€ä¸ªæ·±åº¦è¿ç»­çš„åŒºé—´,è€ƒè™‘ä»¥æ·±åº¦ä¸ºä¸‹æ ‡å»ºä¸»å¸­æ ‘</p><p>å°†æ¯ä¸ªç‚¹çš„è´¡çŒ®size[i]-1ä¾æ¬¡æ’å…¥ä¸»å¸­æ ‘</p><p>ç›´æ¥æŸ¥ä¸€ä¸ªç‚¹å­æ ‘å°±å¯ä»¥äº†</p></blockquote><h3 id="Codes-2"><a href="#Codes-2" class="headerlink" title="Codes"></a>Codes</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxn (300001*10)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxm (maxn*2)</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> t&gt;<span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">fcin</span><span class="params">(t &amp;x)</span></span>&#123;</span><br><span class="line"><span class="type">int</span> sign=<span class="number">1</span>; x=<span class="number">0</span>; <span class="type">char</span> op=<span class="built_in">getchar</span>();</span><br><span class="line"><span class="keyword">while</span>(op&lt;<span class="string">&#x27;0&#x27;</span>||op&gt;<span class="string">&#x27;9&#x27;</span>)&#123;<span class="keyword">if</span>(op==<span class="string">&#x27;-&#x27;</span>) sign=<span class="number">-1</span>;op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line"><span class="keyword">while</span>(op&gt;=<span class="string">&#x27;0&#x27;</span>&amp;&amp;op&lt;=<span class="string">&#x27;9&#x27;</span>)&#123;x=x*<span class="number">10</span>+(op<span class="number">-48</span>);op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line">x*=sign;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> newp,root[maxn];</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">TT</span>&#123;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">TTNode</span>&#123;</span><br><span class="line"><span class="type">int</span> LC,RC; ll VAL;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> lc(x) T[x].LC</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> rc(x) T[x].RC</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> val(x) T[x].VAL</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> mid ((L+R)&gt;&gt;1) </span></span><br><span class="line">&#125;T[maxn&lt;&lt;<span class="number">1</span>];</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">init</span><span class="params">(<span class="type">int</span> &amp;x,<span class="type">int</span> y,<span class="type">int</span> L,<span class="type">int</span> R,<span class="type">int</span> pos,<span class="type">int</span> d)</span></span>&#123;</span><br><span class="line">x=++newp;<span class="built_in">val</span>(x)=<span class="built_in">val</span>(y)+d;</span><br><span class="line"><span class="keyword">if</span>(L==R) <span class="keyword">return</span>;</span><br><span class="line"><span class="built_in">lc</span>(x)=<span class="built_in">lc</span>(y);<span class="built_in">rc</span>(x)=<span class="built_in">rc</span>(y);</span><br><span class="line"><span class="keyword">if</span>(pos&lt;=mid) <span class="built_in">init</span>(<span class="built_in">lc</span>(x),<span class="built_in">lc</span>(y),L,mid,pos,d);</span><br><span class="line"><span class="keyword">else</span> <span class="built_in">init</span>(<span class="built_in">rc</span>(x),<span class="built_in">rc</span>(y),mid+<span class="number">1</span>,R,pos,d);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">ll <span class="title">res</span><span class="params">(<span class="type">int</span> k,<span class="type">int</span> L,<span class="type">int</span> R,<span class="type">int</span> x,<span class="type">int</span> y)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(!k) <span class="keyword">return</span> <span class="number">0</span>; y=(y&gt;R)?R:y;</span><br><span class="line"><span class="keyword">if</span>(x==L &amp;&amp; y==R) <span class="keyword">return</span> <span class="built_in">val</span>(k);</span><br><span class="line"><span class="keyword">if</span>(y&lt;=mid) <span class="keyword">return</span> <span class="built_in">res</span>(<span class="built_in">lc</span>(k),L,mid,x,y);</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(x&gt;mid) <span class="keyword">return</span> <span class="built_in">res</span>(<span class="built_in">rc</span>(k),mid+<span class="number">1</span>,R,x,y);</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">return</span> <span class="built_in">res</span>(<span class="built_in">lc</span>(k),L,mid,x,mid)+<span class="built_in">res</span>(<span class="built_in">rc</span>(k),mid+<span class="number">1</span>,R,mid+<span class="number">1</span>,y);</span><br><span class="line">&#125;</span><br><span class="line">&#125;st;<span class="type">int</span> ref[maxn],dep[maxn],siz[maxn];</span><br><span class="line"><span class="type">int</span> to[maxm],nxt[maxm],head[maxn];</span><br><span class="line"><span class="type">int</span> tot,n,s,dfn,ld[maxn],rd[maxn];</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">Eadd</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> v)</span></span>&#123;</span><br><span class="line">to[++tot]=v;nxt[tot]=head[u];</span><br><span class="line">head[u]=tot;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dfs</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> fu)</span></span>&#123;</span><br><span class="line">ld[u]=++dfn;ref[dfn]=u;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=head[u];i;i=nxt[i])</span><br><span class="line"><span class="keyword">if</span>(to[i]!=fu)&#123;</span><br><span class="line">dep[to[i]]=dep[u]+<span class="number">1</span>;</span><br><span class="line"><span class="built_in">dfs</span>(to[i],u);siz[u]+=siz[to[i]]+<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">rd[u]=dfn;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;talk.in&quot;</span>,<span class="string">&quot;r&quot;</span>,stdin);</span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;talk.out&quot;</span>,<span class="string">&quot;w&quot;</span>,stdout);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"><span class="built_in">fcin</span>(n);<span class="built_in">fcin</span>(s);<span class="type">int</span> x,y;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;n;i++)&#123;</span><br><span class="line"><span class="built_in">fcin</span>(x);<span class="built_in">fcin</span>(y);</span><br><span class="line"><span class="built_in">Eadd</span>(x,y);<span class="built_in">Eadd</span>(y,x);</span><br><span class="line">&#125; <span class="built_in">dfs</span>(<span class="number">1</span>,<span class="number">0</span>); ll ans=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++) dep[<span class="number">0</span>]=<span class="built_in">max</span>(dep[<span class="number">0</span>],dep[i]);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">st.<span class="built_in">init</span>(root[i],root[i<span class="number">-1</span>],<span class="number">0</span>,dep[<span class="number">0</span>],dep[ref[i]],siz[ref[i]]);</span><br><span class="line"><span class="keyword">while</span>(s--)&#123;</span><br><span class="line"><span class="built_in">fcin</span>(x);<span class="built_in">fcin</span>(y);ans=<span class="number">0</span>;</span><br><span class="line">ans+=(ll)siz[x]*<span class="built_in">min</span>(dep[x],y);</span><br><span class="line">ans+=st.<span class="built_in">res</span>(root[rd[x]],<span class="number">0</span>,dep[<span class="number">0</span>],dep[x]+<span class="number">1</span>,dep[x]+y);</span><br><span class="line">ans-=st.<span class="built_in">res</span>(root[ld[x]<span class="number">-1</span>],<span class="number">0</span>,dep[<span class="number">0</span>],dep[x]+<span class="number">1</span>,dep[x]+y);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>,ans);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŠ¨æ€è§„åˆ’ </tag>
            
            <tag> å›¾è®º </tag>
            
            <tag> æœ€å°ç”Ÿæˆæ ‘ </tag>
            
            <tag> çº¿æ®µæ ‘ </tag>
            
            <tag> ä¸»å¸­æ ‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å›¾è®º | äºŒåˆ†å›¾ | äºŒåˆ†å›¾æœ€å¤§åŒ¹é…  ï¼šå­¦ä¹ ç¬”è®°</title>
      <link href="/2019/07/09/2019-07-09-%E4%BA%8C%E5%88%86%E5%9B%BE%E5%8C%B9%E9%85%8D/"/>
      <url>/2019/07/09/2019-07-09-%E4%BA%8C%E5%88%86%E5%9B%BE%E5%8C%B9%E9%85%8D/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><h2 id="äºŒåˆ†å›¾çš„æœ€å¤§åŒ¹é…"><a href="#äºŒåˆ†å›¾çš„æœ€å¤§åŒ¹é…" class="headerlink" title="äºŒåˆ†å›¾çš„æœ€å¤§åŒ¹é…"></a>äºŒåˆ†å›¾çš„æœ€å¤§åŒ¹é…</h2><h3 id="å›é¡¾"><a href="#å›é¡¾" class="headerlink" title="å›é¡¾"></a>å›é¡¾</h3><p>é¦–å…ˆï¼Œå›é¡¾ä¸€ä¸‹ä»€ä¹ˆæ˜¯äºŒåˆ†å›¾ï¼š</p><div class="mermaid-wrap"><pre class="mermaid-src" hidden>  graph LR1---4;2---5;2---63---6  </pre></div><p>å›¾ä¸­çš„ç‚¹èƒ½è¢«åˆ†æˆä¸¤ä¸ªé›†åˆï¼Œä½¿å¾—æ¯ä¸€æ¡è¾¹ä¸¤ç«¯çš„ç‚¹å‡åˆ†å±äºä¸¤ä¸ªé›†åˆï¼Œåˆ¤æ–­äºŒåˆ†å›¾å¯ä»¥ç”¨ <strong>æŸ“è‰²æ³•</strong> æ¥è§£å†³ï¼Œä¾‹å¦‚å›¾ä¸­å°±å¯ä»¥å–ï¼š${1,\;4}\quad{2,5}\quad{3,\;6}$</p><h3 id="äºŒåˆ†å›¾çš„æœ€å¤§åŒ¹é…-1"><a href="#äºŒåˆ†å›¾çš„æœ€å¤§åŒ¹é…-1" class="headerlink" title="äºŒåˆ†å›¾çš„æœ€å¤§åŒ¹é…"></a>äºŒåˆ†å›¾çš„æœ€å¤§åŒ¹é…</h3><p>äºŒåˆ†å›¾çš„åŒ¹é…ï¼Œæ•…åæ€ä¹‰ï¼Œå°±æ˜¯å¯»æ‰¾äºŒåˆ†å›¾ä¸­çš„ä¸€äº›ç‚¹å¯¹ï¼Œä½¿å¾—è¿™äº›ç‚¹å¯¹åˆ†å±äºäºŒåˆ†å›¾çš„ä¸¤ä¸ªé›†åˆï¼Œæœ€å¤§åŒ¹é…ï¼Œå°±æ˜¯å¯»æ‰¾æœ€å¤šèƒ½é€‰æ‹©çš„ç‚¹å¯¹çš„æ•°é‡ï¼Œ<strong>ä¸Šå›¾ä¸­ï¼Œæœ€å¤§åŒ¹é…ä¸º 3</strong></p><p>è§£å†³æœ€å¤§åŒ¹é…ï¼Œå¯ä»¥ç”¨åˆ° <strong>ç½‘ç»œæµ</strong> ä¸­çš„ <strong>è´¹ç”¨æµ</strong> ï¼Œå»ºç«‹æºç‚¹ S å’Œ æ±‡ç‚¹ T è·‘è´¹ç”¨æµï¼Œè¿˜æœ‰ä¸€ç§è‘—åçš„ç®—æ³•å°±æ˜¯ <strong>åŒˆç‰™åˆ©ç®—æ³•</strong></p><h2 id="åŒˆç‰™åˆ©ç®—æ³•"><a href="#åŒˆç‰™åˆ©ç®—æ³•" class="headerlink" title="åŒˆç‰™åˆ©ç®—æ³•"></a>åŒˆç‰™åˆ©ç®—æ³•</h2><h3 id="ç®—æ³•æ¼”ç¤º"><a href="#ç®—æ³•æ¼”ç¤º" class="headerlink" title="ç®—æ³•æ¼”ç¤º"></a>ç®—æ³•æ¼”ç¤º</h3><blockquote><p><strong>é€šè¿‡æ•°ä»£äººçš„åŠªåŠ›ï¼Œä½ ç»ˆäºèµ¶ä¸Šäº†å‰©ç”·å‰©å¥³çš„å¤§æ½®ï¼Œå‡è®¾ä½ æ˜¯ä¸€ä½å…‰è£çš„æ–°ä¸–çºªåª’äººï¼Œåœ¨ä½ çš„æ‰‹ä¸Šæœ‰Nä¸ªå‰©ç”·ï¼ŒMä¸ªå‰©å¥³ï¼Œæ¯ä¸ªäººéƒ½å¯èƒ½å¯¹å¤šåå¼‚æ€§æœ‰å¥½æ„Ÿï¼ˆæš‚æ—¶ä¸è€ƒè™‘ç‰¹æ®Šçš„æ€§å–å‘ï¼‰ï¼Œå¦‚æœä¸€å¯¹ç”·å¥³äº’æœ‰å¥½æ„Ÿï¼Œé‚£ä¹ˆä½ å°±å¯ä»¥æŠŠè¿™ä¸€å¯¹æ’®åˆåœ¨ä¸€èµ·ï¼Œç°åœ¨è®©æˆ‘ä»¬æ— è§†æ‰æ‰€æœ‰çš„å•ç›¸æ€ï¼ˆå¥½å¿§ä¼¤çš„æ„Ÿè§‰ï¼‰ï¼Œä½ æ‹¥æœ‰çš„å¤§æ¦‚å°±æ˜¯ä¸‹é¢è¿™æ ·ä¸€å¼ å…³ç³»å›¾ï¼Œæ¯ä¸€æ¡è¿çº¿éƒ½è¡¨ç¤ºäº’æœ‰å¥½æ„Ÿã€‚</strong></p><p><strong>æœ¬ç€æ•‘äººä¸€å‘½ï¼Œèƒœé€ ä¸ƒçº§æµ®å± çš„åŸåˆ™ï¼Œä½ æƒ³è¦å°½å¯èƒ½åœ°æ’®åˆæ›´å¤šçš„æƒ…ä¾£ï¼ŒåŒˆç‰™åˆ©ç®—æ³•çš„å·¥ä½œæ¨¡å¼ä¼šæ•™ä½ è¿™æ ·åšï¼š</strong><sup><a href="#fn_æ‘˜è‡ªCSDNåšå®¢ï¼šç®—æ³•è®²è§£ï¼šäºŒåˆ†å›¾åŒ¹é…ã€å›¾è®ºã€‘" id="reffn_æ‘˜è‡ªCSDNåšå®¢ï¼šç®—æ³•è®²è§£ï¼šäºŒåˆ†å›¾åŒ¹é…ã€å›¾è®ºã€‘">æ‘˜è‡ªCSDNåšå®¢ï¼šç®—æ³•è®²è§£ï¼šäºŒåˆ†å›¾åŒ¹é…ã€å›¾è®ºã€‘</a></sup></p></blockquote><p><img src="https://img-blog.csdn.net/20130503155150538" alt="pic"></p><p><strong>åŒˆç‰™åˆ©ç®—æ³•çš„æ ¸å¿ƒå°±æ˜¯ï¼šå‘æ‰¬è°¦è®©ç²¾ç¥</strong></p><ol><li><p>ä»ç”·ä¸€å¼€å§‹ï¼Œå°±æ˜¯ï¼ˆç”·ä¸€ï¼Œå¥³ä¸€ï¼‰ç¬¬ä¸€ç»„</p></li><li><p>ç»™ç”·äºŒé€‰æ‹©ï¼Œå‘ç°å¥³äºŒæ²¡æœ‰è¢«é€‰æ‹©ï¼Œï¼ˆç”·äºŒï¼Œå¥³äºŒï¼‰å°±æ˜¯ç¬¬äºŒç»„</p></li><li><p>ç”·ä¸‰æƒ³é€‰å¥³ä¸€ï¼Œä½†æ˜¯å¥³ä¸€å·²ç»è¢«ç”·ä¸€é¢„å®šäº†ï¼Œè¿™æ—¶å°±éœ€è¦ç”·ä¸€ <strong>å‘æ‰¬è°¦è®©ç²¾ç¥</strong> äº†ï¼ŒæŠŠå¥³ä¸€è®©ç»™ç”·ä¸‰ï¼Œè‡ªå·±é€‰æ‹©å¥³äºŒï¼Œä½†æ˜¯æ— å¥ˆå¥³äºŒåˆå…ˆè¢«ç”·äºŒçœ‹ä¸Šï¼Œç”·äºŒä¹Ÿ <strong>å‘æ‰¬è°¦è®©ç²¾ç¥</strong> é€‰æ‹©å¥³ä¸‰ï¼Œè¿™æ ·ä¸‰ä¸ªç”·ç”Ÿéƒ½é€‰æ‹©åˆ°äº†å¥³ç”Ÿï¼Œæƒ…å†µå˜æˆä¸‹å›¾ï¼ˆå‡ºç°ä¸‰ç»„åŒ¹é…ï¼‰</p></li></ol><p><em>é»„è‰²è¾¹è¡¨ç¤ºç”·ç”Ÿæ”¾å¼ƒçš„é€‰æ‹©ï¼Œè“è‰²è¾¹æ˜¯å½“å‰çš„é€‰æ‹©æƒ…å†µ</em><code>cdea</code></p><p><img src="https://img-blog.csdn.net/20130503162147840" alt="pic2"></p><ol><li>æœ€åè€ƒè™‘ç”·å››ï¼Œç”·å››æƒ³é€‰å¥³ä¸‰ï¼Œä½†æ˜¯å¥³ä¸‰è¢«ç”·äºŒé€‰æ‹©ï¼Œè¿™æ˜¯å¦‚æœç”·äºŒ <strong>å‘æ‰¬è°¦è®©ç²¾ç¥</strong> å°†ä¼šè½å•ï¼Œç”·äºŒè¦å®ˆä½è‡ªå·±çš„åº•çº¿ï¼Œæ‰€ä»¥ä»–æ²¡æœ‰è°¦è®©ï¼Œå¯¼è‡´ç”·å››æœ€åè½å•</li></ol><p>å®Œæˆä¸Šè¿°å››æ­¥ä¹‹åï¼Œå·²ç»æ±‚å‡ºäº†äºŒåˆ†å›¾çš„æœ€å¤§åŒ¹é…æ•°ä¸º 3</p><h3 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h3><p>ç”¨ $ref$ æ•°ç»„è¡¨ç¤ºå³ä¾§ç‚¹å½“å‰å¯¹åº”çš„å·¦ä¾§ç‚¹ï¼Œç”¨ DFS é€’å½’ä¸ºå·¦ä¾§ç‚¹é€‰æ‹©ç»„åˆ</p><p>$DFS(u)$ è¡¨ç¤ºç¬¬æ­£åœ¨è€ƒè™‘ç‚¹ $u$  çš„å¯¹åº”ç‚¹ï¼Œå¯¹äº $u$ è¿æ¥çš„æ¯ä¸ªç‚¹ï¼Œåˆ¤æ–­æ˜¯å¦å·²ç»æœ‰å¯¹åº”ç‚¹ï¼Œå¦‚æœæ²¡æœ‰å¯¹åº”ç‚¹ï¼ˆ$ref=0$ï¼‰å°±ç›´æ¥ $ref[to[i]]=u$ æ›´æ–°ï¼Œå¹¶ä¸”è¿”å› trueï¼Œå¦åˆ™éœ€è¦é€’å½’ $ref[to[i]]$ï¼Œçœ‹çœ‹ $ref[to[i]]$ èƒ½ä¸èƒ½æ”¹å˜ç»„åˆï¼Œå¦‚æœèƒ½åˆ™ $ref[to[i]=u]$ æ›´æ–°</p><p>è¿‡ç¨‹ä¸­è‹¥æœ‰ä¸€ä¸ªç‚¹ä¸èƒ½å®ŒæˆåŒ¹é…ï¼Œåº”è¯¥ä¸­æ­¢å¹¶ä¸”è¿”å› false ï¼Œåœ¨ä¸»ç¨‹åºé‡Œæšä¸¾ $1\to n$ çš„æ¯ä¸ªç‚¹ï¼Œçœ‹èƒ½å¦å¢å¹¿ï¼Œå¹¶ä¸”æ›´æ–°å¯¹åº”çš„ $ans$</p> <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">bool</span> <span class="title">dfs</span><span class="params">(<span class="type">int</span> u)</span></span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=head[u];i;i=nxt[i])&#123;</span><br><span class="line"><span class="keyword">if</span>(!vis[to[i]])&#123;</span><br><span class="line">vis[to[i]]=<span class="literal">true</span>;</span><br><span class="line"><span class="keyword">if</span>(!ref[to[i]] || <span class="built_in">dfs</span>(ref[to[i]]))&#123;</span><br><span class="line">ref[to[i]]=u;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">main</span>()&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line"><span class="built_in">memset</span>(vis,<span class="literal">false</span>,<span class="built_in">sizeof</span>(vis));</span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">dfs</span>(i)) ans++;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>è¿˜æ˜¯æ€»ç»“ä¸€äº›ä¾‹é¢˜ï¼š</strong></p><h2 id="æ´›è°·P2756-é£è¡Œå‘˜é…å¯¹æ–¹æ¡ˆé—®é¢˜"><a href="#æ´›è°·P2756-é£è¡Œå‘˜é…å¯¹æ–¹æ¡ˆé—®é¢˜" class="headerlink" title="æ´›è°·P2756 é£è¡Œå‘˜é…å¯¹æ–¹æ¡ˆé—®é¢˜"></a><a href="https://www.luogu.org/problemnew/show/P2756">æ´›è°·P2756 é£è¡Œå‘˜é…å¯¹æ–¹æ¡ˆé—®é¢˜</a></h2><h3 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h3><p>è‹±å›½çš‡å®¶ç©ºå†›ä»æ²¦é™·å›½å¾å‹Ÿäº†å¤§é‡å¤–ç±é£è¡Œå‘˜ã€‚ç”±çš‡å®¶ç©ºå†›æ´¾å‡ºçš„æ¯ä¸€æ¶é£æœºéƒ½éœ€è¦é…å¤‡åœ¨èˆªè¡ŒæŠ€èƒ½å’Œè¯­è¨€ä¸Šèƒ½äº’ç›¸é…åˆçš„2 åé£è¡Œå‘˜ï¼Œå…¶ä¸­1  åæ˜¯è‹±å›½é£è¡Œå‘˜ï¼Œå¦1åæ˜¯å¤–ç±é£è¡Œå‘˜ã€‚åœ¨ä¼—å¤šçš„é£è¡Œå‘˜ä¸­ï¼Œæ¯ä¸€åå¤–ç±é£è¡Œå‘˜éƒ½å¯ä»¥ä¸å…¶ä»–è‹¥å¹²åè‹±å›½é£è¡Œå‘˜å¾ˆå¥½åœ°é…åˆã€‚å¦‚ä½•é€‰æ‹©é…å¯¹é£è¡Œçš„é£è¡Œå‘˜æ‰èƒ½ä½¿ä¸€æ¬¡æ´¾å‡ºæœ€å¤šçš„é£æœºã€‚å¯¹äºç»™å®šçš„å¤–ç±é£è¡Œå‘˜ä¸è‹±å›½é£è¡Œå‘˜çš„é…åˆæƒ…å†µï¼Œè¯•è®¾è®¡ä¸€ä¸ªç®—æ³•æ‰¾å‡ºæœ€ä½³é£è¡Œå‘˜é…å¯¹æ–¹æ¡ˆï¼Œä½¿çš‡å®¶ç©ºå†›ä¸€æ¬¡èƒ½æ´¾å‡ºæœ€å¤šçš„é£æœºã€‚</p><p>å¯¹äºç»™å®šçš„å¤–ç±é£è¡Œå‘˜ä¸è‹±å›½é£è¡Œå‘˜çš„é…åˆæƒ…å†µï¼Œç¼–ç¨‹æ‰¾å‡ºä¸€ä¸ªæœ€ä½³é£è¡Œå‘˜é…å¯¹æ–¹æ¡ˆï¼Œä½¿çš‡å®¶ç©ºå†›ä¸€æ¬¡èƒ½æ´¾å‡ºæœ€å¤šçš„é£æœºã€‚</p><h3 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h3><p>ç¬¬ 1 è¡Œæœ‰ 2 ä¸ªæ­£æ•´æ•° m å’Œ nã€‚n æ˜¯çš‡å®¶ç©ºå†›çš„é£è¡Œå‘˜æ€»æ•°(n&lt;100)ï¼›m æ˜¯å¤–ç±é£è¡Œå‘˜æ•°(m&lt;=n)ã€‚å¤–ç±é£è¡Œå‘˜ç¼–å·ä¸º 1~mï¼›è‹±å›½é£è¡Œå‘˜ç¼–å·ä¸º m+1~nã€‚</p><p>æ¥ä¸‹æ¥æ¯è¡Œæœ‰ 2 ä¸ªæ­£æ•´æ•° i å’Œ jï¼Œè¡¨ç¤ºå¤–ç±é£è¡Œå‘˜ i å¯ä»¥å’Œè‹±å›½é£è¡Œå‘˜ j é…åˆã€‚æœ€åä»¥ 2ä¸ª-1 ç»“æŸã€‚</p><h3 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h3><p>ç¬¬ 1 è¡Œæ˜¯æœ€ä½³é£è¡Œå‘˜é…å¯¹æ–¹æ¡ˆä¸€æ¬¡èƒ½æ´¾å‡ºçš„æœ€å¤šçš„é£æœºæ•° Mã€‚æ¥ä¸‹æ¥ M è¡Œæ˜¯æœ€ä½³é£è¡Œå‘˜é…å¯¹æ–¹æ¡ˆã€‚æ¯è¡Œæœ‰ 2ä¸ªæ­£æ•´æ•° i å’Œ jï¼Œè¡¨ç¤ºåœ¨æœ€ä½³é£è¡Œå‘˜é…å¯¹æ–¹æ¡ˆä¸­ï¼Œé£è¡Œå‘˜ i å’Œé£è¡Œå‘˜ j é…å¯¹ã€‚å¦‚æœæ‰€æ±‚çš„æœ€ä½³é£è¡Œå‘˜é…å¯¹æ–¹æ¡ˆä¸å­˜åœ¨ï¼Œåˆ™è¾“å‡ºâ€˜No Solution!â€™ã€‚</p><h3 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">5 10</span><br><span class="line">1 7</span><br><span class="line">1 8</span><br><span class="line">2 6</span><br><span class="line">2 9</span><br><span class="line">2 10</span><br><span class="line">3 7</span><br><span class="line">3 8</span><br><span class="line">4 7</span><br><span class="line">4 8</span><br><span class="line">5 10</span><br><span class="line">-1 -1</span><br></pre></td></tr></table></figure><h3 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">4</span><br><span class="line">1 7</span><br><span class="line">2 9</span><br><span class="line">3 8</span><br><span class="line">5 10 </span><br></pre></td></tr></table></figure><h3 id="Hint"><a href="#Hint" class="headerlink" title="Hint"></a>Hint</h3><p>No Hint</p><h3 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h3><p>å…¸å‹çš„äºŒåˆ†å›¾æœ€å¤§åŒ¹é…åˆ¤å®šï¼Œå›¾ä¸­çš„å·¦ä¾§ç‚¹å°±æ˜¯ç¼–å· $1\to m$ çš„ç‚¹ï¼Œå³ä¾§ç‚¹å°±æ˜¯ç¼–å· $(m+1)\to n$ çš„ç‚¹ï¼Œç›´æ¥è·‘ä¸€éåŒˆç‰™åˆ©ç®—æ³•å°±å¯ä»¥ï¼ŒæŒ‰ç…§ $ref$ é‡Œé¢çš„å†…å®¹è¾“å‡ºæ–¹æ¡ˆ</p><h3 id="Codes"><a href="#Codes" class="headerlink" title="Codes"></a>Codes</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åŒˆç‰™åˆ©ç®—æ³•  </span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxn 2019</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxm maxn*2</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">int</span> n,m,tot;</span><br><span class="line"><span class="type">int</span> to[maxm],nxt[maxm],head[maxn];</span><br><span class="line"><span class="type">int</span> ref[maxn];<span class="type">bool</span> vis[maxn];</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> t&gt;<span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">fcin</span><span class="params">(t &amp;x)</span></span>&#123;</span><br><span class="line"><span class="type">int</span> sign=<span class="number">1</span>; x=<span class="number">0</span>; <span class="type">char</span> op=<span class="built_in">getchar</span>();</span><br><span class="line"><span class="keyword">while</span>(op&lt;<span class="string">&#x27;0&#x27;</span>||op&gt;<span class="string">&#x27;9&#x27;</span>)&#123;<span class="keyword">if</span>(op==<span class="string">&#x27;-&#x27;</span>) sign=<span class="number">-1</span>;op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line"><span class="keyword">while</span>(op&gt;=<span class="string">&#x27;0&#x27;</span>&amp;&amp;op&lt;=<span class="string">&#x27;9&#x27;</span>)&#123;x=x*<span class="number">10</span>+(op<span class="number">-48</span>);op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line">x*=sign;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">Eadd</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> y)</span></span>&#123;</span><br><span class="line">to[++tot]=y; nxt[tot]=head[x];</span><br><span class="line">head[x]=tot;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">dfs</span><span class="params">(<span class="type">int</span> u)</span></span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=head[u];i;i=nxt[i])&#123;</span><br><span class="line"><span class="keyword">if</span>(!vis[to[i]])&#123;</span><br><span class="line">vis[to[i]]=<span class="literal">true</span>;</span><br><span class="line"><span class="keyword">if</span>(!ref[to[i]] || <span class="built_in">dfs</span>(ref[to[i]]))&#123;</span><br><span class="line">ref[to[i]]=u;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;testin.txt&quot;</span>,<span class="string">&quot;r&quot;</span>,stdin);</span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;testout.txt&quot;</span>,<span class="string">&quot;w&quot;</span>,stdout);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"><span class="built_in">fcin</span>(m);<span class="built_in">fcin</span>(n); <span class="type">int</span> x,y;</span><br><span class="line"><span class="built_in">fcin</span>(x);<span class="built_in">fcin</span>(y);</span><br><span class="line"><span class="keyword">while</span>(x!=<span class="number">-1</span> &amp;&amp; y!=<span class="number">-1</span>)&#123;</span><br><span class="line"><span class="built_in">Eadd</span>(x,y);<span class="built_in">Eadd</span>(y,x);</span><br><span class="line"><span class="built_in">fcin</span>(x);<span class="built_in">fcin</span>(y);</span><br><span class="line">&#125; <span class="type">int</span> ans=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++)&#123;</span><br><span class="line"><span class="built_in">memset</span>(vis,<span class="literal">false</span>,<span class="built_in">sizeof</span>(vis));</span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">dfs</span>(i)) ans++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(!ans) <span class="built_in">printf</span>(<span class="string">&quot;No Solution!&quot;</span>);</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,ans);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=m+<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line"><span class="keyword">if</span>(ref[i]) <span class="built_in">printf</span>(<span class="string">&quot;%d %d\n&quot;</span>,ref[i],i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="CQYZOJ-Contest-181-Pro-02-æ£‹ç›˜è¦†ç›–"><a href="#CQYZOJ-Contest-181-Pro-02-æ£‹ç›˜è¦†ç›–" class="headerlink" title="CQYZOJ_Contest:181_Pro:02 æ£‹ç›˜è¦†ç›–"></a><a href="https://newoj.cqyz.cn/contest/181/problem/P02">CQYZOJ_Contest:181_Pro:02 æ£‹ç›˜è¦†ç›–</a></h2><h3 id="Description-1"><a href="#Description-1" class="headerlink" title="Description"></a>Description</h3><p>ç»™å‡ºä¸€å¼ n*n (n&lt;=100)çš„å›½é™…è±¡æ£‹æ£‹ç›˜ï¼Œå…¶ä¸­è¢«åˆ é™¤äº†ä¸€äº›ç‚¹ï¼Œé—®å¯ä»¥ä½¿ç”¨å¤šå°‘1*2çš„å¤šç±³è¯ºéª¨ç‰Œè¿›è¡Œæ©ç›–ã€‚</p><h3 id="Input-1"><a href="#Input-1" class="headerlink" title="Input"></a>Input</h3><p>ç¬¬ä¸€è¡Œä¸ºnï¼Œmï¼ˆè¡¨ç¤ºæœ‰mä¸ªåˆ é™¤çš„æ ¼å­ï¼‰</p><p>ç¬¬äºŒè¡Œåˆ°m+1è¡Œä¸ºx,yï¼Œåˆ†åˆ«è¡¨ç¤ºåˆ é™¤æ ¼å­æ‰€åœ¨çš„ä½ç½®</p><p>xä¸ºç¬¬xè¡Œï¼Œyä¸ºç¬¬yåˆ—</p><h3 id="Output-1"><a href="#Output-1" class="headerlink" title="Output"></a>Output</h3><p>ä¸€ä¸ªæ•°ï¼Œå³æœ€å¤§è¦†ç›–æ ¼æ•°</p><h3 id="Sample-Input-1"><a href="#Sample-Input-1" class="headerlink" title="Sample Input"></a>Sample Input</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">8 0</span><br></pre></td></tr></table></figure><h3 id="Sample-Output-1"><a href="#Sample-Output-1" class="headerlink" title="Sample Output"></a>Sample Output</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">32</span><br></pre></td></tr></table></figure><h3 id="Hint-1"><a href="#Hint-1" class="headerlink" title="Hint"></a>Hint</h3><p>No Hint</p><h3 id="åˆ†æ-1"><a href="#åˆ†æ-1" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h3><p>ä¸€ä¸ªæ ¼å­ï¼ˆxï¼Œyï¼‰å¯ä»¥ä¸å®ƒä¸Šä¸‹å·¦å³çš„ç›¸é‚»å››ä¸ªæ ¼å­æ„æˆ $1\times 2$ çš„å½¢çŠ¶ä»è€Œè¢«è¦†ç›–ï¼Œé‚£ä¹ˆå¯¹äºä»»æ„ä¸€ä¸ªæ ¼å­ï¼Œå°±å…ˆå°†å…¶ç¼–å·ä¹‹åä¸ä¸Šä¸‹å·¦å³å››ä¸ªç›¸é‚»æ ¼å­è¿ä¸€æ¡æœ‰å‘è¾¹ï¼ˆè¢«åˆ é™¤çš„ç‚¹é™¤å¤–ï¼‰</p><p>æ¥ä¸‹æ¥å¦‚ä½•æŠŠäºŒåˆ†å›¾åŒ¹é…çš„æ€æƒ³å’Œè¿™é“é¢˜è”ç³»èµ·æ¥å‘¢ï¼Ÿè€ƒè™‘å°†æ£‹ç›˜æŒ‰ç…§é»‘ç™½ç›¸é—´çš„æ–¹å¼æŸ“è‰²ï¼š</p><p><img src="https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1562681175899&amp;di=72d978fe1e31b8f83a24aaf9ef166a81&amp;imgtype=0&amp;src=http%3A%2F%2Fgss0.baidu.com%2F9fo3dSag_xI4khGko9WTAnF6hhy%2Fzhidao%2Fpic%2Fitem%2F9922720e0cf3d7ca91445f40f01fbe096b63a952.jpg" alt="pic3"></p><p>å¯ä»¥å‘ç°ï¼Œ<strong>ä¸€ä¸ªæ ¼å­å’Œå®ƒå››å‘¨çš„å››ä¸ªæ ¼å­æ€»æ˜¯åˆ†å±äºé»‘æˆ–ç™½ä¸¤ä¸ªé›†åˆï¼Œä½†æ˜¯æˆ‘ä»¬åˆè¦å°†ä»–ä»¬è¿æ¥èµ·æ¥ï¼Œä¹Ÿå°±æ˜¯å°†é»‘å’Œç™½é›†åˆé‡Œé¢çš„å…ƒç´ é…å¯¹ï¼Œæ±‚æœ€å¤§çš„é…å¯¹æ•°é‡</strong>ï¼Œä¸€ä¸ªäºŒåˆ†å›¾åŒ¹é…è§£å†³é—®é¢˜çš„æ€è·¯å°±æµ®å‡ºæ°´é¢äº†ï¼Œå»ºå›¾ä¹‹åç›´æ¥å¥—æ¨¡æ¿è§£å†³</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxn 400001</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxm maxn*2</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> id(x,y) ((x-1)*m+y)</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> t&gt;<span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">fcin</span><span class="params">(t &amp;x)</span></span>&#123;</span><br><span class="line"><span class="type">int</span> sign=<span class="number">1</span>; x=<span class="number">0</span>; <span class="type">char</span> op=<span class="built_in">getchar</span>();</span><br><span class="line"><span class="keyword">while</span>(op&lt;<span class="string">&#x27;0&#x27;</span>||op&gt;<span class="string">&#x27;9&#x27;</span>)&#123;<span class="keyword">if</span>(op==<span class="string">&#x27;-&#x27;</span>) sign=<span class="number">-1</span>;op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line"><span class="keyword">while</span>(op&gt;=<span class="string">&#x27;0&#x27;</span>&amp;&amp;op&lt;=<span class="string">&#x27;9&#x27;</span>)&#123;x=x*<span class="number">10</span>+(op<span class="number">-48</span>);op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line">x*=sign;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> offx[]=&#123;<span class="number">0</span>,<span class="number">-1</span>,<span class="number">0</span>,<span class="number">1</span>&#125;,offy[]=&#123;<span class="number">-1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;;</span><br><span class="line"><span class="type">int</span> n,m,tot,k; <span class="type">bool</span> del[<span class="number">201</span>][<span class="number">201</span>];</span><br><span class="line"><span class="type">int</span> to[maxm],nxt[maxm],head[maxn];</span><br><span class="line"><span class="type">int</span> ref[maxn]; <span class="type">bool</span> vis[maxn];</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">Eadd</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> y)</span></span>&#123;</span><br><span class="line">to[++tot]=y; nxt[tot]=head[x];</span><br><span class="line">head[x]=tot;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">dfs</span><span class="params">(<span class="type">int</span> u)</span></span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=head[u];i;i=nxt[i])&#123;</span><br><span class="line"><span class="keyword">if</span>(!vis[to[i]])&#123;</span><br><span class="line">vis[to[i]]=<span class="literal">true</span>;</span><br><span class="line"><span class="keyword">if</span>(!ref[to[i]] || <span class="built_in">dfs</span>(ref[to[i]]))&#123;</span><br><span class="line">ref[to[i]]=u;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">build</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="type">int</span> dx,dy; </span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> x=<span class="number">1</span>;x&lt;=n;x++)</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> y=<span class="number">1</span>;y&lt;=n;y++)&#123;</span><br><span class="line"><span class="keyword">if</span>(del[x][y]) <span class="keyword">continue</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> k=<span class="number">1</span>;k&lt;=n;k++)</span><br><span class="line"><span class="keyword">if</span>(!del[k][y] &amp;&amp; k!=x) <span class="built_in">Eadd</span>(<span class="built_in">id</span>(x,y),<span class="built_in">id</span>(k,y));</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> k=<span class="number">1</span>;k&lt;=m;k++)</span><br><span class="line"><span class="keyword">if</span>(!del[x][k] &amp;&amp; k!=y) <span class="built_in">Eadd</span>(<span class="built_in">id</span>(x,y),<span class="built_in">id</span>(x,k));</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;qpfg.in&quot;</span>,<span class="string">&quot;r&quot;</span>,stdin);</span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;qpfg.out&quot;</span>,<span class="string">&quot;w&quot;</span>,stdout);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"><span class="built_in">fcin</span>(n);<span class="built_in">fcin</span>(m);<span class="built_in">fcin</span>(k); <span class="type">int</span> dx,dy;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=k;i++)&#123;</span><br><span class="line"><span class="built_in">fcin</span>(dx);<span class="built_in">fcin</span>(dy);</span><br><span class="line">del[dx][dy]=<span class="literal">true</span>;</span><br><span class="line">&#125; <span class="built_in">build</span>(); <span class="type">int</span> ans=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n*m;i++)&#123;</span><br><span class="line"><span class="built_in">memset</span>(vis,<span class="literal">false</span>,<span class="built_in">sizeof</span>(vis));</span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">dfs</span>(i)) ans++;</span><br><span class="line">&#125; <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,ans/<span class="number">2</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote id="fn_æ‘˜è‡ªCSDNåšå®¢ï¼šç®—æ³•è®²è§£ï¼šäºŒåˆ†å›¾åŒ¹é…ã€å›¾è®ºã€‘"><sup>æ‘˜è‡ªCSDNåšå®¢ï¼šç®—æ³•è®²è§£ï¼šäºŒåˆ†å›¾åŒ¹é…ã€å›¾è®ºã€‘</sup>. <a href="https://blog.csdn.net/qq_41730082/article/details/81162561">https://blog.csdn.net/qq_41730082/article/details/81162561</a><a href="#reffn_æ‘˜è‡ªCSDNåšå®¢ï¼šç®—æ³•è®²è§£ï¼šäºŒåˆ†å›¾åŒ¹é…ã€å›¾è®ºã€‘" title="Jump back to footnote [æ‘˜è‡ªCSDNåšå®¢ï¼šç®—æ³•è®²è§£ï¼šäºŒåˆ†å›¾åŒ¹é…ã€å›¾è®ºã€‘] in the text."> &#8617;</a></blockquote>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å›¾è®º </tag>
            
            <tag> äºŒåˆ†å›¾ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å›¾è®º | 2-SAT | 2-SATé—®é¢˜ï¼šå­¦ä¹ ç¬”è®°</title>
      <link href="/2019/06/28/2019-06-28-twoSAT/"/>
      <url>/2019/06/28/2019-06-28-twoSAT/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><h2 id="2-SAT-é—®é¢˜"><a href="#2-SAT-é—®é¢˜" class="headerlink" title="2-SAT é—®é¢˜"></a>2-SAT é—®é¢˜</h2><blockquote><p>$\mathtt{SAT=Satisfiability}$</p></blockquote><p><strong>2-SAT é—®é¢˜</strong>ï¼Œå°±æ˜¯æ±‚ä¸€ç±» <strong>åœ¨å¤šä¸ªåªæœ‰ä¸¤ä¸ªå…ƒç´ çš„é›†åˆé‡Œé¢é€‰æ‹©å…ƒç´ ï¼Œæ¯ä¸ªé›†åˆé‡Œé¢åªèƒ½é€‰ä¸€ä¸ªï¼Œå¹¶æ»¡è¶³ç»™å®šçš„çº¦æŸæ¡ä»¶</strong> çš„é—®é¢˜ï¼Œå¤„ç†è¿™ç±»çº¦æŸæ¡ä»¶çš„æ€è·¯æœ‰ç‚¹åƒ <strong>å·®åˆ†çº¦æŸç³»ç»Ÿ</strong>ï¼Œå³å»ºç«‹æœ‰å‘å›¾æ¥è¡¨ç¤ºé™åˆ¶æ¡ä»¶ï¼Œè¿™ç±»é—®é¢˜çš„ä¸€èˆ¬å½¢å¼å…¶å®æ˜¯ K-SAT é—®é¢˜ï¼Œå³æ¯ä¸ªå…ƒç´ é‡Œé¢æœ‰ K ä¸ªå…ƒç´ ï¼Œ2-SAT åªæ˜¯å…¶ä¸­çš„ä¸€ä¸ªæƒ…å†µ</p><p>ç”±äº 2-SAT é—®é¢˜ä¸å¥½ç³»ç»Ÿåœ°è§£é‡Šï¼Œä¸‹é¢ç”¨ä¸€ä¸ªä¾‹é¢˜ç»“åˆèµ·æ¥æ€»ç»“ï¼š</p><h2 id="CQYZOJ-P2060-å’Œå¹³å§”å‘˜ä¼š"><a href="#CQYZOJ-P2060-å’Œå¹³å§”å‘˜ä¼š" class="headerlink" title="CQYZOJ P2060.å’Œå¹³å§”å‘˜ä¼š"></a><a href="https://newoj.cqyz.cn/problem/P2060">CQYZOJ P2060.å’Œå¹³å§”å‘˜ä¼š</a></h2><h3 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h3><p> æŸå›½æœ‰nä¸ªå…šæ´¾ï¼Œæ¯ä¸ªå…šæ´¾åœ¨è®®ä¼šä¸­æ°æœ‰2ä¸ªä»£è¡¨ã€‚ç°åœ¨è¦æˆç«‹å’Œå¹³å§”å‘˜ä¼š ï¼Œè¯¥å§”å‘˜ä¼šå¿…é¡»æ»¡è¶³ï¼š</p><p>ã€€ã€€1ã€æ¯ä¸ªå…šæ´¾åœ¨å’Œå¹³å§”å‘˜ä¼šä¸­æœ‰ä¸”åªæœ‰ä¸€ä¸ªä»£è¡¨ ã€‚<br>ã€€ã€€2ã€å¦‚æœæŸä¸¤ä¸ªä»£è¡¨ä¸å’Œï¼Œåˆ™ä»–ä»¬ä¸èƒ½éƒ½å±äºå§”å‘˜ä¼š ã€‚</p><p>ã€€ã€€ä»£è¡¨çš„ç¼–å·ä» 1 åˆ° 2nï¼Œç¼–å·ä¸º 2a-1ã€2a çš„ä»£è¡¨å±äºç¬¬aä¸ªå…šæ´¾ï¼Œæ±‚å’Œå¹³å§”å‘˜ä¼šæ˜¯å¦èƒ½åˆ›ç«‹ã€‚è‹¥èƒ½ï¼Œæ±‚ä¸€ç§æ„æˆæ–¹å¼ã€‚ </p><p>ã€€ã€€<strong>PSï¼šæœ‰nä¸ªç»„ï¼Œç¬¬iä¸ªç»„é‡Œæœ‰ä¸¤ä¸ªèŠ‚ç‚¹Ai, Aiâ€ ã€‚éœ€è¦ä»æ¯ä¸ªç»„ä¸­é€‰å‡ºä¸€ä¸ªã€‚è€ŒæŸäº›ç‚¹ä¸å¯ä»¥åŒæ—¶é€‰å‡ºï¼ˆç§°ä¹‹ä¸ºä¸ç›¸å®¹ï¼‰ã€‚ä»»åŠ¡æ˜¯ä¿è¯é€‰å‡ºçš„nä¸ªç‚¹éƒ½èƒ½ä¸¤ä¸¤ç›¸å®¹ã€‚è¿™ç±»å‹çš„é—®é¢˜æˆ‘ä»¬ç§°ä¹‹ä¸º2-SATé—®é¢˜ã€‚</strong>  </p><h3 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h3><p>ç¬¬ä¸€è¡ŒåŒ…å«ä¸¤ä¸ªæ•´æ•° n å’Œ m ï¼Œåˆ†åˆ«è¡¨ç¤ºå…šæ´¾æ•°é‡å’Œ m å¯¹ä¸å’Œçš„å…³ç³»ã€‚ã€€ã€€æ¥ä¸‹æ¥ m è¡Œæ¯è¡Œä¸¤ä¸ªæ•´æ•° a,bï¼Œè¡¨ç¤ºç¼–å·ä¸º a å’Œ b çš„ä»£è¡¨ä¸å’Œ</p><h3 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h3><p>å¦‚æœèƒ½æˆç«‹ï¼Œåˆ™è¾“å‡ºæ„æˆå§”å‘˜ä¼šçš„ä»£è¡¨çš„ç¼–å·ï¼Œè¾“å‡ºå­—å…¸åºæœ€å°çš„æ–¹æ¡ˆã€‚å¦‚æœä¸èƒ½æˆç«‹ï¼Œåˆ™è¾“å‡ºâ€NIEâ€ã€‚</p><h3 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">3 2</span><br><span class="line">1 3</span><br><span class="line">2 4</span><br></pre></td></tr></table></figure><h3 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td></tr></table></figure><h3 id="Hint"><a href="#Hint" class="headerlink" title="Hint"></a>Hint</h3><p>1â‰¤nâ‰¤8000ï¼Œ0â‰¤m â‰¤20000 ã€‚</p><h2 id="ä¾‹é¢˜åˆ†æ"><a href="#ä¾‹é¢˜åˆ†æ" class="headerlink" title="ä¾‹é¢˜åˆ†æ"></a>ä¾‹é¢˜åˆ†æ</h2><p>å…¸å‹çš„æ¨¡æ¿é¢˜ï¼Œæ¯ä¸ªå…šæ´¾æ˜¯ä¸€ä¸ªé›†åˆï¼Œä¸¤ä¸ªä»£è¡¨æ˜¯å…ƒç´ ï¼Œåªèƒ½é€‰ä¸€ä¸ªä»£è¡¨è¿›å…¥å’Œå¹³å§”å‘˜ä¼šè€Œä¸”è¿˜è¦ä¿è¯é¿å¼€ä»£è¡¨çš„å†²çªå…³ç³»ï¼Œä¹Ÿå°±æ˜¯ä¸åŒé›†åˆå…ƒç´ é—´çš„çº¦æŸå…³ç³»ï¼Œä¸‹é¢æ€»ç»“äº†ä¸¤ç§æ–¹æ³•è§£å†³ 2-SAT é—®é¢˜ï¼Œåˆ†åˆ«æ˜¯ <strong>å¼ºè¿é€šåˆ†é‡æ³•</strong> å’Œ <strong>æŸ“è‰²æ³•</strong></p><h3 id="å»ºç«‹æœ‰å‘å›¾ï¼ˆé‡ç‚¹ï¼‰"><a href="#å»ºç«‹æœ‰å‘å›¾ï¼ˆé‡ç‚¹ï¼‰" class="headerlink" title="å»ºç«‹æœ‰å‘å›¾ï¼ˆé‡ç‚¹ï¼‰"></a>å»ºç«‹æœ‰å‘å›¾ï¼ˆé‡ç‚¹ï¼‰</h3><p>æ— è®ºæ˜¯ <strong>å¼ºè¿é€šåˆ†é‡æ³•</strong> è¿˜æ˜¯ <strong>æŸ“è‰²æ³• </strong> éƒ½è¦æ±‚åœ¨å»ºå¥½çš„æœ‰å‘å›¾ä¸Šè¿›è¡Œæ“ä½œï¼Œå»ºç«‹æœ‰å‘å›¾çš„åŸåˆ™æ˜¯ <strong>å¦‚æœé€‰æ‹© $i$ å°±å¿…é¡»é€‰æ‹© $j$ï¼Œé‚£ä¹ˆå°±è¿æ¥ $i\to j$</strong>ï¼Œä»¥è¾“å…¥æ ·ä¾‹ä½œä¸ºä¾‹å­ï¼š</p><p>3 ä¸ªé›†åˆåˆ†åˆ«æ˜¯ ${1,\;2}$ï¼Œ${3\;4}$ï¼Œ${5,\;6}$ï¼Œå…¶ä¸­ä»£è¡¨ 1 å’Œä»£è¡¨ 3 å†²çªï¼Œé‚£ä¹ˆæ„å‘³ç€é€‰æ‹©äº† 1 å°±åªèƒ½é€‰ 4ï¼Œè¿™æ—¶è¿æ¥ $1\to 4$ï¼ŒåŒç†é€‰äº† 3 å°±åªèƒ½é€‰ 2ï¼Œè¿æ¥ $3\to 2$ï¼Œä»£è¡¨ 2 å’Œ 4 å‘ç”Ÿå†²çªå°±è¿æ¥ $2\to 3$ï¼Œ$4\to 1$ å³å¯</p><h3 id="å¼ºè¿é€šåˆ†é‡æ³•"><a href="#å¼ºè¿é€šåˆ†é‡æ³•" class="headerlink" title="å¼ºè¿é€šåˆ†é‡æ³•"></a>å¼ºè¿é€šåˆ†é‡æ³•</h3><p>é¡¾åæ€ä¹‰ï¼Œå¯¹è¿™å¼ æœ‰å‘å›¾è·‘ä¸€ä¸ª <strong>Tarjan</strong> æˆ–è€… <strong>Kosaraju </strong> è·‘å®Œåæ‰€æœ‰çš„å¼ºè¿é€šåˆ†é‡é‡Œçš„ç‚¹å°±æ˜¯å¿…é€‰çš„ç‚¹ï¼Œç”±äºä¸€ä¸ªé›†åˆé‡Œé¢åªèƒ½é€‰æ‹©ä¸€ä¸ªä»£è¡¨ï¼Œåªè¦ä¸¤ä¸ªå…ƒç´  $i_1,\;i_2$ å‡ºç°åœ¨åŒä¸€ä¸ªå¼ºè¿é€šåˆ†é‡é‡Œå°±è¯´æ˜çŸ›ç›¾ï¼Œé‚£ä¹ˆå°±æ˜¯æ— è§£çš„æƒ…å†µ</p><p>ç”±äºå†™è¿‡å¼ºè¿é€šåˆ†é‡çš„æ¿å­ï¼Œå°±ä¸å†æ­¤æ”¾å‡ºä»£ç äº†</p><h3 id="æŸ“è‰²æ³•ï¼ˆé‡ç‚¹ï¼‰"><a href="#æŸ“è‰²æ³•ï¼ˆé‡ç‚¹ï¼‰" class="headerlink" title="æŸ“è‰²æ³•ï¼ˆé‡ç‚¹ï¼‰"></a>æŸ“è‰²æ³•ï¼ˆé‡ç‚¹ï¼‰</h3><p>æšä¸¾æ¯ä¸ªé›†åˆï¼Œä»ä»£è¡¨ 1 å‡ºå‘ï¼Œé€’å½’åœ°æŠŠå¿…é€‰çš„ç‚¹éƒ½æŸ“ä¸Šé¢œè‰²ï¼Œå¦‚æœæŸ“è‰²è¿‡ç¨‹ä¸­å‘ç°æœ‰æœ‰åŒä¸€é›†åˆçš„ä¸¤ä¸ªå…ƒç´ éƒ½è¢«æŸ“è‰²å°±é“å®šæ˜¯æ— è§£ï¼Œ<strong>è¿™æ—¶éœ€è¦æŠŠä¹‹å‰æŸ“è¿‡çš„è‰²æ¸…é™¤æ‰ï¼Œå¹¶ä»ä»£è¡¨ 2 å¼€å§‹æ–°çš„ä¸€è½®æŸ“è‰²ï¼Œå¦‚æœä»£è¡¨ 2 ä¹Ÿè¿”å›äº†æ— è§£çš„ç»“æœï¼Œæ‰åˆ¤å®šæ•´å¼ å›¾æ˜¯æ— è§£çš„çŠ¶æ€</strong></p><p>æŸ“è‰²æ³•çš„æ€è·¯å’ŒäºŒåˆ†å›¾åˆ¤å®šç›¸ä¼¼ï¼Œä½†æ˜¯è¦æ³¨æ„<strong>ï¼Œæ¯æ¬¡åˆ¤æ–­å±€éƒ¨æ— è§£æ—¶ï¼Œä¸€é‡åˆ°æŸ“è‰²å¤±è´¥çš„æƒ…å†µå¯ä»¥ç›´æ¥è¿”å›æ— è§£ï¼Œä½†æ˜¯æŸ“è‰²æˆåŠŸæ—¶å´ä¸èƒ½ç›´æ¥è¿”å›æœ‰è§£ï¼ˆæƒ³æƒ³åº”è¯¥èƒ½æ˜ç™½â€¦â€¦ï¼‰</strong></p><p>æœ€åçš„é€‰æ‹©æ–¹æ¡ˆå°±æ˜¯æ‰€æœ‰æŸ“è‰²ç‚¹çš„ç¼–å·ï¼Œå¹¶ä¸”è¿™æ˜¯å­—å…¸åºæœ€å°çš„é€‰æ‹©æ–¹æ¡ˆ</p><h2 id="ä¾‹é¢˜ä»£ç "><a href="#ä¾‹é¢˜ä»£ç " class="headerlink" title="ä¾‹é¢˜ä»£ç "></a>ä¾‹é¢˜ä»£ç </h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxn 8001*2</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxm 20001*4</span></span><br><span class="line"><span class="type">int</span> to[maxm],nxt[maxm],head[maxn];</span><br><span class="line"><span class="type">int</span> tot,n,m,other[maxn],stk[maxn];</span><br><span class="line"><span class="type">bool</span> color[maxn];</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> t&gt;<span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">fcin</span><span class="params">(t &amp;x)</span></span>&#123;</span><br><span class="line"><span class="type">int</span> sign=<span class="number">1</span>; x=<span class="number">0</span>; <span class="type">char</span> op=<span class="built_in">getchar</span>();</span><br><span class="line"><span class="keyword">while</span>(op&lt;<span class="string">&#x27;0&#x27;</span>||op&gt;<span class="string">&#x27;9&#x27;</span>)&#123;<span class="keyword">if</span>(op==<span class="string">&#x27;-&#x27;</span>) sign=<span class="number">-1</span>;op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line"><span class="keyword">while</span>(op&gt;=<span class="string">&#x27;0&#x27;</span>&amp;&amp;op&lt;=<span class="string">&#x27;9&#x27;</span>)&#123;x=x*<span class="number">10</span>+(op<span class="number">-48</span>);op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line">x*=sign;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">Eadd</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> v)</span></span>&#123;</span><br><span class="line">to[++tot]=v; nxt[tot]=head[u];</span><br><span class="line">head[u]=tot;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">DFS</span><span class="params">(<span class="type">int</span> u)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(color[u]) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">if</span>(color[other[u]]) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">color[u]=<span class="number">1</span>; stk[++stk[<span class="number">0</span>]]=u;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=head[u];i;i=nxt[i])</span><br><span class="line"><span class="keyword">if</span>(!<span class="built_in">DFS</span>(to[i])) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">twoSAT</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line"><span class="keyword">if</span>(color[<span class="number">2</span>*i<span class="number">-1</span>] &amp;&amp; color[<span class="number">2</span>*i]) <span class="keyword">continue</span>;</span><br><span class="line">stk[<span class="number">0</span>]=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">if</span>(!<span class="built_in">DFS</span>(<span class="number">2</span>*i<span class="number">-1</span>))&#123;</span><br><span class="line"><span class="keyword">while</span>(stk[<span class="number">0</span>]) color[stk[stk[<span class="number">0</span>]]]=<span class="number">0</span>,stk[<span class="number">0</span>]--;</span><br><span class="line"><span class="keyword">if</span>(!<span class="built_in">DFS</span>(<span class="number">2</span>*i)) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">fcin</span>(n);<span class="built_in">fcin</span>(m); <span class="type">int</span> x,y;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">2</span>*n;i++)&#123;</span><br><span class="line"><span class="keyword">if</span>(i&amp;<span class="number">1</span>) other[i]=i+<span class="number">1</span>;</span><br><span class="line"><span class="keyword">else</span> other[i]=i<span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++)&#123;</span><br><span class="line"><span class="built_in">fcin</span>(x);<span class="built_in">fcin</span>(y);</span><br><span class="line"><span class="built_in">Eadd</span>(x,other[y]); <span class="built_in">Eadd</span>(y,other[x]);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;testin.txt&quot;</span>,<span class="string">&quot;r&quot;</span>,stdin);</span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;testout.txt&quot;</span>,<span class="string">&quot;w&quot;</span>,stdout);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"><span class="built_in">init</span>();</span><br><span class="line"><span class="keyword">if</span>(!<span class="built_in">twoSAT</span>()) <span class="built_in">printf</span>(<span class="string">&quot;NIE&quot;</span>);</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">2</span>*n;i++) <span class="keyword">if</span>(color[i]) <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,i);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="æ´›è°·P4782ï¼š2-SAT-é—®é¢˜"><a href="#æ´›è°·P4782ï¼š2-SAT-é—®é¢˜" class="headerlink" title="æ´›è°·P4782ï¼š2-SAT é—®é¢˜"></a><a href="https://www.luogu.org/problemnew/show/P4782">æ´›è°·P4782ï¼š2-SAT é—®é¢˜</a></h2><h3 id="Description-1"><a href="#Description-1" class="headerlink" title="Description"></a>Description</h3><p>æœ‰nä¸ªå¸ƒå°”å˜é‡x1x_1x1~xnx_nxnï¼Œå¦æœ‰mä¸ªéœ€è¦æ»¡è¶³çš„æ¡ä»¶ï¼Œæ¯ä¸ªæ¡ä»¶çš„å½¢å¼éƒ½æ˜¯â€œxiä¸ºtrue/falseæˆ–xjä¸ºtrue/falseâ€ã€‚æ¯”å¦‚â€œx1ä¸ºçœŸæˆ–x3ä¸ºå‡â€ã€â€œx7ä¸ºå‡æˆ–x2ä¸ºå‡â€ã€‚2-SAT é—®é¢˜çš„ç›®æ ‡æ˜¯ç»™æ¯ä¸ªå˜é‡èµ‹å€¼ä½¿å¾—æ‰€æœ‰æ¡ä»¶å¾—åˆ°æ»¡è¶³ã€‚</p><h3 id="Input-1"><a href="#Input-1" class="headerlink" title="Input"></a>Input</h3><p>ç¬¬ä¸€è¡Œä¸¤ä¸ªæ•´æ•°nå’Œmï¼Œæ„ä¹‰å¦‚ä½“é¢æ‰€è¿°ã€‚</p><p>æ¥ä¸‹æ¥mè¡Œæ¯è¡Œ4ä¸ªæ•´æ•° i a j bï¼Œè¡¨ç¤ºâ€œxiä¸ºaæˆ–xjä¸ºbâ€(a,bâˆˆ{0,1})</p><h3 id="Output-1"><a href="#Output-1" class="headerlink" title="Output"></a>Output</h3><p>å¦‚æ— è§£ï¼Œè¾“å‡ºâ€œIMPOSSIBLEâ€ï¼ˆä¸å¸¦å¼•å·ï¼‰; å¦åˆ™è¾“å‡ºâ€POSSIBLEâ€ï¼ˆä¸å¸¦å¼•å·),ä¸‹<br>ä¸€è¡Œnä¸ªæ•´æ•°x1~xnï¼ˆxiâˆˆ{0,1}ï¼‰ï¼Œè¡¨ç¤ºæ„é€ å‡ºçš„è§£ã€‚</p><h3 id="Sample-Input-1"><a href="#Sample-Input-1" class="headerlink" title="Sample Input"></a>Sample Input</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">3 1</span><br><span class="line">1 1 3 0</span><br></pre></td></tr></table></figure><h3 id="Sample-Output-1"><a href="#Sample-Output-1" class="headerlink" title="Sample Output"></a>Sample Output</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">POSSIBLE</span><br><span class="line">0 0 0</span><br><span class="line">// ANOTHER POSSIBLE RESULT:</span><br><span class="line">// 1 1 0</span><br></pre></td></tr></table></figure><h3 id="Hint-1"><a href="#Hint-1" class="headerlink" title="Hint"></a>Hint</h3><p>1&lt;=n,m&lt;=1e6 , å‰3ä¸ªç‚¹å¡å°é”™è¯¯ï¼Œåé¢5ä¸ªç‚¹å¡æ•ˆç‡ï¼Œç”±äºæ•°æ®éšæœºç”Ÿæˆï¼Œå¯èƒ½ä¼šå«æœ‰ï¼ˆ 10 0 10 0ï¼‰ä¹‹ç±»çš„å‘ï¼Œä½†æŒ‰ç…§æœ€å¸¸è§„å†™æ³•çš„å†™çš„æ ‡ç¨‹æ²¡æœ‰å‡ºé”™ï¼Œå„ä¸ªæ•°æ®ç‚¹å¡ä»€ä¹ˆçš„æç¤ºåœ¨æ ‡ç¨‹é‡Œã€‚</p><h3 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h3><p><del>åˆšå¼€å§‹æ²¡çœ‹åˆ° <strong>æˆ–</strong> å¯¼è‡´åˆšäº†åŠä¸ªå°æ—¶å‡ºæ¥å…¨ WAâ€¦â€¦</del>ï¼Œä¸€é“ 2-SAT æ¨¡æ¿é¢˜ï¼Œé¢˜æ„å¤§è‡´æ˜¯ç»™å®š m ç»„æ¡ä»¶ï¼Œç»™ n ä¸ªå˜é‡èµ‹å€¼ä½¿å¾—æ¯ç»„æ¡ä»¶ä¸­è‡³å°‘ä¸€ä¸ªå¾—åˆ°æ»¡è¶³ï¼Œé‚£ä¹ˆå‡è®¾ æ¡ä»¶1 å·²ç»ä¸æ»¡è¶³äº†ï¼Œåˆ™å¿…é¡»æ»¡è¶³æ¡ä»¶2ï¼Œåä¹‹äº¦ç„¶ï¼Œäºæ˜¯å¯¹äºæ ·ä¾‹ <code>1 1 3 0</code> ï¼Œå‡è®¾ $2i-1$ å’Œ $2i$ åˆ†åˆ«è¡¨ç¤ºç¬¬$i$ ä¸ªå˜é‡æ˜¯ 1 å’Œ 0 çš„æƒ…å†µï¼Œè¿æ¥çš„æœ‰å‘è¾¹ï¼ˆå¿…é€‰è¾¹ï¼‰å°±æ˜¯ $4\to6$ å’Œ $5\to 1$ </p><p>æœ€åæŒ‰ç…§æŸ“è‰²æ–¹æ¡ˆè¾“å‡ºå°±å¯ä»¥äº†</p><h3 id="Codes"><a href="#Codes" class="headerlink" title="Codes"></a>Codes</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxn 1000001*2</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxm 1000001*4</span></span><br><span class="line"><span class="type">int</span> to[maxm],nxt[maxm],head[maxn];</span><br><span class="line"><span class="type">int</span> tot,n,m,other[maxn],stk[maxn];</span><br><span class="line"><span class="type">bool</span> color[maxn];</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> t&gt;<span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">fcin</span><span class="params">(t &amp;x)</span></span>&#123;</span><br><span class="line"><span class="type">int</span> sign=<span class="number">1</span>; x=<span class="number">0</span>; <span class="type">char</span> op=<span class="built_in">getchar</span>();</span><br><span class="line"><span class="keyword">while</span>(op&lt;<span class="string">&#x27;0&#x27;</span>||op&gt;<span class="string">&#x27;9&#x27;</span>)&#123;<span class="keyword">if</span>(op==<span class="string">&#x27;-&#x27;</span>) sign=<span class="number">-1</span>;op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line"><span class="keyword">while</span>(op&gt;=<span class="string">&#x27;0&#x27;</span>&amp;&amp;op&lt;=<span class="string">&#x27;9&#x27;</span>)&#123;x=x*<span class="number">10</span>+(op<span class="number">-48</span>);op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line">x*=sign;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">Eadd</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> v)</span></span>&#123;</span><br><span class="line">to[++tot]=v; nxt[tot]=head[u];</span><br><span class="line">head[u]=tot;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">DFS</span><span class="params">(<span class="type">int</span> u)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(color[u]) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">if</span>(color[other[u]]) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">color[u]=<span class="number">1</span>; stk[++stk[<span class="number">0</span>]]=u;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=head[u];i;i=nxt[i])</span><br><span class="line"><span class="keyword">if</span>(!<span class="built_in">DFS</span>(to[i])) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">twoSAT</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line"><span class="keyword">if</span>(color[<span class="number">2</span>*i<span class="number">-1</span>] &amp;&amp; color[<span class="number">2</span>*i]) <span class="keyword">continue</span>;</span><br><span class="line">stk[<span class="number">0</span>]=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">if</span>(!<span class="built_in">DFS</span>(<span class="number">2</span>*i<span class="number">-1</span>))&#123;</span><br><span class="line"><span class="keyword">while</span>(stk[<span class="number">0</span>]) color[stk[stk[<span class="number">0</span>]]]=<span class="number">0</span>,stk[<span class="number">0</span>]--;</span><br><span class="line"><span class="keyword">if</span>(!<span class="built_in">DFS</span>(<span class="number">2</span>*i)) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">fcin</span>(n);<span class="built_in">fcin</span>(m); <span class="type">int</span> x,y,z,w;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">2</span>*n;i++)&#123;</span><br><span class="line"><span class="keyword">if</span>(i&amp;<span class="number">1</span>) other[i]=i+<span class="number">1</span>;</span><br><span class="line"><span class="keyword">else</span> other[i]=i<span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 2*i è¡¨ç¤º xi=0 ï¼Œ 2*i-1 è¡¨ç¤º xi=0  </span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++)&#123;</span><br><span class="line"><span class="built_in">fcin</span>(x);<span class="built_in">fcin</span>(y);<span class="built_in">fcin</span>(z);<span class="built_in">fcin</span>(w);</span><br><span class="line">x=y?<span class="number">2</span>*x<span class="number">-1</span>:<span class="number">2</span>*x; z=w?<span class="number">2</span>*z<span class="number">-1</span>:<span class="number">2</span>*z;</span><br><span class="line"><span class="built_in">Eadd</span>(other[x],z); <span class="built_in">Eadd</span>(other[z],x);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;testin.txt&quot;</span>,<span class="string">&quot;r&quot;</span>,stdin);</span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;testout.txt&quot;</span>,<span class="string">&quot;w&quot;</span>,stdout);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"><span class="built_in">init</span>();</span><br><span class="line"><span class="keyword">if</span>(!<span class="built_in">twoSAT</span>()) <span class="built_in">printf</span>(<span class="string">&quot;IMPOSSIBLE&quot;</span>);</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;POSSIBLE\n&quot;</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line"><span class="keyword">if</span>(color[<span class="number">2</span>*i<span class="number">-1</span>]) <span class="built_in">printf</span>(<span class="string">&quot;1 &quot;</span>);</span><br><span class="line"><span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">&quot;0 &quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="CQYZOJ-P2061ï¼šç‚¸å¼¹æ¸¸æˆ"><a href="#CQYZOJ-P2061ï¼šç‚¸å¼¹æ¸¸æˆ" class="headerlink" title="CQYZOJ_P2061ï¼šç‚¸å¼¹æ¸¸æˆ"></a><a href="https://newoj.cqyz.cn/problem/P2061">CQYZOJ_P2061ï¼šç‚¸å¼¹æ¸¸æˆ</a></h2><h3 id="Description-2"><a href="#Description-2" class="headerlink" title="Description"></a>Description</h3><p> ç»™nå¯¹å¹³é¢ä¸Šçš„ç‚¹ï¼Œä½ å¯ä»¥åœ¨æ¯å¯¹ç‚¹ä¸­é€‰æ‹©ä¸€ä¸ªæ”¾ç½®ç‚¸å¼¹ï¼ˆä¸èƒ½åŒæ—¶éƒ½æ”¾ï¼‰ï¼Œç‚¸å¼¹çˆ†ç‚¸åæ‰€æ‘§æ¯çš„åŒºåŸŸæ˜¯ä¸€ä¸ªåœ†ï¼Œä¸”æ¯ä¸ªç‚¸å¼¹çš„æ‘§æ¯åŒºåŸŸçš„åŠå¾„éƒ½ä¸€æ ·ã€‚å½“ç„¶ä½œä¸ºæ¸¸æˆè€…ï¼Œä½ å¯ä»¥æ§åˆ¶è¿™ä¸ªåŠå¾„çš„å¤§å°ã€‚</p><p>ç°åœ¨è¯·ä½ ç¡®å®šè¿™ä¸ªåŠå¾„çš„æœ€å¤§å€¼ï¼Œä½¿å¾—æ”¾å®Œnä¸ªç‚¸å¼¹åï¼Œæ²¡æœ‰ä»»ä½•ä¸¤ä¸ªç‚¸å¼¹æœ‰é‡åˆçš„éƒ¨åˆ†ï¼ˆæ³¨æ„ç›¸æ¥ä¸ç®—ç›¸äº¤ï¼‰ã€‚  </p><h3 id="Input-2"><a href="#Input-2" class="headerlink" title="Input"></a>Input</h3><p>ç¬¬ä¸€è¡Œä¸€ä¸ªæ•´æ•°nï¼Œè¡¨ç¤ºæœ‰nå¯¹é¡¶ç‚¹ã€‚æ¥ä¸‹æ¥çš„nè¡Œï¼Œç¬¬iè¡Œè¡¨ç¤ºç¬¬iå¯¹é¡¶ç‚¹çš„æ¨ªçºµåæ ‡ã€‚</p><h3 id="Output-2"><a href="#Output-2" class="headerlink" title="Output"></a>Output</h3><p>ä¸€ä¸ªä¿ç•™ä¸¤ä½å°æ•°çš„å®æ•°ï¼Œè¡¨ç¤ºç‚¸å¼¹çˆ†ç‚¸çš„åŠå¾„çš„æœ€å¤§å€¼ã€‚</p><h3 id="Sample-Input-1"><a href="#Sample-Input-1" class="headerlink" title="Sample Input #1"></a>Sample Input #1</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">2</span><br><span class="line">1 1 1 -1</span><br><span class="line">-1 -1 -1 1</span><br></pre></td></tr></table></figure><h3 id="Sample-Output-1"><a href="#Sample-Output-1" class="headerlink" title="Sample Output #1"></a>Sample Output #1</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.41</span><br></pre></td></tr></table></figure><h3 id="Sample-Input-2"><a href="#Sample-Input-2" class="headerlink" title="Sample Input #2"></a>Sample Input #2</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">2</span><br><span class="line">1 1 -1 -1</span><br><span class="line">1 -1 -1 1</span><br></pre></td></tr></table></figure><h3 id="Sample-Output-2"><a href="#Sample-Output-2" class="headerlink" title="Sample Output #2"></a>Sample Output #2</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.00</span><br></pre></td></tr></table></figure><h3 id="Hint-2"><a href="#Hint-2" class="headerlink" title="Hint"></a>Hint</h3><p>2 &lt;= n &lt; 1000åæ ‡ä¸º[-10000,10000]å†…çš„å®æ•°ã€‚</p><h3 id="åˆ†æ-1"><a href="#åˆ†æ-1" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h3><p>åšæ³•ï¼š<strong>äºŒåˆ†ç­”æ¡ˆ + 2-SAT éªŒè¯å¯è¡Œæ€§</strong></p><p>äºŒåˆ†åŠå¾„ R ä¹‹åï¼Œæ¯æ¬¡éƒ½è·‘ 2-SAT æ¥åˆ¤æ–­å½“å‰åŠå¾„ R æ˜¯å¦å¯å–ï¼Œå¯å–åˆ™ç¼©å° R çš„èŒƒå›´ï¼Œä¸å¯å–åˆ™æ‰©å¤§ R çš„èŒƒå›´ç›´åˆ° L å’Œ R çš„å·®å€¼å¯ä»¥å¿½ç•¥</p><p>å»ºå›¾çš„æ—¶å€™ï¼Œ<strong>è€ƒè™‘æ¯ä¸¤ç»„ä¹‹é—´çš„çº¦æŸå…³ç³»ï¼Œç”¨ A1ï¼ŒA2ï¼ŒB1ï¼ŒB2 è¡¨ç¤ºä¸¤ç»„ä¸­çš„å››ä¸ªç‚¸å¼¹ï¼Œå¦‚æœ A1 å’Œ B1 çˆ†ç‚¸èŒƒå›´ç›¸äº¤ï¼ˆè¶…è¿‡ $2\times R$ï¼‰åˆ™åªèƒ½é€‰ B2ï¼Œè¿æ¥ $A_1\to B_2$ï¼Œå¦‚æœ A1 å’Œ B2 çˆ†ç‚¸èŒƒå›´ç›¸äº¤åˆ™è¿æ¥ $A_1 \to B_1$ ä»¥æ­¤ç±»æ¨åˆ¤æ–­å››æ¬¡åŠ è¾¹ä¸å¦</strong> å°±å¯ä»¥ç”¨ <strong>æŸ“è‰²å¤§æ³•</strong> å°½æƒ…çš„ 2-SAT äº†</p><p>è¿™é“é¢˜èµ·åˆè¾ƒçš„æ—¶å€™ TLE äº†ï¼Œçœ‹åˆ°åŒå­¦ä»¬éƒ½æ˜¯ 990ms+ å¡ç€æ—¶é™è¿‡çš„ï¼Œä»¥ä¸ºåˆæ˜¯ä¸€é“è´¹ä¼˜åŒ–çš„é¢˜ç›®ï¼Œ<strong>ç„¶ååšäº†ä¸€ä¸ªå°ä¼˜åŒ–ï¼ŒæŠŠä¸¤ç‚¹ä¹‹é—´çš„è·ç¦»å­˜è¿›äºŒç»´æ•°ç»„å°±ä¸ç”¨æ¯æ¬¡éƒ½å»ç®—ä¸€é</strong></p><p>æŠ±ç€èƒ½è¿‡å°±è¡Œçš„å¿ƒæ€ç‚¹äº† Submitï¼Œç»“æœè·‘äº† 272ms ??? <del>æ•°ç»„è¿™ä¹ˆå¿«çš„å—ï¼Ÿï¼Ÿ</del></p><p><img src="https://s2.ax1x.com/2019/06/28/ZMlIqf.png" alt="é™„å›¾ï¼šæµ‹è¯„è®°å½•"></p><h3 id="Codes-1"><a href="#Codes-1" class="headerlink" title="Codes"></a>Codes</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxn 1001*4</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxm 1001*1001*4</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> INF 1e-7</span></span><br><span class="line"><span class="type">int</span> to[maxm],nxt[maxm],head[maxn];</span><br><span class="line"><span class="type">int</span> tot,n,m,other[maxn],stk[maxn];</span><br><span class="line"><span class="type">bool</span> color[maxn];</span><br><span class="line"><span class="type">double</span> dists[<span class="number">2002</span>][<span class="number">2002</span>];</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> t&gt;<span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">fcin</span><span class="params">(t &amp;x)</span></span>&#123;</span><br><span class="line"><span class="type">int</span> sign=<span class="number">1</span>; x=<span class="number">0</span>; <span class="type">char</span> op=<span class="built_in">getchar</span>();</span><br><span class="line"><span class="keyword">while</span>(op&lt;<span class="string">&#x27;0&#x27;</span>||op&gt;<span class="string">&#x27;9&#x27;</span>)&#123;<span class="keyword">if</span>(op==<span class="string">&#x27;-&#x27;</span>) sign=<span class="number">-1</span>;op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line"><span class="keyword">while</span>(op&gt;=<span class="string">&#x27;0&#x27;</span>&amp;&amp;op&lt;=<span class="string">&#x27;9&#x27;</span>)&#123;x=x*<span class="number">10</span>+(op<span class="number">-48</span>);op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line">x*=sign;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">node</span>&#123;</span><br><span class="line"><span class="type">int</span> x,y;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;<span class="built_in">fcin</span>(x);<span class="built_in">fcin</span>(y);&#125;</span><br><span class="line"><span class="type">double</span> <span class="keyword">operator</span> -(<span class="type">const</span> node &amp;obj)<span class="type">const</span></span><br><span class="line">&#123;<span class="keyword">return</span> <span class="built_in">sqrt</span>(<span class="built_in">pow</span>(<span class="built_in">fabs</span>((<span class="type">double</span>)x-obj.x),<span class="number">2</span>)+<span class="built_in">pow</span>(<span class="built_in">fabs</span>((<span class="type">double</span>)y-obj.y),<span class="number">2</span>));&#125;</span><br><span class="line">&#125;b1[maxn],b2[maxn];</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">Eadd</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> v)</span></span>&#123;</span><br><span class="line">to[++tot]=v; nxt[tot]=head[u];</span><br><span class="line">head[u]=tot;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">DFS</span><span class="params">(<span class="type">int</span> u)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(color[u]) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">if</span>(color[other[u]]) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">color[u]=<span class="number">1</span>; stk[++stk[<span class="number">0</span>]]=u;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=head[u];i;i=nxt[i])</span><br><span class="line"><span class="keyword">if</span>(!<span class="built_in">DFS</span>(to[i])) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">twoSAT</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line"><span class="keyword">if</span>(color[<span class="number">2</span>*i<span class="number">-1</span>] &amp;&amp; color[<span class="number">2</span>*i]) <span class="keyword">continue</span>;</span><br><span class="line">stk[<span class="number">0</span>]=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">if</span>(!<span class="built_in">DFS</span>(<span class="number">2</span>*i<span class="number">-1</span>))&#123;</span><br><span class="line"><span class="keyword">while</span>(stk[<span class="number">0</span>]) color[stk[stk[<span class="number">0</span>]]]=<span class="number">0</span>,stk[<span class="number">0</span>]--;</span><br><span class="line"><span class="keyword">if</span>(!<span class="built_in">DFS</span>(<span class="number">2</span>*i)) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">fcin</span>(n);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">2</span>*n;i++)&#123;</span><br><span class="line"><span class="keyword">if</span>(i&amp;<span class="number">1</span>) other[i]=i+<span class="number">1</span>;</span><br><span class="line"><span class="keyword">else</span> other[i]=i<span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">b1[i].<span class="built_in">init</span>(),b2[i].<span class="built_in">init</span>();</span><br><span class="line">    <span class="comment">// ç¥ä¹å…¶ç¥çš„ä¼˜åŒ– </span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> j=i+<span class="number">1</span>;j&lt;=n;j++)</span><br><span class="line">dists[i][j]=dists[j][i]=b1[i]-b1[j],</span><br><span class="line">dists[i][j+n]=dists[j+n][i]=b1[i]-b2[j],</span><br><span class="line">dists[i+n][j]=dists[j][i+n]=b2[i]-b1[j],</span><br><span class="line">dists[i+n][j+n]=dists[j+n][i+n]=b2[i]-b2[j];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">cls</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="comment">// æ¸…é™¤æ•°æ® </span></span><br><span class="line"><span class="built_in">memset</span>(head,<span class="number">0</span>,<span class="built_in">sizeof</span>(head));tot=<span class="number">0</span>;</span><br><span class="line"><span class="built_in">memset</span>(color,<span class="literal">false</span>,<span class="built_in">sizeof</span>(color));stk[<span class="number">0</span>]=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">double</span> <span class="title">solve</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="comment">// 2*i-1 è¡¨ç¤º b1[i] , 2*i è¡¨ç¤º b2[i] </span></span><br><span class="line"><span class="type">double</span> L=<span class="number">0.0</span>,R=<span class="number">1000000.0</span>,ans=<span class="number">0.0</span>,mid;</span><br><span class="line"> <span class="keyword">while</span>(R-L&gt;INF)&#123;</span><br><span class="line"> <span class="built_in">cls</span>(); mid=(L+R)/<span class="number">2.0</span>;</span><br><span class="line"> <span class="comment">// å»ºé€  2-SAT å›¾ </span></span><br><span class="line"> <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line"> <span class="keyword">for</span>(<span class="type">int</span> j=i+<span class="number">1</span>;j&lt;=n;j++)&#123;</span><br><span class="line"> <span class="keyword">if</span>(dists[i][j]&lt;<span class="number">2</span>*mid) <span class="built_in">Eadd</span>(<span class="number">2</span>*i<span class="number">-1</span>,<span class="number">2</span>*j),<span class="built_in">Eadd</span>(<span class="number">2</span>*j<span class="number">-1</span>,<span class="number">2</span>*i);</span><br><span class="line"> <span class="keyword">if</span>(dists[i][j+n]&lt;<span class="number">2</span>*mid) <span class="built_in">Eadd</span>(<span class="number">2</span>*i<span class="number">-1</span>,<span class="number">2</span>*j<span class="number">-1</span>),<span class="built_in">Eadd</span>(<span class="number">2</span>*j,<span class="number">2</span>*i);</span><br><span class="line"> <span class="keyword">if</span>(dists[i+n][j]&lt;<span class="number">2</span>*mid) <span class="built_in">Eadd</span>(<span class="number">2</span>*i,<span class="number">2</span>*j),<span class="built_in">Eadd</span>(<span class="number">2</span>*j<span class="number">-1</span>,<span class="number">2</span>*i<span class="number">-1</span>);</span><br><span class="line"> <span class="keyword">if</span>(dists[i+n][j+n]&lt;<span class="number">2</span>*mid) <span class="built_in">Eadd</span>(<span class="number">2</span>*i,<span class="number">2</span>*j<span class="number">-1</span>),<span class="built_in">Eadd</span>(<span class="number">2</span>*j,<span class="number">2</span>*i<span class="number">-1</span>);</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">if</span>(<span class="built_in">twoSAT</span>()) ans=<span class="built_in">max</span>(ans,mid),L=mid;</span><br><span class="line"> <span class="keyword">else</span> R=mid;</span><br><span class="line"> &#125; <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;testin.txt&quot;</span>,<span class="string">&quot;r&quot;</span>,stdin);</span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;testout.txt&quot;</span>,<span class="string">&quot;w&quot;</span>,stdout);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"><span class="built_in">init</span>();</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%.2lf&quot;</span>,<span class="built_in">solve</span>());</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å›¾è®º </tag>
            
            <tag> 2-SAT </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å›¾è®º | SPFA | 20190623è€ƒè¯•ï¼šè§£é¢˜æŠ¥å‘Š</title>
      <link href="/2019/06/24/2019-06-24-%E8%80%83%E8%AF%95%E8%A7%A3%E9%A2%98%E6%8A%A5%E5%91%8A/"/>
      <url>/2019/06/24/2019-06-24-%E8%80%83%E8%AF%95%E8%A7%A3%E9%A2%98%E6%8A%A5%E5%91%8A/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><h2 id="Problem-1ï¼šè™«æ´-wormhole-cpp-c-pas"><a href="#Problem-1ï¼šè™«æ´-wormhole-cpp-c-pas" class="headerlink" title="Problem.#1ï¼šè™«æ´(wormhole.cpp/c/pas)"></a>Problem.#1ï¼šè™«æ´(wormhole.cpp/c/pas)</h2><blockquote><p>While exploring his many farms, Farmer John has discovered a number of amazing wormholes. A wormhole is very peculiar because it is a one-way path that delivers you to its destination at a time that is BEFORE you entered the wormhole! Each of FJâ€™s farms comprises N (1 â‰¤ N â‰¤ 500) fields conveniently numbered 1..N, M (1 â‰¤ M â‰¤ 2500) paths, and W (1 â‰¤ W â‰¤ 200) wormholes.</p><p>As FJ is an avid time-traveling fan, he wants to do the following: start at some field, travel through some paths and wormholes, and return to the starting field a time before his initial departure. Perhaps he will be able to meet himself :) .</p><p>To help FJ find out whether this is possible or not, he will supply you with complete maps to F (1 â‰¤ F â‰¤ 5) of his farms. No paths will take longer than 10,000 seconds to travel and no wormhole can bring FJ back in time by more than 10,000 seconds.</p></blockquote><p>Johnåœ¨ä»–çš„å†œåœºä¸­é—²é€›æ—¶å‘ç°äº†è®¸å¤šè™«æ´ã€‚è™«æ´å¯ä»¥çœ‹ä½œä¸€æ¡ååˆ†å¥‡ç‰¹çš„æœ‰å‘è¾¹ï¼Œå¹¶å¯ä»¥ä½¿ä½ è¿”å›åˆ°è¿‡å»çš„ä¸€ä¸ªæ—¶åˆ»ï¼ˆç›¸å¯¹ä½ è¿›å…¥è™«æ´ä¹‹å‰ï¼‰ã€‚Johnçš„æ¯ä¸ªå†œåœºæœ‰Mæ¡å°è·¯ï¼ˆæ— å‘è¾¹ï¼‰è¿æ¥ç€N ï¼ˆä»1..Næ ‡å·ï¼‰å—åœ°ï¼Œå¹¶æœ‰Wä¸ªè™«æ´ï¼ˆæœ‰å‘è¾¹ï¼‰ã€‚å…¶ä¸­1&lt;=N&lt;=500,1&lt;=M&lt;=2500,1&lt;=W&lt;=200ã€‚ ç°åœ¨Johnæƒ³å€ŸåŠ©è¿™äº›è™«æ´æ¥å›åˆ°è¿‡å»ï¼ˆå‡ºå‘æ—¶åˆ»ä¹‹å‰ï¼‰ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒJohnå¯ä»¥ä»ä»»ä½•ä¸€å—åœ°å¼€å§‹ï¼Œä½†æ˜¯æœ€ç»ˆè¦é€šè¿‡è™«æ´å›åˆ°è¿™å—åœ°ï¼Œä¸”æ—¶é—´è¦å¤„åœ¨å¼€å§‹ä¹‹å‰ï¼Œè¯·ä½ å‘Šè¯‰Johnä»–èƒ½åŠåˆ°å—ã€‚</p><p> Johnå°†å‘ä½ æä¾›F(1&lt;=F&lt;=5)ä¸ªå†œåœºçš„åœ°å›¾ã€‚æ²¡æœ‰å°è·¯ä¼šè€—è´¹ä½ è¶…è¿‡10000ç§’çš„æ—¶é—´ï¼Œå½“ç„¶ä¹Ÿæ²¡æœ‰è™«æ´å›å¸®ä½ å›åˆ°è¶…è¿‡10000ç§’ä»¥å‰ã€‚</p><h2 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h2><ul><li><p>Line 1: ä¸€ä¸ªæ•´æ•° F, è¡¨ç¤ºå†œåœºä¸ªæ•°ã€‚</p></li><li><p>Line 1 of each farm: ä¸‰ä¸ªæ•´æ•° N, M, Wã€‚</p></li><li><p>Lines 2..M+1 of each farm: ä¸‰ä¸ªæ•°ï¼ˆS, E, Tï¼‰ã€‚è¡¨ç¤ºåœ¨æ ‡å·ä¸ºSçš„åœ°ä¸æ ‡å·ä¸ºEçš„åœ°ä¸­é—´æœ‰ä¸€æ¡ç”¨æ—¶Tç§’çš„å°è·¯ã€‚</p></li><li><p>Lines M+2..M+W+1 of each farm: ä¸‰ä¸ªæ•°ï¼ˆS, E, Tï¼‰ã€‚è¡¨ç¤ºåœ¨æ ‡å·ä¸ºSçš„åœ°ä¸æ ‡å·ä¸ºEçš„åœ°ä¸­é—´æœ‰ä¸€æ¡å¯ä»¥ä½¿Johnåˆ°è¾¾Tç§’å‰çš„è™«æ´ã€‚</p></li></ul><h2 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h2><ul><li>Lines 1..F: å¦‚æœJohnèƒ½åœ¨è¿™ä¸ªå†œåœºå®ç°ä»–çš„ç›®æ ‡ï¼Œè¾“å‡ºâ€YESâ€,å¦åˆ™è¾“å‡ºâ€NOâ€ã€‚</li></ul><h2 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">2</span><br><span class="line">3 3 1</span><br><span class="line">1 2 2</span><br><span class="line">1 3 4</span><br><span class="line">2 3 1</span><br><span class="line">3 1 3</span><br><span class="line">3 2 1</span><br><span class="line">1 2 3</span><br><span class="line">2 3 4</span><br><span class="line">3 1 8</span><br></pre></td></tr></table></figure><h2 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">NO</span><br><span class="line">YES</span><br></pre></td></tr></table></figure><h2 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><p>å›¾è®ºåŸºç¡€é¢˜ï¼Œç†è§£ä¸€ä¸‹é¢˜ç›®å¤§æ„ï¼Œå°±æ˜¯ï¼š<strong>ç»™ä½ ä¸€å¼ å«æœ‰ M æ¡æ— å‘è¾¹çš„å’Œ W æ¡æœ‰å‘è¾¹çš„æ··åˆå›¾ï¼Œé—®ä½ å›¾ä¸­æ˜¯å¦å­˜åœ¨è´Ÿç¯ï¼ˆå› ä¸ºé€šè¿‡è™«æ´å›åˆ°åŸç‚¹æ—¶æ—¶é—´åœ¨å¼€å§‹ä¹‹å‰ï¼Œé‚£ä¹ˆè·¯ä¸Šæƒå€¼ä¹‹å’Œä¸€å®šä¸ºè´Ÿå€¼ï¼‰</strong></p><p>åˆ¤æ–­è´Ÿç¯ç”¨çš„æ˜¯ SPFA ç®—æ³•</p><h2 id="Codes"><a href="#Codes" class="headerlink" title="Codes"></a>Codes</h2><h2 id=""><a href="#" class="headerlink" title=""></a><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxn 1003</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxm 100005</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="type">int</span>,<span class="type">int</span>&gt; pr;</span><br><span class="line"><span class="type">const</span> ll INF=<span class="number">1e15</span>;</span><br><span class="line"><span class="type">int</span> n,m,s,addcnt[maxn];</span><br><span class="line">ll dist[maxn];</span><br><span class="line"><span class="type">bool</span> vis[maxn];</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">node</span>&#123;</span><br><span class="line">vector&lt;pr&gt; linkto;</span><br><span class="line">&#125;e[maxn];</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">init</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">int</span> x,y,z;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>,&amp;n,&amp;m,&amp;s);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++)&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>,&amp;x,&amp;y,&amp;z);</span><br><span class="line"><span class="keyword">if</span>(x==y) <span class="keyword">continue</span>;</span><br><span class="line">e[x].linkto.<span class="built_in">push_back</span>(<span class="built_in">make_pair</span>(y,z));</span><br><span class="line">e[y].linkto.<span class="built_in">push_back</span>(<span class="built_in">make_pair</span>(x,z));</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=s;i++)&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>,&amp;x,&amp;y,&amp;z);</span><br><span class="line">e[x].linkto.<span class="built_in">push_back</span>(<span class="built_in">make_pair</span>(y,-z));</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">spfa</span><span class="params">(<span class="type">int</span> st,<span class="type">int</span> mode)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;pr&gt;::iterator iterid;</span><br><span class="line"><span class="type">int</span> head,next,val;</span><br><span class="line">queue&lt;<span class="type">int</span>&gt; wait;</span><br><span class="line"><span class="built_in">memset</span>(vis,<span class="literal">false</span>,<span class="built_in">sizeof</span>(vis));</span><br><span class="line"><span class="keyword">if</span>(mode==<span class="number">1</span>)&#123; <span class="comment">// åˆ¤æ–­è´Ÿç¯  </span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">dist[i]=<span class="number">0</span>;</span><br><span class="line">vis[i]=<span class="literal">true</span>;</span><br><span class="line">wait.<span class="built_in">push</span>(i);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++) dist[i]=INF;</span><br><span class="line">dist[st]=<span class="number">0</span>;</span><br><span class="line">vis[st]=<span class="literal">true</span>;</span><br><span class="line">wait.<span class="built_in">push</span>(st);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">while</span>(!wait.<span class="built_in">empty</span>())&#123;</span><br><span class="line">head=wait.<span class="built_in">front</span>();</span><br><span class="line">wait.<span class="built_in">pop</span>();</span><br><span class="line">vis[head]=<span class="literal">false</span>;</span><br><span class="line">iterid=e[head].linkto.<span class="built_in">begin</span>();</span><br><span class="line"><span class="keyword">while</span>(iterid!=e[head].linkto.<span class="built_in">end</span>())&#123;</span><br><span class="line">next=iterid-&gt;first;</span><br><span class="line">val=iterid-&gt;second;</span><br><span class="line"><span class="keyword">if</span>(dist[next]&gt;dist[head]+val)&#123;</span><br><span class="line">dist[next]=dist[head]+val;</span><br><span class="line"><span class="keyword">if</span>(!vis[next])&#123;</span><br><span class="line">vis[next]=<span class="literal">true</span>;</span><br><span class="line">wait.<span class="built_in">push</span>(next);</span><br><span class="line">addcnt[next]++;</span><br><span class="line"><span class="keyword">if</span>(mode==<span class="number">1</span>) <span class="keyword">if</span>(addcnt[next]&gt;=n<span class="number">-1</span>) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">iterid++;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;wormhole.in&quot;</span>,<span class="string">&quot;r&quot;</span>,stdin);</span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;wormhole.out&quot;</span>,<span class="string">&quot;w&quot;</span>,stdout);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"><span class="type">int</span> T; <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;T);</span><br><span class="line"><span class="keyword">while</span>(T--)&#123;</span><br><span class="line"><span class="built_in">init</span>();</span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">spfa</span>(<span class="number">0</span>,<span class="number">1</span>)) <span class="built_in">printf</span>(<span class="string">&quot;YES\n&quot;</span>);</span><br><span class="line"><span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">&quot;NO\n&quot;</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++) e[i].linkto.<span class="built_in">clear</span>();</span><br><span class="line"><span class="built_in">memset</span>(addcnt,<span class="number">0</span>,<span class="built_in">sizeof</span>(addcnt));</span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></h2><h2 id="Problem-2ï¼šæ•°åˆ—é—®é¢˜"><a href="#Problem-2ï¼šæ•°åˆ—é—®é¢˜" class="headerlink" title="Problem.#2ï¼šæ•°åˆ—é—®é¢˜"></a>Problem.#2ï¼šæ•°åˆ—é—®é¢˜</h2><p>ç»™å®šä¸€ä¸ªæ•°åˆ—ï¼Œä»ä¸­æ‰¾åˆ°3ä¸ªæ— äº¤é›†çš„è¿ç»­å­æ•°åˆ—ä½¿å…¶å’Œæœ€å¤§ã€‚</p><h2 id="Input-1"><a href="#Input-1" class="headerlink" title="Input"></a>Input</h2><p>ç¬¬ä¸€è¡Œä¸€ä¸ªæ•°nï¼Œè¡¨ç¤ºæ•°åˆ—é•¿åº¦ã€‚</p><p>æ¥ä¸‹æ¥æœ‰nè¡Œï¼Œæ¯è¡Œä¸€ä¸ªæ•°ï¼Œç¬¬iè¡Œä¸ºç¬¬iä¸ªæ•°ã€‚</p><h2 id="Output-1"><a href="#Output-1" class="headerlink" title="Output"></a>Output</h2><p>ä»…æœ‰ä¸€ä¸ªæ•°ï¼Œè¡¨ç¤ºæœ€å¤§å’Œã€‚</p><h2 id="Sample-Input-1"><a href="#Sample-Input-1" class="headerlink" title="Sample Input"></a>Sample Input</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">10</span><br><span class="line">-1 2 3 -4 0 1 -6 -1 1 -2</span><br></pre></td></tr></table></figure><h2 id="Sample-Output-1"><a href="#Sample-Output-1" class="headerlink" title="Sample Output"></a>Sample Output</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1</span><br></pre></td></tr></table></figure><h2 id="åˆ†æ-1"><a href="#åˆ†æ-1" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><p>è€ƒè¯•æ—¶æƒ³åˆ°çš„æ˜¯æ‰€æœ‰çš„æ­£æ•°å’Œ + å¦‚æœæ­£æ•°ä¸å¤Ÿ 3 ä¸ªå°±åŠ ä¸Šæœ€å¤§çš„è´Ÿæ•°ï¼Œæ„‰å¿«çš„ WA äº†å¤§æ ·ä¾‹ï¼ˆå› ä¸ºä¸¤ä¸ªåŒºé—´çš„æ­£æ•°å’Œä»–ä»¬ä¹‹é—´çš„è´Ÿæ•°çš„æ•´ä½“å’Œå¾ˆæœ‰å¯èƒ½å¤§äºåŸæ¥çš„ä»»ä½•ä¸€ä¸ªæ­£æ•°åŒºé—´å’Œï¼‰</p><p>äºæ˜¯è‡ªç„¶è€Œç„¶åœ°æƒ³åˆ°äº† DPï¼Œè®¾ $f[i][j][k]$ è¡¨ç¤ºå½“å‰è€ƒè™‘åˆ°ç¬¬ $i$ ä¸ªæ•°ï¼Œè¦å½¢æˆ $j$ ç»„ï¼ˆ$j\leq 3$ï¼‰å¹¶ä¸”é€‰ä¸é€‰è¿™ä¸ªæ•°ï¼ˆ$k=0$ è¡¨ç¤ºä¸é€‰ï¼Œåä¹‹åˆ™é€‰ï¼‰ï¼Œä¸‹é¢æ¥è®¨è®ºï¼š</p><ol><li><p>å¦‚æœé€‰è¿™ä¸ªæ•°ï¼Œé‚£ä¹ˆè¦å½¢æˆ $j$ ç»„ï¼Œå¯ä»¥æ ¹ç¬¬ $i-1$ ä¸ªæ•°å‡‘åˆ°ä¸€èµ·ï¼Œéœ€è¦ $f[i-1][j][1]$ ï¼Œæˆ–è€…ä¹Ÿå¯ä»¥å¦èµ·ä¸€ç»„é‚£ä¹ˆç¬¬ $i-1$ ä¸ªæ•°å°±æ— æ‰€è°“äº†ï¼Œéœ€è¦ $f[i-1][j-1][0]$ æˆ– $f[i-1][j-1][1]$ çš†å¯</p></li><li><p>å¦‚æœä¸é€‰è¿™ä¸ªæ•°ï¼Œé‚£ä¹ˆè¦å½¢æˆ $j$ ç»„ï¼Œæ˜¾ç„¶ç¬¬ $i-1$ ä¸ªæ•°å¿…é¡»å·²ç»å½¢æˆ $j$ ç»„æ‰è¡Œï¼Œæ‰€ä»¥å°±æ˜¯ $f[i-1][j][0]$ å’Œ $f[i-1][j][1]$ </p></li></ol><h2 id="Codes-1"><a href="#Codes-1" class="headerlink" title="Codes"></a>Codes</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxn 1000001</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line">ll a[maxn];ll n;</span><br><span class="line">ll f[maxn][<span class="number">4</span>][<span class="number">2</span>];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;array.in&quot;</span>,<span class="string">&quot;r&quot;</span>,stdin);</span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;array.out&quot;</span>,<span class="string">&quot;w&quot;</span>,stdout);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%lld&quot;</span>,&amp;n);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++) </span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%lld&quot;</span>,&amp;a[i]);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=<span class="number">3</span>;j++)&#123;</span><br><span class="line">f[i][j][<span class="number">0</span>]=<span class="built_in">max</span>(f[i<span class="number">-1</span>][j][<span class="number">0</span>],f[i<span class="number">-1</span>][j][<span class="number">1</span>]);</span><br><span class="line">f[i][j][<span class="number">1</span>]=<span class="built_in">max</span>(f[i<span class="number">-1</span>][j<span class="number">-1</span>][<span class="number">0</span>],<span class="built_in">max</span>(f[i<span class="number">-1</span>][j<span class="number">-1</span>][<span class="number">1</span>],f[i<span class="number">-1</span>][j][<span class="number">1</span>]))+a[i];</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%lld&quot;</span>,<span class="built_in">max</span>(f[n][<span class="number">3</span>][<span class="number">0</span>],f[n][<span class="number">3</span>][<span class="number">1</span>]));</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="Problem-3ï¼šDueling-GPS-gps-cpp"><a href="#Problem-3ï¼šDueling-GPS-gps-cpp" class="headerlink" title="Problem.#3ï¼šDueling GPS (gps.cpp)"></a>Problem.#3ï¼šDueling GPS (gps.cpp)</h2><blockquote><p>Farmer John has recently purchased a new car online, but in his haste he accidentally clicked the â€œSubmitâ€ button twice when selecting extra features for the car, and as a result the car ended up equipped with two GPS navigation systems! Even worse, the two systems often make conflicting decisions about the route that FJ should take. The map of the region in which FJ lives consists of N intersections (2 &lt;= N &lt;= 10,000) and M directional roads (1 &lt;= M &lt;= 50,000). Road i connects intersections A_i (1 &lt;= A_i &lt;= N) and B_i (1 &lt;= B_i &lt;= N). Multiple roads could connect the same pair of intersections, and a bi-directional road (one permitting two-way travel) is represented by two separate directional roads in opposite orientations. FJâ€™s house is located at intersection 1, and his farm is located at intersection N. It is possible to reach the farm from his house by traveling along a series of directional roads. Both GPS units are using the same underlying map as described above; however, they have different notions for the travel time along each road. Road i takes P_i units of time to traverse according to the first GPS unit, and Q_i units of time to traverse according to the second unit (each travel time is an integer in the range 1..100,000). FJ wants to travel from his house to the farm. However, each GPS unit complains loudly any time FJ follows a road (say, from intersection X to intersection Y) that the GPS unit believes not to be part of a shortest route from X to the farm (it is even possible that both GPS units can complain, if FJ takes a road that neither unit likes). Please help FJ determine the minimum possible number of total complaints he can receive if he chooses his route appropriately. If both GPS units complain when FJ follows a road, this counts as +2 towards the total.</p></blockquote><p>Johnæœ€è¿‘æ–°ä¹°äº†è¾†è½¦ï¼Œä½†æ˜¯ä»–åœ¨ä¸ºè½¦è®¢è´­GPSæ—¶ï¼Œè„‘å­è¿›æ°´ç‚¹äº†ä¸¤ä¸‹â€Submitâ€ï¼Œå¯¼è‡´æ–°è½¦è£…äº†ä¸¤å¥—GPSç³»ç»Ÿï¼Œæ›´ç³Ÿçš„æ˜¯ï¼Œä¸¤å¥—GPSç³»ç»Ÿå­˜å‚¨çš„è·¯å¾„ä¿¡æ¯ä¸åŒï¼Œå½“Johnæ²¡æœ‰æŒ‰ç…§GPSçš„é¢„å®šæœ€çŸ­è·¯å¾„èµ°çš„æ—¶å€™ï¼ŒGPSå°±ä¼šæŠ¥è­¦ä¸€æ¬¡ï¼Œå¦‚æœJohnåŒæ—¶ä¸åœ¨ä¸¤å¥—GPSçš„é¢„å®šè·¯å¾„ä¸Šè¡Œé©¶ï¼Œä»–ä»¬ç”šè‡³ä¼šåŒæ—¶æŠ¥è­¦ï¼ŒJohnç°åœ¨æŠŠè¿™ä¸ªéš¾é¢˜äº¤ç»™äº†ä½ ï¼Œä»–ç»™äº†ä½ ä¸€å¼ æœ‰å‘å›¾æœ‰ N ä¸ªç»“ç‚¹å’Œ M æ¡è¾¹ï¼Œä¸¤å¥—GPSå­˜å‚¨çš„ä» i åˆ° j çš„è·¯å¾„é•¿åº¦åˆ†åˆ«ç”¨ A_i å’Œ B_i è¡¨ç¤ºï¼ŒJohnå¸Œæœ›ä½ å¸®ä»–è®¾è®¡ä¸€æ¡ä» 1 åˆ° Nçš„è·¯çº¿ï¼Œä½¿å¾—ä»–èƒ½å¬åˆ°æœ€å°‘çš„GPSæŠ¥è­¦æ¬¡æ•°</p><h2 id="Input-2"><a href="#Input-2" class="headerlink" title="Input"></a>Input</h2><ul><li>Line 1: The integers N and M. Line i describes road i with four integers: A_i B_i P_i Q_i.</li></ul><h2 id="Output-2"><a href="#Output-2" class="headerlink" title="Output"></a>Output</h2><ul><li>Line 1: The minimum total number of complaints FJ can receive if he routes himself from his house to the farm optimally.</li></ul><h2 id="Sample-Input-2"><a href="#Sample-Input-2" class="headerlink" title="Sample Input"></a>Sample Input</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">5 7</span><br><span class="line">3 4 7 1</span><br><span class="line">1 3 2 20</span><br><span class="line">1 4 17 18</span><br><span class="line">4 5 25 3</span><br><span class="line">1 2 10 1</span><br><span class="line">3 5 4 14</span><br><span class="line">2 4 6 5</span><br></pre></td></tr></table></figure><h2 id="Sample-Output-2"><a href="#Sample-Output-2" class="headerlink" title="Sample Output"></a>Sample Output</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1</span><br></pre></td></tr></table></figure><h2 id="åˆ†æ-2"><a href="#åˆ†æ-2" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><p><strong>å»ºä¸‰ä¸ªå›¾ï¼Œåˆ†åˆ«å­˜å‚¨ GPS1  çš„è·¯å¾„ä¿¡æ¯ï¼ŒGPS2çš„è·¯å¾„ä¿¡æ¯ï¼Œä»¥åŠæŠ¥è­¦æ¬¡æ•°</strong></p><p>å…ˆå¯¹ 1ï¼Œ2 å›¾è¿›è¡Œ SPFA ï¼Œè®°å½•ä¸‹æœ€çŸ­è·¯ç»è¿‡çš„è¾¹ï¼Œä¸€å¼€å§‹æŠŠ 3 å›¾çš„è¾¹æƒå…¨éƒ¨æ”¹æˆ 2ï¼Œä»£è¡¨ä¸¤ä¸ª GPS éƒ½ä¸ºæŠ¥è­¦ï¼Œç„¶åå¯¹äºæ¯ä¸ª GPS è®¤ä¸ºçš„æœ€çŸ­è·¯å¾„çš„è¾¹ï¼Œåœ¨ 3 å›¾ä¸­è¾¹æƒå‡å» 1 å³å¯</p><p><strong>éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒGPS å¯¹äºè·¯å¾„çš„é€‰æ‹©æ˜¯å®æ—¶æ›´æ–°çš„ï¼Œæ¯æ¬¡ GPS éƒ½ä¼šé€‰æ‹©å½“å‰ç‚¹ k åˆ°ç‚¹ N çš„æœ€çŸ­è·¯å¾„è€Œä¸æ˜¯å½“å‰ç‚¹ k åˆ°ç‚¹ 1 çš„æœ€çŸ­è·¯å¾„ï¼Œå› æ­¤ 1ï¼Œ2 å›¾è¦å­˜é€†å›¾å† SPFA</strong></p><p>æœ€ååœ¨å›¾3ä¸Š SPFA æ±‚æœ€çŸ­è·¯å°±å¯ä»¥äº†</p><h2 id="Codes-2"><a href="#Codes-2" class="headerlink" title="Codes"></a>Codes</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxn 10001</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxm 50001</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="comment">// mixed graphs </span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">node</span>&#123;</span><br><span class="line"><span class="type">int</span> TO,NXT,VAL;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> to(x,y) g[x][y].TO </span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> nxt(x,y) g[x][y].NXT</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> val(x,y) g[x][y].VAL </span></span><br><span class="line">&#125;g[<span class="number">4</span>][maxm]; <span class="type">int</span> tot[<span class="number">4</span>],head[<span class="number">4</span>][maxm];</span><br><span class="line"><span class="type">int</span> n,m,vis[maxn];</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> t&gt;<span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">fcin</span><span class="params">(t &amp;x)</span></span>&#123;</span><br><span class="line"><span class="type">int</span> sign=<span class="number">1</span>; x=<span class="number">0</span>; <span class="type">char</span> op=<span class="built_in">getchar</span>();</span><br><span class="line"><span class="keyword">while</span>(op&lt;<span class="string">&#x27;0&#x27;</span>||op&gt;<span class="string">&#x27;9&#x27;</span>)&#123;<span class="keyword">if</span>(op==<span class="string">&#x27;-&#x27;</span>) sign=<span class="number">-1</span>;op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line"><span class="keyword">while</span>(op&gt;=<span class="string">&#x27;0&#x27;</span>&amp;&amp;op&lt;=<span class="string">&#x27;9&#x27;</span>)&#123;x=x*<span class="number">10</span>+(op<span class="number">-48</span>);op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line">x*=sign;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">Eadd</span><span class="params">(<span class="type">int</span> cnt,<span class="type">int</span> u,<span class="type">int</span> v,<span class="type">int</span> x)</span></span>&#123;</span><br><span class="line"><span class="built_in">nxt</span>(cnt,++tot[cnt])=head[cnt][u];</span><br><span class="line"><span class="built_in">to</span>(cnt,tot[cnt])=v; <span class="built_in">val</span>(cnt,tot[cnt])=x;</span><br><span class="line">head[cnt][u]=tot[cnt];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">SPFA</span><span class="params">(<span class="type">int</span> cnt,<span class="type">int</span> st)</span></span>&#123;</span><br><span class="line"><span class="type">int</span> dist[maxn];<span class="function">pair&lt;<span class="type">int</span>,<span class="type">int</span>&gt; <span class="title">qhead</span><span class="params">(<span class="number">0</span>,<span class="number">0</span>)</span></span>;</span><br><span class="line">priority_queue&lt;pair&lt;<span class="type">int</span>,<span class="type">int</span>&gt; &gt; q;</span><br><span class="line"><span class="built_in">memset</span>(dist,<span class="number">127</span>,<span class="built_in">sizeof</span>(dist));</span><br><span class="line"><span class="built_in">memset</span>(vis,<span class="literal">false</span>,<span class="built_in">sizeof</span>(vis));</span><br><span class="line">q.<span class="built_in">push</span>(<span class="built_in">make_pair</span>(<span class="number">0</span>,st));vis[st]=<span class="literal">true</span>;dist[st]=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span>(!q.<span class="built_in">empty</span>())&#123;</span><br><span class="line">qhead=q.<span class="built_in">top</span>();q.<span class="built_in">pop</span>();</span><br><span class="line"><span class="keyword">if</span>(dist[qhead.second]!=-qhead.first) <span class="keyword">continue</span>;</span><br><span class="line">vis[qhead.second]=<span class="literal">true</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=head[cnt][qhead.second];i;i=<span class="built_in">nxt</span>(cnt,i))</span><br><span class="line"><span class="keyword">if</span>(!vis[<span class="built_in">to</span>(cnt,i)])</span><br><span class="line"><span class="keyword">if</span>(dist[<span class="built_in">to</span>(cnt,i)]&gt;dist[qhead.second]+<span class="built_in">val</span>(cnt,i))</span><br><span class="line">dist[<span class="built_in">to</span>(cnt,i)]=dist[qhead.second]+<span class="built_in">val</span>(cnt,i),</span><br><span class="line">q.<span class="built_in">push</span>(<span class="built_in">make_pair</span>(-dist[<span class="built_in">to</span>(cnt,i)],<span class="built_in">to</span>(cnt,i)));</span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">if</span>(cnt==<span class="number">3</span>) <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,dist[n]);</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> j=head[cnt][i];j;j=<span class="built_in">nxt</span>(cnt,j))</span><br><span class="line"><span class="keyword">if</span>(dist[i]+<span class="built_in">val</span>(cnt,j)==dist[<span class="built_in">to</span>(cnt,j)])</span><br><span class="line"><span class="built_in">val</span>(<span class="number">3</span>,j)--;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;gps.in&quot;</span>,<span class="string">&quot;r&quot;</span>,stdin);</span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;gps.out&quot;</span>,<span class="string">&quot;w&quot;</span>,stdout);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"><span class="built_in">fcin</span>(n);<span class="built_in">fcin</span>(m); <span class="type">int</span> x,y,z,w;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++)&#123;</span><br><span class="line"><span class="built_in">fcin</span>(x);<span class="built_in">fcin</span>(y);<span class="built_in">fcin</span>(z);<span class="built_in">fcin</span>(w);</span><br><span class="line"><span class="built_in">Eadd</span>(<span class="number">1</span>,y,x,z);<span class="built_in">Eadd</span>(<span class="number">2</span>,y,x,w);</span><br><span class="line"><span class="built_in">Eadd</span>(<span class="number">3</span>,x,y,<span class="number">2</span>); </span><br><span class="line">&#125; <span class="built_in">SPFA</span>(<span class="number">1</span>,n);<span class="built_in">SPFA</span>(<span class="number">2</span>,n);</span><br><span class="line"><span class="built_in">SPFA</span>(<span class="number">3</span>,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å›¾è®º </tag>
            
            <tag> SPFA </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŠ¨æ€è§„åˆ’ | [USACO08NOV]å¥¶ç‰›æ··åˆèµ·æ¥  Mixed Up Cows</title>
      <link href="/2019/06/11/2019-06-11-%E6%B7%B7%E4%B9%B1%E7%9A%84%E5%A5%B6%E7%89%9B/"/>
      <url>/2019/06/11/2019-06-11-%E6%B7%B7%E4%B9%B1%E7%9A%84%E5%A5%B6%E7%89%9B/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><h2 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h2><blockquote><p>Each of Farmer Johnâ€™s N (4 &lt;= N &lt;= 16) cows has a unique serial  number S_i (1 &lt;= S_i &lt;= 25,000). The cows are so proud of it that  each one now wears her number in a gangsta manner engraved in large  letters on a gold plate hung around her ample bovine neck.</p><p>Gangsta cows are rebellious and line up to be milked in an order  called â€˜Mixed Upâ€™. A cow order is â€˜Mixed Upâ€™ if the sequence of serial  numbers formed by their milking line is such that the serial numbers of  every pair of consecutive cows in line differs by more than K (1 &lt;= K  &lt;= 3400). For example, if N = 6 and K = 1 then 1, 3, 5, 2, 6, 4 is a  â€˜Mixed Upâ€™ lineup but 1, 3, 6, 5, 2, 4 is not (since the consecutive  numbers 5 and 6 differ by 1).</p><p>How many different ways can N cows be Mixed Up?</p><p>For your first 10 submissions, you will be provided with the results of running your program on a part of the actual test data.</p></blockquote><p>çº¦ç¿°å®¶æœ‰Nå¤´å¥¶ç‰›ï¼Œç¬¬iå¤´å¥¶ç‰›çš„ç¼–å·æ˜¯Siï¼Œæ¯å¤´å¥¶ç‰›çš„ç¼–å·éƒ½æ˜¯å”¯ä¸€çš„ã€‚è¿™äº›å¥¶ç‰›æœ€è¿‘  åœ¨é—¹è„¾æ°”ï¼Œä¸ºè¡¨è¾¾ä¸æ»¡çš„æƒ…ç»ªï¼Œå¥¹ä»¬åœ¨æŒ¤å¥¶çš„æ—¶å€™ä¸€å®šè¦æ’æˆæ··ä¹±çš„é˜Ÿä¼ã€‚åœ¨ä¸€åªæ··ä¹±çš„é˜Ÿ ä¼ä¸­ï¼Œç›¸é‚»å¥¶ç‰›çš„ç¼–å·ä¹‹å·®å‡è¶…è¿‡Kã€‚æ¯”å¦‚å½“K = 1æ—¶ï¼Œ1,  3, 5, 2, 6, 4å°±æ˜¯ä¸€æ”¯æ··ä¹±çš„é˜Ÿä¼ï¼Œ è€Œ1, 3, 6, 5, 2, 4ä¸æ˜¯ï¼Œå› ä¸º6å’Œ5åªå·®1ã€‚è¯·æ•°ä¸€æ•°ï¼Œæœ‰å¤šå°‘ç§é˜Ÿå½¢æ˜¯æ··ä¹±çš„å‘¢ï¼Ÿ</p><h2 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h2><ul><li><p>Line 1: Two space-separated integers: N and K</p></li><li><p>Lines 2..N+1: Line i+1 contains a single integer that is the serial number of cow i: S_i</p></li></ul><h2 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h2><ul><li>Line 1: A single integer that is the number of ways that N cows can be<br>â€˜Mixed Upâ€™. The answer is guaranteed to fit in a 64 bit integer.</li></ul><h2 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h2>  <figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">4 1 </span><br><span class="line">3 </span><br><span class="line">4 </span><br><span class="line">2 </span><br><span class="line">1 </span><br></pre></td></tr></table></figure><h2 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2</span><br></pre></td></tr></table></figure><h2 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><p>è¿™é“é¢˜è€ƒè¯•æ—¶å†™äº†å›æº¯ï¼Œ<del>ç»“æœä½œæ­»çš„æŠŠæ¯ç§æ–¹æ¡ˆè¯¦ç»†çš„è¾“å‡ºæ¥äº†å¯¼è‡´éƒ¨åˆ†åˆ†ä¹Ÿæ²¡æœ‰äº†</del>ï¼Œåæ¥æ‰çŸ¥é“æ­£è§£åº”æ˜¯çŠ¶å‹ DP</p><p>å…ˆçœ‹çœ‹å¼€å§‹å†™çš„é”™è¯¯ DPï¼š$f[i][j]=\sum_{p=1}^{n}f[i-1][k]\;\;\;(abs(s[j]-s[p])&gt;k)$</p><p>è¿™é‡Œçš„ $i$ è¡¨ç¤ºè¡Œæ•°ï¼Œ$j$ è¡¨ç¤ºæœ€åæ”¾ç¬¬ $j$ å¤´ç‰›ï¼Œè¾¹ç•Œæƒ…å†µä¸º $f[1][i]=1\;\;\;(i\in[1,\;n])$</p><p>è¿™æ ·å†™çš„è¯æ˜æ˜¾ä¼šè®¡ç®—åˆ°é‡å¤çš„æƒ…å†µï¼ˆè¿™é‡ŒæŒ‡éš”ä¸€ä½å‡ºç°åŒä¸€å¤´ç‰›ï¼‰ï¼Œè€Œä¸”æ€ä¹ˆæ”¹ä¹Ÿæ”¹ä¸å¯¹ã€‚ã€‚ã€‚</p><p>ä½†æ˜¯æœ€åˆçš„æ€è·¯æ˜¯æœ‰ç”¨çš„ï¼ŒçŠ¶å‹ DP çš„æ€è·¯ä¸æ­¤å·²ç»å¾ˆç›¸è¿‘äº†ï¼Œä¸åŒçš„æ˜¯ï¼Œç”¨ç±»ä¼¼ <a href="https://newoj.cqyz.cn/problem/P1976"><strong>TSPé—®é¢˜</strong></a> çš„æ€è·¯</p><p>è®¾ $f[i][j]$ è¡¨ç¤ºå½“å‰æ”¾ç½®çš„çŠ¶æ€ä¸ºäºŒè¿›åˆ¶æ•° $i$ çš„æƒ…å†µä¸‹ï¼Œæœ€åæ”¾çš„æ˜¯ç¬¬ $j$ å¤´å¥¶ç‰›çš„æ–¹æ¡ˆæ•°ï¼Œæ–°çš„çŠ¶æ€è½¬ç§»æ–¹ç¨‹ä¸ºï¼š$f[i][j]=\sum^{n}_{p=1}f[iâ€™][p]\;\;\;(iâ€™=i-2^j,\;j\notin i,\;p\in iâ€™,\;abs(s[j]-s[p])&gt;k)$</p><p>å½“ç„¶ä¹Ÿå¯ä»¥å†™æˆï¼š$f[iâ€™][p]=\sum^n_{p=1}f[i][j]\;\;\;(iâ€™=i+2^p,\;j\in i,\;p\notin i,\;abs(s[j]-s[p])&gt;k)$</p><p>è¿™é‡Œçš„ $i$ è¡¨ç¤ºçš„æ˜¯æ”¾ç½®çŠ¶æ€çš„é›†åˆï¼Œç”¨ <code>i &amp; (1&lt;&lt;j)</code> å¯ä»¥åˆ¤æ–­ $j$ æ˜¯å¦å¤„äº $i$ ä¸­ï¼ˆ$p$ åŒç†ï¼‰</p><h2 id="Codes"><a href="#Codes" class="headerlink" title="Codes"></a>Codes</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxs 65537</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxn 17</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line">ll f[maxs][maxn];</span><br><span class="line"><span class="type">int</span> st[maxn];</span><br><span class="line"><span class="type">int</span> s[maxn],n,k;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> t&gt;<span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">fcin</span><span class="params">(t &amp;x)</span></span>&#123;</span><br><span class="line"><span class="type">int</span> sign=<span class="number">1</span>; x=<span class="number">0</span>; <span class="type">char</span> op=<span class="built_in">getchar</span>();</span><br><span class="line"><span class="keyword">while</span>(op&lt;<span class="string">&#x27;0&#x27;</span>||op&gt;<span class="string">&#x27;9&#x27;</span>)&#123;<span class="keyword">if</span>(op==<span class="string">&#x27;-&#x27;</span>) sign=<span class="number">-1</span>;op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line"><span class="keyword">while</span>(op&gt;=<span class="string">&#x27;0&#x27;</span>&amp;&amp;op&lt;=<span class="string">&#x27;9&#x27;</span>)&#123;x=x*<span class="number">10</span>+(op<span class="number">-48</span>);op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line">x*=sign;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">ll <span class="title">solve</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="type">int</span> maxst=(<span class="number">1</span>&lt;&lt;n)<span class="number">-1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">2</span>;i&lt;=n;i++) st[i]=st[i<span class="number">-1</span>]&lt;&lt;<span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++) f[st[i]][i]=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=maxst;i++)</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=n;j++)</span><br><span class="line"><span class="keyword">if</span>(i&amp;st[j])</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> p=<span class="number">1</span>;p&lt;=n;p++)</span><br><span class="line"><span class="keyword">if</span>(!(i&amp;st[p]) &amp;&amp; <span class="built_in">abs</span>(s[j]-s[p])&gt;k) </span><br><span class="line">f[i+st[p]][p]+=f[i][j];</span><br><span class="line">ll ans=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++) ans+=f[maxst][i];</span><br><span class="line"><span class="keyword">return</span> ans;</span><br><span class="line">&#125; </span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;mixed.in&quot;</span>,<span class="string">&quot;r&quot;</span>,stdin);</span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;mixed.out&quot;</span>,<span class="string">&quot;w&quot;</span>,stdout);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"><span class="built_in">fcin</span>(n);<span class="built_in">fcin</span>(k); st[<span class="number">1</span>]=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++) <span class="built_in">fcin</span>(s[i]);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%lld&quot;</span>,<span class="built_in">solve</span>()); </span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŠ¨æ€è§„åˆ’ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ ‘é“¾å‰–åˆ† | çº¿æ®µæ ‘ | æ ‘é“¾å‰–åˆ†ï¼š  å­¦ä¹ ç¬”è®°</title>
      <link href="/2019/06/05/2019-06-05-%E6%A0%91%E9%93%BE%E5%89%96%E5%88%86Notes/"/>
      <url>/2019/06/05/2019-06-05-%E6%A0%91%E9%93%BE%E5%89%96%E5%88%86Notes/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><h2 id="æ ‘é“¾å‰–åˆ†"><a href="#æ ‘é“¾å‰–åˆ†" class="headerlink" title="æ ‘é“¾å‰–åˆ†"></a>æ ‘é“¾å‰–åˆ†</h2><p><strong>æ ‘é“¾å‰–åˆ†è§£å†³çš„ä¸»è¦æ˜¯æ ‘ä¸Šçš„åŒºé—´ä¿®æ”¹ï¼ŒåŒºé—´æŸ¥è¯¢é—®é¢˜</strong>ï¼Œå…¶æœ¬è´¨å°±ç›¸å½“äºæŠŠçº¿æ®µæ ‘çš„æ“ä½œä»è¿ç»­çš„åºåˆ—ç§»åŠ¨åˆ°äº†ä¸€æ£µæ ‘ä¸Šï¼Œå½“ç„¶æ“ä½œçš„åŒºé—´ $[L,\;R]$ å°±å˜æˆäº†æ ‘ä¸Šçš„ç‚¹ $(u\,\;v)$ ï¼Œä»¥ä¸‹é—®é¢˜å¯ä»¥ç”¨æ ‘å‰–è§£å†³ï¼š</p><ul><li><p>å°†æ ‘ä¸Šä¸¤ç‚¹ $(u,\;v)$ ä¹‹é—´çš„æ‰€æœ‰ç‚¹æƒå€¼åŠ ä¸Š $\delta$</p></li><li><p>è¯¢é—® $\sum^{v}_{i=u}w[i]$ï¼Œè¡¨ç¤ºä» $u$ åˆ° $v$ çš„å”¯ä¸€è·¯å¾„ä¸Šçš„æ‰€æœ‰ç‚¹æƒå€¼ä¹‹å’Œ</p></li><li><p>è¯¢é—® $max\lbrace w[i]\;\;\; i\in\lbrace u,\;v \rbrace \rbrace$ï¼Œè¡¨ç¤ºè¯¢é—® $u$ åˆ° $v$ çš„å”¯ä¸€è·¯å¾„ä¸Šçš„ç‚¹æƒæœ€å¤§ï¼ˆæœ€å°äº¦åŒï¼‰</p></li></ul><p>ä»ä¸Šè¿°é—®é¢˜ä¸­å¯ä»¥çœ‹å‡ºï¼Œ<strong>æ ‘é“¾å‰–åˆ†ç€åŠ›äºæ ‘ä¸Šçš„åŒºé—´é—®é¢˜ï¼Œå¸¸å¸¸æ˜¯ç‚¹åŒºé—´é—®é¢˜</strong>ï¼ˆå½“ç„¶ä½ ä¹Ÿå¯ä»¥ç”¨å»å•ç‚¹ä¿®æ”¹ï¼‰ï¼Œå› æ­¤ï¼Œ<strong>æ ‘é“¾å‰–åˆ†éœ€è¦é…åˆçº¿æ®µæ ‘ä½¿ç”¨</strong></p><p>ä½†æ˜¯æ™®é€šçš„åŒºé—´çº¿æ®µæ ‘é’ˆå¯¹çš„æ˜¯è¿ç»­çš„åºåˆ—ï¼Œ<strong>å¯¹äºä¸€æ£µé™æ€çš„æ ‘ï¼Œéœ€è¦æŠŠä»–çš„ç»“ç‚¹ç¼–æ’æˆæœ‰åºçš„åºåˆ—ï¼Œä½¿å¾—æ¯æ£µå­æ ‘çš„æ ¹ç»“ç‚¹ä¸ä»–çš„æ‰€æœ‰å„¿å­ï¼ˆç›´æ¥å„¿å­ &amp; éš”ä»£å„¿å­ï¼‰æ„æˆè¿ç»­çš„åºåˆ—å…³ç³»</strong>ï¼Œè¿™å°±æ˜¯æ ‘é“¾å‰–åˆ†çš„å·¥ä½œæ‰€åœ¨äº† </p><h2 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h2><p>åœ¨è§£å‰–ä¸€æ£µæ ‘å‰ï¼Œéœ€è¦åšäº›å‡†å¤‡å·¥ä½œ</p><ol><li><strong>é‡å„¿å­</strong>ï¼šç»“ç‚¹çš„é‡å„¿å­å®šä¹‰ä¸ºç»“ç‚¹çš„ç›´æ¥å„¿å­ä¸­ï¼Œå­æ ‘å¤§å°æœ€å¤§çš„é‚£ä¸€ä¸ªç»“ç‚¹</li></ol><ul><li>å¯¹äºå„¿å­ä»¬çš„å­æ ‘å¤§å°ç›¸ç­‰çš„æƒ…å†µï¼Œéšæ„å–ä¸€ä¸ªä½œä¸ºé‡å„¿å­å³å¯ï¼Œä¸ä¼šé€ æˆå½±å“</li></ul><ol><li><strong>è½»å„¿å­</strong>ï¼šé™¤å»é‡å„¿å­ä¹‹å¤–çš„å…¶ä»–ç›´æ¥å„¿å­</li><li><strong>é‡è¾¹</strong>ï¼šç»“ç‚¹ä¸ä»–çš„é‡å„¿å­ä¹‹é—´çš„è¾¹</li><li><strong>è½»è¾¹</strong>ï¼šç»“ç‚¹ä¸ä»–çš„è½»å„¿å­ä¹‹é—´çš„è¾¹</li><li><strong>æ·±åº¦</strong>ï¼šæ ¹ç»“ç‚¹åˆ°è¿™ä¸ªç»“ç‚¹çš„ç»“ç‚¹ä¸ªæ•°ï¼ˆåŒ…æ‹¬æ ¹ç»“ç‚¹å’Œä»–è‡ªå·±ï¼‰</li></ol><p>è¿˜éœ€è¦è®¡ç®—çš„æ˜¯ï¼š</p><ol><li><strong>å­æ ‘å¤§å°</strong>ï¼ˆåŒ…æ‹¬å­æ ‘çš„æ ¹ç»“ç‚¹ï¼‰</li><li><strong>TOP å€¼</strong>ï¼šè®°å½•çš„æ˜¯å½“å‰ç»“ç‚¹æ‰€åœ¨é‡è¾¹çš„èµ·ç‚¹ï¼ˆè½»å„¿å­çš„ TOP å€¼æ˜¯ä»–è‡ªå·±çš„ç¼–å·ï¼‰</li></ol><p>æ ‘é“¾å‰–åˆ†å…¶å®å°±æ˜¯å°†æ ‘ä¸Šçš„æ‰€æœ‰è¾¹åˆ†æˆè½»è¾¹å’Œé‡è¾¹ä¸¤ä¸ªé›†åˆçš„è¿‡ç¨‹ï¼Œéœ€è¦ä¸¤æ¬¡ DFS æ¥å®ç°</p><h2 id="è®¡ç®—å’Œé¢„å¤„ç†"><a href="#è®¡ç®—å’Œé¢„å¤„ç†" class="headerlink" title="è®¡ç®—å’Œé¢„å¤„ç†"></a>è®¡ç®—å’Œé¢„å¤„ç†</h2><p>é¢„å¤„ç†å‡ºä¸Šé¢çš„ 7 ä¸ªå€¼ï¼Œéœ€è¦è·‘ä¸¤æ¬¡ DFSï¼Œ<strong>è·‘ DFS æ—¶ä¸€å®šè¦ç¡®å®šæ ¹ç»“ç‚¹</strong>ï¼ˆæ²¡æœ‰ä¹Ÿè¦ä¹±æ‰¾ä¸€ä¸ªï¼‰</p><h3 id="ç¬¬ä¸€æ¬¡-DFSï¼šè®¡ç®—å‰é¢-6-ä¸ªå€¼"><a href="#ç¬¬ä¸€æ¬¡-DFSï¼šè®¡ç®—å‰é¢-6-ä¸ªå€¼" class="headerlink" title="ç¬¬ä¸€æ¬¡ DFSï¼šè®¡ç®—å‰é¢ 6 ä¸ªå€¼"></a>ç¬¬ä¸€æ¬¡ DFSï¼šè®¡ç®—å‰é¢ 6 ä¸ªå€¼</h3><p>è½»è¾¹å’Œé‡è¾¹å…¶å®åªæ˜¯æ¦‚å¿µï¼Œæ— éœ€å­˜åœ¨ç¨‹åºä¸­ï¼Œè¿™ä¸€é DFS æ±‚å‡ºç»“ç‚¹çš„è½»é‡å„¿å­</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">DFS</span><span class="params">(<span class="type">int</span> u)</span></span>&#123;</span><br><span class="line">siz[u]=<span class="number">1</span>; <span class="type">int</span> maxsize=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=head[u];i;i=nxt[i])</span><br><span class="line"><span class="keyword">if</span>(!dep[to[i]])&#123;</span><br><span class="line">dep[to[i]]=dep[u]+<span class="number">1</span>; </span><br><span class="line"><span class="built_in">DFS</span>(to[i]); </span><br><span class="line">siz[u]+=siz[to[i]]; fa[to[i]]=u;</span><br><span class="line"><span class="keyword">if</span>(siz[to[i]]&gt;maxsize)&#123;</span><br><span class="line">maxsize=siz[to[i]];</span><br><span class="line">Xson[u]=to[i];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç¬¬äºŒæ¬¡-DFSï¼šè®¡ç®—-TOP-å€¼"><a href="#ç¬¬äºŒæ¬¡-DFSï¼šè®¡ç®—-TOP-å€¼" class="headerlink" title="ç¬¬äºŒæ¬¡ DFSï¼šè®¡ç®— TOP å€¼"></a>ç¬¬äºŒæ¬¡ DFSï¼šè®¡ç®— TOP å€¼</h3><p>ç”»ä¸ªå›¾å°±å¾ˆå®¹æ˜“å‘ç°ï¼Œæ¯ä¸ªç»“ç‚¹çš„ TOP å€¼éƒ½ç­‰äºä»–çˆ¶äº²ç»“ç‚¹çš„ TOP å€¼ï¼Œæ³¨æ„é‡å„¿å­å…ˆè®¿é—®ï¼Œè½»å„¿å­åè®¿é—®ï¼ŒTOP å€¼æ˜¯ä»–è‡ªå·±çš„ç¼–å·ï¼Œè¿™ä¸€æ­¥å¯ä»¥é¡ºä¾¿æŠŠæ¯ä¸ªç»“ç‚¹çš„ DFS åºå­˜ä¸‹æ¥ï¼Œè¿™ä¸ª DFS åºå°±æ˜¯çº¿æ®µæ ‘æ¥åšåŒºé—´æ“ä½œçš„æ ¹æ®</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">DFS</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> TOP)</span></span>&#123;</span><br><span class="line">id[u]=++ids;</span><br><span class="line">top[u]=TOP;</span><br><span class="line"><span class="keyword">if</span>(siz[u]==<span class="number">1</span>) <span class="keyword">return</span>;</span><br><span class="line"><span class="built_in">DFS</span>(Xson[u],TOP);<span class="comment">// ä¼˜å…ˆèµ°é‡å„¿å­  </span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=head[u];i;i=nxt[i])</span><br><span class="line"><span class="keyword">if</span>(to[i]!=Xson[u] &amp;&amp; fa[u]!=to[i])</span><br><span class="line"><span class="built_in">DFS</span>(to[i],to[i]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä¸çº¿æ®µæ ‘çš„é…åˆ"><a href="#ä¸çº¿æ®µæ ‘çš„é…åˆ" class="headerlink" title="ä¸çº¿æ®µæ ‘çš„é…åˆ"></a>ä¸çº¿æ®µæ ‘çš„é…åˆ</h3><p>æ ‘é“¾å‰–åˆ†èƒ½å°†æ ‘ä¸Šçš„ç‚¹ç»“åˆçº¿æ®µæ ‘æ¥åšåŒºé—´æ“ä½œï¼Œå°±åœ¨äºå‰–åˆ†å‡ºè½»é‡å„¿å­åï¼Œå¾—åˆ°çš„æ ‘çš„ DFS åºå°†æ˜¯ä¸€ä¸ªæœ‰è¶£çš„åºåˆ—ï¼Œå¦‚ä¸‹å›¾ï¼ŒåŠ ç²—çš„è¾¹æ˜¯é‡è¾¹ï¼š</p><div class="mermaid-wrap"><pre class="mermaid-src" hidden>  graph TD1---2;2&#x3D;&#x3D;&#x3D;4;2---5;1&#x3D;&#x3D;&#x3D;3;3---6;3&#x3D;&#x3D;&#x3D;7;7&#x3D;&#x3D;&#x3D;8  </pre></div><p>å¦‚æœæ²¿ç€<strong>å…ˆé‡è¾¹ï¼Œå†è½»è¾¹</strong>çš„æ–¹å¼éå†ï¼Œå°±ä¼šå¾—åˆ°è¿™æ ·çš„ DFS åºï¼š</p><div class="mermaid-wrap"><pre class="mermaid-src" hidden>  graph TD1---2;2&#x3D;&#x3D;&#x3D;4;2---5;1&#x3D;&#x3D;&#x3D;3;3---6;3&#x3D;&#x3D;&#x3D;7;7&#x3D;&#x3D;&#x3D;8  </pre></div><p>é€—å·ä¸¤è¾¹åˆ†åˆ«æ˜¯ ç»“ç‚¹ç¼–å· å’Œ DFSåºï¼Œç°åœ¨æ¥çœ‹ï¼Œå¦‚æœæƒ³è¦ä¿®æ”¹ä»¥ 3 ä¸ºæ ¹ç»“ç‚¹çš„å­æ ‘ï¼Œå°†å­æ ‘é‡Œçš„ç»“ç‚¹æƒå€¼åŠ ä¸Š dï¼Œé‚£ä¹ˆå°±ç›¸å½“äºåœ¨åºåˆ—ä¸­ä¿®æ”¹äº† (2,5) çš„è¿ç»­å’Œï¼Œæ³¨æ„åˆ° 2 æ˜¯ç»“ç‚¹ 3 çš„ DFSåºï¼Œè€Œ 5=2+4-1ï¼Œäºæ˜¯å¯ä»¥å¾—å‡ºï¼Œä¸€ä¸ªå­æ ‘çš„æ ¹ç»“ç‚¹ $K$ å’Œå­æ ‘ä»£è¡¨çš„è¿ç»­åŒºé—´ä¸ºï¼š$[K,\;K+size(K)-1]$ï¼Œè¿™æ ·æ ‘é“¾å‰–åˆ†å°±å’Œçº¿æ®µæ ‘è”ç³»äº†èµ·æ¥</p><h2 id="ä¿®æ”¹æ“ä½œ"><a href="#ä¿®æ”¹æ“ä½œ" class="headerlink" title="ä¿®æ”¹æ“ä½œ"></a>ä¿®æ”¹æ“ä½œ</h2><p>æ ‘é“¾å‰–åˆ†çš„ä¿®æ”¹æ“ä½œå¯ä»¥åˆ†ä¸º <strong>ç»å¯¹è·¯å¾„ç‚¹æƒä¿®æ”¹</strong> å’Œ <strong>å­æ ‘ç‚¹æƒä¿®æ”¹</strong></p><h3 id="ä¿®æ”¹-u-v-ç»å¯¹è·¯å¾„ä¸Šçš„ç‚¹æƒå€¼"><a href="#ä¿®æ”¹-u-v-ç»å¯¹è·¯å¾„ä¸Šçš„ç‚¹æƒå€¼" class="headerlink" title="ä¿®æ”¹ $(u,v)$ ç»å¯¹è·¯å¾„ä¸Šçš„ç‚¹æƒå€¼"></a>ä¿®æ”¹ $(u,v)$ ç»å¯¹è·¯å¾„ä¸Šçš„ç‚¹æƒå€¼</h3><p>ç»è¿‡æ ‘é“¾å‰–åˆ†å¯ä»¥å‘ç°ï¼Œ<strong>åœ¨åŒä¸€æ¡é‡é“¾ä¸Šçš„ç‚¹ï¼Œå®ƒä»¬çš„ TOP å€¼ç›¸åŒï¼Œæ›´é‡è¦çš„æ˜¯ä»–ä»¬çš„ DFS åºæ˜¯è¿ç»­çš„ï¼Œæ·±åº¦æ›´æ·±çš„ç‚¹çš„ DFS åºæ˜¯è¿ç»­åŒºé—´çš„å³ç«¯ç‚¹ï¼Œæ·±åº¦æ›´æµ…çš„ç‚¹çš„ DFS åºæ˜¯å·¦ç«¯ç‚¹</strong>ï¼Œå› æ­¤å¦‚æœé‡åˆ° $u,\;v$ çš„ TOP å€¼ä¸€æ ·äº†ï¼Œç›´æ¥çº¿æ®µæ ‘åŒºé—´ä¿®æ”¹å°±å®Œäº‹</p><p>å¦‚æœ $u,\;v$ çš„ TOP å€¼ä¸ä¸€æ ·ï¼Œå°±è¦è®© $u,\;v$ å‘ä¸Šè·³ï¼Œç›´åˆ° TOP å€¼ä¸€æ ·ï¼Œåœ¨ $u$ æˆ– $v$ å‘ä¸Šè·³çš„æ—¶å€™ï¼Œå¯ä»¥æŠŠ $TOP(u)$ å’Œ $u$ å½¢æˆçš„é“¾è¿›è¡ŒåŒºé—´æ›´æ–°ï¼Œä¹‹åå†è®© $u$ è·³åˆ° $father(TOP(u))$ ï¼ˆ $v$ ä¹Ÿæ˜¯ä¸€æ ·ï¼‰è¿›è¡Œæ¯”è¾ƒï¼Œç›´åˆ° $u,\;v$ çš„ TOP å€¼ä¸€æ ·</p><p>ç„¶è€Œè¿™ç§æ–¹æ³•å¦‚æœé‡åˆ°ä¸€æ£µè½»é‡å„¿å­äº¤æ›¿å‡ºç°åœ¨ä¸€æ¡é“¾ä¸Šçš„æ ‘æ—¶ï¼Œæ—¶é—´å¤æ‚åº¦å°±å°†é€€åŒ–åˆ°æœ´ç´ çš„å•ç‚¹æ›´æ–°ï¼Œæ‰€ä»¥è¯´æ ‘é“¾å‰–åˆ†æœ¬è´¨ä¸Šè¿˜æ˜¯æš´åŠ›<del>ï¼ˆåªä¸è¿‡ç¨å¾®ä¼˜é›…äº†ä¸€ç‚¹ï¼‰</del></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">pathadd</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> y,<span class="type">int</span> dt)</span></span>&#123;</span><br><span class="line"><span class="comment">// å°† x-&gt;y æœ€çŸ­è·¯å¾„ä¸Šçš„ç‚¹æƒå€¼éƒ½åŠ ä¸Š d </span></span><br><span class="line"><span class="keyword">while</span>(top[x]!=top[y])&#123;</span><br><span class="line"><span class="keyword">if</span>(dep[top[x]]&lt;dep[top[y]]) <span class="built_in">swap</span>(x,y);</span><br><span class="line">SST.<span class="built_in">updata</span>(<span class="number">1</span>,<span class="number">1</span>,n,id[top[x]],id[x],dt);</span><br><span class="line">x=fa[top[x]];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(dep[x]&lt;dep[y]) <span class="built_in">swap</span>(x,y);</span><br><span class="line">SST.<span class="built_in">updata</span>(<span class="number">1</span>,<span class="number">1</span>,n,id[y],id[x],dt);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä¿®æ”¹-u-çš„å­æ ‘çš„ç»“ç‚¹æƒå€¼"><a href="#ä¿®æ”¹-u-çš„å­æ ‘çš„ç»“ç‚¹æƒå€¼" class="headerlink" title="ä¿®æ”¹ $u$ çš„å­æ ‘çš„ç»“ç‚¹æƒå€¼"></a>ä¿®æ”¹ $u$ çš„å­æ ‘çš„ç»“ç‚¹æƒå€¼</h3><p>ç»è¿‡ä¸Šé¢çš„åˆ†æï¼Œä¸€ç»å‘ç° $u$ å’Œä»–çš„å­æ ‘ä¸­çš„æ‰€æœ‰ç»“ç‚¹æœ‰ç€è¿ç»­çš„ DFS åºï¼Œå› æ­¤ç›´æ¥çº¿æ®µæ ‘åŒºé—´ä¿®æ”¹å®Œäº‹</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">updata</span>(<span class="number">1</span>,<span class="number">1</span>,n,id[x],id[x]+siz[x]<span class="number">-1</span>,z);</span><br></pre></td></tr></table></figure><h2 id="è¯¢é—®æ“ä½œ"><a href="#è¯¢é—®æ“ä½œ" class="headerlink" title="è¯¢é—®æ“ä½œ"></a>è¯¢é—®æ“ä½œ</h2><p>å†™å®Œäº†ä¿®æ”¹æ“ä½œï¼Œè¯¢é—®æ“ä½œè‡ªç„¶æ°´åˆ°æ¸ æˆ</p><h3 id="è¯¢é—®-u-v-ç»å¯¹è·¯å¾„ä¸Šçš„ç‚¹æƒå€¼å’Œ"><a href="#è¯¢é—®-u-v-ç»å¯¹è·¯å¾„ä¸Šçš„ç‚¹æƒå€¼å’Œ" class="headerlink" title="è¯¢é—® $(u,v)$ ç»å¯¹è·¯å¾„ä¸Šçš„ç‚¹æƒå€¼å’Œ"></a>è¯¢é—® $(u,v)$ ç»å¯¹è·¯å¾„ä¸Šçš„ç‚¹æƒå€¼å’Œ</h3><p>SST åœ¨ä»£ç ä¸­è¡¨ç¤ºç”¨ç»“æ„ä½“å®šä¹‰çš„çº¿æ®µæ ‘ï¼Œæ”¯æŒåŒºé—´ä¿®æ”¹ &amp; åŒºé—´æ±‚å’Œ</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">long</span> <span class="type">long</span> <span class="title">pathsum</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> y)</span></span>&#123;</span><br><span class="line"><span class="comment">// è¿”å› x-&gt; y çš„æœ€çŸ­è·¯å¾„ä¸Šçš„ç‚¹æƒå€¼å’Œ </span></span><br><span class="line"><span class="type">long</span> <span class="type">long</span> ret=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span>(top[x]!=top[y])&#123;</span><br><span class="line"><span class="keyword">if</span>(dep[top[x]]&lt;dep[top[y]]) <span class="built_in">swap</span>(x,y);</span><br><span class="line">ret+=SST.<span class="built_in">SegSum</span>(<span class="number">1</span>,<span class="number">1</span>,n,id[top[x]],id[x]);</span><br><span class="line">x=fa[top[x]];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(dep[x]&lt;dep[y]) <span class="built_in">swap</span>(x,y);</span><br><span class="line">ret+=SST.<span class="built_in">SegSum</span>(<span class="number">1</span>,<span class="number">1</span>,n,id[y],id[x]);</span><br><span class="line"><span class="keyword">return</span> ret</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä¿®æ”¹-u-çš„å­æ ‘çš„ç»“ç‚¹æƒå€¼å’Œ"><a href="#ä¿®æ”¹-u-çš„å­æ ‘çš„ç»“ç‚¹æƒå€¼å’Œ" class="headerlink" title="ä¿®æ”¹ $u$ çš„å­æ ‘çš„ç»“ç‚¹æƒå€¼å’Œ"></a>ä¿®æ”¹ $u$ çš„å­æ ‘çš„ç»“ç‚¹æƒå€¼å’Œ</h3><p>SST åœ¨ä»£ç ä¸­è¡¨ç¤ºç”¨ç»“æ„ä½“å®šä¹‰çš„çº¿æ®µæ ‘ï¼Œæ”¯æŒåŒºé—´ä¿®æ”¹ &amp; åŒºé—´æ±‚å’Œï¼ˆå†è¯´ä¸€éï¼‰</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SST.<span class="built_in">SegSum</span>(<span class="number">1</span>,<span class="number">1</span>,n,id[x],id[x]+siz[x]<span class="number">-1</span>)</span><br></pre></td></tr></table></figure><h2 id="ä¾‹é¢˜1ï¼šæ´›è°·P3384ã€æ¨¡æ¿ã€‘æ ‘é“¾å‰–åˆ†"><a href="#ä¾‹é¢˜1ï¼šæ´›è°·P3384ã€æ¨¡æ¿ã€‘æ ‘é“¾å‰–åˆ†" class="headerlink" title="ä¾‹é¢˜1ï¼šæ´›è°·P3384ã€æ¨¡æ¿ã€‘æ ‘é“¾å‰–åˆ†"></a>ä¾‹é¢˜1ï¼š<a href="https://www.luogu.org/problemnew/show/P3384"><strong>æ´›è°·P3384ã€æ¨¡æ¿ã€‘æ ‘é“¾å‰–åˆ†</strong></a></h2><h3 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h3><p>å·²çŸ¥ä¸€æ£µåŒ…å«Nä¸ªç»“ç‚¹çš„æ ‘ï¼ˆè¿é€šä¸”æ— ç¯ï¼‰ï¼Œæ¯ä¸ªèŠ‚ç‚¹ä¸ŠåŒ…å«ä¸€ä¸ªæ•°å€¼ï¼Œéœ€è¦æ”¯æŒä»¥ä¸‹æ“ä½œï¼š</p><p>æ“ä½œ1ï¼š æ ¼å¼ï¼š 1 x y z è¡¨ç¤ºå°†æ ‘ä»xåˆ°yç»“ç‚¹æœ€çŸ­è·¯å¾„ä¸Šæ‰€æœ‰èŠ‚ç‚¹çš„å€¼éƒ½åŠ ä¸Šz</p><p>æ“ä½œ2ï¼š æ ¼å¼ï¼š 2 x y è¡¨ç¤ºæ±‚æ ‘ä»xåˆ°yç»“ç‚¹æœ€çŸ­è·¯å¾„ä¸Šæ‰€æœ‰èŠ‚ç‚¹çš„å€¼ä¹‹å’Œ</p><p>æ“ä½œ3ï¼š æ ¼å¼ï¼š 3 x z è¡¨ç¤ºå°†ä»¥xä¸ºæ ¹èŠ‚ç‚¹çš„å­æ ‘å†…æ‰€æœ‰èŠ‚ç‚¹å€¼éƒ½åŠ ä¸Šz</p><p>æ“ä½œ4ï¼š æ ¼å¼ï¼š 4 x è¡¨ç¤ºæ±‚ä»¥xä¸ºæ ¹èŠ‚ç‚¹çš„å­æ ‘å†…æ‰€æœ‰èŠ‚ç‚¹å€¼ä¹‹å’Œ</p><h3 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h3><p>ç¬¬ä¸€è¡ŒåŒ…å«4ä¸ªæ­£æ•´æ•°Nã€Mã€Rã€Pï¼Œåˆ†åˆ«è¡¨ç¤ºæ ‘çš„ç»“ç‚¹ä¸ªæ•°ã€æ“ä½œä¸ªæ•°ã€æ ¹èŠ‚ç‚¹åºå·å’Œå–æ¨¡æ•°ï¼ˆ<strong>å³æ‰€æœ‰çš„è¾“å‡ºç»“æœå‡å¯¹æ­¤å–æ¨¡</strong>ï¼‰ã€‚</p><p>æ¥ä¸‹æ¥ä¸€è¡ŒåŒ…å«Nä¸ªéè´Ÿæ•´æ•°ï¼Œåˆ†åˆ«ä¾æ¬¡è¡¨ç¤ºå„ä¸ªèŠ‚ç‚¹ä¸Šåˆå§‹çš„æ•°å€¼ã€‚</p><p>æ¥ä¸‹æ¥N-1è¡Œæ¯è¡ŒåŒ…å«ä¸¤ä¸ªæ•´æ•°xã€yï¼Œè¡¨ç¤ºç‚¹xå’Œç‚¹yä¹‹é—´è¿æœ‰ä¸€æ¡è¾¹ï¼ˆä¿è¯æ— ç¯ä¸”è¿é€šï¼‰</p><p>æ¥ä¸‹æ¥Mè¡Œæ¯è¡ŒåŒ…å«è‹¥å¹²ä¸ªæ­£æ•´æ•°ï¼Œæ¯è¡Œè¡¨ç¤ºä¸€ä¸ªæ“ä½œï¼Œæ ¼å¼å¦‚ä¸‹ï¼š</p><p>æ“ä½œ1ï¼š 1 x y z</p><p>æ“ä½œ2ï¼š 2 x y</p><p>æ“ä½œ3ï¼š 3 x z</p><p>æ“ä½œ4ï¼š 4 x</p><h3 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h3><p>è¾“å‡ºåŒ…å«è‹¥å¹²è¡Œï¼Œåˆ†åˆ«ä¾æ¬¡è¡¨ç¤ºæ¯ä¸ªæ“ä½œ2æˆ–æ“ä½œ4æ‰€å¾—çš„ç»“æœï¼ˆ<strong>å¯¹På–æ¨¡</strong>ï¼‰</p><h3 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">5 5 2 24</span><br><span class="line">7 3 7 8 0 </span><br><span class="line">1 2</span><br><span class="line">1 5</span><br><span class="line">3 1</span><br><span class="line">4 1</span><br><span class="line">3 4 2</span><br><span class="line">3 2 2</span><br><span class="line">4 5</span><br><span class="line">1 5 1 3</span><br><span class="line">2 1 3</span><br></pre></td></tr></table></figure><h3 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">2</span><br><span class="line">21</span><br></pre></td></tr></table></figure><h3 id="Hint"><a href="#Hint" class="headerlink" title="Hint"></a>Hint</h3><p>æ—¶ç©ºé™åˆ¶ï¼š1sï¼Œ128M</p><p>æ•°æ®è§„æ¨¡ï¼š</p><div class="table-container"><table><thead><tr><th style="text-align:center">ç™¾åˆ†æ¯”</th><th style="text-align:center">N</th><th style="text-align:center">M</th></tr></thead><tbody><tr><td style="text-align:center"><strong>30%</strong></td><td style="text-align:center">$\leq 10$</td><td style="text-align:center">$\leq 10$</td></tr><tr><td style="text-align:center"><strong>70%</strong></td><td style="text-align:center">$\leq 10^3$</td><td style="text-align:center">$\leq 10^3$</td></tr><tr><td style="text-align:center"><strong>100%</strong></td><td style="text-align:center">$\leq 10^5$</td><td style="text-align:center">$\leq 10^5$</td></tr></tbody></table></div><h3 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h3><p>æ¿å­é¢˜ï¼Œç›´æ¥å¥—ä¸Šæ¨¡æ¿è§£å†³å³å¯</p><p><strong>æ³¨æ„å–æ¨¡çš„æ—¶å€™ä¸èƒ½åªåœ¨çº¿æ®µæ ‘å¤–éƒ¨å–æ¨¡ï¼Œå†…éƒ¨å‡¡æ˜¯æ¶‰åŠåˆ°åŠ æ³•çš„æ—¶å€™éƒ½è¦å–æ¨¡</strong></p><h3 id="Codes"><a href="#Codes" class="headerlink" title="Codes"></a>Codes</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ´›è°· P3384 æ ‘é“¾å‰–åˆ† æ¨¡æ¿  </span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxn 100001</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxm maxn*2</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">int</span> n,m,root,mod,ids;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">SegSumTree</span>&#123;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">SegSumTreeNode</span>&#123;</span><br><span class="line">ll V; <span class="type">int</span> LC,RC;</span><br><span class="line">ll TAG;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> val(x) T[x].V</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> lc(x) T[x].LC</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> rc(x) T[x].RC</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> tag(x) T[x].TAG</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> mid ((L+R)&gt;&gt;1)</span></span><br><span class="line">&#125;T[maxn&lt;&lt;<span class="number">2</span>];</span><br><span class="line"><span class="type">int</span> nodes;</span><br><span class="line"><span class="type">int</span> Tr[maxn];</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> t&gt;<span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">fcin</span><span class="params">(t &amp;x)</span></span>&#123;</span><br><span class="line"><span class="type">int</span> sign=<span class="number">1</span>; x=<span class="number">0</span>; <span class="type">char</span> op=<span class="built_in">getchar</span>();</span><br><span class="line"><span class="keyword">while</span>(op&lt;<span class="string">&#x27;0&#x27;</span>||op&gt;<span class="string">&#x27;9&#x27;</span>)&#123;<span class="keyword">if</span>(op==<span class="string">&#x27;-&#x27;</span>) sign=<span class="number">-1</span>;op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line"><span class="keyword">while</span>(op&gt;=<span class="string">&#x27;0&#x27;</span>&amp;&amp;op&lt;=<span class="string">&#x27;9&#x27;</span>)&#123;x=x*<span class="number">10</span>+(op<span class="number">-48</span>);op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line">x*=sign;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">pushup</span><span class="params">(<span class="type">int</span> k)</span></span>&#123;<span class="built_in">val</span>(k)=<span class="built_in">val</span>(<span class="built_in">lc</span>(k))+<span class="built_in">val</span>(<span class="built_in">rc</span>(k));&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">Spr</span><span class="params">(<span class="type">int</span> k,<span class="type">int</span> L,<span class="type">int</span> R,<span class="type">int</span> d)</span></span>&#123;</span><br><span class="line"><span class="built_in">tag</span>(k)+=d; <span class="built_in">val</span>(k)+=(R-L+<span class="number">1</span>)*(ll)d;</span><br><span class="line"><span class="built_in">tag</span>(k)%=mod; <span class="built_in">val</span>(k)%=mod;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">pushdown</span><span class="params">(<span class="type">int</span> k,<span class="type">int</span> L,<span class="type">int</span> R)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">tag</span>(k)==<span class="number">0</span>) <span class="keyword">return</span>;</span><br><span class="line"><span class="built_in">Spr</span>(<span class="built_in">lc</span>(k),L,mid,<span class="built_in">tag</span>(k));</span><br><span class="line"><span class="built_in">Spr</span>(<span class="built_in">rc</span>(k),mid+<span class="number">1</span>,R,<span class="built_in">tag</span>(k));</span><br><span class="line"><span class="built_in">tag</span>(k)=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">BuildTree</span><span class="params">(<span class="type">int</span> N)</span></span>&#123;</span><br><span class="line">nodes=<span class="number">0</span>;<span class="built_in">build</span>(<span class="number">1</span>,N);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">build</span><span class="params">(<span class="type">int</span> L,<span class="type">int</span> R)</span></span>&#123;</span><br><span class="line"><span class="type">int</span> now=++nodes;</span><br><span class="line"><span class="keyword">if</span>(L==R) &#123;<span class="built_in">val</span>(now)=Tr[L];<span class="keyword">return</span> now;&#125;</span><br><span class="line"><span class="built_in">lc</span>(now)=<span class="built_in">build</span>(L,mid);</span><br><span class="line"><span class="built_in">rc</span>(now)=<span class="built_in">build</span>(mid+<span class="number">1</span>,R);</span><br><span class="line"><span class="built_in">pushup</span>(now);</span><br><span class="line"><span class="keyword">return</span> now;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">updata</span><span class="params">(<span class="type">int</span> k,<span class="type">int</span> L,<span class="type">int</span> R,<span class="type">int</span> x,<span class="type">int</span> y,<span class="type">int</span> d)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(x&lt;=L &amp;&amp; R&lt;=y) <span class="keyword">return</span> <span class="built_in">Spr</span>(k,L,R,d);</span><br><span class="line"><span class="built_in">pushdown</span>(k,L,R);</span><br><span class="line"><span class="keyword">if</span>(mid&gt;=x) <span class="built_in">updata</span>(<span class="built_in">lc</span>(k),L,mid,x,y,d);</span><br><span class="line"><span class="keyword">if</span>(mid&lt;y) <span class="built_in">updata</span>(<span class="built_in">rc</span>(k),mid+<span class="number">1</span>,R,x,y,d);</span><br><span class="line"><span class="built_in">pushup</span>(k);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">ll <span class="title">SegSum</span><span class="params">(<span class="type">int</span> k,<span class="type">int</span> L,<span class="type">int</span> R,<span class="type">int</span> x,<span class="type">int</span> y)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(x&lt;=L &amp;&amp; R&lt;=y) <span class="keyword">return</span> <span class="built_in">val</span>(k);</span><br><span class="line"><span class="built_in">pushdown</span>(k,L,R); ll sum=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">if</span>(mid&gt;=x) sum+=<span class="built_in">SegSum</span>(<span class="built_in">lc</span>(k),L,mid,x,y),sum%=mod;</span><br><span class="line"><span class="keyword">if</span>(mid&lt;y) sum+=<span class="built_in">SegSum</span>(<span class="built_in">rc</span>(k),mid+<span class="number">1</span>,R,x,y),sum%=mod;</span><br><span class="line"><span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line">SegSumTree SST;</span><br><span class="line"><span class="type">int</span> to[maxm],nxt[maxm],head[maxn],siz[maxn],id[maxn]; <span class="comment">// id å­˜æ–°ç¼–å·  </span></span><br><span class="line"><span class="type">int</span> w[maxn],Xson[maxn],dep[maxn],fa[maxn],top[maxn],tot;<span class="comment">// æ³¨æ„è¿™é‡Œæ˜¯ç‚¹æƒå€¼ï¼Œä¸æ˜¯è¾¹æƒå€¼  </span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">DFS</span><span class="params">(<span class="type">int</span> u)</span></span>&#123;</span><br><span class="line">siz[u]=<span class="number">1</span>; <span class="type">int</span> maxsize=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=head[u];i;i=nxt[i])</span><br><span class="line"><span class="keyword">if</span>(!dep[to[i]])&#123;</span><br><span class="line">dep[to[i]]=dep[u]+<span class="number">1</span>; <span class="built_in">DFS</span>(to[i]);</span><br><span class="line">siz[u]+=siz[to[i]]; fa[to[i]]=u;</span><br><span class="line"><span class="keyword">if</span>(siz[to[i]]&gt;maxsize)&#123;</span><br><span class="line">maxsize=siz[to[i]];</span><br><span class="line">Xson[u]=to[i];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">DFS</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> TOP)</span></span>&#123;</span><br><span class="line">id[u]=++ids; SST.Tr[ids]=w[u];</span><br><span class="line">top[u]=TOP;</span><br><span class="line"><span class="keyword">if</span>(siz[u]==<span class="number">1</span>) <span class="keyword">return</span>;</span><br><span class="line"><span class="built_in">DFS</span>(Xson[u],TOP);<span class="comment">// ä¼˜å…ˆèµ°é‡å„¿å­  </span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=head[u];i;i=nxt[i])</span><br><span class="line"><span class="keyword">if</span>(to[i]!=Xson[u] &amp;&amp; fa[u]!=to[i])</span><br><span class="line"><span class="built_in">DFS</span>(to[i],to[i]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">Eadd</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> v)</span></span>&#123;</span><br><span class="line">nxt[++tot]=head[u];</span><br><span class="line">to[tot]=v; head[u]=tot;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">pathadd</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> y,<span class="type">int</span> dt)</span></span>&#123;</span><br><span class="line"><span class="comment">// å°† x-&gt;y æœ€çŸ­è·¯å¾„ä¸Šçš„ç‚¹æƒå€¼éƒ½åŠ ä¸Š d </span></span><br><span class="line"><span class="keyword">while</span>(top[x]!=top[y])&#123;</span><br><span class="line"><span class="keyword">if</span>(dep[top[x]]&lt;dep[top[y]]) <span class="built_in">swap</span>(x,y);</span><br><span class="line">SST.<span class="built_in">updata</span>(<span class="number">1</span>,<span class="number">1</span>,n,id[top[x]],id[x],dt);</span><br><span class="line">x=fa[top[x]];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(dep[x]&lt;dep[y]) <span class="built_in">swap</span>(x,y);</span><br><span class="line">SST.<span class="built_in">updata</span>(<span class="number">1</span>,<span class="number">1</span>,n,id[y],id[x],dt);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">long</span> <span class="type">long</span> <span class="title">pathsum</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> y)</span></span>&#123;</span><br><span class="line"><span class="comment">// è¿”å› x-&gt; y çš„æœ€çŸ­è·¯å¾„ä¸Šçš„ç‚¹æƒå€¼å’Œ </span></span><br><span class="line"><span class="type">long</span> <span class="type">long</span> ret=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span>(top[x]!=top[y])&#123;</span><br><span class="line"><span class="keyword">if</span>(dep[top[x]]&lt;dep[top[y]]) <span class="built_in">swap</span>(x,y);</span><br><span class="line">ret+=SST.<span class="built_in">SegSum</span>(<span class="number">1</span>,<span class="number">1</span>,n,id[top[x]],id[x]);</span><br><span class="line">ret%=mod; x=fa[top[x]];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(dep[x]&lt;dep[y]) <span class="built_in">swap</span>(x,y);</span><br><span class="line">ret+=SST.<span class="built_in">SegSum</span>(<span class="number">1</span>,<span class="number">1</span>,n,id[y],id[x]);</span><br><span class="line"><span class="keyword">return</span> ret%mod;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;testin.txt&quot;</span>,<span class="string">&quot;r&quot;</span>,stdin);</span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;testout.txt&quot;</span>,<span class="string">&quot;w&quot;</span>,stdout);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line">SST.<span class="built_in">fcin</span>(n); SST.<span class="built_in">fcin</span>(m);</span><br><span class="line">SST.<span class="built_in">fcin</span>(root); SST.<span class="built_in">fcin</span>(mod);</span><br><span class="line"><span class="type">int</span> x,y,z,op;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++) SST.<span class="built_in">fcin</span>(w[i]);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n<span class="number">-1</span>;i++)&#123;</span><br><span class="line">SST.<span class="built_in">fcin</span>(x);SST.<span class="built_in">fcin</span>(y);</span><br><span class="line"><span class="built_in">Eadd</span>(x,y);<span class="built_in">Eadd</span>(y,x);</span><br><span class="line">&#125; dep[root]=<span class="number">1</span>; <span class="built_in">DFS</span>(root); </span><br><span class="line"><span class="built_in">DFS</span>(root,root); SST.<span class="built_in">BuildTree</span>(ids);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++)&#123;</span><br><span class="line">SST.<span class="built_in">fcin</span>(op);</span><br><span class="line"><span class="keyword">switch</span>(op)&#123;</span><br><span class="line"><span class="keyword">case</span> <span class="number">1</span>: SST.<span class="built_in">fcin</span>(x);SST.<span class="built_in">fcin</span>(y);SST.<span class="built_in">fcin</span>(z);</span><br><span class="line"><span class="built_in">pathadd</span>(x,y,z);</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">2</span>: SST.<span class="built_in">fcin</span>(x);SST.<span class="built_in">fcin</span>(y);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>,<span class="built_in">pathsum</span>(x,y));</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">3</span>: SST.<span class="built_in">fcin</span>(x);SST.<span class="built_in">fcin</span>(z);</span><br><span class="line">SST.<span class="built_in">updata</span>(<span class="number">1</span>,<span class="number">1</span>,n,id[x],id[x]+siz[x]<span class="number">-1</span>,z);</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">4</span>: SST.<span class="built_in">fcin</span>(x);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>,SST.<span class="built_in">SegSum</span>(<span class="number">1</span>,<span class="number">1</span>,n,id[x],id[x]+siz[x]<span class="number">-1</span>));</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"> <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure><h3 id="Extra"><a href="#Extra" class="headerlink" title="Extra"></a>Extra</h3><p>ä¸‹é¢ 2 é“é¢˜ä¹Ÿæ˜¯æ ‘é“¾å‰–åˆ†çš„é¢˜ï¼Œè€Œä¸”<strong>æ˜¯è£¸é¢˜</strong></p><p><del>è¯´å®è¯è¿™éš¾åº¦è¿æ¨¡æ¿é¢˜éƒ½æ¯”ä¸ä¸Šæ˜¯è®¤çœŸçš„å—</del></p><ol><li><p><a href="https://www.luogu.org/problemnew/show/P3833"><strong>æ´›è°·P3833 SHOI2012 é­”æ³•æ ‘</strong></a></p></li><li><p><a href="https://www.luogu.org/problemnew/show/P2590"><strong>æ´›è°·P2590 ZJOI2008 æ ‘çš„ç»Ÿè®¡</strong></a></p></li><li><a href="https://www.luogu.org/problemnew/show/P2590"><strong>P2590 ZJOI2008 æ ‘çš„ç»Ÿè®¡</strong></a><ul><li>è¿™ä¸ªé¢˜æŠŠåŒºé—´æœ€å¤§çº¿æ®µæ ‘å’ŒåŒºé—´æ±‚å’Œçº¿æ®µæ ‘ rua åœ¨äº†ä¸€èµ·ï¼Œä½†æ˜¯æœ¬è´¨æ²¡æœ‰å˜åŒ–ï¼ŒæŒ‰ç…§æ¨¡æ¿æ ¼å¼ç›´æ¥å¥—è¿›å»å°±å®Œäº‹</li></ul></li></ol><h2 id="ä¾‹é¢˜2ï¼šæ´›è°·P2146-NOI2015è½¯ä»¶åŒ…ç®¡ç†å™¨"><a href="#ä¾‹é¢˜2ï¼šæ´›è°·P2146-NOI2015è½¯ä»¶åŒ…ç®¡ç†å™¨" class="headerlink" title="ä¾‹é¢˜2ï¼šæ´›è°·P2146 NOI2015è½¯ä»¶åŒ…ç®¡ç†å™¨"></a>ä¾‹é¢˜2ï¼š<a href="https://www.luogu.org/problemnew/show/P2146"><strong>æ´›è°·P2146 NOI2015è½¯ä»¶åŒ…ç®¡ç†å™¨</strong></a></h2><h3 id="Description-1"><a href="#Description-1" class="headerlink" title="Description"></a>Description</h3><p>Linuxç”¨æˆ·å’ŒOSXç”¨æˆ·ä¸€å®šå¯¹è½¯ä»¶åŒ…ç®¡ç†å™¨ä¸ä¼šé™Œç”Ÿã€‚é€šè¿‡è½¯ä»¶åŒ…ç®¡ç†å™¨ï¼Œä½ å¯ä»¥é€šè¿‡ä¸€è¡Œå‘½ä»¤å®‰è£…æŸä¸€ä¸ªè½¯ä»¶åŒ…ï¼Œç„¶åè½¯ä»¶åŒ…ç®¡ç†å™¨ä¼šå¸®åŠ©ä½ ä»è½¯ä»¶æºä¸‹è½½è½¯ä»¶åŒ…ï¼ŒåŒæ—¶è‡ªåŠ¨è§£å†³æ‰€æœ‰çš„ä¾èµ–ï¼ˆå³ä¸‹è½½å®‰è£…è¿™ä¸ªè½¯ä»¶åŒ…çš„å®‰è£…æ‰€ä¾èµ–çš„å…¶å®ƒè½¯ä»¶åŒ…ï¼‰ï¼Œå®Œæˆæ‰€æœ‰çš„é…ç½®ã€‚Debian/Ubuntuä½¿ç”¨çš„apt-getï¼ŒFedora/CentOSä½¿ç”¨çš„yumï¼Œä»¥åŠOSXä¸‹å¯ç”¨çš„homebrewéƒ½æ˜¯ä¼˜ç§€çš„è½¯ä»¶åŒ…ç®¡ç†å™¨ã€‚</p><p>ä½ å†³å®šè®¾è®¡ä½ è‡ªå·±çš„è½¯ä»¶åŒ…ç®¡ç†å™¨ã€‚ä¸å¯é¿å…åœ°ï¼Œä½ è¦è§£å†³è½¯ä»¶åŒ…ä¹‹é—´çš„ä¾èµ–é—®é¢˜ã€‚å¦‚æœè½¯ä»¶åŒ…Aä¾èµ–è½¯ä»¶åŒ…Bï¼Œé‚£ä¹ˆå®‰è£…è½¯ä»¶åŒ…Aä»¥å‰ï¼Œå¿…é¡»å…ˆå®‰è£…è½¯ä»¶åŒ…Bã€‚åŒæ—¶ï¼Œå¦‚æœæƒ³è¦å¸è½½è½¯ä»¶åŒ…Bï¼Œåˆ™å¿…é¡»å¸è½½è½¯ä»¶åŒ…Aã€‚ç°åœ¨ä½ å·²ç»è·å¾—äº†æ‰€æœ‰çš„è½¯ä»¶åŒ…ä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚è€Œä¸”ï¼Œç”±äºä½ ä¹‹å‰çš„å·¥ä½œï¼Œé™¤0å·è½¯ä»¶åŒ…ä»¥å¤–ï¼Œåœ¨ä½ çš„ç®¡ç†å™¨å½“ä¸­çš„è½¯ä»¶åŒ…éƒ½ä¼šä¾èµ–ä¸€ä¸ªä¸”ä»…ä¸€ä¸ªè½¯ä»¶åŒ…ï¼Œè€Œ0å·è½¯ä»¶åŒ…ä¸ä¾èµ–ä»»ä½•ä¸€ä¸ªè½¯ä»¶åŒ…ã€‚ä¾èµ–å…³ç³»ä¸å­˜åœ¨ç¯ï¼ˆè‹¥æœ‰m(mâ‰¥2)ä¸ªè½¯ä»¶åŒ…A1,A2,A3,â‹¯,Amï¼Œå…¶ä¸­A1ä¾èµ–A2ï¼ŒA2ä¾èµ–A3ï¼ŒA3ä¾èµ–A4ï¼Œâ€¦â€¦ï¼ŒA[m-1]ä¾èµ–Amï¼Œè€ŒAmä¾èµ–A1ï¼Œåˆ™ç§°è¿™mä¸ªè½¯ä»¶åŒ…çš„ä¾èµ–å…³ç³»æ„æˆç¯ï¼‰ï¼Œå½“ç„¶ä¹Ÿä¸ä¼šæœ‰ä¸€ä¸ªè½¯ä»¶åŒ…ä¾èµ–è‡ªå·±ã€‚</p><p>ç°åœ¨ä½ è¦ä¸ºä½ çš„è½¯ä»¶åŒ…ç®¡ç†å™¨å†™ä¸€ä¸ªä¾èµ–è§£å†³ç¨‹åºã€‚æ ¹æ®åé¦ˆï¼Œç”¨æˆ·å¸Œæœ›åœ¨å®‰è£…å’Œå¸è½½æŸä¸ªè½¯ä»¶åŒ…æ—¶ï¼Œå¿«é€Ÿåœ°çŸ¥é“è¿™ä¸ªæ“ä½œå®é™…ä¸Šä¼šæ”¹å˜å¤šå°‘ä¸ªè½¯ä»¶åŒ…çš„å®‰è£…çŠ¶æ€ï¼ˆå³å®‰è£…æ“ä½œä¼šå®‰è£…å¤šå°‘ä¸ªæœªå®‰è£…çš„è½¯ä»¶åŒ…ï¼Œæˆ–å¸è½½æ“ä½œä¼šå¸è½½å¤šå°‘ä¸ªå·²å®‰è£…çš„è½¯ä»¶åŒ…ï¼‰ï¼Œä½ çš„ä»»åŠ¡å°±æ˜¯å®ç°è¿™ä¸ªéƒ¨åˆ†ã€‚æ³¨æ„ï¼Œå®‰è£…ä¸€ä¸ªå·²å®‰è£…çš„è½¯ä»¶åŒ…ï¼Œæˆ–å¸è½½ä¸€ä¸ªæœªå®‰è£…çš„è½¯ä»¶åŒ…ï¼Œéƒ½ä¸ä¼šæ”¹å˜ä»»ä½•è½¯ä»¶åŒ…çš„å®‰è£…çŠ¶æ€ï¼Œå³åœ¨æ­¤æƒ…å†µä¸‹ï¼Œæ”¹å˜å®‰è£…çŠ¶æ€çš„è½¯ä»¶åŒ…æ•°ä¸º0ã€‚</p><h3 id="Input-1"><a href="#Input-1" class="headerlink" title="Input"></a>Input</h3><p>ä»æ–‡ä»¶manager.inä¸­è¯»å…¥æ•°æ®ã€‚</p><p>è¾“å…¥æ–‡ä»¶çš„ç¬¬1è¡ŒåŒ…å«1ä¸ªæ•´æ•°nï¼Œè¡¨ç¤ºè½¯ä»¶åŒ…çš„æ€»æ•°ã€‚è½¯ä»¶åŒ…ä»0å¼€å§‹ç¼–å·ã€‚</p><p>éšåä¸€è¡ŒåŒ…å«nâˆ’1ä¸ªæ•´æ•°ï¼Œç›¸é‚»æ•´æ•°ä¹‹é—´ç”¨å•ä¸ªç©ºæ ¼éš”å¼€ï¼Œåˆ†åˆ«è¡¨ç¤º1,2,3,â‹¯,nâˆ’2,nâˆ’1å·è½¯ä»¶åŒ…ä¾èµ–çš„è½¯ä»¶åŒ…çš„ç¼–å·ã€‚</p><p>æ¥ä¸‹æ¥ä¸€è¡ŒåŒ…å«1ä¸ªæ•´æ•°qï¼Œè¡¨ç¤ºè¯¢é—®çš„æ€»æ•°ã€‚ä¹‹åqè¡Œï¼Œæ¯è¡Œ1ä¸ªè¯¢é—®ã€‚è¯¢é—®åˆ†ä¸ºä¸¤ç§ï¼š</p><p>install xï¼šè¡¨ç¤ºå®‰è£…è½¯ä»¶åŒ…x</p><p>uninstall xï¼šè¡¨ç¤ºå¸è½½è½¯ä»¶åŒ…x</p><p>ä½ éœ€è¦ç»´æŠ¤æ¯ä¸ªè½¯ä»¶åŒ…çš„å®‰è£…çŠ¶æ€ï¼Œä¸€å¼€å§‹æ‰€æœ‰çš„è½¯ä»¶åŒ…éƒ½å¤„äºæœªå®‰è£…çŠ¶æ€ã€‚</p><p>å¯¹äºæ¯ä¸ªæ“ä½œï¼Œä½ éœ€è¦è¾“å‡ºè¿™æ­¥æ“ä½œä¼šæ”¹å˜å¤šå°‘ä¸ªè½¯ä»¶åŒ…çš„å®‰è£…çŠ¶æ€ï¼Œéšååº”ç”¨è¿™ä¸ªæ“ä½œï¼ˆå³æ”¹å˜ä½ ç»´æŠ¤çš„å®‰è£…çŠ¶æ€ï¼‰ã€‚</p><h3 id="Output-1"><a href="#Output-1" class="headerlink" title="Output"></a>Output</h3><p>è¾“å‡ºåˆ°æ–‡ä»¶manager.outä¸­ã€‚</p><p>è¾“å‡ºæ–‡ä»¶åŒ…æ‹¬qè¡Œã€‚</p><p>è¾“å‡ºæ–‡ä»¶çš„ç¬¬iè¡Œè¾“å‡º1ä¸ªæ•´æ•°ï¼Œä¸ºç¬¬iæ­¥æ“ä½œä¸­æ”¹å˜å®‰è£…çŠ¶æ€çš„è½¯ä»¶åŒ…æ•°ã€‚</p><h3 id="Sample-Input-1"><a href="#Sample-Input-1" class="headerlink" title="Sample Input"></a>Sample Input</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">7</span><br><span class="line">0 0 0 1 1 5</span><br><span class="line">5</span><br><span class="line">install 5</span><br><span class="line">install 6</span><br><span class="line">uninstall 1</span><br><span class="line">install 4</span><br><span class="line">uninstall 0</span><br></pre></td></tr></table></figure><h3 id="Sample-Output-1"><a href="#Sample-Output-1" class="headerlink" title="Sample Output"></a>Sample Output</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">3</span><br><span class="line">1</span><br><span class="line">3</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td></tr></table></figure><h3 id="Hint-1"><a href="#Hint-1" class="headerlink" title="Hint"></a>Hint</h3><p>ã€æ ·ä¾‹è¯´æ˜ã€‘</p><p><img src="https://cdn.luogu.org/upload/pic/1504.png" alt="SampleExplain"></p><p>ä¸€å¼€å§‹æ‰€æœ‰çš„è½¯ä»¶åŒ…éƒ½å¤„äºæœªå®‰è£…çŠ¶æ€ã€‚</p><p>å®‰è£…5å·è½¯ä»¶åŒ…ï¼Œéœ€è¦å®‰è£…0,1,5ä¸‰ä¸ªè½¯ä»¶åŒ…ã€‚</p><p>ä¹‹åå®‰è£…6å·è½¯ä»¶åŒ…ï¼Œåªéœ€è¦å®‰è£…6å·è½¯ä»¶åŒ…ã€‚æ­¤æ—¶å®‰è£…äº†0,1,5,6å››ä¸ªè½¯ä»¶åŒ…ã€‚</p><p>å¸è½½1å·è½¯ä»¶åŒ…éœ€è¦å¸è½½1,5,6ä¸‰ä¸ªè½¯ä»¶åŒ…ã€‚æ­¤æ—¶åªæœ‰0å·è½¯ä»¶åŒ…è¿˜å¤„äºå®‰è£…çŠ¶æ€ã€‚</p><p>ä¹‹åå®‰è£…4å·è½¯ä»¶åŒ…ï¼Œéœ€è¦å®‰è£…1,4ä¸¤ä¸ªè½¯ä»¶åŒ…ã€‚æ­¤æ—¶0,1,4å¤„åœ¨å®‰è£…çŠ¶æ€ã€‚æœ€åï¼Œå¸è½½0å·è½¯ä»¶åŒ…ä¼šå¸è½½æ‰€æœ‰çš„è½¯ä»¶åŒ…ã€‚</p><p>ã€æ•°æ®èŒƒå›´ã€‘</p><p><img src="https://cdn.luogu.org/upload/pic/1505.png" alt="DataRange"></p><h3 id="åˆ†æ-1"><a href="#åˆ†æ-1" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h3><p>é¦–å…ˆé¢˜ç›®ä¸­è¯´æ˜è½¯ä»¶åŒ…çš„ä¾èµ–å…³ç³»ä¸æ„æˆç¯ï¼Œé‚£ä¹ˆå°±ä¸€å®šæ˜¯ä¸€é¢—æ ‘äº†<del>ï¼ˆæ˜¯ä¸æ˜¯æ£®æ—æˆ‘ä»¬å…ˆä¸ç®¡ï¼‰</del></p><p><strong>å®‰è£…ä¸€ä¸ªè½¯ä»¶åŒ… $k$ ï¼Œç›¸å½“äºæŠŠæ ¹ç»“ç‚¹åˆ° $k$ çš„è·¯å¾„ä¸Šçš„ç‚¹çš„æƒå€¼å…¨éƒ¨è¦†ç›–ä¸º 1ï¼Œè¢«ä¿®æ”¹çš„è½¯ä»¶åŒ…æ•°å°±æ˜¯è¿™æ¡è·¯å¾„ä¸ŠåŸæ¥çš„ç‚¹æƒå€¼ä¹‹å’Œå’Œç°åœ¨çš„ç‚¹æƒå€¼ä¹‹å’Œçš„å·®</strong></p><p><strong>å¸è½½ä¸€ä¸ªè½¯ä»¶åŒ… $k$ ï¼Œç›¸å½“äºæŠŠ $k$ çš„å­æ ‘ä¸­æ‰€æœ‰ç»“ç‚¹æƒå€¼è¦†ç›–ä¸º 0ï¼Œè¢«ä¿®æ”¹çš„è½¯ä»¶åŒ…æ˜¯å­æ ‘çš„å¤§å°ï¼Œå› ä¸º $k$ çš„å­æ ‘ä¸­çš„è½¯ä»¶åŒ…ä¸€å®šäº‹å…ˆå®‰è£…å®Œäº†ï¼Œæ‰€ä»¥ä¸ç”¨åšå·®</strong></p><p>æ³¨æ„è¿™é‡Œçš„ åŒºé—´è¦†ç›– å’Œ åŒºé—´ä¿®æ”¹ æ˜¯æœ‰åŒºåˆ«çš„ï¼Œæ‰€ä»¥çº¿æ®µæ ‘è¦æ”¹å†™</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxn 100001</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxm maxn*2</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">SegCovTree</span>&#123;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">SegCovTreeNode</span>&#123;</span><br><span class="line"><span class="type">int</span> VAL,LC,RC,TAG;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> val(x) T[x].VAL</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> lc(x) T[x].LC</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> rc(x) T[x].RC</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> tag(x) T[x].TAG</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> mid ((L+R)&gt;&gt;1)</span></span><br><span class="line">&#125;T[maxn&lt;&lt;<span class="number">1</span>]; <span class="type">int</span> nodes;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> t&gt;<span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">fcin</span><span class="params">(t &amp;x)</span></span>&#123;</span><br><span class="line"><span class="type">int</span> sign=<span class="number">1</span>; x=<span class="number">0</span>; <span class="type">char</span> op=<span class="built_in">getchar</span>();</span><br><span class="line"><span class="keyword">while</span>(op&lt;<span class="string">&#x27;0&#x27;</span>||op&gt;<span class="string">&#x27;9&#x27;</span>)&#123;<span class="keyword">if</span>(op==<span class="string">&#x27;-&#x27;</span>) sign=<span class="number">-1</span>;op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line"><span class="keyword">while</span>(op&gt;=<span class="string">&#x27;0&#x27;</span>&amp;&amp;op&lt;=<span class="string">&#x27;9&#x27;</span>)&#123;x=x*<span class="number">10</span>+(op<span class="number">-48</span>);op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line">x*=sign;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">pushup</span><span class="params">(<span class="type">int</span> k)</span></span>&#123;</span><br><span class="line"><span class="built_in">val</span>(k)=<span class="built_in">val</span>(<span class="built_in">lc</span>(k))+<span class="built_in">val</span>(<span class="built_in">rc</span>(k));</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">pushdown</span><span class="params">(<span class="type">int</span> k,<span class="type">int</span> L,<span class="type">int</span> R)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">tag</span>(k)==<span class="number">-1</span>) <span class="keyword">return</span>;</span><br><span class="line"><span class="built_in">val</span>(<span class="built_in">lc</span>(k))=<span class="built_in">tag</span>(k)*(mid-L+<span class="number">1</span>);</span><br><span class="line"><span class="built_in">val</span>(<span class="built_in">rc</span>(k))=<span class="built_in">tag</span>(k)*(R-mid);</span><br><span class="line"><span class="built_in">tag</span>(<span class="built_in">lc</span>(k))=<span class="built_in">tag</span>(<span class="built_in">rc</span>(k))=<span class="built_in">tag</span>(k);</span><br><span class="line"><span class="built_in">tag</span>(k)=<span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">BuildTree</span><span class="params">(<span class="type">int</span> N)</span></span>&#123;</span><br><span class="line">nodes=<span class="number">0</span>; <span class="built_in">build</span>(<span class="number">1</span>,N);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">build</span><span class="params">(<span class="type">int</span> L,<span class="type">int</span> R)</span></span>&#123;</span><br><span class="line"><span class="type">int</span> now=++nodes; <span class="built_in">tag</span>(now)=<span class="number">-1</span>;</span><br><span class="line"><span class="keyword">if</span>(L==R)&#123; <span class="built_in">val</span>(now)=<span class="number">0</span>;<span class="keyword">return</span> now; &#125;</span><br><span class="line"><span class="built_in">lc</span>(now)=<span class="built_in">build</span>(L,mid);</span><br><span class="line"><span class="built_in">rc</span>(now)=<span class="built_in">build</span>(mid+<span class="number">1</span>,R);</span><br><span class="line"><span class="built_in">pushup</span>(now);</span><br><span class="line"><span class="keyword">return</span> now;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">updata</span><span class="params">(<span class="type">int</span> k,<span class="type">int</span> L,<span class="type">int</span> R,<span class="type">int</span> x,<span class="type">int</span> y,<span class="type">int</span> d)</span></span>&#123;</span><br><span class="line"><span class="comment">// d ä¸ºè¦è¦†ç›–çš„å€¼  </span></span><br><span class="line"><span class="keyword">if</span>(x&lt;=L &amp;&amp; R&lt;=y)&#123;</span><br><span class="line"><span class="built_in">val</span>(k)=d*(R-L+<span class="number">1</span>); <span class="built_in">tag</span>(k)=d;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125; <span class="built_in">pushdown</span>(k,L,R);</span><br><span class="line"><span class="keyword">if</span>(x&lt;=mid) <span class="built_in">updata</span>(<span class="built_in">lc</span>(k),L,mid,x,y,d); </span><br><span class="line"><span class="keyword">if</span>(y&gt;mid) <span class="built_in">updata</span>(<span class="built_in">rc</span>(k),mid+<span class="number">1</span>,R,x,y,d);</span><br><span class="line"><span class="built_in">pushup</span>(k);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">SegSum</span><span class="params">(<span class="type">int</span> k,<span class="type">int</span> L,<span class="type">int</span> R,<span class="type">int</span> x,<span class="type">int</span> y)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(x&lt;=L &amp;&amp; R&lt;=y) <span class="keyword">return</span> <span class="built_in">val</span>(k);</span><br><span class="line"><span class="built_in">pushdown</span>(k,L,R); <span class="type">int</span> sum=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">if</span>(x&lt;=mid) sum+=<span class="built_in">SegSum</span>(<span class="built_in">lc</span>(k),L,mid,x,y);</span><br><span class="line"><span class="keyword">if</span>(y&gt;mid) sum+=<span class="built_in">SegSum</span>(<span class="built_in">rc</span>(k),mid+<span class="number">1</span>,R,x,y);</span><br><span class="line"><span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br><span class="line">&#125;; SegCovTree SCT;</span><br><span class="line"><span class="type">int</span> n,q,ids,root;</span><br><span class="line"><span class="type">int</span> to[maxm],nxt[maxm],head[maxn],siz[maxn],id[maxn]; </span><br><span class="line"><span class="type">int</span> w[maxn],Xson[maxn],dep[maxn],fa[maxn],top[maxn],tot;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">Eadd</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> v)</span></span>&#123;</span><br><span class="line">nxt[++tot]=head[u];</span><br><span class="line">to[tot]=v; head[u]=tot;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">DFS</span><span class="params">(<span class="type">int</span> u)</span></span>&#123;</span><br><span class="line">siz[u]=<span class="number">1</span>; <span class="type">int</span> maxsize=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=head[u];i;i=nxt[i])</span><br><span class="line"><span class="keyword">if</span>(!dep[to[i]])&#123;</span><br><span class="line">dep[to[i]]=dep[u]+<span class="number">1</span>; </span><br><span class="line"><span class="built_in">DFS</span>(to[i]); </span><br><span class="line">siz[u]+=siz[to[i]]; fa[to[i]]=u;</span><br><span class="line"><span class="keyword">if</span>(siz[to[i]]&gt;maxsize)&#123;</span><br><span class="line">maxsize=siz[to[i]];</span><br><span class="line">Xson[u]=to[i];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">DFS</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> TOP)</span></span>&#123;</span><br><span class="line">id[u]=++ids;</span><br><span class="line">top[u]=TOP;</span><br><span class="line"><span class="keyword">if</span>(siz[u]==<span class="number">1</span>) <span class="keyword">return</span>;</span><br><span class="line"><span class="built_in">DFS</span>(Xson[u],TOP);<span class="comment">// ä¼˜å…ˆèµ°é‡å„¿å­  </span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=head[u];i;i=nxt[i])</span><br><span class="line"><span class="keyword">if</span>(to[i]!=Xson[u] &amp;&amp; fa[u]!=to[i])</span><br><span class="line"><span class="built_in">DFS</span>(to[i],to[i]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">pathcov</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> y,<span class="type">int</span> dt)</span></span>&#123;</span><br><span class="line"><span class="keyword">while</span>(top[x]!=top[y])&#123;</span><br><span class="line"><span class="keyword">if</span>(dep[top[x]]&lt;dep[top[y]]) <span class="built_in">swap</span>(x,y);</span><br><span class="line">SCT.<span class="built_in">updata</span>(<span class="number">1</span>,<span class="number">1</span>,n,id[top[x]],id[x],dt);</span><br><span class="line">x=fa[top[x]];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(dep[x]&lt;dep[y]) <span class="built_in">swap</span>(x,y);</span><br><span class="line">SCT.<span class="built_in">updata</span>(<span class="number">1</span>,<span class="number">1</span>,n,id[y],id[x],dt);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">pathsum</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> y)</span></span>&#123;</span><br><span class="line"><span class="comment">// è¿”å› x-&gt; y çš„æœ€çŸ­è·¯å¾„ä¸Šçš„ç‚¹æƒå€¼å’Œ </span></span><br><span class="line"><span class="type">int</span> ret=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span>(top[x]!=top[y])&#123;</span><br><span class="line"><span class="keyword">if</span>(dep[top[x]]&lt;dep[top[y]]) <span class="built_in">swap</span>(x,y);</span><br><span class="line">ret+=SCT.<span class="built_in">SegSum</span>(<span class="number">1</span>,<span class="number">1</span>,n,id[top[x]],id[x]);</span><br><span class="line">x=fa[top[x]];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(dep[x]&lt;dep[y]) <span class="built_in">swap</span>(x,y);</span><br><span class="line">ret+=SCT.<span class="built_in">SegSum</span>(<span class="number">1</span>,<span class="number">1</span>,n,id[y],id[x]);</span><br><span class="line"><span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;testin.txt&quot;</span>,<span class="string">&quot;r&quot;</span>,stdin);</span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;testout.txt&quot;</span>,<span class="string">&quot;w&quot;</span>,stdout);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line">SCT.<span class="built_in">fcin</span>(n); root=<span class="number">1</span>;</span><br><span class="line"><span class="type">int</span> a,b; <span class="type">char</span> op[<span class="number">19</span>];</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">2</span>;i&lt;=n;i++)&#123;</span><br><span class="line">SCT.<span class="built_in">fcin</span>(a);a++;</span><br><span class="line"><span class="built_in">Eadd</span>(i,a);<span class="built_in">Eadd</span>(a,i);</span><br><span class="line">&#125; dep[root]=<span class="number">1</span>; <span class="type">int</span> TMP;</span><br><span class="line"><span class="built_in">DFS</span>(root);<span class="built_in">DFS</span>(root,root);</span><br><span class="line">SCT.<span class="built_in">BuildTree</span>(n); SCT.<span class="built_in">fcin</span>(q);</span><br><span class="line"><span class="keyword">while</span>(q--)&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,op);</span><br><span class="line">SCT.<span class="built_in">fcin</span>(a);a++;</span><br><span class="line"><span class="keyword">if</span>(op[<span class="number">0</span>]==<span class="string">&#x27;i&#x27;</span>)&#123;</span><br><span class="line">TMP=<span class="built_in">pathsum</span>(root,a);</span><br><span class="line"><span class="built_in">pathcov</span>(root,a,<span class="number">1</span>);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,<span class="built_in">pathsum</span>(root,a)-TMP);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,SCT.<span class="built_in">SegSum</span>(<span class="number">1</span>,<span class="number">1</span>,n,id[a],id[a]+siz[a]<span class="number">-1</span>));</span><br><span class="line">SCT.<span class="built_in">updata</span>(<span class="number">1</span>,<span class="number">1</span>,n,id[a],id[a]+siz[a]<span class="number">-1</span>,<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ„Ÿæƒ³"><a href="#æ„Ÿæƒ³" class="headerlink" title="æ„Ÿæƒ³"></a>æ„Ÿæƒ³</h2><p>æ ‘é“¾å‰–åˆ†ç”±äºæˆåŠŸç»“åˆäº†ç±»ä¼¼äº å€å¢LCA çš„è·³è·³æ³•ï¼Œå’Œæœ¬æ¥å°±å¾ˆå†—é•¿çš„åŒºé—´çº¿æ®µæ ‘ï¼Œä½¿å¾—æ¨¡æ¿é¢˜ç«Ÿå‡ºç° 149 è¡Œä»£ç é‡çš„ <del>æƒ¨ç»äººå¯°</del> çš„ç°è±¡ï¼Œå› æ­¤å†™æ ‘é“¾å‰–åˆ†ä¸€å®šè¦é™ä¸‹å¿ƒæ¥è®¤çœŸå†™ï¼Œç¨å¾®æ¼æ‰ä¸€ä¸ªè¯­å¥ç¼–æœ‰å¯èƒ½å¯¼è‡´ç¨‹åºå¡æ­»æ‰ï¼ˆç„¶è€Œä½ æ— è®ºå¦‚ä½•ä¹ŸæŸ¥ä¸å‡ºæ¥ï¼‰ï¼Œåˆ†äº«ä¸€å¥æˆ‘ç»å¸¸å¿˜è®°å†™çš„ä»£ç ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dep[root]=<span class="number">1</span>;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> çº¿æ®µæ ‘ </tag>
            
            <tag> æ ‘é“¾å‰–åˆ† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åˆ†æ²» | ç‚¹åˆ†æ²» | ç‚¹åˆ†æ²»ï¼šå­¦ä¹ ç¬”  è®°</title>
      <link href="/2019/06/04/2019-06-04-dfz/"/>
      <url>/2019/06/04/2019-06-04-dfz/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><h2 id="ç‚¹åˆ†æ²»"><a href="#ç‚¹åˆ†æ²»" class="headerlink" title="ç‚¹åˆ†æ²»"></a>ç‚¹åˆ†æ²»</h2><p>ç‚¹åˆ†æ²»ï¼Œæ˜¯æ ‘ä¸Šçš„ä¸€ç§åˆ†æ²»ç®—æ³•ï¼Œ<strong>æ˜¯ç»Ÿè®¡æ ‘ä¸Šè·¯å¾„çš„ä¸€ç§ä¼˜åŒ–ç®—æ³•</strong></p><p><strong>ç‚¹åˆ†æ²»çš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼Œå¯¹äºä¸€æ£µæ— æ ¹æ ‘çš„ä¸€ä¸ªç»“ç‚¹ u ï¼ŒæŠŠé¢˜ç›®è¦æ±‚çš„ç‰¹å¾è·¯å¾„åˆ†ä¸ºåªåœ¨ u çš„å­æ ‘ä¸Šçš„è·¯å¾„æ•°ï¼Œå’Œç»è¿‡ u çš„è·¯å¾„æ•°ï¼Œè€Œæ±‚åªåœ¨ u çš„å­æ ‘ä¸Šçš„è·¯å¾„æ•°å¯ä»¥é€šè¿‡é€’å½’æ±‚è§£</strong></p><p>è¿™é‡Œçš„ u å…·æœ‰é€’å½’æ€§è´¨ï¼Œé‚£ä¹ˆåº”è¯¥è€ƒè™‘ä¸€ä¸ªé€’å½’çš„å…¥å£ï¼Œä½¿å¾—æ€»çš„é€’å½’æ¬¡æ•°å°½é‡å°ï¼Œä¹Ÿå°±æ˜¯ u è¿æ¥çš„ç»“ç‚¹å±‚æ•°å°½é‡å°ï¼Œç¬¦åˆè¦æ±‚çš„ u ï¼Œç§°ä¹‹ä¸ºï¼š<strong>æ ‘çš„é‡å¿ƒ</strong></p><h2 id="æ ‘çš„é‡å¿ƒ"><a href="#æ ‘çš„é‡å¿ƒ" class="headerlink" title="æ ‘çš„é‡å¿ƒ"></a>æ ‘çš„é‡å¿ƒ</h2><p>æ±‚æ ‘çš„é‡å¿ƒï¼Œå¯¹äºä¼˜åŒ–ç‚¹åˆ†æ²»çš„æ—¶é—´å¤æ‚åº¦å¾ˆé‡è¦ï¼Œè€Œä¸”<strong>æ±‚è§£æ•°çš„é‡å¿ƒçš„è¿‡ç¨‹ä¹Ÿæ˜¯ä¸€ä¸ªé€’å½’çš„è¿‡ç¨‹ï¼Œå³è¿™ä¸ªâ€œæ ‘â€å¯èƒ½æ˜¯é€’å½’æ—¶çš„å­æ ‘ï¼Œä¹Ÿå°±æ˜¯è¯´è¦å¯¹æ¯ä¸€æ­¥èµ°åˆ°çš„å­æ ‘æ±‚é‡å¿ƒï¼Œæ‰èƒ½ä¿è¯æ¯ä¸€æ­¥éƒ½é«˜æ•ˆçš„åˆ†æ²»æ±‚è§£</strong></p><p>æ±‚è§£æ ‘çš„é‡å¿ƒç»“ç‚¹æ˜¯ä¸€ä¸ªæ ‘ä¸Š DP çš„è¿‡ç¨‹ï¼ŒæŠŠæ¯ä¸ªç‚¹å»¶ä¼¸åˆ°çš„å­æ ‘å¤§å°ï¼ˆè¿™é‡Œè¦åŠ ä¸Šå®ƒè‡ªå·±çš„ 1 ä¸ªï¼‰æ±‚å‡ºæ¥ï¼Œå–æœ€å°çš„ç»“ç‚¹å³å¯ï¼Œä½†æ˜¯è¦æ³¨æ„æ— æ ¹æ ‘çš„æ€§è´¨ï¼Œå¦‚ä¸‹å›¾ï¼š</p><div class="mermaid-wrap"><pre class="mermaid-src" hidden>  graph TD1---2;2---3;1---4;4---5;2---6;4---7  </pre></div><p>æ­¤æ—¶ï¼Œç»“ç‚¹ 4 çš„å­æ ‘ä¸ä»…åŒ…å« {5ï¼Œ7}ï¼Œä¹ŸåŒ…å«å®ƒä¸Šé¢çš„ä¸€ä¸²ç‚¹ {1ï¼Œ2ï¼Œ3ï¼Œ6}ï¼Œä½†æ­¤æ—¶çš„ size() é‡Œé¢æ˜¯ 2ï¼Œé‚£ä¹ˆ 4 çš„å¦å¤–ä¸€ä¸ªå­æ ‘å¤§å°åº”è¯¥æ˜¯ N-size() ï¼ŒN å³æ˜¯æ€»ç‚¹æ•°</p><h2 id="Codeï¼šæ±‚è§£æ ‘çš„é‡å¿ƒ"><a href="#Codeï¼šæ±‚è§£æ ‘çš„é‡å¿ƒ" class="headerlink" title="Codeï¼šæ±‚è§£æ ‘çš„é‡å¿ƒ"></a>Codeï¼šæ±‚è§£æ ‘çš„é‡å¿ƒ</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">rootdfs</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> fu)</span></span>&#123;</span><br><span class="line">siz[u]=<span class="number">1</span>; f[u]=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=head[u];i;i=nxt[i])</span><br><span class="line"><span class="keyword">if</span>(to[i]!=fu &amp;&amp; !vis[to[i]])&#123;</span><br><span class="line"><span class="built_in">rootdfs</span>(to[i],u); siz[u]+=siz[to[i]];</span><br><span class="line">f[u]=<span class="built_in">max</span>(f[u],siz[to[i]]);</span><br><span class="line">&#125;</span><br><span class="line">f[u]=<span class="built_in">max</span>(f[u],nsize-siz[u]);</span><br><span class="line"><span class="keyword">if</span>(maxsize&gt;siz[u]) root=u; <span class="comment">// maxsize åˆå§‹ä¸º INF</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä¾‹é¢˜1ï¼šã€æ¨¡æ¿ã€‘ç‚¹åˆ†æ²»1ï¼ˆæ´›è°·P3806ï¼‰"><a href="#ä¾‹é¢˜1ï¼šã€æ¨¡æ¿ã€‘ç‚¹åˆ†æ²»1ï¼ˆæ´›è°·P3806ï¼‰" class="headerlink" title="ä¾‹é¢˜1ï¼šã€æ¨¡æ¿ã€‘ç‚¹åˆ†æ²»1ï¼ˆæ´›è°·P3806ï¼‰"></a>ä¾‹é¢˜1ï¼šã€æ¨¡æ¿ã€‘ç‚¹åˆ†æ²»1ï¼ˆæ´›è°·P3806ï¼‰</h2><h3 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h3><p>ç»™å®šä¸€æ£µæœ‰nä¸ªç‚¹çš„æ ‘</p><p>è¯¢é—®æ ‘ä¸Šè·ç¦»ä¸ºkçš„ç‚¹å¯¹æ˜¯å¦å­˜åœ¨ã€‚</p><h3 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h3><p>n,m æ¥ä¸‹æ¥n-1æ¡è¾¹a,b,cæè¿°aåˆ°bæœ‰ä¸€æ¡é•¿åº¦ä¸ºcçš„è·¯å¾„</p><p>æ¥ä¸‹æ¥mè¡Œæ¯è¡Œè¯¢é—®ä¸€ä¸ªK</p><h3 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h3><p>å¯¹äºæ¯ä¸ªKæ¯è¡Œè¾“å‡ºä¸€ä¸ªç­”æ¡ˆï¼Œå­˜åœ¨è¾“å‡ºâ€œAYEâ€,å¦åˆ™è¾“å‡ºâ€NAYâ€(ä¸åŒ…å«å¼•å·)</p><h3 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">2 1</span><br><span class="line">1 2 2</span><br><span class="line">2</span><br></pre></td></tr></table></figure><h3 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">AYE</span><br></pre></td></tr></table></figure><h3 id="Hint"><a href="#Hint" class="headerlink" title="Hint"></a>Hint</h3><p>å¯¹äº30%çš„æ•°æ®n&lt;=100</p><p>å¯¹äº60%çš„æ•°æ®n&lt;=1000,m&lt;=50</p><p>å¯¹äº100%çš„æ•°æ®n&lt;=10000,m&lt;=100,c&lt;=10000,K&lt;=10000000</p><h3 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h3><p>å¯¹äºä¸¤ç‚¹ä¹‹é—´è·¯å¾„é•¿åº¦ä¸º K çš„ç‚¹å¯¹æ•°ç›®ï¼Œå¯ä»¥é€šè¿‡ç‚¹åˆ†æ²»æ¥å®ç°ï¼Œ<strong>å³å°†å½“å‰ç‚¹å­æ ‘ä¸­çš„ç‚¹å¯¹è·¯å¾„ä¸º K çš„ç‚¹å¯¹åˆ†æˆ éƒ½åœ¨åŒä¸€æ£µå­æ ‘ä¸­ å’Œ ç©¿è¶Šå½“å‰ç»“ç‚¹ï¼Œåœ¨ä¸¤æ£µä¸åŒå­æ ‘ä¸­ çš„ä¸¤ç§æƒ…å†µ</strong>ï¼Œåˆå‘ç°å¯¹äºç¬¬ä¸€ç§æƒ…å†µå¯ä»¥é€’å½’å¤„ç†ï¼Œå®Œç¾é…åˆç‚¹åˆ†æ²»çš„æ€æƒ³</p><p>åˆæ­¥å®ç°ï¼šå…ˆä¸€æ¬¡ DFS å°†ä»¥ K ä¸ºæ ¹ç»“ç‚¹çš„å­æ ‘ä¸­çš„æ‰€æœ‰ç‚¹åˆ° K çš„è·ç¦»è®¡ç®—å‡ºæ¥ï¼Œç„¶åç”¨æ ‡è®°æ•°ç»„æ ‡è®°å‡ºç°çš„è·¯å¾„é•¿åº¦ï¼ˆä¹‹åå¯ä»¥ $O(n)$ ç¦»çº¿å¤„ç†è¯¢é—®ï¼‰ï¼Œå†æŒ‰ç…§åˆ†æ²»çš„æ€æƒ³ï¼Œæ¯æ¬¡é€‰æ‹©å½“å‰æ ‘çš„é‡å¿ƒç»“ç‚¹è¿›å…¥ï¼Œé€’å½’è§£å†³å³å¯</p><p>ä½†æ˜¯ï¼Œæˆ‘ä»¬çš„ç›®çš„æ˜¯ç»Ÿè®¡è·¨è¶Šå­æ ‘çš„ç‚¹å¯¹è·¯å¾„é•¿åº¦ï¼Œå¯¹äºä¸Šé¢çš„ DFS æ±‚ç‚¹åˆ° K çš„è·¯å¾„é•¿åº¦å†åŠ èµ·æ¥çš„ç¡®è¡Œä¹‹æœ‰æ•ˆï¼Œç„¶è€ŒæŸäº›å¤„äºåŒä¸€å­æ ‘ä¸­çš„ç‚¹å¯¹çš„è·ç¦»å°±ä¸ä¼šè¢«æ­£ç¡®çš„è®¡ç®—ï¼Œä»è€Œæœ‰å¯èƒ½å¯¼è‡´å¤šä½™çš„ç»Ÿè®¡ï¼Œå¦‚ï¼š</p><blockquote><p><strong>ç›®æ ‡è·¯å¾„é•¿åº¦ä¸º 5ï¼Œæ ¹ç»“ç‚¹ä¸º 1</strong></p></blockquote><div class="mermaid-wrap"><pre class="mermaid-src" hidden>  graph TD1---2;2---3;1---4;4---5;2---6;4---7  </pre></div><p>åœ¨ä¸Šå›¾ä¸­ä¼šå‘ç°ï¼ŒæŒ‰ç…§å‰é¢ DFS ç´¯åŠ çš„æ€æƒ³ï¼Œä¼šä½¿å¾— 2 åˆ° 4 çš„è·¯å¾„é•¿åº¦ $Len(2,\;4)$ è¢«è®¡ç®—ä¸º $Dist(2)+Dist(4)=5$ ä»è€Œç»Ÿè®¡è¿›ç­”æ¡ˆï¼Œä½†æ˜¯ $Len(2,\;4)=1$ æ‰æ˜¯æ­£ç¡®ç­”æ¡ˆï¼Œè€Œæ­£ç¡®çš„ç­”æ¡ˆåº”è¯¥ä¸º$Len(2,\;3)=5$ åªæœ‰ä¸€ç»„</p><p><strong>è§£å†³çš„æ–¹æ³•å°±æ˜¯ï¼Œans ç»Ÿè®¡ä¹‹åï¼Œå¯¹äºå½“å‰ç»“ç‚¹ K çš„æ¯ä¸ªç›´æ¥å­ç»“ç‚¹ï¼ˆæœ‰è¾¹çš„ï¼‰å¤šç»Ÿè®¡ä¸€æ¬¡ï¼Œè¿™æ¬¡ç»Ÿè®¡ä¸ä¸Šæ¬¡ç»Ÿè®¡ç›¸åï¼ŒæŠŠæ ‡è®°æ•°ç»„ä¸­çš„è·¯å¾„é•¿åº¦å¯¹åº”çš„è®¡æ•°å™¨å…¨éƒ¨å‡æ‰ï¼Œå°±å®ç°äº†æ’é”™ï¼Œæ³¨æ„è¿›å…¥é€’å½’æ—¶ï¼Œå¦‚æœæ—¶ç´¯åŠ ï¼ˆä» K å¼€å§‹ï¼‰å°±ä¸åŒå¸¦åˆå§‹å€¼ï¼Œè®¾ä¸º 0 å°±å¥½ï¼Œä½†å¦‚æœæ˜¯æ’é”™ï¼ˆä» K çš„æŸä¸ªå„¿å­å¼€å§‹ï¼‰å°±è¦å¸¦ä¸Šåˆå§‹å€¼ï¼Œä¸º K å’Œè¿™ä¸ªå„¿å­ä¹‹é—´çš„è¾¹æƒï¼ˆå› ä¸º $Dist$ ç»Ÿè®¡çš„æ˜¯æ‰€æœ‰å­æ ‘ä¸­çš„ç‚¹åˆ° K çš„è·ç¦»ï¼‰</strong></p><h3 id="Codes"><a href="#Codes" class="headerlink" title="Codes"></a>Codes</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxn 40001</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxk 10000001</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxm maxn*2</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> INF 2139062143</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="type">int</span> to[maxm],nxt[maxm],head[maxn];</span><br><span class="line"><span class="type">int</span> siz[maxn],f[maxn],w[maxm],d[maxn]; <span class="type">bool</span> vis[maxn];</span><br><span class="line"><span class="type">int</span> ex[maxk];</span><br><span class="line"><span class="type">int</span> n,k,m,tot,root,nsize,maxsize;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">Eadd</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> y,<span class="type">int</span> ww)</span></span>&#123;</span><br><span class="line">nxt[++tot]=head[x]; w[tot]=ww;</span><br><span class="line">to[tot]=y; head[x]=tot;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">rootdfs</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> fu)</span></span>&#123;</span><br><span class="line">siz[u]=<span class="number">1</span>; f[u]=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=head[u];i;i=nxt[i])</span><br><span class="line"><span class="keyword">if</span>(to[i]!=fu &amp;&amp; !vis[to[i]])&#123;</span><br><span class="line"><span class="built_in">rootdfs</span>(to[i],u); siz[u]+=siz[to[i]];</span><br><span class="line">f[u]=<span class="built_in">max</span>(f[u],siz[to[i]]);</span><br><span class="line">&#125;</span><br><span class="line">f[u]=<span class="built_in">max</span>(f[u],nsize-siz[u]);</span><br><span class="line"><span class="keyword">if</span>(maxsize&gt;siz[u]) root=u;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> ds;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">pathdfs</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> fu,<span class="type">int</span> wu)</span></span>&#123;</span><br><span class="line">d[++ds]=wu;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=head[u];i;i=nxt[i])</span><br><span class="line"><span class="keyword">if</span>(to[i]!=fu &amp;&amp; !vis[to[i]])</span><br><span class="line"><span class="built_in">pathdfs</span>(to[i],u,wu+w[i]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">stat</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> val,<span class="type">bool</span> plus)</span></span>&#123;</span><br><span class="line">ds=<span class="number">0</span>; <span class="built_in">pathdfs</span>(u,<span class="number">0</span>,val);</span><br><span class="line"><span class="keyword">if</span>(plus)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=ds;i++)</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> j=i+<span class="number">1</span>;j&lt;=ds;j++) </span><br><span class="line">ex[d[i]+d[j]]++;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=ds;i++)</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> j=i+<span class="number">1</span>;j&lt;=ds;j++) </span><br><span class="line">ex[d[i]+d[j]]--;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dfs</span><span class="params">(<span class="type">int</span> u)</span></span>&#123;</span><br><span class="line"><span class="built_in">stat</span>(u,<span class="number">0</span>,<span class="literal">true</span>); vis[u]=<span class="literal">true</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=head[u];i;i=nxt[i])</span><br><span class="line"><span class="keyword">if</span>(!vis[to[i]])&#123;</span><br><span class="line"><span class="built_in">stat</span>(to[i],w[i],<span class="literal">false</span>);</span><br><span class="line">nsize=siz[to[i]]; maxsize=INF;</span><br><span class="line"><span class="built_in">rootdfs</span>(to[i],<span class="number">0</span>); <span class="built_in">dfs</span>(root); </span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;testin.txt&quot;</span>,<span class="string">&quot;r&quot;</span>,stdin);</span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;testout.txt&quot;</span>,<span class="string">&quot;w&quot;</span>,stdout);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;m); <span class="type">int</span> a,b,c;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n<span class="number">-1</span>;i++)&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>,&amp;a,&amp;b,&amp;c);</span><br><span class="line"><span class="built_in">Eadd</span>(a,b,c);<span class="built_in">Eadd</span>(b,a,c);</span><br><span class="line">&#125;</span><br><span class="line">nsize=n; maxsize=INF;</span><br><span class="line"><span class="built_in">rootdfs</span>(<span class="number">1</span>,<span class="number">0</span>); <span class="built_in">dfs</span>(root);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++)&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;k);</span><br><span class="line"><span class="keyword">if</span>(ex[k]) <span class="built_in">printf</span>(<span class="string">&quot;AYE\n&quot;</span>);</span><br><span class="line"><span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">&quot;NAY\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä¾‹é¢˜2ï¼šæ´›è°·P4178-Tree"><a href="#ä¾‹é¢˜2ï¼šæ´›è°·P4178-Tree" class="headerlink" title="ä¾‹é¢˜2ï¼šæ´›è°·P4178 Tree"></a>ä¾‹é¢˜2ï¼šæ´›è°·P4178 Tree</h2><h3 id="Description-1"><a href="#Description-1" class="headerlink" title="Description"></a>Description</h3><p>ç»™ä½ ä¸€æ£µTREE,ä»¥åŠè¿™æ£µæ ‘ä¸Šè¾¹çš„è·ç¦».é—®æœ‰å¤šå°‘å¯¹ç‚¹å®ƒä»¬ä¸¤è€…é—´çš„è·ç¦»å°äºç­‰äºK</p><h3 id="Input-1"><a href="#Input-1" class="headerlink" title="Input"></a>Input</h3><p>Nï¼ˆn&lt;=40000ï¼‰ æ¥ä¸‹æ¥n-1è¡Œè¾¹æè¿°ç®¡é“ï¼ŒæŒ‰ç…§é¢˜ç›®ä¸­å†™çš„è¾“å…¥ æ¥ä¸‹æ¥æ˜¯k</p><h3 id="Output-1"><a href="#Output-1" class="headerlink" title="Output"></a>Output</h3><p>ä¸€è¡Œï¼Œæœ‰å¤šå°‘å¯¹ç‚¹ä¹‹é—´çš„è·ç¦»å°äºç­‰äºk</p><h3 id="Sample-Input-1"><a href="#Sample-Input-1" class="headerlink" title="Sample Input"></a>Sample Input</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">7</span><br><span class="line">1 6 13 </span><br><span class="line">6 3 9 </span><br><span class="line">3 5 7 </span><br><span class="line">4 1 3 </span><br><span class="line">2 4 20 </span><br><span class="line">4 7 2 </span><br><span class="line">10</span><br></pre></td></tr></table></figure><h3 id="Sample-Output-1"><a href="#Sample-Output-1" class="headerlink" title="Sample Output"></a>Sample Output</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">5</span><br></pre></td></tr></table></figure><h3 id="Hint-1"><a href="#Hint-1" class="headerlink" title="Hint"></a>Hint</h3><p>$K\leq 2000$ï¼Œ$\forall w_i\leq 1000$</p><h3 id="åˆ†æ-1"><a href="#åˆ†æ-1" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h3><p>æœ‰äº†<strong>ä¾‹é¢˜ 1</strong> çš„æ€è·¯ï¼Œè¿™é“é¢˜æ˜¾ç„¶æ˜¯å¯ä»¥ç”¨ç‚¹åˆ†æ²»æ¥è§£å†³çš„ï¼Œä¸ ä¾‹é¢˜ 1 ä¸åŒçš„æ˜¯ï¼Œè¿™é“é¢˜éœ€è¦ç»Ÿè®¡çš„æ˜¯å°äºç­‰äº K çš„è·¯å¾„é•¿åº¦çš„ç‚¹å¯¹æ•°é‡</p><p>è¿˜æ˜¯é‡‡ç”¨ æ•´ä½“ç»Ÿè®¡ + å­æ ‘æ’é”™ çš„æ–¹æ³•åšï¼Œå³å…ˆæ— è„‘ç»Ÿè®¡ K æ‰€æœ‰å­æ ‘ä¸­æ»¡è¶³ $Dist(x)+Dist(y)\leq k$ çš„ç‚¹å¯¹ä¸ªæ•°ï¼Œå†åé¢æ’é”™å‡æ‰</p><p>ç»Ÿè®¡ç‚¹å¯¹æ•°æ—¶è¦ç”¨åˆ°ä¸¤ä¸ªæŒ‡é’ˆ Lï¼ŒR æ¥ä¼˜åŒ–ï¼Œå…·ä½“æ˜¯ï¼š<strong>å…ˆå°† K çš„æ‰€æœ‰å­ç»“ç‚¹åˆ° K çš„é•¿åº¦æ±‚å‡ºæ¥ï¼Œå°†ä»–ä»¬æ’åºï¼Œæ­¤æ—¶ R ä»£è¡¨è·¯å¾„æœ€é•¿çš„ç‚¹ï¼ŒL ä»£è¡¨è·¯å¾„æœ€çŸ­çš„ç‚¹ï¼Œæ¯æ¬¡åˆ¤æ–­ $Dist[L]+Dist[R]\leq k$ æˆç«‹ä¸å¦ï¼Œå¦‚æœæˆç«‹ï¼Œè¯´æ˜ L ä¸ L+1 åˆ° R ä¹‹é—´çš„æ‰€æœ‰ç‚¹è¿æ¥çš„è¾¹éƒ½å°äºç­‰äº kï¼ˆæ’åºä¹‹åå…·æœ‰å•è°ƒæ€§ï¼‰ï¼Œæ‰“ç­”æ¡ˆç´¯åŠ ï¼Œç§»åŠ¨ Lï¼ŒR å°±å®ç°äº†å¿«é€Ÿç»Ÿè®¡</strong></p><h3 id="Codes-1"><a href="#Codes-1" class="headerlink" title="Codes"></a>Codes</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxn 40001</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxm maxn*2</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> INF 2139062143</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="type">int</span> to[maxm],nxt[maxm],head[maxn];</span><br><span class="line"><span class="type">int</span> siz[maxn],f[maxn],w[maxm],d[maxn]; <span class="type">bool</span> vis[maxn];</span><br><span class="line"><span class="type">int</span> n,k,tot,root,nsize,maxsize;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">Eadd</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> y,<span class="type">int</span> ww)</span></span>&#123;</span><br><span class="line">nxt[++tot]=head[x]; w[tot]=ww;</span><br><span class="line">to[tot]=y; head[x]=tot;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">rootdfs</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> fu)</span></span>&#123;</span><br><span class="line">siz[u]=<span class="number">1</span>; f[u]=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=head[u];i;i=nxt[i])</span><br><span class="line"><span class="keyword">if</span>(to[i]!=fu &amp;&amp; !vis[to[i]])&#123;</span><br><span class="line"><span class="built_in">rootdfs</span>(to[i],u); siz[u]+=siz[to[i]];</span><br><span class="line">f[u]=<span class="built_in">max</span>(f[u],siz[to[i]]);</span><br><span class="line">&#125;</span><br><span class="line">f[u]=<span class="built_in">max</span>(f[u],nsize-siz[u]);</span><br><span class="line"><span class="keyword">if</span>(maxsize&gt;siz[u]) root=u;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> L,R;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">pathdfs</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> fu,<span class="type">int</span> wu)</span></span>&#123;</span><br><span class="line">d[++R]=wu;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=head[u];i;i=nxt[i])</span><br><span class="line"><span class="keyword">if</span>(to[i]!=fu &amp;&amp; !vis[to[i]])</span><br><span class="line"><span class="built_in">pathdfs</span>(to[i],u,wu+w[i]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">ll <span class="title">stat</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> val)</span></span>&#123;</span><br><span class="line">R=<span class="number">0</span>; L=<span class="number">1</span>; ll sum=<span class="number">0</span>;</span><br><span class="line"><span class="built_in">pathdfs</span>(u,<span class="number">0</span>,val);</span><br><span class="line"><span class="built_in">sort</span>(d+<span class="number">1</span>,d+R+<span class="number">1</span>);</span><br><span class="line"><span class="keyword">while</span>(L&lt;R)&#123;</span><br><span class="line"><span class="keyword">if</span>(d[L]+d[R]&lt;=k) sum+=R-L,L++;</span><br><span class="line"><span class="keyword">else</span> R--; </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br><span class="line">ll ans;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dfs</span><span class="params">(<span class="type">int</span> u)</span></span>&#123;</span><br><span class="line">ans+=<span class="built_in">stat</span>(u,<span class="number">0</span>); vis[u]=<span class="literal">true</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=head[u];i;i=nxt[i])</span><br><span class="line"><span class="keyword">if</span>(!vis[to[i]])&#123;</span><br><span class="line">ans-=<span class="built_in">stat</span>(to[i],w[i]);</span><br><span class="line">nsize=siz[to[i]]; maxsize=INF;</span><br><span class="line"><span class="built_in">rootdfs</span>(to[i],<span class="number">0</span>); <span class="built_in">dfs</span>(root); </span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;testin.txt&quot;</span>,<span class="string">&quot;r&quot;</span>,stdin);</span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;testout.txt&quot;</span>,<span class="string">&quot;w&quot;</span>,stdout);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n); <span class="type">int</span> a,b,c;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n<span class="number">-1</span>;i++)&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>,&amp;a,&amp;b,&amp;c);</span><br><span class="line"><span class="built_in">Eadd</span>(a,b,c);<span class="built_in">Eadd</span>(b,a,c);</span><br><span class="line">&#125; <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;k);</span><br><span class="line">maxsize=INF; nsize=n;</span><br><span class="line"><span class="built_in">rootdfs</span>(<span class="number">1</span>,<span class="number">0</span>); <span class="built_in">dfs</span>(root);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%lld&quot;</span>,ans);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä¾‹é¢˜3ï¼šæ´›è°·P2634-èªèªå¯å¯"><a href="#ä¾‹é¢˜3ï¼šæ´›è°·P2634-èªèªå¯å¯" class="headerlink" title="ä¾‹é¢˜3ï¼šæ´›è°·P2634 èªèªå¯å¯"></a>ä¾‹é¢˜3ï¼šæ´›è°·P2634 èªèªå¯å¯</h2><h3 id="Description-2"><a href="#Description-2" class="headerlink" title="Description"></a>Description</h3><p>èªèªå’Œå¯å¯æ˜¯å…„å¼Ÿä¿©ï¼Œä»–ä»¬ä¿©ç»å¸¸ä¸ºäº†ä¸€äº›çäº‹æ‰“èµ·æ¥ï¼Œä¾‹å¦‚å®¶ä¸­åªå‰©ä¸‹æœ€åä¸€æ ¹å†°æ£è€Œä¸¤äººéƒ½æƒ³åƒã€ä¸¤ä¸ªäººéƒ½æƒ³ç©å„¿ç”µè„‘ï¼ˆå¯æ˜¯ä»–ä»¬å®¶åªæœ‰ä¸€å°ç”µè„‘ï¼‰â€¦â€¦é‡åˆ°è¿™ç§é—®é¢˜ï¼Œä¸€èˆ¬æƒ…å†µä¸‹çŸ³å¤´å‰ªåˆ€å¸ƒå°±å¥½äº†ï¼Œå¯æ˜¯ä»–ä»¬å·²ç»ç©å„¿è…»äº†è¿™ç§ä½æ™ºå•†çš„æ¸¸æˆã€‚</p><p>ä»–ä»¬çš„çˆ¸çˆ¸å¿«è¢«ä»–ä»¬çš„äº‰åµçƒ¦æ­»äº†ï¼Œæ‰€ä»¥ä»–å‘æ˜äº†ä¸€ä¸ªæ–°æ¸¸æˆï¼šç”±çˆ¸çˆ¸åœ¨çº¸ä¸Šç”»nä¸ªâ€œç‚¹â€ï¼Œå¹¶ç”¨n-1æ¡â€œè¾¹â€æŠŠè¿™nä¸ªâ€œç‚¹â€æ°å¥½è¿é€šï¼ˆå…¶å®è¿™å°±æ˜¯ä¸€æ£µæ ‘ï¼‰ã€‚å¹¶ä¸”æ¯æ¡â€œè¾¹â€ä¸Šéƒ½æœ‰ä¸€ä¸ªæ•°ã€‚æ¥ä¸‹æ¥ç”±èªèªå’Œå¯å¯åˆ†åˆ«éšå³é€‰ä¸€ä¸ªç‚¹ï¼ˆå½“ç„¶ä»–ä»¬é€‰ç‚¹æ—¶æ˜¯çœ‹ä¸åˆ°è¿™æ£µæ ‘çš„ï¼‰ï¼Œå¦‚æœä¸¤ä¸ªç‚¹ä¹‹é—´æ‰€æœ‰è¾¹ä¸Šæ•°çš„å’ŒåŠ èµ·æ¥æ°å¥½æ˜¯3çš„å€æ•°ï¼Œåˆ™åˆ¤èªèªèµ¢ï¼Œå¦åˆ™å¯å¯èµ¢ã€‚</p><p>èªèªéå¸¸çˆ±æ€è€ƒé—®é¢˜ï¼Œåœ¨æ¯æ¬¡æ¸¸æˆåéƒ½ä¼šä»”ç»†ç ”ç©¶è¿™æ£µæ ‘ï¼Œå¸Œæœ›çŸ¥é“å¯¹äºè¿™å¼ å›¾è‡ªå·±çš„è·èƒœæ¦‚ç‡æ˜¯å¤šå°‘ã€‚ç°è¯·ä½ å¸®å¿™æ±‚å‡ºè¿™ä¸ªå€¼ä»¥éªŒè¯èªèªçš„ç­”æ¡ˆæ˜¯å¦æ­£ç¡®ã€‚</p><h3 id="Input-2"><a href="#Input-2" class="headerlink" title="Input"></a>Input</h3><p>è¾“å…¥çš„ç¬¬1è¡ŒåŒ…å«1ä¸ªæ­£æ•´æ•°nã€‚åé¢n-1è¡Œï¼Œæ¯è¡Œ3ä¸ªæ•´æ•°xã€yã€wï¼Œè¡¨ç¤ºxå·ç‚¹å’Œyå·ç‚¹ä¹‹é—´æœ‰ä¸€æ¡è¾¹ï¼Œä¸Šé¢çš„æ•°æ˜¯wã€‚</p><h3 id="Output-2"><a href="#Output-2" class="headerlink" title="Output"></a>Output</h3><p>ä»¥å³çº¦åˆ†æ•°å½¢å¼è¾“å‡ºè¿™ä¸ªæ¦‚ç‡ï¼ˆå³â€œa/bâ€çš„å½¢å¼ï¼Œå…¶ä¸­aå’Œbå¿…é¡»äº’è´¨ã€‚å¦‚æœæ¦‚ç‡ä¸º1ï¼Œè¾“å‡ºâ€œ1/1â€ï¼‰ã€‚</p><h3 id="Sample-Input-2"><a href="#Sample-Input-2" class="headerlink" title="Sample Input"></a>Sample Input</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">5</span><br><span class="line">1 2 1</span><br><span class="line">1 3 2</span><br><span class="line">1 4 1</span><br><span class="line">2 5 3</span><br></pre></td></tr></table></figure><h3 id="Sample-Output-2"><a href="#Sample-Output-2" class="headerlink" title="Sample Output"></a>Sample Output</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">13/25</span><br></pre></td></tr></table></figure><h3 id="Hint-2"><a href="#Hint-2" class="headerlink" title="Hint"></a>Hint</h3><p>ã€æ ·ä¾‹è¯´æ˜ã€‘</p><p>13ç»„ç‚¹å¯¹åˆ†åˆ«æ˜¯(1,1) (2,2) (2,3) (2,5) (3,2) (3,3) (3,4) (3,5) (4,3) (4,4) (5,2) (5,3) (5,5)ã€‚</p><p>ã€æ•°æ®è§„æ¨¡ã€‘</p><p>å¯¹äº100%çš„æ•°æ®ï¼Œn&lt;=20000ã€‚</p><h3 id="åˆ†æ-2"><a href="#åˆ†æ-2" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h3><p>é¦–å…ˆæŠŠæ‰€æœ‰ç‚¹ä¹‹é—´çš„è¾¹æƒæ¨¡ 3ï¼Œè¿™æ ·åšäº†ä¹‹åå¯¹ç»Ÿè®¡ç­”æ¡ˆæ˜¯æ²¡æœ‰å½±å“çš„</p><p><strong>é‡‡ç”¨ç‚¹åˆ†æ²»æ—¶ï¼Œæˆ‘ä»¬æŠŠ K çš„å­æ ‘ç»“ç‚¹åˆ° K çš„è·ç¦»å€¼çš„é›†åˆåˆ†ä¸º 3 ä¸ªéƒ¨åˆ†ï¼Œä¸ºè·ç¦»å€¼æ¨¡ 3 ç­‰äº 0 çš„ï¼Œç­‰äº 1 çš„ï¼Œå’Œç­‰äº 2 çš„ä¸‰ç§æƒ…å†µï¼Œä¸ªæ•°åˆ†åˆ«è®°ä½œ $sum[0],\;sum[1],\;sum[2]$</strong></p><p>ç„¶åç»„åˆä¸€ä¸‹ï¼Œ$sun[0]$ çš„è¾¹å·²ç»æ»¡è¶³æ˜¯ä¸‰çš„å€æ•°ï¼Œå¯ä»¥ä¸¤ä¸¤ç»„åˆï¼Œä¾ç„¶æ˜¯ä¸‰çš„å€æ•°ï¼Œè€Œ $sum[1]$ å’Œ $sum[2]$ çš„è¾¹æ‹¼æ¥èµ·æ¥ï¼Œè¾¹æƒå°±æˆ 3 çš„å€æ•°äº†ï¼Œç”±äºé¢˜ç›®æ²¡äº¤ä»£é¡ºåºï¼Œå› æ­¤ $sum[0]\to sum[1]$ å’Œ $sum[1]\to sum[0]$ éƒ½è¦ç»Ÿè®¡ï¼Œäºæ˜¯å°±æœ‰ $Ans=sum[0]^2+2sum[1]\times sum[2]$</p><p>è®¡ç®—æ¦‚ç‡æ—¶ï¼Œæ³¨æ„è·¯å¾„æ€»æ•°ä¸º $n\times n$ ï¼Œè¾“å‡ºåˆ†æ•°è¦ç”¨ GCD åŒ–ç®€</p><h3 id="Codes-2"><a href="#Codes-2" class="headerlink" title="Codes"></a>Codes</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">pragma</span> GCC optimize(3)</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxn 20001</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxm maxn*2</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> INF 2139062143</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="type">int</span> to[maxm],nxt[maxm],head[maxn]; ll sum[<span class="number">3</span>];</span><br><span class="line"><span class="type">int</span> siz[maxn],f[maxn],w[maxm],d[maxn]; <span class="type">bool</span> vis[maxn];</span><br><span class="line"><span class="type">int</span> n,k,tot,root,nsize,maxsize;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> t&gt;<span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">fcin</span><span class="params">(t &amp;x)</span></span>&#123;</span><br><span class="line"><span class="type">int</span> sign=<span class="number">1</span>; x=<span class="number">0</span>; <span class="type">char</span> op=<span class="built_in">getchar</span>();</span><br><span class="line"><span class="keyword">while</span>(op&lt;<span class="string">&#x27;0&#x27;</span>||op&gt;<span class="string">&#x27;9&#x27;</span>)&#123;<span class="keyword">if</span>(op==<span class="string">&#x27;-&#x27;</span>) sign=<span class="number">-1</span>;op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line"><span class="keyword">while</span>(op&gt;=<span class="string">&#x27;0&#x27;</span>&amp;&amp;op&lt;=<span class="string">&#x27;9&#x27;</span>)&#123;x=x*<span class="number">10</span>+(op<span class="number">-48</span>);op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line">x*=sign;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">Eadd</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> y,<span class="type">int</span> ww)</span></span>&#123;</span><br><span class="line">ww%=<span class="number">3</span>;</span><br><span class="line">nxt[++tot]=head[x]; w[tot]=ww;</span><br><span class="line">to[tot]=y; head[x]=tot;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">rootdfs</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> fu)</span></span>&#123;</span><br><span class="line">siz[u]=<span class="number">1</span>; f[u]=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=head[u];i;i=nxt[i])</span><br><span class="line"><span class="keyword">if</span>(to[i]!=fu &amp;&amp; !vis[to[i]])&#123;</span><br><span class="line"><span class="built_in">rootdfs</span>(to[i],u); siz[u]+=siz[to[i]];</span><br><span class="line">f[u]=<span class="built_in">max</span>(f[u],siz[to[i]]);</span><br><span class="line">&#125;</span><br><span class="line">f[u]=<span class="built_in">max</span>(f[u],nsize-siz[u]);</span><br><span class="line"><span class="keyword">if</span>(maxsize&gt;siz[u]) root=u;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">pathdfs</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> fu,<span class="type">int</span> wu)</span></span>&#123;</span><br><span class="line">sum[wu%<span class="number">3</span>]++;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=head[u];i;i=nxt[i])</span><br><span class="line"><span class="keyword">if</span>(!vis[to[i]] &amp;&amp; to[i]!=fu)</span><br><span class="line"><span class="built_in">pathdfs</span>(to[i],u,(wu+w[i])%<span class="number">3</span>); </span><br><span class="line">&#125;</span><br><span class="line"><span class="function">ll <span class="title">stat</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> val)</span></span>&#123;</span><br><span class="line">sum[<span class="number">0</span>]=sum[<span class="number">1</span>]=sum[<span class="number">2</span>]=<span class="number">0</span>;</span><br><span class="line"><span class="built_in">pathdfs</span>(u,<span class="number">0</span>,val);</span><br><span class="line"><span class="keyword">return</span> sum[<span class="number">0</span>]*sum[<span class="number">0</span>]+sum[<span class="number">1</span>]*sum[<span class="number">2</span>]*<span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line">ll ans;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dfs</span><span class="params">(<span class="type">int</span> u)</span></span>&#123;</span><br><span class="line">ans+=<span class="built_in">stat</span>(u,<span class="number">0</span>); vis[u]=<span class="literal">true</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=head[u];i;i=nxt[i])</span><br><span class="line"><span class="keyword">if</span>(!vis[to[i]])&#123;</span><br><span class="line">ans-=<span class="built_in">stat</span>(to[i],w[i]);</span><br><span class="line">nsize=siz[to[i]]; maxsize=INF;</span><br><span class="line"><span class="built_in">rootdfs</span>(to[i],<span class="number">0</span>); <span class="built_in">dfs</span>(root); </span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> ll <span class="title">gcd</span><span class="params">(ll a,ll b)</span></span>&#123;</span><br><span class="line"><span class="keyword">while</span>(b^=a^=b^=a%=b);</span><br><span class="line">    <span class="keyword">return</span> a;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;testin.txt&quot;</span>,<span class="string">&quot;r&quot;</span>,stdin);</span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;testout.txt&quot;</span>,<span class="string">&quot;w&quot;</span>,stdout);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"><span class="built_in">fcin</span>(n); <span class="type">int</span> x,y,z;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n<span class="number">-1</span>;i++)&#123;</span><br><span class="line"><span class="built_in">fcin</span>(x);<span class="built_in">fcin</span>(y);<span class="built_in">fcin</span>(z);</span><br><span class="line"><span class="built_in">Eadd</span>(x,y,z);<span class="built_in">Eadd</span>(y,x,z);</span><br><span class="line">&#125;</span><br><span class="line">nsize=n; maxsize=INF;</span><br><span class="line"><span class="built_in">rootdfs</span>(<span class="number">1</span>,<span class="number">0</span>); <span class="built_in">dfs</span>(root);</span><br><span class="line">n=n*n; ll gcds=<span class="built_in">gcd</span>(ans,n);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%lld/%lld&quot;</span>,ans/gcds,n/gcds);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="è¿™é‡Œè¦è¯´ä¸€ä¸ªæ³¨æ„äº‹é¡¹"><a href="#è¿™é‡Œè¦è¯´ä¸€ä¸ªæ³¨æ„äº‹é¡¹" class="headerlink" title="è¿™é‡Œè¦è¯´ä¸€ä¸ªæ³¨æ„äº‹é¡¹"></a>è¿™é‡Œè¦è¯´ä¸€ä¸ªæ³¨æ„äº‹é¡¹</h3><p>ä¹‹å‰å†™æ‰¾é‡å¿ƒçš„ DFS çš„æ—¶å€™ï¼Œæˆ‘æ˜¯ç›´æ¥ç”¨ä¸€ä¸ªå˜é‡ maxsize æ¥è¡¨ç¤ºå½“å‰å­æ ‘æœ€å°çš„ç»“ç‚¹ï¼Œä½†æ˜¯åæ¥å‘ç°å®Œå…¨ä¸ç”¨è¿™æ ·ï¼Œåªéœ€è¦è¡¨ç¤ºå‡ºæ ¹ç»“ç‚¹ rootï¼Œæ¯æ¬¡å¯»æ‰¾çš„æ—¶å€™æŠŠ root æ”¹æˆ 0 ï¼ŒæŠŠ siz(0) æ”¹æˆ n+1 å°±å¯ä»¥äº†ï¼Œè€Œä¸”è²Œä¼¼è¿™æ ·å†™çš„è¯æ—¶é—´å¤æ‚åº¦è¿˜å¯ä»¥å¤§å¤§é™ä½â€¦â€¦</p>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åˆ†æ²» </tag>
            
            <tag> ç‚¹åˆ†æ²» </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŠ¨æ€è§„åˆ’ | AHOI2009 ä¸­å›½è±¡æ£‹</title>
      <link href="/2019/06/02/2019-06-02-zgxq/"/>
      <url>/2019/06/02/2019-06-02-zgxq/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><h2 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h2><p>è¿™æ¬¡å°å¯å¯æƒ³è§£å†³çš„éš¾é¢˜å’Œä¸­å›½è±¡æ£‹æœ‰å…³ï¼Œåœ¨ä¸€ä¸ªNè¡ŒMåˆ—çš„æ£‹ç›˜ä¸Šï¼Œè®©ä½ æ”¾è‹¥å¹²ä¸ªç‚®ï¼ˆå¯ä»¥æ˜¯0ä¸ªï¼‰ï¼Œä½¿å¾—æ²¡æœ‰ä¸€ä¸ªç‚®å¯ä»¥æ”»å‡»åˆ°å¦ä¸€ä¸ªç‚®ï¼Œè¯·é—®æœ‰å¤šå°‘ç§æ”¾ç½®æ–¹æ³•ã€‚å¤§å®¶è‚¯å®šå¾ˆæ¸…æ¥šï¼Œåœ¨ä¸­å›½è±¡æ£‹ä¸­ç‚®çš„è¡Œèµ°æ–¹å¼æ˜¯ï¼šä¸€ä¸ªç‚®æ”»å‡»åˆ°å¦ä¸€ä¸ªç‚®ï¼Œå½“ä¸”ä»…å½“å®ƒä»¬åœ¨åŒä¸€è¡Œæˆ–åŒä¸€åˆ—ä¸­ï¼Œä¸”å®ƒä»¬ä¹‹é—´æ°å¥½<br>æœ‰ä¸€ä¸ªæ£‹å­ã€‚ä½ ä¹Ÿæ¥å’Œå°å¯å¯ä¸€èµ·é”»ç‚¼ä¸€ä¸‹æ€ç»´å§ï¼</p><h2 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h2><p>ä¸€è¡ŒåŒ…å«ä¸¤ä¸ªæ•´æ•°Nï¼ŒMï¼Œä¹‹é—´ç”±ä¸€ä¸ªç©ºæ ¼éš”å¼€ã€‚</p><h2 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h2><p>æ€»å…±çš„æ–¹æ¡ˆæ•°ï¼Œç”±äºè¯¥å€¼å¯èƒ½å¾ˆå¤§ï¼Œåªéœ€ç»™å‡ºæ–¹æ¡ˆæ•°æ¨¡9999973çš„ç»“æœã€‚</p><h2 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1 3</span><br></pre></td></tr></table></figure><h2 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">7</span><br></pre></td></tr></table></figure><h2 id="Hint"><a href="#Hint" class="headerlink" title="Hint"></a>Hint</h2><p>æ ·ä¾‹è¯´æ˜</p><p>é™¤äº†3ä¸ªæ ¼å­é‡Œéƒ½å¡æ»¡äº†ç‚®ä»¥å¤–ï¼Œå…¶å®ƒæ–¹æ¡ˆéƒ½æ˜¯å¯è¡Œçš„ï¼Œæ‰€ä»¥ä¸€å…±æœ‰2Ã—2Ã—2-1=7ç§æ–¹æ¡ˆã€‚</p><p>æ•°æ®èŒƒå›´</p><p>100%çš„æ•°æ®ä¸­Nå’ŒMå‡ä¸è¶…è¿‡100</p><p>50%çš„æ•°æ®ä¸­Nå’ŒMè‡³å°‘æœ‰ä¸€ä¸ªæ•°ä¸è¶…è¿‡8</p><p>30%çš„æ•°æ®ä¸­Nå’ŒMå‡ä¸è¶…è¿‡6</p><h2 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><p>é¦–å…ˆæƒ³åˆ°ï¼Œæ¯ä¸€è¡Œæœ€å¤šåªèƒ½å¡è¿› 2 é—¨ç‚®ï¼Œå¦åˆ™å°±ä¼šå‡ºç°éš”å±±æ‰“ç‰›çš„æƒ…å†µäº†ï¼Œ<strong>é‚£ä¹ˆæ¯ä¸€è¡Œå°±åªæœ‰ 2 ç§åˆæ³•çŠ¶æ€ï¼Œå³æ”¾ 1 é—¨ç‚®å’Œæ”¾ 2 é—¨ç‚®</strong></p><p><strong>è®¾ $f[i][j][k]$ è¡¨ç¤ºåˆ°äº†ç¬¬ $i$ è¡Œï¼Œæœ‰ $j$ åˆ—åªæœ‰ä¸€é—¨ç‚®ï¼Œè¿˜æœ‰ $k$ åˆ—æœ‰ä¸¤é—¨ç‚®çš„æ–¹æ¡ˆæ•°</strong>ï¼Œæ˜¾ç„¶ $k\leq m-j$</p><p>é‚£ä¹ˆå‰©ä¸‹æ²¡æœ‰æ”¾ç‚®çš„åˆ—æ•°å°±æ˜¯ï¼š$m-j-k$ï¼Œæ¥ä¸‹æ¥å¯ä»¥æœ‰ 3 ç§é€‰æ‹©ï¼š</p><ol><li><p>åœ¨ç¬¬ $i$ è¡Œä¸æ”¾ç‚®ï¼Œæ­¤æ—¶çŠ¶æ€ç»§æ‰¿äº†ä¸Šä¸€è¡Œçš„çŠ¶æ€ï¼Œå³ $f[i][j][k]=f[i-1][j][k]$</p></li><li><p>åœ¨ç¬¬ $i$ è¡Œæ”¾ä¸€é—¨ç‚®ï¼Œåˆæœ‰ä¸¤ç§é€‰æ‹©ï¼ˆä¸èƒ½æ”¾åœ¨æœ‰ 2 é—¨ç‚®çš„åˆ—ä¸Šé¢ï¼‰</p><ul><li>æ”¾åœ¨åªæœ‰ä¸€é—¨ç‚®çš„ä¸€åˆ—ï¼Œä¼šä½¿å®ƒå˜æˆæœ‰ 2 é—¨ç‚®ï¼Œå› æ­¤ $k$ çš„çŠ¶æ€éœ€è¦ä» $k-1$ è½¬ç§»è¿‡æ¥ï¼Œè€Œåªæœ‰ä¸€é—¨ç‚®çš„åˆ—æ•°ä¼šå‡å°‘ 1ï¼Œè€Œå˜æˆå½“å‰çš„ $j$ ï¼Œæ‰€ä»¥ $j$ çš„çŠ¶æ€ä» $j+1$ è½¬ç§»è¿‡æ¥ï¼Œæ—¢ç„¶æ˜¯ä» $j+1$ è½¬ç§»è¿‡æ¥ï¼Œé‚£ä¹ˆå¯ä»¥åœ¨è¿™ $j+1$ åˆ—ä¸Šæ”¾ç‚®ï¼Œæ–¹æ¡ˆæ•°ä¹˜ä¸Š $j+1$ï¼Œå³ï¼š$f[i][j][k]+=f[i-1][j+1][k-1]\times (j+1)$</li><li>æ”¾åœ¨æ²¡æœ‰ç‚®çš„ä¸€åˆ—ï¼Œä¼šä½¿å®ƒå˜æˆæœ‰ 1 é—¨ç‚®ï¼Œå› æ­¤ $j$ çš„çŠ¶æ€è¦ä» $j-1$ è½¬ç§»ï¼Œæ­¤æ—¶ $k$ çŠ¶æ€ä¸å˜ï¼Œåˆå› ä¸ºå½“å‰æ²¡æœ‰æ”¾ç‚®çš„åˆ—æ•°æ˜¯ $m-j-k$ï¼Œæ³¨æ„ç©ºçš„åˆ—æ•°æ˜¯ç›¸å¯¹äº $j=j-1$ çš„çŠ¶æ€è€Œè¨€çš„ï¼Œæ‰€ä»¥å®é™…ç©ºçš„åˆ—æ•°ä¸º $m-(j-1)-k$ï¼Œå³ï¼š$f[i][j][k]+=f[i-1][j-1][k]\times (m-(j-1)-k)$</li></ul></li><li><p>åœ¨ç¬¬ $i$ è¡Œæ”¾ä¸¤é—¨ç‚®ï¼Œæœ‰ä¸‰ç§æƒ…å†µéœ€è¦è®¨è®ºï¼š</p><ul><li>ä¸¤é—¨ç‚®éƒ½æ”¾åœ¨æ²¡æ”¾ç‚®çš„é‚£ä¸€åˆ—ï¼Œå’Œä¸Šé¢çš„çš„æ€è·¯ç±»ä¼¼ï¼Œä½†æ˜¯æ³¨æ„è¿™ 2 é—¨ç‚®çš„æ’åˆ—ç»„åˆï¼Œå¯ä»¥å¾—å‡ºï¼š$f[i][j]+=f[i-1][j-2][k]\times C^2_{m-(j-2)-k}$</li><li>ä¸¤é—¨ç‚®éƒ½æ”¾åœ¨æ”¾äº† 1 é—¨ç‚®çš„é‚£ä¸€åˆ—ï¼Œä¹Ÿæ˜¯æ’åˆ—ç»„åˆï¼Œå¯ä»¥å¾—å‡ºï¼š$f[i][j]+=f[i-1][j+2][k-2]\times C^2_{j+2}$</li><li>ä¸€é—¨æ”¾åœ¨æ²¡æ”¾ç‚®çš„ä¸€åˆ—ï¼Œä¸€é—¨æ”¾åœ¨æ”¾äº†ç‚®çš„ä¸€åˆ—ï¼Œæ­¤æ—¶ç»¼åˆæƒ…å†µ 2 çš„ä¸¤ç§å­æƒ…å†µå¯ä»¥å¾—å‡ºï¼š$f[i][j][k]+=f[i-1][j][k-1]\times j \times (m-(k-1)-j)$</li></ul></li></ol><p><strong>è¾¹ç•Œä¸º $f[0][0][0]=1$</strong>ï¼Œè¿™ä¾¿æ˜¯ çœé€‰ / NOI- çš„ DP é¢˜éš¾åº¦å§ï¼Œé¢˜é¢ä¸é•¿ä½†æ˜¯å¾ˆçƒ§è„‘å­ã€‚ã€‚ã€‚</p><h2 id="Codes"><a href="#Codes" class="headerlink" title="Codes"></a>Codes</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxn 108</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="type">int</span> n,m; <span class="type">const</span> <span class="type">int</span> mod=<span class="number">9999973</span>;</span><br><span class="line"><span class="type">long</span> <span class="type">long</span> f[maxn][maxn][maxn];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">c</span><span class="params">(<span class="type">int</span> x)</span></span>&#123;</span><br><span class="line"><span class="keyword">return</span> ((x*(x<span class="number">-1</span>))/<span class="number">2</span>)%mod;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">long</span> <span class="type">long</span> <span class="title">dp</span><span class="params">()</span></span>&#123;</span><br><span class="line">f[<span class="number">0</span>][<span class="number">0</span>][<span class="number">0</span>]=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;=m;j++)</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> k=<span class="number">0</span>;k&lt;=(m-j);k++)&#123;</span><br><span class="line">f[i][j][k]=f[i<span class="number">-1</span>][j][k];</span><br><span class="line">                <span class="keyword">if</span>(k&gt;=<span class="number">1</span>)(f[i][j][k]+=f[i<span class="number">-1</span>][j+<span class="number">1</span>][k<span class="number">-1</span>]*(j+<span class="number">1</span>));</span><br><span class="line">                <span class="keyword">if</span>(j&gt;=<span class="number">1</span>)(f[i][j][k]+=f[i<span class="number">-1</span>][j<span class="number">-1</span>][k]*(m-j-k+<span class="number">1</span>));</span><br><span class="line">                <span class="keyword">if</span>(k&gt;=<span class="number">2</span>)(f[i][j][k]+=f[i<span class="number">-1</span>][j+<span class="number">2</span>][k<span class="number">-2</span>]*(((j+<span class="number">2</span>)*(j+<span class="number">1</span>))/<span class="number">2</span>));</span><br><span class="line">                <span class="keyword">if</span>(k&gt;=<span class="number">1</span>)(f[i][j][k]+=f[i<span class="number">-1</span>][j][k<span class="number">-1</span>]*j*(m-j-k+<span class="number">1</span>));</span><br><span class="line">                <span class="keyword">if</span>(j&gt;=<span class="number">2</span>)(f[i][j][k]+=f[i<span class="number">-1</span>][j<span class="number">-2</span>][k]*<span class="built_in">c</span>(m-j-k+<span class="number">2</span>));</span><br><span class="line">                f[i][j][k]%=mod;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">long</span> <span class="type">long</span> ans=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;=m;i++)</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;=m;j++)</span><br><span class="line">ans+=f[n][i][j],ans%=mod;</span><br><span class="line"><span class="keyword">return</span> (ans+mod)%mod;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;testin.txt&quot;</span>,<span class="string">&quot;r&quot;</span>,stdin);</span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;testout.txt&quot;</span>,<span class="string">&quot;w&quot;</span>,stdout);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;m);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%lld&quot;</span>,<span class="built_in">dp</span>());</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŠ¨æ€è§„åˆ’ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ•°æ®ç»“æ„ | å¹³è¡¡æ ‘ | FHQTreap å‡½æ•°å¼  å¹³è¡¡æ ‘:å­¦ä¹ ç¬”è®°</title>
      <link href="/2019/05/30/2019-05-30-FHQTreap%E7%AC%94%E8%AE%B0/"/>
      <url>/2019/05/30/2019-05-30-FHQTreap%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><h2 id="FHQTreapï¼šå‡½æ•°å¼å¹³è¡¡æ ‘"><a href="#FHQTreapï¼šå‡½æ•°å¼å¹³è¡¡æ ‘" class="headerlink" title="FHQTreapï¼šå‡½æ•°å¼å¹³è¡¡æ ‘"></a>FHQTreapï¼šå‡½æ•°å¼å¹³è¡¡æ ‘</h2><p><strong>FHQTreap</strong> æ˜¯ä¸€ç§ç‰¹æ®Šçš„å¹³è¡¡æ ‘<em>ï¼ˆ  Invented By FHQ ï¼‰</em>ï¼Œä¸åŒäºæ™®é€šå¹³è¡¡æ ‘ <strong>Splay</strong> çš„æ˜¯ï¼Œå®ƒæ— éœ€æ—‹è½¬æ“ä½œ(Rotate)å°±å¯ä»¥è¾¾åˆ° <strong>Splay</strong> çš„é€Ÿåº¦ï¼Œè€Œæ˜¯ç”¨ä¸¤ä¸ªåŸºæœ¬æ“ä½œå®ç°åºåˆ—æ“ä½œï¼š<strong>Merge</strong> å’Œ <strong>Split</strong></p><p>ä»åå­— <strong>Split</strong> å°±å¯ä»¥å‘ç°ï¼Œ<strong>å®ƒçš„æ ¸å¿ƒæ€æƒ³æ˜¯å°†ä¸€é¢—æ ‘åˆ†è£‚ï¼Œä½¿ä¹‹ä¸¤ä¸ªéƒ¨åˆ†æ»¡è¶³å †åºï¼Œåœ¨ä¸Šé¢æ“ä½œä¹‹åå†åˆå¹¶ä¸ºä¸€æ£µæ ‘</strong></p><p><strong>FHQTreap</strong> çš„æœ¬è´¨è¿˜æ˜¯ <strong>BST</strong> ï¼Œæ‰€ä»¥åŒºé—´æ“ä½œå’Œ <strong>Splay</strong> æ²¡æœ‰å¤šå¤§åŒºåˆ«<del>ï¼ˆç»è¿‡ä¼˜åŒ–åå¥½åƒè¿˜æ¯”<strong>Splay</strong>è·‘å¾—å¿«ï¼Ÿï¼‰</del></p><h2 id="åŸºç¡€æ“ä½œï¼šSplit-åˆ†è£‚"><a href="#åŸºç¡€æ“ä½œï¼šSplit-åˆ†è£‚" class="headerlink" title="åŸºç¡€æ“ä½œï¼šSplit (åˆ†è£‚)"></a>åŸºç¡€æ“ä½œï¼šSplit (åˆ†è£‚)</h2><p><strong>Split åˆ†è£‚</strong> æ˜¯æŒ‰ç…§æŸç§è§„å®šå°†å½“å‰çš„æ ‘åˆ†æˆä¸¤æ£µå­æ ‘çš„æ“ä½œï¼ˆå½“å‰çš„æ ‘ä¹Ÿæœ‰å¯èƒ½æ˜¯åˆ†è£‚ä¹‹åçš„æ ‘ï¼Œå› æ­¤æ“ä½œå…·æœ‰é€’å½’æ€§ï¼‰ï¼Œåˆ†è£‚æ“ä½œå¯ä»¥æŒ‰ç…§ç»™å®šæƒå€¼åˆ†ï¼Œä¹Ÿå¯ä»¥æŒ‰ç…§å­æ ‘å¤§å°åˆ†</p><h3 id="æŒ‰ç…§æƒå€¼åˆ†è£‚"><a href="#æŒ‰ç…§æƒå€¼åˆ†è£‚" class="headerlink" title="æŒ‰ç…§æƒå€¼åˆ†è£‚"></a>æŒ‰ç…§æƒå€¼åˆ†è£‚</h3><p>å°†å½“å‰æ ‘åˆ†è£‚æˆæƒå€¼å‡å°äºç­‰äº X çš„ä¸€æ£µæ ‘ A å’Œæƒå€¼å‡å¤§äº X çš„ä¸€æ£µæ ‘ B</p><p>Aï¼ŒB çš„æ„ä¹‰ä¸ºåˆ†è£‚åä¸¤æ£µæ ‘çš„æ ¹ç»“ç‚¹ï¼Œéœ€è¦å®æ—¶æ›´æ–°ï¼Œå¼•ç”¨ä¼ å‚</p><p><strong>ç©ºæ ‘å°†ä¼šè¢«æ‹†åˆ†æˆ 2 æ£µç©ºæ ‘ï¼Œå³A=B=0ï¼ˆè¾¹ç•Œï¼‰ï¼Œç„¶åï¼š</strong></p><ol><li><p>å¦‚æœæ­£åœ¨è€ƒè™‘çš„ç‚¹ K æƒå€¼æ¯” X å¤§ï¼Œè¯´æ˜ K çš„å³å­æ ‘çš„æƒå€¼å‡æ¯” X å¤§ï¼ŒK çš„å³å­æ ‘æ”¾åˆ° B ä¸­ï¼ŒåŒæ—¶èµ° K çš„å·¦å­æ ‘ï¼ŒæŠŠå·¦å­æ ‘ä¸­æ‰€æœ‰æƒå€¼å¤§äº X çš„ç‚¹åˆ†åˆ° B ä¸­ï¼Œå‰©ä¸‹çš„ç‚¹åˆ†åˆ° A ä¸­</p></li><li><p>å¦‚æœæ­£åœ¨è€ƒè™‘çš„ç‚¹ K æƒå€¼æ¯” X å°ï¼Œè¯´æ˜ K çš„å·¦å­æ ‘çš„æƒå€¼å‡æ¯” X å°ï¼ŒK çš„å·¦å­æ ‘æ”¾åˆ° A ä¸­ï¼ŒåŒæ—¶èµ° K çš„å³å­æ ‘ï¼ŒæŠŠå³å­æ ‘ä¸­æ‰€æœ‰æƒå€¼å°äº X çš„ç‚¹åˆ†åˆ° A ä¸­ï¼Œå‰©ä¸‹çš„ç‚¹åˆ†åˆ° B ä¸­</p></li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">SplitVal</span><span class="params">(<span class="type">int</span> k,<span class="type">int</span> tar,<span class="type">int</span> &amp;x,<span class="type">int</span> &amp;y)</span></span>&#123; <span class="comment">// æŒ‰æƒå€¼åˆ†è£‚  </span></span><br><span class="line"><span class="keyword">if</span>(!k)&#123;x=y=<span class="number">0</span>; <span class="keyword">return</span>;&#125;</span><br><span class="line"><span class="keyword">if</span>(tar&gt;=<span class="built_in">val</span>(k))&#123;</span><br><span class="line">x=k; <span class="built_in">SplitVal</span>(<span class="built_in">rc</span>(k),tar,<span class="built_in">rc</span>(k),y);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">y=k; <span class="built_in">SplitVal</span>(<span class="built_in">lc</span>(k),tar,x,<span class="built_in">lc</span>(k));</span><br><span class="line">&#125; <span class="built_in">pushup</span>(k);</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æŒ‰ç…§æ’ååˆ†è£‚"><a href="#æŒ‰ç…§æ’ååˆ†è£‚" class="headerlink" title="æŒ‰ç…§æ’ååˆ†è£‚"></a>æŒ‰ç…§æ’ååˆ†è£‚</h3><p>åŸºæœ¬æ€æƒ³å’Œä¸Šé¢çš„ <strong>æŒ‰ç…§æƒå€¼åˆ†è£‚</strong> ä¸€è‡´ï¼Œåˆ¤æ–­æ¡ä»¶ä»æƒå€¼æ”¹ä¸ºäº†å­æ ‘çš„å¤§å° <strong>Size(K)</strong></p><p>è¿™é‡Œæ³¨æ„ï¼Œå¦‚æœè¦èµ°å½“å‰ç‚¹çš„å³å­æ ‘ï¼Œç›®æ ‡å¤§å°åº”è¯¥å‡å»å®ƒå·¦å­æ ‘å¤§å°åŠ ä¸Šä»–è‡ªèº«çš„ 1 ï¼Œå’Œ <strong>Kthâ€‹</strong> çš„æ€æƒ³ç›¸ä¼¼</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">SplitRnk</span><span class="params">(<span class="type">int</span> k,<span class="type">int</span> tar,<span class="type">int</span> &amp;x,<span class="type">int</span> &amp;y)</span></span>&#123; <span class="comment">// æŒ‰æ’ååˆ†è£‚  </span></span><br><span class="line"><span class="keyword">if</span>(!k)&#123;x=y=<span class="number">0</span>; <span class="keyword">return</span>;&#125;</span><br><span class="line"><span class="keyword">if</span>(tar&lt;<span class="built_in">siz</span>(<span class="built_in">lc</span>(k)))&#123;</span><br><span class="line">y=k; <span class="built_in">SplitRnk</span>(<span class="built_in">lc</span>(k),tar,x,<span class="built_in">lc</span>(k));</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">x=k; <span class="built_in">SplitRnk</span>(<span class="built_in">rc</span>(k),tar-<span class="built_in">siz</span>(<span class="built_in">lc</span>(k))<span class="number">-1</span>,<span class="built_in">rc</span>(k),y);</span><br><span class="line">             <span class="comment">// å’Œ Kth çš„æ€æƒ³ç›¸ä¼¼ </span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">pushup</span>(k);</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>pushup(K) æ˜¯æ›´æ–° K çš„å­æ ‘å¤§å°ï¼Œè·Ÿçº¿æ®µæ ‘çš„ pushup ç›¸ä¼¼</strong></p><h2 id="åŸºç¡€æ“ä½œï¼šMerge-åˆå¹¶"><a href="#åŸºç¡€æ“ä½œï¼šMerge-åˆå¹¶" class="headerlink" title="åŸºç¡€æ“ä½œï¼šMerge (åˆå¹¶)"></a>åŸºç¡€æ“ä½œï¼šMerge (åˆå¹¶)</h2><p><strong>Merge åˆå¹¶</strong> æ˜¯æŠŠå½“å‰åˆ†å¼€çš„ä¸¤æ£µå­æ ‘åˆå¹¶æˆä¸€é¢—æ–°çš„æ ‘ï¼Œå‡½æ•°éœ€è¦è¿”å›åˆå¹¶ä¹‹åçš„æ ¹ç»“ç‚¹ï¼Œåˆå¹¶æ—¶éœ€è¦æŒ‰ç…§å †åºï¼Œä½¿å¾—éšæœºå€¼è¾ƒå°çš„ç»“ç‚¹ä½œä¸ºæ–°æ ‘çš„æ ¹ï¼Œå‡è®¾åˆå¹¶å‰æœ‰ä¸¤æ£µæ ‘ Aï¼ŒBï¼ŒA ä¸­çš„æ‰€æœ‰å…ƒç´ éƒ½å°äºB ä¸­çš„å…ƒç´ ï¼Œåˆ™ï¼š</p><ol><li>è‹¥ A æ ‘çš„æ ¹æˆä¸ºäº†æ–°æ ‘çš„æ ¹ï¼Œåˆ™ B æ ‘ä¸ä¼šå¯¹ A æ ‘çš„å·¦å­æ ‘é€ æˆå½±å“ï¼Œé€’å½’åˆå¹¶ A çš„å³å­æ ‘å’Œ B å³å¯</li><li>è‹¥ B æ ‘çš„æ ¹æˆä¸ºäº†æ–°æ ‘çš„æ ¹ï¼Œåˆ™ A æ ‘ä¸ä¼šå¯¹ B æ ‘çš„å³å­æ ‘é€ æˆå½±å“ï¼Œé€’å½’åˆå¹¶ B çš„å·¦å­æ ‘å’Œ A å³å¯</li></ol><p><strong>è¾¹ç•Œæ¡ä»¶ï¼šè‹¥ Aï¼ŒB ä¸­æœ‰ç©ºæ ‘ï¼Œé‚£ä¹ˆä»¥ä¸æ˜¯ç©ºæ ‘çš„ç»“ç‚¹ä½œä¸ºæ–°æ ‘çš„æ ¹ç»“ç‚¹ï¼Œæ­¤æ—¶æ— éœ€å†å¾€ä¸‹é€’å½’</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">merge</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> y)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(!x || !y) <span class="keyword">return</span> x|y;</span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">rnd</span>(x)&lt;<span class="built_in">rnd</span>(y))&#123;</span><br><span class="line"><span class="built_in">rc</span>(x)=<span class="built_in">merge</span>(<span class="built_in">rc</span>(x),y);</span><br><span class="line"><span class="built_in">pushup</span>(x); <span class="keyword">return</span> x;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"><span class="built_in">lc</span>(y)=<span class="built_in">merge</span>(x,<span class="built_in">lc</span>(y));</span><br><span class="line"><span class="built_in">pushup</span>(y); <span class="keyword">return</span> y;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®é™…ä½¿ç”¨æ—¶è¦ç”¨ <strong>root</strong> æ¥ç»´æŠ¤å½“å‰æ ‘çš„æ ¹ç»“ç‚¹</p><h2 id="åŒºé—´æ“ä½œï¼šæ’å…¥ï¼ˆInsertï¼‰"><a href="#åŒºé—´æ“ä½œï¼šæ’å…¥ï¼ˆInsertï¼‰" class="headerlink" title="åŒºé—´æ“ä½œï¼šæ’å…¥ï¼ˆInsertï¼‰"></a>åŒºé—´æ“ä½œï¼šæ’å…¥ï¼ˆInsertï¼‰</h2><p><strong>Insert æ’å…¥</strong> æ˜¯æŠŠæ–°çš„å€¼æ”¾å…¥å½“å‰çš„ <strong>FHQTreap</strong> ä¸­ï¼Œä¾é  <strong>Split</strong> å’Œ <strong>Merge</strong> å®ç°æ’å…¥æ“ä½œï¼Œæˆ‘ä»¬åªéœ€è¦å°†å½“å‰çš„æ ‘æŒ‰ç…§æ’å…¥çš„æƒå€¼ <strong>X</strong> åˆ†è£‚æˆä¸¤æ£µæ ‘ï¼Œæ­¤æ—¶å·¦è¾¹çš„ A æ ‘æƒå€¼å‡å°äºç­‰äº <strong>X</strong>ï¼Œå³è¾¹çš„ B æ ‘æƒå€¼å‡å¤§äº <strong>X</strong>ï¼ŒæŠŠ Aï¼ŒXï¼ŒB æŒ‰é¡ºåºåˆå¹¶ï¼Œæ’å…¥å°±å®Œæˆäº†ï¼Œä¸¾ä¸ªä¾‹å­ï¼š</p><blockquote><p><strong>æ’å…¥ä¹‹å‰çš„æ ‘ï¼Œéœ€è¦æ’å…¥çš„å€¼ä¸º 5</strong></p></blockquote><div class="mermaid-wrap"><pre class="mermaid-src" hidden>  graph TD4---24---77---67---82---12---3  </pre></div><blockquote><p><strong>ä¸€æ¬¡åˆ†è£‚ä¹‹åï¼š</strong></p></blockquote><div class="mermaid-wrap"><pre class="mermaid-src" hidden>  graph TD4---24---77---67---82---12---3  </pre></div><blockquote><p><strong>åˆå¹¶ä¹‹åï¼š</strong></p></blockquote><div class="mermaid-wrap"><pre class="mermaid-src" hidden>  graph TD4---24---77---67---82---12---3  </pre></div><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">Insert</span><span class="params">(<span class="type">int</span> N)</span></span>&#123;</span><br><span class="line"><span class="built_in">SplitVal</span>(root,<span class="built_in">val</span>(N),X,Y);</span><br><span class="line">rot=<span class="built_in">merge</span>(<span class="built_in">merge</span>(X,N),Y);</span><br><span class="line">    <span class="comment">// root æ˜¯ä¸€ä¸ªå¸¸é‡ï¼Œä»£è¡¨æ ‘å½“å‰çš„æ ¹ç»“ç‚¹</span></span><br><span class="line">    <span class="comment">// X,Y éšæ„å–å€¼ï¼ŒåŸå› æ˜¯ä»–ä»¬ä¼šåœ¨ Split æ—¶è¢«å¼•ç”¨èµ‹å€¼ï¼Œåªå…·æœ‰ä¸´æ—¶æ„ä¹‰</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åŒºé—´æ“ä½œï¼šç¬¬-K-å°ï¼ˆKthï¼‰"><a href="#åŒºé—´æ“ä½œï¼šç¬¬-K-å°ï¼ˆKthï¼‰" class="headerlink" title="åŒºé—´æ“ä½œï¼šç¬¬ K å°ï¼ˆKthï¼‰"></a>åŒºé—´æ“ä½œï¼šç¬¬ K å°ï¼ˆKthï¼‰</h2><p><strong>Kth ç¬¬ K å°</strong> æ˜¯å¯»æ‰¾å½“å‰åºåˆ—ä¸­å‡åºæ’åˆ—åç¬¬ K ä½çš„æ•°ï¼Œè¿™é‡Œçš„ç¬¬ K å°è¿”å›çš„æ˜¯è¿™ä¸ªæ•°çš„ç»“ç‚¹ç¼–å·ï¼Œä¸ <strong>Splay</strong> ä»¥åŠ <strong>BST</strong> çš„æ€è·¯å®Œå…¨ä¸€è‡´ï¼Œå°±ä¸å¤šè¯´äº†</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">kth</span><span class="params">(<span class="type">int</span> k,<span class="type">int</span> tar)</span></span>&#123;</span><br><span class="line">    <span class="comment">// k ä»£è¡¨å½“å‰èµ°åˆ°äº†å“ªä¸ªç»“ç‚¹</span></span><br><span class="line"><span class="keyword">while</span>(<span class="literal">true</span>)&#123;</span><br><span class="line"><span class="keyword">if</span>(tar&lt;=<span class="built_in">siz</span>(<span class="built_in">lc</span>(k))) k=<span class="built_in">lc</span>(k);</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line"><span class="keyword">if</span>(tar==<span class="built_in">siz</span>(<span class="built_in">lc</span>(k))+<span class="number">1</span>) <span class="keyword">return</span> k;</span><br><span class="line"><span class="keyword">else</span> tar-=(<span class="built_in">siz</span>(<span class="built_in">lc</span>(k))+<span class="number">1</span>), k=<span class="built_in">rc</span>(k);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åŒºé—´æ“ä½œï¼šæ’åé—®é¢˜ï¼ˆRankï¼‰"><a href="#åŒºé—´æ“ä½œï¼šæ’åé—®é¢˜ï¼ˆRankï¼‰" class="headerlink" title="åŒºé—´æ“ä½œï¼šæ’åé—®é¢˜ï¼ˆRankï¼‰"></a>åŒºé—´æ“ä½œï¼šæ’åé—®é¢˜ï¼ˆRankï¼‰</h2><p><strong>Rank æ’åé—®é¢˜</strong> æ˜¯æŒ‡åœ¨åŒºé—´ä¸­è¯¢é—®æŸä¸€ä¸ªæ•°çš„å‡åºæ’åˆ—åä½ç½®ï¼ˆç¡®ä¿å­˜åœ¨ï¼‰ï¼Œå’Œè¯¢é—®æ’åä¸º K çš„æ•°ï¼ˆå‡åºæ’åˆ—ï¼‰ï¼Œé€šå¸¸ä¸ <strong>Kth</strong> åˆèµ·æ¥ä½¿ç”¨ï¼Œæ€è·¯åŒ <strong>BST</strong></p><h3 id="æŸ¥è¯¢æŸæ•°çš„æ’å"><a href="#æŸ¥è¯¢æŸæ•°çš„æ’å" class="headerlink" title="æŸ¥è¯¢æŸæ•°çš„æ’å"></a>æŸ¥è¯¢æŸæ•°çš„æ’å</h3><p>å°†åŸæ ‘æŒ‰ç…§ç»™å®šæ•° N çš„å€¼å‡ 1 åˆ†ä¸º Xï¼ŒY ä¸¤æ£µæ ‘ï¼Œç„¶åå·¦è¾¹çš„ X æ ‘çš„å¤§å°å°±æ˜¯å¤„åœ¨ N å‰é¢çš„æ•°çš„ä¸ªæ•°ï¼ŒåŠ ä¸Š N æœ¬èº«ï¼Œå°±æ˜¯ä»–çš„æ’å</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">GetRnk</span><span class="params">(<span class="type">int</span> N)</span></span>&#123;</span><br><span class="line"><span class="comment">// å–å¾—å…ƒç´ çš„æ’å  </span></span><br><span class="line"><span class="built_in">SplitVal</span>(root,N<span class="number">-1</span>,X,Y);</span><br><span class="line"><span class="type">int</span> ret=<span class="built_in">siz</span>(X)+<span class="number">1</span>;</span><br><span class="line">root=<span class="built_in">merge</span>(X,Y); <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æŸ¥è¯¢ç¬¬-K-åçš„æ•°"><a href="#æŸ¥è¯¢ç¬¬-K-åçš„æ•°" class="headerlink" title="æŸ¥è¯¢ç¬¬ K åçš„æ•°"></a>æŸ¥è¯¢ç¬¬ K åçš„æ•°</h3><p>ç›´æ¥ <strong>Kth</strong> è§£å†³é—®é¢˜</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">int</span> <span class="title">GetRanK</span><span class="params">(<span class="type">int</span> N)</span></span>&#123;</span><br><span class="line"><span class="comment">// å–å¾—ç¬¬ K å°çš„æ•° </span></span><br><span class="line"><span class="type">int</span> ret=<span class="built_in">kth</span>(root,N);</span><br><span class="line"><span class="keyword">if</span>(!ret) <span class="keyword">return</span> INF;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">return</span> <span class="built_in">val</span>(ret);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å…ƒç´ æ“ä½œï¼šå‰é©±ä¸åç»§ï¼ˆPrecursor-amp-Successorï¼‰"><a href="#å…ƒç´ æ“ä½œï¼šå‰é©±ä¸åç»§ï¼ˆPrecursor-amp-Successorï¼‰" class="headerlink" title="å…ƒç´ æ“ä½œï¼šå‰é©±ä¸åç»§ï¼ˆPrecursor &amp; Successorï¼‰"></a>å…ƒç´ æ“ä½œï¼šå‰é©±ä¸åç»§ï¼ˆPrecursor &amp; Successorï¼‰</h2><h3 id="å…ƒç´ çš„å‰é©±ï¼ˆPrecursorï¼‰"><a href="#å…ƒç´ çš„å‰é©±ï¼ˆPrecursorï¼‰" class="headerlink" title="å…ƒç´ çš„å‰é©±ï¼ˆPrecursorï¼‰"></a>å…ƒç´ çš„å‰é©±ï¼ˆPrecursorï¼‰</h3><p>å…ƒç´ çš„å‰é©±å®šä¹‰ä¸º <strong>å°äºç­‰äºæ­¤å…ƒç´ çš„å…ƒç´ ç»„æˆçš„é›†åˆä¸­æœ€å¤§çš„ä¸€ä¸ª</strong>ï¼Œè¦æ±‚ä¸€ä¸ªå…ƒç´ çš„å‰é©±ï¼Œåªéœ€å°†æ•´é¢—æ ‘æŒ‰ç…§ <strong>N-1</strong> è¿›è¡Œåˆ†è£‚ï¼ˆNæ˜¯å…ƒç´ çš„å€¼ï¼‰ï¼Œç„¶ååœ¨å·¦æ•°ä¸­æ‰¾æœ€å¤§å€¼å³å¯</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">GetPre</span><span class="params">(<span class="type">int</span> N)</span></span>&#123;</span><br><span class="line"><span class="comment">// å–å¾—å…ƒç´ çš„å‰é©±  </span></span><br><span class="line"><span class="built_in">SplitVal</span>(root,N<span class="number">-1</span>,X,Y);</span><br><span class="line"><span class="type">int</span> ret;</span><br><span class="line"><span class="keyword">if</span>(!<span class="built_in">siz</span>(X)) ret=INF;</span><br><span class="line"><span class="keyword">else</span> ret=<span class="built_in">val</span>(<span class="built_in">kth</span>(X,<span class="built_in">siz</span>(X)));</span><br><span class="line">root=<span class="built_in">merge</span>(X,Y); <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å…ƒç´ çš„åç»§ï¼ˆSuccessorï¼‰"><a href="#å…ƒç´ çš„åç»§ï¼ˆSuccessorï¼‰" class="headerlink" title="å…ƒç´ çš„åç»§ï¼ˆSuccessorï¼‰"></a>å…ƒç´ çš„åç»§ï¼ˆSuccessorï¼‰</h3><p>å…ƒç´ çš„åç»§å®šä¹‰ä¸º <strong>å¤§äºæ­¤å…ƒç´ çš„å…ƒç´ ç»„æˆçš„é›†åˆä¸­æœ€å°çš„ä¸€ä¸ª</strong>ï¼Œè¦æ±‚ä¸€ä¸ªå…ƒç´ çš„åç»§ï¼Œåªéœ€å°†æ•´é¢—æ ‘æŒ‰ç…§ <strong>N</strong> è¿›è¡Œåˆ†è£‚ï¼ˆNæ˜¯å…ƒç´ çš„å€¼ï¼‰ï¼Œç„¶ååœ¨å³æ ‘ä¸­æ‰¾æœ€å°å€¼å³å¯</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">GetSuc</span><span class="params">(<span class="type">int</span> N)</span></span>&#123;</span><br><span class="line"><span class="comment">// å–å¾—å…ƒç´ çš„åç»§  </span></span><br><span class="line"><span class="built_in">SplitVal</span>(root,N,X,Y);</span><br><span class="line"><span class="type">int</span> ret;</span><br><span class="line"><span class="keyword">if</span>(!<span class="built_in">siz</span>(Y)) ret=INF;</span><br><span class="line"><span class="keyword">else</span> ret=<span class="built_in">val</span>(<span class="built_in">kth</span>(Y,<span class="number">1</span>));</span><br><span class="line">root=<span class="built_in">merge</span>(X,Y); <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å…ƒç´ æ“ä½œï¼šå…ƒç´ -N-çš„å‡ºç°ä¸è®¡æ•°ï¼ˆExist-amp-Countï¼‰"><a href="#å…ƒç´ æ“ä½œï¼šå…ƒç´ -N-çš„å‡ºç°ä¸è®¡æ•°ï¼ˆExist-amp-Countï¼‰" class="headerlink" title="å…ƒç´ æ“ä½œï¼šå…ƒç´  N çš„å‡ºç°ä¸è®¡æ•°ï¼ˆExist &amp; Countï¼‰"></a>å…ƒç´ æ“ä½œï¼šå…ƒç´  N çš„å‡ºç°ä¸è®¡æ•°ï¼ˆExist &amp; Countï¼‰</h2><h3 id="å…ƒç´ -N-æ˜¯å¦å‡ºç°ï¼ˆExistï¼‰"><a href="#å…ƒç´ -N-æ˜¯å¦å‡ºç°ï¼ˆExistï¼‰" class="headerlink" title="å…ƒç´  N æ˜¯å¦å‡ºç°ï¼ˆExistï¼‰"></a>å…ƒç´  N æ˜¯å¦å‡ºç°ï¼ˆExistï¼‰</h3><p>åˆ¤æ–­ç»™å®šçš„å…ƒç´  <strong>N</strong> æ˜¯å¦å­˜åœ¨ï¼ŒæŒ‰ç…§ä¸­åºéå†æ•´æ£µæ ‘å³å¯</p><p>ç”±äº <strong>FHQTreap</strong> æœ¬è´¨æ˜¯ä¸€é¢— <strong>BST</strong> ï¼Œç¬¦åˆ <strong>BST</strong> çš„ç‰¹å¾ï¼Œæ‰€ä»¥è‹¥ <strong>N</strong> å°äºç­‰äºå½“å‰ç»“ç‚¹çš„å€¼ï¼Œ<strong>N</strong> ä¸€å®šåœ¨å…¶å·¦å­æ ‘ï¼Œå¦åˆ™ <strong>N</strong> åªèƒ½ä½äºå…¶å³å­æ ‘</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">bool</span> <span class="title">ExistK</span><span class="params">(<span class="type">int</span> k,<span class="type">int</span> N)</span></span>&#123;</span><br><span class="line"><span class="comment">// é€’å½’å¯»æ‰¾ val=K çš„å…ƒç´   </span></span><br><span class="line"><span class="keyword">if</span>(!k) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(<span class="built_in">val</span>(k)==N) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(N&gt;=<span class="built_in">val</span>(k)) <span class="keyword">return</span> <span class="built_in">ExistK</span>(<span class="built_in">rc</span>(k),N);</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">return</span> <span class="built_in">ExistK</span>(<span class="built_in">lc</span>(k),N);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å°äºç­‰äº-N-çš„æ•°çš„ä¸ªæ•°ï¼ˆCountï¼‰"><a href="#å°äºç­‰äº-N-çš„æ•°çš„ä¸ªæ•°ï¼ˆCountï¼‰" class="headerlink" title="å°äºç­‰äº N çš„æ•°çš„ä¸ªæ•°ï¼ˆCountï¼‰"></a>å°äºç­‰äº N çš„æ•°çš„ä¸ªæ•°ï¼ˆCountï¼‰</h3><p>è¿™é‡Œçš„ <strong>Count</strong> ä¸å‰é¢çš„ <strong>Kth</strong> å’Œ <strong>GetRnk</strong> ä¸åŒçš„æ˜¯ï¼Œ<strong>N</strong> å¯ä»¥ä¸æ˜¯å½“å‰åºåˆ—ä¸­çš„æ•°ï¼ŒæŒ‰ç…§ <strong>BST</strong> çš„æ€§è´¨ï¼Œå¦‚æœå½“å‰ç»“ç‚¹ <strong>K</strong> çš„å€¼å°äºç­‰äº <strong>N</strong>ï¼Œ é‚£ä¹ˆ <strong>K</strong> çš„å·¦å­æ ‘ä¸€å®šå…¨éƒ¨å°äºç­‰äº <strong>N</strong> ï¼ŒæŠŠè¿™éƒ¨åˆ†åŠ ä¸Šåå†å»å…¶å³å­æ ‘é€’å½’å¯»æ‰¾ï¼Œå¦åˆ™åªç”¨å» <strong>K</strong> çš„å·¦å­æ ‘é€’å½’å¯»æ‰¾ï¼ˆ<strong>K</strong> çš„å³å­æ ‘ä¸€å®šéƒ½æ¯” <strong>N</strong> å¤§ï¼‰</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">int</span> <span class="title">CntK</span><span class="params">(<span class="type">int</span> k,<span class="type">int</span> N)</span></span>&#123;</span><br><span class="line"><span class="comment">// æ•°ä¸€ä¸‹æœ‰å¤šå°‘ä¸ªå°äº N çš„æ•° </span></span><br><span class="line"><span class="type">int</span> ans=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">if</span>(!k) <span class="keyword">return</span> ans;</span><br><span class="line"><span class="keyword">if</span>(N&gt;<span class="built_in">val</span>(k)) ans=<span class="built_in">siz</span>(<span class="built_in">lc</span>(k))+<span class="number">1</span>+<span class="built_in">CntK</span>(<span class="built_in">rc</span>(k),N);</span><br><span class="line"><span class="keyword">else</span> ans=<span class="built_in">CntK</span>(<span class="built_in">lc</span>(k),N);</span><br><span class="line"><span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="æ‰©å±•æ“ä½œï¼šåƒåœ¾å›æ”¶ï¼ˆRecycleï¼‰"><a href="#æ‰©å±•æ“ä½œï¼šåƒåœ¾å›æ”¶ï¼ˆRecycleï¼‰" class="headerlink" title="æ‰©å±•æ“ä½œï¼šåƒåœ¾å›æ”¶ï¼ˆRecycleï¼‰"></a>æ‰©å±•æ“ä½œï¼šåƒåœ¾å›æ”¶ï¼ˆRecycleï¼‰</h2><p><strong>Recycle åƒåœ¾å›æ”¶</strong> æ˜¯å¯¹é‚£äº›æ¯’ç˜¤æ•°æ®ï¼Œä¼šè®©å¹³è¡¡æ ‘é¢‘ç¹åˆ ç‚¹å’Œå»ºç‚¹è®¾è®¡çš„ä¼˜åŒ–ç®—æ³•ï¼Œå¯ä»¥åœ¨ä¸€å®šç¨‹åº¦ä¸ŠèŠ‚çœä¸€äº›ç©ºé—´</p><p>åˆ©ç”¨ <strong>DUST</strong> æ•°ç»„å­˜å‚¨å·²ç»åˆ é™¤çš„ç‚¹ï¼Œä¸‹æ¬¡æ–°å»ºæ—¶ä¼˜å…ˆå» <strong>DUST</strong> é‡Œå¯»æ‰¾å·²ç»åˆ é™¤çš„ç‚¹</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">int</span> <span class="title">New</span><span class="params">(<span class="type">int</span> x)</span></span>&#123;</span><br><span class="line">  p=(dust[<span class="number">0</span>]?)dust[dust[<span class="number">0</span>]--]:++newp;</span><br><span class="line">    <span class="built_in">lc</span>(p)=<span class="built_in">rc</span>(p)=<span class="number">0</span>; <span class="built_in">siz</span>(p)=<span class="number">1</span>;</span><br><span class="line">    <span class="built_in">val</span>(p)=x; <span class="built_in">rnd</span>(p)=<span class="built_in">rand</span>();</span><br><span class="line"><span class="built_in">siz</span>(p)=<span class="number">1</span>; <span class="keyword">return</span> p;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">Eliminate</span><span class="params">(<span class="type">int</span> N)</span></span>&#123;</span><br><span class="line"><span class="comment">// æ¶ˆé™¤å…ƒç´   </span></span><br><span class="line"><span class="built_in">SplitVal</span>(root,N,X,Z);</span><br><span class="line"><span class="built_in">SplitVal</span>(X,N<span class="number">-1</span>,X,Y);</span><br><span class="line">    dust[++dust[<span class="number">0</span>]]=Y;</span><br><span class="line">Y=<span class="built_in">merge</span>(<span class="built_in">lc</span>(Y),<span class="built_in">rc</span>(Y));</span><br><span class="line">root=<span class="built_in">merge</span>(<span class="built_in">merge</span>(X,Y),Z);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ‰©å±•æ“ä½œï¼šå»¶è¿Ÿæ ‡è®°ï¼ˆTagï¼‰"><a href="#æ‰©å±•æ“ä½œï¼šå»¶è¿Ÿæ ‡è®°ï¼ˆTagï¼‰" class="headerlink" title="æ‰©å±•æ“ä½œï¼šå»¶è¿Ÿæ ‡è®°ï¼ˆTagï¼‰"></a>æ‰©å±•æ“ä½œï¼šå»¶è¿Ÿæ ‡è®°ï¼ˆTagï¼‰</h2><p><strong>Tag å»¶è¿Ÿæ ‡è®°</strong> å’Œçº¿æ®µæ ‘çš„ <strong>LazyTag æ‡’æ ‡è®°</strong> ç›¸ä¼¼ï¼Œè‹¥æ“ä½œå¤šæ¬¡èƒ½é€ æˆç»“æœçš„å‘¨æœŸæ€§å˜åŒ–ï¼Œåœ¨ <strong>Tag</strong>  ä¸­ä¿å­˜æ“ä½œçš„æ¬¡æ•°è€Œä¸ç”¨é©¬ä¸Šè¿›è¡Œæ“ä½œï¼Œå¯ä»¥é™ä½æ—¶é—´å¤æ‚åº¦ï¼Œä¸€ä¸ªä¾‹å­ï¼š</p><blockquote><p>å®šä¹‰æ“ä½œ <strong>SegReverseï¼ˆLï¼ŒRï¼‰</strong> è¡¨ç¤ºå°†åŒºé—´ <strong>ï¼ˆLï¼ŒRï¼‰</strong> å†…çš„æ•°å­—å…¨éƒ¨å¤´å°¾ç¿»è½¬ï¼Œç»™å®šåŸåºåˆ—ï¼Œè¾“å‡ºç»è¿‡ n æ¬¡ç»™å®šæ“ä½œåçš„åºåˆ—</p></blockquote><p>ä¸Šé¢çš„ç¿»è½¬æ“ä½œæ˜¾ç„¶å…·æœ‰å‘¨æœŸæ€§ï¼Œ<strong>ä»»ä½•åŒºé—´ç¿»è½¬å¶æ•°æ¬¡ä¹‹åä¸ä¼šå‘ç”Ÿå˜åŒ–</strong>ï¼Œåˆ©ç”¨å»¶è¿Ÿæ ‡è®°é™ä½æ“ä½œçš„æ—¶é—´å¤æ‚åº¦</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">pushdown</span><span class="params">(<span class="type">int</span> k)</span></span>&#123;</span><br><span class="line"><span class="comment">// æ ‡è®°ä¸‹ä¼   </span></span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">tag</span>(k))&#123;</span><br><span class="line"><span class="built_in">swap</span>(<span class="built_in">lc</span>(k),<span class="built_in">rc</span>(k));</span><br><span class="line"><span class="built_in">tag</span>(<span class="built_in">lc</span>(k))^=<span class="number">1</span>;<span class="built_in">tag</span>(<span class="built_in">rc</span>(k))^=<span class="number">1</span>;</span><br><span class="line"><span class="built_in">tag</span>(k)=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">SeqReverse</span><span class="params">(<span class="type">int</span> L,<span class="type">int</span> R)</span></span>&#123;</span><br><span class="line"><span class="comment">// åŒºé—´ç¿»è½¬  </span></span><br><span class="line"><span class="built_in">SplitRnk</span>(root,L<span class="number">-1</span>,X,Y);</span><br><span class="line"><span class="built_in">SplitRnk</span>(Y,R-L+<span class="number">1</span>,Y,Z);</span><br><span class="line"><span class="built_in">tag</span>(Y)^=<span class="number">1</span>;</span><br><span class="line">root=<span class="built_in">merge</span>(X,<span class="built_in">merge</span>(Y,Z));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>è¾“å‡ºåºåˆ—æ—¶è¦ç”¨åˆ°ä¸­åºéå†</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">VisDfs</span><span class="params">(<span class="type">int</span> k)</span></span>&#123;</span><br><span class="line"><span class="comment">// ä¸­åºéå†  </span></span><br><span class="line"><span class="keyword">if</span>(!k) <span class="keyword">return</span>;</span><br><span class="line"><span class="comment">//pushdown(k);</span></span><br><span class="line"><span class="built_in">VisDfs</span>(<span class="built_in">lc</span>(k));</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>,<span class="built_in">val</span>(k));</span><br><span class="line"><span class="built_in">VisDfs</span>(<span class="built_in">rc</span>(k));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ‰©å±•æ“ä½œï¼šå¯å‘å¼åˆå¹¶ï¼ˆEnlightenment-Mergeï¼‰"><a href="#æ‰©å±•æ“ä½œï¼šå¯å‘å¼åˆå¹¶ï¼ˆEnlightenment-Mergeï¼‰" class="headerlink" title="æ‰©å±•æ“ä½œï¼šå¯å‘å¼åˆå¹¶ï¼ˆEnlightenment Mergeï¼‰"></a>æ‰©å±•æ“ä½œï¼šå¯å‘å¼åˆå¹¶ï¼ˆEnlightenment Mergeï¼‰</h2><p><strong>Enlightenment Merge å¯å‘å¼åˆå¹¶</strong> æ˜¯å¹¶æŸ¥é›†é‡Œé¢çš„ä¸€ä¸ªæ€æƒ³ï¼Œå³ï¼š<strong>æ¯æ¬¡åˆå¹¶æ—¶ï¼Œå°†å…ƒç´ å°‘çš„é›†åˆåˆå¹¶åˆ°å…ƒç´ å¤šçš„é›†åˆ</strong>ï¼Œè¿™æ ·çš„åˆå¹¶åœ¨æ ‘ä¸­å¯ä»¥å‡å°‘ä¸¤æ£µæ ‘åˆå¹¶åå¯¹äºåŸæ ‘çš„å½±å“ï¼Œä»æŸç§ç„å­¦çš„è§’åº¦æ¥è¯´ï¼Œèƒ½é™ä½åé¢éå†çš„æ—¶é—´å¤æ‚åº¦ï¼Œå¯¹äºå¤šæ ¹æ ‘çš„åˆå¹¶æ“ä½œï¼Œå¯å‘å¼åˆå¹¶æ¯”éšæœºåˆå¹¶èƒ½æé«˜åé¢éå†çš„æ•ˆç‡ï¼Œæ ¸å¿ƒä»£ç ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">int</span> <span class="title">MultiUnion</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> y)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">siz</span>(x)&gt;<span class="built_in">siz</span>(y)) <span class="built_in">swap</span>(x,y);</span><br><span class="line"><span class="built_in">Union</span>(x,y); <span class="keyword">return</span> y; <span class="comment">// Union(x,y) è¡¨ç¤ºå°† x åˆå¹¶åˆ° y</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">MultiMerge</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> y)</span></span>&#123;</span><br><span class="line"><span class="type">int</span> fx=<span class="built_in">Sfind</span>(x),fy=<span class="built_in">Sfind</span>(y);</span><br><span class="line"><span class="keyword">if</span>(fx==fy) <span class="keyword">return</span>;</span><br><span class="line"><span class="type">int</span> fz=<span class="built_in">MultiUnion</span>(fx,fy);</span><br><span class="line">f[<span class="built_in">Sfind</span>(x)]=f[<span class="built_in">Sfind</span>(y)]=fz; f[fz]=fz;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><p><strong>ä¸‹é¢æ˜¯ä¸€äº›ä¾‹é¢˜ï¼š</strong></p><div class="table-container"><table><thead><tr><th style="text-align:center">é¢˜ç›®</th><th style="text-align:center">ç”¨åˆ°çš„æ“ä½œ</th></tr></thead><tbody><tr><td style="text-align:center"><a href="http://newoj.cqyz.cn/problem/P2025">ã€åŸ¹è®­é¢˜ã€‘å¹³è¡¡æ ‘[1]</a></td><td style="text-align:center">Splitï¼ŒMergeï¼ŒInsertï¼ŒPrecursorï¼ŒSuccessorï¼ŒExistï¼ŒRankï¼ŒEliminate</td></tr><tr><td style="text-align:center"><a href="http://newoj.cqyz.cn/problem/P2026">ã€åŸ¹è®­é¢˜ã€‘å¹³è¡¡æ ‘[2]</a></td><td style="text-align:center">Splitï¼ŒMergeï¼ŒInsertï¼ŒKthï¼ŒExistï¼ŒRankï¼ŒCountï¼ŒEliminate</td></tr><tr><td style="text-align:center"><a href="https://www.luogu.org/problemnew/show/P3391">ã€æ¨¡æ¿ã€‘æ–‡è‰ºå¹³è¡¡æ ‘</a></td><td style="text-align:center">Splitï¼ŒMergeï¼ŒInsertï¼ŒEliminateï¼ŒTag</td></tr><tr><td style="text-align:center"><a href="https://www.luogu.org/problemnew/show/P3224">HNOI2012 æ°¸æ— ä¹¡</a></td><td style="text-align:center">Splitï¼ŒMergeï¼ŒInsertï¼ŒEliminateï¼ŒEnlightenment Merge</td></tr></tbody></table></div><p><strong>ä»£ç æ•´åˆï¼š</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">FHQTreap</span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> INF 2147483647</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ll long long</span></span><br><span class="line"><span class="type">int</span> X,Y,Z;</span><br><span class="line"><span class="type">int</span> f[maxn&lt;&lt;<span class="number">2</span>]; <span class="comment">// å¹¶æŸ¥é›†éƒ¨åˆ†   </span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">Sfind</span><span class="params">(<span class="type">int</span> x)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(f[x]==x) <span class="keyword">return</span> x;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">return</span> f[x]=<span class="built_in">Sfind</span>(f[x]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">FHQTreap</span>()&#123;</span><br><span class="line">X=Y=Z=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> t&gt;<span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">fcin</span><span class="params">(t &amp;x)</span></span>&#123;</span><br><span class="line"><span class="type">int</span> sign=<span class="number">1</span>; x=<span class="number">0</span>; <span class="type">char</span> op=<span class="built_in">getchar</span>();</span><br><span class="line"><span class="keyword">while</span>(op&lt;<span class="string">&#x27;0&#x27;</span>||op&gt;<span class="string">&#x27;9&#x27;</span>)&#123;<span class="keyword">if</span>(op==<span class="string">&#x27;-&#x27;</span>) sign=<span class="number">-1</span>;op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line"><span class="keyword">while</span>(op&gt;=<span class="string">&#x27;0&#x27;</span>&amp;&amp;op&lt;=<span class="string">&#x27;9&#x27;</span>)&#123;x=x*<span class="number">10</span>+(op<span class="number">-48</span>);op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line">x*=sign;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">FHQTreapNode</span>&#123;</span><br><span class="line"><span class="type">int</span> LC,RC,RND,SIZ,V,TAG;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> lc(x) T[x].LC</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> rc(x) T[x].RC</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> rnd(x) T[x].RND</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> siz(x) T[x].SIZ</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> val(x) T[x].V</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> tag(x) T[x].TAG</span></span><br><span class="line">&#125;T[maxn&lt;&lt;<span class="number">2</span>]; <span class="type">int</span> newp,root;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">pushup</span><span class="params">(<span class="type">int</span> k)</span></span>&#123;<span class="built_in">siz</span>(k)=<span class="built_in">siz</span>(<span class="built_in">lc</span>(k))+<span class="built_in">siz</span>(<span class="built_in">rc</span>(k))+<span class="number">1</span>;&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">int</span> <span class="title">New</span><span class="params">(<span class="type">int</span> x)</span></span>&#123;</span><br><span class="line">newp++; <span class="built_in">val</span>(newp)=x; <span class="built_in">rnd</span>(newp)=<span class="built_in">rand</span>();</span><br><span class="line"><span class="built_in">siz</span>(newp)=<span class="number">1</span>; <span class="keyword">return</span> newp;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">merge</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> y)</span></span>&#123; <span class="comment">// åˆå¹¶ä¸¤æ£µæ ‘ </span></span><br><span class="line"><span class="keyword">if</span>(!x || !y) <span class="keyword">return</span> x|y;</span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">rnd</span>(x)&lt;<span class="built_in">rnd</span>(y))&#123;</span><br><span class="line"><span class="built_in">rc</span>(x)=<span class="built_in">merge</span>(<span class="built_in">rc</span>(x),y);</span><br><span class="line"><span class="built_in">pushup</span>(x); <span class="keyword">return</span> x;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"><span class="built_in">lc</span>(y)=<span class="built_in">merge</span>(x,<span class="built_in">lc</span>(y));</span><br><span class="line"><span class="built_in">pushup</span>(y); <span class="keyword">return</span> y;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">SplitVal</span><span class="params">(<span class="type">int</span> k,<span class="type">int</span> tar,<span class="type">int</span> &amp;x,<span class="type">int</span> &amp;y)</span></span>&#123; <span class="comment">// æŒ‰æƒå€¼åˆ†è£‚  </span></span><br><span class="line"><span class="keyword">if</span>(!k)&#123;x=y=<span class="number">0</span>; <span class="keyword">return</span>;&#125;</span><br><span class="line"><span class="keyword">if</span>(tar&gt;=<span class="built_in">val</span>(k))&#123;</span><br><span class="line">x=k; <span class="built_in">SplitVal</span>(<span class="built_in">rc</span>(k),tar,<span class="built_in">rc</span>(k),y);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">y=k; <span class="built_in">SplitVal</span>(<span class="built_in">lc</span>(k),tar,x,<span class="built_in">lc</span>(k));</span><br><span class="line">&#125; <span class="built_in">pushup</span>(k);</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">SplitRnk</span><span class="params">(<span class="type">int</span> k,<span class="type">int</span> tar,<span class="type">int</span> &amp;x,<span class="type">int</span> &amp;y)</span></span>&#123; <span class="comment">// æŒ‰æ’ååˆ†è£‚  </span></span><br><span class="line"><span class="keyword">if</span>(!k)&#123;x=y=<span class="number">0</span>; <span class="keyword">return</span>;&#125;</span><br><span class="line"><span class="built_in">pushup</span>(k);</span><br><span class="line"><span class="keyword">if</span>(tar&lt;=<span class="built_in">siz</span>(<span class="built_in">lc</span>(k)))&#123;</span><br><span class="line">y=k; <span class="built_in">SplitRnk</span>(<span class="built_in">lc</span>(k),tar,x,<span class="built_in">lc</span>(k));</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">x=k; <span class="built_in">SplitRnk</span>(<span class="built_in">rc</span>(k),tar-<span class="built_in">siz</span>(<span class="built_in">lc</span>(k))<span class="number">-1</span>,<span class="built_in">rc</span>(k),y);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">pushup</span>(k);</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">kth</span><span class="params">(<span class="type">int</span> k,<span class="type">int</span> tar)</span></span>&#123;</span><br><span class="line"><span class="keyword">while</span>(<span class="literal">true</span>)&#123;</span><br><span class="line"><span class="keyword">if</span>(tar&lt;=<span class="built_in">siz</span>(<span class="built_in">lc</span>(k))) k=<span class="built_in">lc</span>(k);</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line"><span class="keyword">if</span>(tar==<span class="built_in">siz</span>(<span class="built_in">lc</span>(k))+<span class="number">1</span>) <span class="keyword">return</span> k;</span><br><span class="line"><span class="keyword">else</span> tar-=(<span class="built_in">siz</span>(<span class="built_in">lc</span>(k))+<span class="number">1</span>), k=<span class="built_in">rc</span>(k);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‡ ç§åŸºæœ¬æ“ä½œ </span></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">Insert</span><span class="params">(<span class="type">int</span> N)</span></span>&#123;</span><br><span class="line"><span class="comment">// æ’å…¥å…ƒç´   </span></span><br><span class="line"><span class="built_in">SplitVal</span>(root,N,X,Y);</span><br><span class="line">root=<span class="built_in">merge</span>(<span class="built_in">merge</span>(X,<span class="built_in">New</span>(N)),Y);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">Eliminate</span><span class="params">(<span class="type">int</span> N)</span></span>&#123;</span><br><span class="line"><span class="comment">// æ¶ˆé™¤å…ƒç´   </span></span><br><span class="line"><span class="built_in">SplitVal</span>(root,N,X,Z);</span><br><span class="line"><span class="built_in">SplitVal</span>(X,N<span class="number">-1</span>,X,Y);</span><br><span class="line">Y=<span class="built_in">merge</span>(<span class="built_in">lc</span>(Y),<span class="built_in">rc</span>(Y));</span><br><span class="line">root=<span class="built_in">merge</span>(<span class="built_in">merge</span>(X,Y),Z);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">GetRnk</span><span class="params">(<span class="type">int</span> N)</span></span>&#123;</span><br><span class="line"><span class="comment">// å–å¾—å…ƒç´ çš„æ’å  </span></span><br><span class="line"><span class="built_in">SplitVal</span>(root,N<span class="number">-1</span>,X,Y);</span><br><span class="line"><span class="type">int</span> ret=<span class="built_in">siz</span>(X)+<span class="number">1</span>;</span><br><span class="line">root=<span class="built_in">merge</span>(X,Y); <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">GetPre</span><span class="params">(<span class="type">int</span> N)</span></span>&#123;</span><br><span class="line"><span class="comment">// å–å¾—å…ƒç´ çš„å‰é©±  </span></span><br><span class="line"><span class="built_in">SplitVal</span>(root,N<span class="number">-1</span>,X,Y);</span><br><span class="line"><span class="type">int</span> ret;</span><br><span class="line"><span class="keyword">if</span>(!<span class="built_in">siz</span>(X)) ret=INF;</span><br><span class="line"><span class="keyword">else</span> ret=<span class="built_in">val</span>(<span class="built_in">kth</span>(X,<span class="built_in">siz</span>(X)));</span><br><span class="line">root=<span class="built_in">merge</span>(X,Y); <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">GetSuc</span><span class="params">(<span class="type">int</span> N)</span></span>&#123;</span><br><span class="line"><span class="comment">// å–å¾—å…ƒç´ çš„åç»§  </span></span><br><span class="line"><span class="built_in">SplitVal</span>(root,N,X,Y);</span><br><span class="line"><span class="type">int</span> ret;</span><br><span class="line"><span class="keyword">if</span>(!<span class="built_in">siz</span>(Y)) ret=INF;</span><br><span class="line"><span class="keyword">else</span> ret=<span class="built_in">val</span>(<span class="built_in">kth</span>(Y,<span class="number">1</span>));</span><br><span class="line">root=<span class="built_in">merge</span>(X,Y); <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">int</span> <span class="title">GetRanK</span><span class="params">(<span class="type">int</span> N)</span></span>&#123;</span><br><span class="line"><span class="comment">// å–å¾—ç¬¬ K å°çš„æ•° </span></span><br><span class="line"><span class="type">int</span> ret=<span class="built_in">kth</span>(root,N);</span><br><span class="line"><span class="keyword">if</span>(!ret) <span class="keyword">return</span> INF;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">return</span> <span class="built_in">val</span>(ret);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">bool</span> <span class="title">ExistK</span><span class="params">(<span class="type">int</span> k,<span class="type">int</span> N)</span></span>&#123;</span><br><span class="line"><span class="comment">// é€’å½’å¯»æ‰¾ val=K çš„å…ƒç´   </span></span><br><span class="line"><span class="keyword">if</span>(!k) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(<span class="built_in">val</span>(k)==N) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(N&gt;=<span class="built_in">val</span>(k)) <span class="keyword">return</span> <span class="built_in">ExistK</span>(<span class="built_in">rc</span>(k),N);</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">return</span> <span class="built_in">ExistK</span>(<span class="built_in">lc</span>(k),N);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">int</span> <span class="title">GetMax</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(!<span class="built_in">siz</span>(root)) <span class="keyword">return</span> INF;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">return</span> <span class="built_in">val</span>(<span class="built_in">kth</span>(root,<span class="built_in">siz</span>(root)));</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">int</span> <span class="title">GetMin</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(!<span class="built_in">siz</span>(root)) <span class="keyword">return</span> INF;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">return</span> <span class="built_in">val</span>(<span class="built_in">kth</span>(root,<span class="number">1</span>));</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">int</span> <span class="title">CntK</span><span class="params">(<span class="type">int</span> k,<span class="type">int</span> N)</span></span>&#123;</span><br><span class="line"><span class="comment">// æ•°ä¸€ä¸‹æœ‰å¤šå°‘ä¸ªå°äº N çš„æ•° </span></span><br><span class="line"><span class="type">int</span> ans=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">if</span>(!k) <span class="keyword">return</span> ans;</span><br><span class="line"><span class="keyword">if</span>(N&gt;<span class="built_in">val</span>(k)) ans=<span class="built_in">siz</span>(<span class="built_in">lc</span>(k))+<span class="number">1</span>+<span class="built_in">CntK</span>(<span class="built_in">rc</span>(k),N);</span><br><span class="line"><span class="keyword">else</span> ans=<span class="built_in">CntK</span>(<span class="built_in">lc</span>(k),N);</span><br><span class="line"><span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–‡è‰ºå¹³è¡¡æ ‘éƒ¨åˆ†ï¼šåŒºé—´ç¿»è½¬  </span></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">pushdown</span><span class="params">(<span class="type">int</span> k)</span></span>&#123;</span><br><span class="line"><span class="comment">// æ ‡è®°ä¸‹ä¼   </span></span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">tag</span>(k))&#123;</span><br><span class="line"><span class="built_in">swap</span>(<span class="built_in">lc</span>(k),<span class="built_in">rc</span>(k));</span><br><span class="line"><span class="built_in">tag</span>(<span class="built_in">lc</span>(k))^=<span class="number">1</span>;<span class="built_in">tag</span>(<span class="built_in">rc</span>(k))^=<span class="number">1</span>;</span><br><span class="line"><span class="built_in">tag</span>(k)=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">SeqReverse</span><span class="params">(<span class="type">int</span> L,<span class="type">int</span> R)</span></span>&#123;</span><br><span class="line"><span class="comment">// åŒºé—´ç¿»è½¬  </span></span><br><span class="line"><span class="built_in">SplitRnk</span>(root,L<span class="number">-1</span>,X,Y);</span><br><span class="line"><span class="built_in">SplitRnk</span>(Y,R-L+<span class="number">1</span>,Y,Z);</span><br><span class="line"><span class="built_in">tag</span>(Y)^=<span class="number">1</span>;</span><br><span class="line">root=<span class="built_in">merge</span>(X,<span class="built_in">merge</span>(Y,Z));</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">VisDfs</span><span class="params">(<span class="type">int</span> k)</span></span>&#123;</span><br><span class="line"><span class="comment">// ä¸­åºéå†  </span></span><br><span class="line"><span class="keyword">if</span>(!k) <span class="keyword">return</span>;</span><br><span class="line"><span class="comment">//pushdown(k);</span></span><br><span class="line"><span class="built_in">VisDfs</span>(<span class="built_in">lc</span>(k));</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>,<span class="built_in">val</span>(k));</span><br><span class="line"><span class="built_in">VisDfs</span>(<span class="built_in">rc</span>(k));</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å¯å‘å¼åˆå¹¶ </span></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">MultiInsert</span><span class="params">(<span class="type">int</span> &amp;rot,<span class="type">int</span> N)</span></span>&#123;</span><br><span class="line"><span class="built_in">SplitVal</span>(rot,<span class="built_in">val</span>(N),X,Y);</span><br><span class="line">rot=<span class="built_in">merge</span>(<span class="built_in">merge</span>(X,N),Y);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">MultiDfs</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> &amp;y)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(!x) <span class="keyword">return</span>;</span><br><span class="line"><span class="built_in">MultiDfs</span>(<span class="built_in">lc</span>(x),y);</span><br><span class="line"><span class="built_in">MultiDfs</span>(<span class="built_in">rc</span>(x),y);</span><br><span class="line"><span class="built_in">lc</span>(x)=<span class="built_in">rc</span>(x)=<span class="number">0</span>;</span><br><span class="line"><span class="built_in">MultiInsert</span>(y,x);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">int</span> <span class="title">MultiUnion</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> y)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">siz</span>(x)&gt;<span class="built_in">siz</span>(y)) <span class="built_in">swap</span>(x,y);</span><br><span class="line"><span class="built_in">MultiDfs</span>(x,y); <span class="keyword">return</span> y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">MultiMerge</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> y)</span></span>&#123;</span><br><span class="line"><span class="type">int</span> fx=<span class="built_in">Sfind</span>(x),fy=<span class="built_in">Sfind</span>(y);</span><br><span class="line"><span class="keyword">if</span>(fx==fy) <span class="keyword">return</span>;</span><br><span class="line"><span class="type">int</span> fz=<span class="built_in">MultiUnion</span>(fx,fy);</span><br><span class="line">f[<span class="built_in">Sfind</span>(x)]=f[<span class="built_in">Sfind</span>(y)]=fz; f[fz]=fz;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¹³è¡¡æ ‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ•°æ®ç»“æ„| å›¾è®º | çº¿æ®µæ ‘ | æ ‘çŠ¶  æ•°ç»„| LCA | æœ€å°ç”Ÿæˆæ ‘ | 20190504 é’å¹´èŠ‚  è€ƒè¯• æ€»ç»“è®¢æ­£</title>
      <link href="/2019/05/07/2019-05-07-%E9%9D%92%E5%B9%B4%E8%8A%82%E8%80%83%E8%AF%95/"/>
      <url>/2019/05/07/2019-05-07-%E9%9D%92%E5%B9%B4%E8%8A%82%E8%80%83%E8%AF%95/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><h1 id="T2-è´§è½¦è¿è¾“"><a href="#T2-è´§è½¦è¿è¾“" class="headerlink" title="T2.è´§è½¦è¿è¾“"></a>T2.è´§è½¦è¿è¾“</h1><h2 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h2><p>A å›½æœ‰ n åº§åŸå¸‚ï¼Œç¼–å·ä» 1 åˆ° nï¼ŒåŸå¸‚ä¹‹é—´æœ‰ m æ¡åŒå‘é“è·¯ã€‚æ¯ä¸€æ¡é“è·¯å¯¹è½¦è¾†éƒ½æœ‰é‡é‡é™åˆ¶ï¼Œç®€ç§°é™é‡ã€‚ç°åœ¨æœ‰ q è¾†è´§è½¦åœ¨è¿è¾“è´§ç‰©ï¼Œå¸æœºä»¬æƒ³çŸ¥é“æ¯è¾†è½¦åœ¨ä¸è¶…è¿‡è½¦è¾†é™é‡çš„æƒ…å†µä¸‹ï¼Œæœ€å¤šèƒ½è¿å¤šé‡çš„è´§ç‰©ã€‚</p><h2 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h2><p>ç¬¬ä¸€è¡Œæœ‰ä¸¤ä¸ªç”¨ä¸€ä¸ªç©ºæ ¼éš”å¼€çš„æ•´æ•° nï¼Œmï¼Œè¡¨ç¤º A å›½æœ‰ n åº§åŸå¸‚å’Œ m æ¡é“è·¯ã€‚æ¥ä¸‹æ¥ m è¡Œæ¯è¡Œ 3 ä¸ªæ•´æ•° xã€yã€zï¼Œæ¯ä¸¤ä¸ªæ•´æ•°ä¹‹é—´ç”¨ä¸€ä¸ªç©ºæ ¼éš”å¼€ï¼Œè¡¨ç¤ºä»x å·åŸå¸‚åˆ° y å·åŸå¸‚æœ‰ä¸€æ¡é™é‡ä¸º z çš„é“è·¯ã€‚æ³¨æ„ï¼šx ä¸ç­‰äº yï¼Œä¸¤åº§åŸå¸‚ä¹‹é—´å¯èƒ½æœ‰å¤šæ¡é“è·¯ã€‚æ¥ä¸‹æ¥ä¸€è¡Œæœ‰ä¸€ä¸ªæ•´æ•° qï¼Œè¡¨ç¤ºæœ‰ q è¾†è´§è½¦éœ€è¦è¿è´§ã€‚æ¥ä¸‹æ¥ q è¡Œï¼Œæ¯è¡Œä¸¤ä¸ªæ•´æ•° xã€yï¼Œä¹‹é—´ç”¨ä¸€ä¸ªç©ºæ ¼éš”å¼€ï¼Œè¡¨ç¤ºä¸€è¾†è´§è½¦éœ€è¦ä» x åŸå¸‚è¿è¾“è´§ç‰©åˆ° y åŸå¸‚ï¼Œæ³¨æ„ï¼šx ä¸ç­‰äº y</p><h2 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h2><p>è¾“å‡ºå…±æœ‰ q è¡Œï¼Œæ¯è¡Œä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºå¯¹äºæ¯ä¸€è¾†è´§è½¦ï¼Œå®ƒçš„æœ€å¤§è½½é‡æ˜¯å¤šå°‘ã€‚å¦‚æœè´§è½¦ä¸èƒ½åˆ°è¾¾ç›®çš„åœ°ï¼Œè¾“å‡º-1</p><h2 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">4 3</span><br><span class="line">1 2 4</span><br><span class="line">2 3 3</span><br><span class="line">3 1 1</span><br><span class="line">3</span><br><span class="line">1 3</span><br><span class="line">1 4</span><br><span class="line">1 3</span><br></pre></td></tr></table></figure><h2 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">3</span><br><span class="line">-1</span><br><span class="line">3</span><br></pre></td></tr></table></figure><h2 id="Hint"><a href="#Hint" class="headerlink" title="Hint"></a>Hint</h2><p>å¯¹äº 30%çš„æ•°æ®ï¼Œ0 &lt; n &lt; 1,000ï¼Œ0 &lt; m &lt; 10,000ï¼Œ0 &lt; q &lt; 1,000ï¼›</p><p>å¯¹äº 60%çš„æ•°æ®ï¼Œ0 &lt; n &lt; 1,000ï¼Œ0 &lt; m &lt; 50,000ï¼Œ0 &lt; q &lt; 1,000ï¼›</p><p>å¯¹äº 100%çš„æ•°æ®ï¼Œ0 &lt; n &lt; 10,000ï¼Œ0 &lt; m &lt; 50,000ï¼Œ0 &lt; q &lt; 30,000ï¼Œ0 â‰¤ z â‰¤ 100000</p><blockquote><p><strong>è¾“å…¥æ ·ä¾‹å›¾ç¤ºï¼š</strong></p></blockquote><div class="mermaid-wrap"><pre class="mermaid-src" hidden>  graph LR1--4---22--3---33--1---1  </pre></div><h2 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><p>é¦–å…ˆæ³¨æ„åˆ°é¢˜ç›®ä¸­å¹¶ä¸æ˜¯ç»™å‡ºä¸€é¢—æ ‘ï¼Œæ„å‘³ç€ä¸¤ç‚¹ä¹‹é—´å¯èƒ½æœ‰å¤šæ¡è·¯å¾„ï¼Œé‚£ä¹ˆè½½é‡æœ€å¤§çš„é‚£æ¡è·¯ç»åº”è¯¥ä¿ç•™ï¼Œå…¶ä½™è·¯å¾„å¯ä»¥å»æ‰ï¼Œ<strong>ç”±æ­¤æˆ‘ä»¬å¯ä»¥å¯¹åŸå›¾æ±‚ä¸€ä¸ªæœ€å¤§ç”Ÿæˆæ ‘ï¼ˆæ£®æ—ï¼‰</strong></p><p>å¯¹äºæ ·ä¾‹ï¼Œæ±‚å‡ºæœ€å¤§ç”Ÿæˆæ ‘ï¼ˆæ£®æ—ï¼‰åï¼š</p><div class="mermaid-wrap"><pre class="mermaid-src" hidden>  graph LR1--4---22--3---33--1---1  </pre></div><p>ç„¶ååœ¨è¿™ä¸ªæ ‘ä¸Šæ±‚ $LCA$ å³å¯ï¼Œè¿™é‡Œè¦å¢åŠ ä¸€ä¸ªæ•°ç»„ $g[i][j]$ è¡¨ç¤º $i$ ç‚¹ä¸ä»–å‘ä¸Šè·³ $2^j$ æ­¥çš„ç¥–å…ˆä¹‹é—´çš„æ ‘é“¾ä¸Šçš„æƒå€¼æœ€å°çš„æ ‘è¾¹ï¼Œæ˜¾ç„¶ $g[i][j]=min(g[i][j-1]ï¼Œg[f[i][j-1]][j-1])$ï¼Œ$f[i][j]$ å³ $i$ ç‚¹å‘ä¸Šè·³ $2^j$ æ­¥è¾¾åˆ°çš„ç¥–å…ˆç»“ç‚¹</p><p><strong>æ±‚è§£ $LCA$ æ—¶ï¼Œè¦å°†è·³è·ƒè·¯å¾„ä¸Šçš„è¾¹æƒæœ€å°å€¼è·Ÿæœ€åçš„ $g[x][0]$ å’Œ $g[y][0]$ å†è¿›è¡Œæ¯”è¾ƒ</strong></p><h2 id="Codes"><a href="#Codes" class="headerlink" title="Codes"></a>Codes</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxn 100001</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxm 500001</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxlg 32</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> INF 2147483647</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">int</span> to[maxm*<span class="number">2</span>],nxt[maxm*<span class="number">2</span>],w[maxm*<span class="number">2</span>],newp;</span><br><span class="line"><span class="type">int</span> head[maxn],n,m,q,f[maxn],dep[maxn];</span><br><span class="line"><span class="type">int</span> fa[maxn][maxlg],ga[maxn][maxlg],lgN;</span><br><span class="line"><span class="type">bool</span> vis[maxn];</span><br><span class="line"><span class="comment">// fa[i][j] iå‘ä¸Š 2^j æ­¥çš„ç¥–å…ˆ </span></span><br><span class="line"><span class="comment">// ga[i][j] iä¸ f[i][j] ä¸­é—´çš„æœ€çŸ­è¾¹  </span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">node</span>&#123;</span><br><span class="line">    <span class="type">int</span> S,E,W;</span><br><span class="line">    <span class="type">bool</span> <span class="keyword">operator</span> &lt;(<span class="type">const</span> node &amp;obj)<span class="type">const</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> W&gt;obj.W;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;g[maxm];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">Sfind</span><span class="params">(<span class="type">int</span> x)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(f[x]==x) <span class="keyword">return</span> x;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">return</span> f[x]=<span class="built_in">Sfind</span>(f[x]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">Eadd</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> y,<span class="type">int</span> we)</span></span>&#123;</span><br><span class="line">    nxt[++newp]=head[x]; to[newp]=y;</span><br><span class="line">    w[newp]=we; head[x]=newp;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">max_kruskal</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">// æ„å»ºæœ€å¤§ç”Ÿæˆæ ‘  </span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++) f[i]=i;</span><br><span class="line">    <span class="built_in">sort</span>(g+<span class="number">1</span>,g+m+<span class="number">1</span>); <span class="type">int</span> cho=<span class="number">0</span>,fx,fy;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(cho==n<span class="number">-1</span>) <span class="keyword">break</span>;</span><br><span class="line">        fx=<span class="built_in">Sfind</span>(g[i].S);fy=<span class="built_in">Sfind</span>(g[i].E);</span><br><span class="line">        <span class="keyword">if</span>(fx!=fy)&#123;</span><br><span class="line">            f[fx]=fy; <span class="comment">// UNION </span></span><br><span class="line">            cho++; <span class="built_in">Eadd</span>(g[i].S,g[i].E,g[i].W);</span><br><span class="line">            <span class="built_in">Eadd</span>(g[i].E,g[i].S,g[i].W);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> t&gt;<span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">fcin</span><span class="params">(t &amp;x)</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> sign=<span class="number">1</span>; x=<span class="number">0</span>; <span class="type">char</span> op=<span class="built_in">getchar</span>();</span><br><span class="line">    <span class="keyword">while</span>(op&lt;<span class="string">&#x27;0&#x27;</span>||op&gt;<span class="string">&#x27;9&#x27;</span>)&#123;<span class="keyword">if</span>(op==<span class="string">&#x27;-&#x27;</span>) sign=<span class="number">-1</span>;op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line">    <span class="keyword">while</span>(op&gt;=<span class="string">&#x27;0&#x27;</span>&amp;&amp;op&lt;=<span class="string">&#x27;9&#x27;</span>)&#123;x=x*<span class="number">10</span>+(op<span class="number">-48</span>);op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line">    x*=sign;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">bfs</span><span class="params">(<span class="type">int</span> s)</span></span>&#123;</span><br><span class="line">    queue&lt;<span class="type">int</span>&gt; q; <span class="type">int</span> qhead;</span><br><span class="line">    dep[s]=<span class="number">1</span>; q.<span class="built_in">push</span>(s);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;maxlg;i++) ga[s][i]=INF;</span><br><span class="line">    <span class="keyword">while</span>(!q.<span class="built_in">empty</span>())&#123;</span><br><span class="line">        qhead=q.<span class="built_in">front</span>();q.<span class="built_in">pop</span>(); vis[qhead]=<span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=head[qhead];i;i=nxt[i])&#123;</span><br><span class="line">            <span class="keyword">if</span>(dep[to[i]]) <span class="keyword">continue</span>;</span><br><span class="line">            dep[to[i]]=dep[qhead]+<span class="number">1</span>;</span><br><span class="line">            fa[to[i]][<span class="number">0</span>]=qhead;ga[to[i]][<span class="number">0</span>]=w[i];</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=lgN;j++)&#123;</span><br><span class="line">                fa[to[i]][j]=fa[fa[to[i]][j<span class="number">-1</span>]][j<span class="number">-1</span>];</span><br><span class="line">                ga[to[i]][j]=<span class="built_in">min</span>(ga[to[i]][j<span class="number">-1</span>],ga[fa[to[i]][j<span class="number">-1</span>]][j<span class="number">-1</span>]);</span><br><span class="line">            &#125;</span><br><span class="line">            q.<span class="built_in">push</span>(to[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125; </span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">LCA</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> y)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(dep[x]&lt;dep[y]) <span class="built_in">swap</span>(x,y); <span class="type">int</span> minans=INF;</span><br><span class="line">    <span class="type">int</span> jh=(<span class="type">int</span>)(<span class="built_in">log</span>(dep[x])/<span class="built_in">log</span>(<span class="number">2</span>));</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=jh;i&gt;=<span class="number">0</span>;i--)</span><br><span class="line">        <span class="keyword">if</span>(dep[fa[x][i]]&gt;=dep[y])&#123;</span><br><span class="line">            minans=<span class="built_in">min</span>(minans,ga[x][i]);</span><br><span class="line">            x=fa[x][i];</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">if</span>(x==y) <span class="keyword">return</span> minans; jh=(<span class="type">int</span>)(<span class="built_in">log</span>(dep[x])/<span class="built_in">log</span>(<span class="number">2</span>));</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=jh;i&gt;=<span class="number">0</span>;i--)</span><br><span class="line">        <span class="keyword">if</span>(fa[x][i]!=fa[y][i])&#123;</span><br><span class="line">            minans=<span class="built_in">min</span>(<span class="built_in">min</span>(ga[x][i],ga[y][i]),minans);</span><br><span class="line">            x=fa[x][i]; y=fa[y][i];</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">min</span>(minans,<span class="built_in">min</span>(ga[x][<span class="number">0</span>],ga[y][<span class="number">0</span>]));</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line">    <span class="built_in">freopen</span>(<span class="string">&quot;t2.in&quot;</span>,<span class="string">&quot;r&quot;</span>,stdin);</span><br><span class="line">    <span class="built_in">freopen</span>(<span class="string">&quot;t2.out&quot;</span>,<span class="string">&quot;w&quot;</span>,stdout);</span><br><span class="line">    <span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line">    <span class="built_in">fcin</span>(n);<span class="built_in">fcin</span>(m); lgN=(<span class="type">int</span>)(<span class="built_in">log</span>(n)/<span class="built_in">log</span>(<span class="number">2</span>));</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++)&#123;</span><br><span class="line">        <span class="built_in">fcin</span>(g[i].S);<span class="built_in">fcin</span>(g[i].E);</span><br><span class="line">        <span class="built_in">fcin</span>(g[i].W);</span><br><span class="line">    &#125; <span class="built_in">max_kruskal</span>();</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        <span class="keyword">if</span>(!vis[i]) <span class="built_in">bfs</span>(i); </span><br><span class="line">    <span class="built_in">fcin</span>(q); <span class="type">int</span> Qx,Qy;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=q;i++)&#123;</span><br><span class="line">        <span class="built_in">fcin</span>(Qx);<span class="built_in">fcin</span>(Qy);</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">Sfind</span>(Qx)!=<span class="built_in">Sfind</span>(Qy))&#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;-1\n&quot;</span>); <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,<span class="built_in">LCA</span>(Qx,Qy));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1 id="T3-HHçš„é¡¹é“¾"><a href="#T3-HHçš„é¡¹é“¾" class="headerlink" title="T3.HHçš„é¡¹é“¾"></a>T3.HHçš„é¡¹é“¾</h1><h2 id="Description-1"><a href="#Description-1" class="headerlink" title="Description"></a>Description</h2><p>HH æœ‰ä¸€ä¸²ç”±å„ç§æ¼‚äº®çš„è´å£³ç»„æˆçš„é¡¹é“¾ã€‚HH ç›¸ä¿¡ä¸åŒçš„è´å£³ä¼šå¸¦æ¥å¥½è¿ï¼Œæ‰€ä»¥æ¯æ¬¡æ•£æ­¥å®Œåï¼Œä»–éƒ½ä¼šéšæ„å–å‡ºä¸€æ®µè´å£³ï¼Œæ€è€ƒå®ƒä»¬æ‰€è¡¨è¾¾çš„å«ä¹‰ã€‚HH ä¸æ–­åœ°æ”¶é›†æ–°çš„è´å£³ï¼Œå› æ­¤ä»–çš„é¡¹é“¾å˜å¾—è¶Šæ¥è¶Šé•¿ã€‚æœ‰ä¸€å¤©ï¼Œä»–çªç„¶æå‡ºäº†ä¸€ä¸ªé—®é¢˜ï¼šæŸä¸€æ®µè´å£³ä¸­ï¼ŒåŒ…å«äº†å¤šå°‘ç§ä¸åŒçš„è´å£³ï¼Ÿè¿™ä¸ªé—®é¢˜å¾ˆéš¾å›ç­”ã€‚ã€‚ã€‚å› ä¸ºé¡¹é“¾å®åœ¨æ˜¯å¤ªé•¿äº†ã€‚äºæ˜¯ï¼Œä»–åªå¥½æ±‚åŠ©ç¿æ™ºçš„ä½ ï¼Œæ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p><h2 id="Input-1"><a href="#Input-1" class="headerlink" title="Input"></a>Input</h2><p>ç¬¬ä¸€è¡Œï¼šä¸€ä¸ªæ•´æ•° Nï¼Œè¡¨ç¤ºé¡¹é“¾çš„é•¿åº¦ã€‚ç¬¬äºŒè¡Œï¼šN ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºä¾æ¬¡è¡¨ç¤ºé¡¹é“¾ä¸­è´å£³çš„ç¼–å·ï¼ˆç¼–å·ä¸º 0 åˆ° 1000000 ä¹‹é—´çš„æ•´æ•°ï¼‰ã€‚ç¬¬ä¸‰è¡Œï¼šä¸€ä¸ªæ•´æ•° Mï¼Œè¡¨ç¤º HH è¯¢é—®çš„ä¸ªæ•°ã€‚æ¥ä¸‹æ¥ M è¡Œï¼šæ¯è¡Œä¸¤ä¸ªæ•´æ•°ï¼ŒL å’Œ Rï¼ˆ1 â‰¤ L â‰¤ R â‰¤ Nï¼‰ï¼Œè¡¨ç¤ºè¯¢é—®çš„åŒºé—´ã€‚N â‰¤ 50000ï¼ŒM â‰¤ 200000ã€‚</p><h2 id="Output-1"><a href="#Output-1" class="headerlink" title="Output"></a>Output</h2><p>M è¡Œï¼Œæ¯è¡Œä¸€ä¸ªæ•´æ•°ï¼Œä¾æ¬¡è¡¨ç¤ºè¯¢é—®å¯¹åº”çš„ç­”æ¡ˆã€‚</p><h2 id="Sample-Input-1"><a href="#Sample-Input-1" class="headerlink" title="Sample Input"></a>Sample Input</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">6</span><br><span class="line">1 2 3 4 3 5</span><br><span class="line">3</span><br><span class="line">1 2</span><br><span class="line">3 5</span><br><span class="line">2 6</span><br></pre></td></tr></table></figure><h2 id="Sample-Output-1"><a href="#Sample-Output-1" class="headerlink" title="Sample Output"></a>Sample Output</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">2</span><br><span class="line">2</span><br><span class="line">4</span><br></pre></td></tr></table></figure><h2 id="Hint-1"><a href="#Hint-1" class="headerlink" title="Hint"></a>Hint</h2><p>None</p><h2 id="åˆ†æ-1"><a href="#åˆ†æ-1" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><p>é‡‡ç”¨ç¦»çº¿ç®—æ³•ï¼Œå…ˆå°†æ‰€æœ‰è¯¢é—®æŒ‰ç…§å·¦ç«¯ç‚¹å‡åºæ’åºï¼Œç„¶åè®°å½•æ¯ä¸ªé¢œè‰²ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½® $first[i]$ å’Œå½“å‰ä½ç½®åçš„ä¸‹ä¸€æ¬¡å‡ºç°çš„ä½ç½® $next[i]$ï¼Œå¯ä»¥åœ¨ $O(n)$ å†…å¤„ç†å‡ºæ¥</p><p><strong>å¯¹äºæ¯ä¸ªåŒºé—´ï¼Œæ¯ç§é¢œè‰²ä»…å½“å®ƒç¬¬ä¸€æ¬¡å‡ºç°æ—¶è®¡æ•°ï¼Œç„¶åå½“è¯¢é—®çš„å·¦ç«¯ç‚¹æ‰«è¿‡äº†è¿™ä¸ªé¢œè‰²æ—¶ï¼Œå®ƒå°±ä¸ä¼šå†è¢«ç»Ÿè®¡äº†ï¼ŒæŠŠä¸‹ä¸€æ¬¡ä»–å‡ºç°çš„ä½ç½®åŠ å…¥ç»Ÿè®¡ï¼ŒæŠŠå®ƒç§»é™¤å³å¯</strong></p><p>ç”±äºæ¶‰åŠäº†å•ç‚¹ä¿®æ”¹å’ŒåŒºé—´æ±‚å’Œï¼Œæ‰€ä»¥ç”¨æ ‘çŠ¶æ•°ç»„ä¼˜åŒ–æ—¶é—´å¤æ‚åº¦ã€‚</p><h2 id="Codes-1"><a href="#Codes-1" class="headerlink" title="Codes"></a>Codes</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ­£è§£ï¼š æ ‘çŠ¶æ•°ç»„  </span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxQ 500001</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxV 1000001</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxn 500001</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">node</span>&#123;</span><br><span class="line"><span class="type">int</span> L,R; <span class="type">int</span> id;</span><br><span class="line"><span class="type">bool</span> <span class="keyword">operator</span> &lt;(<span class="type">const</span> node &amp;obj)<span class="type">const</span>&#123;</span><br><span class="line"><span class="keyword">return</span> R&lt;obj.R;</span><br><span class="line">&#125;</span><br><span class="line">&#125;ask[maxQ]; <span class="type">int</span> T[maxQ],ans[maxQ],a[maxQ];</span><br><span class="line"><span class="type">int</span> vis[maxV],n,m;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">updata</span><span class="params">(<span class="type">int</span> Pos,<span class="type">int</span> Val)</span></span>&#123; <span class="keyword">for</span>(<span class="type">int</span> i=Pos;i&lt;=n;i+=i&amp;(-i))T[i]+=Val; &#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">sum</span><span class="params">(<span class="type">int</span> Pos)</span></span>&#123; <span class="type">int</span> Res=<span class="number">0</span>; <span class="keyword">for</span>(<span class="type">int</span> i=Pos;i;i-=i&amp;(-i))Res+=T[i]; <span class="keyword">return</span> Res; &#125;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> t&gt;<span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">fcin</span><span class="params">(t &amp;x)</span></span>&#123;</span><br><span class="line"><span class="type">int</span> sign=<span class="number">1</span>; x=<span class="number">0</span>; <span class="type">char</span> op=<span class="built_in">getchar</span>();</span><br><span class="line"><span class="keyword">while</span>(op&lt;<span class="string">&#x27;0&#x27;</span>||op&gt;<span class="string">&#x27;9&#x27;</span>)&#123;<span class="keyword">if</span>(op==<span class="string">&#x27;-&#x27;</span>) sign=<span class="number">-1</span>;op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line"><span class="keyword">while</span>(op&gt;=<span class="string">&#x27;0&#x27;</span>&amp;&amp;op&lt;=<span class="string">&#x27;9&#x27;</span>)&#123;x=x*<span class="number">10</span>+(op<span class="number">-48</span>);op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line">x*=sign;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;t3.in&quot;</span>,<span class="string">&quot;r&quot;</span>,stdin);</span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;t3.out&quot;</span>,<span class="string">&quot;w&quot;</span>,stdout);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"><span class="built_in">fcin</span>(n);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++) <span class="built_in">fcin</span>(a[i]);</span><br><span class="line"><span class="built_in">fcin</span>(m);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++)&#123;</span><br><span class="line"><span class="built_in">fcin</span>(ask[i].L);<span class="built_in">fcin</span>(ask[i].R);</span><br><span class="line">ask[i].id=i;</span><br><span class="line">&#125; <span class="type">int</span> now=<span class="number">1</span>;</span><br><span class="line"><span class="built_in">sort</span>(ask+<span class="number">1</span>,ask+m+<span class="number">1</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line"><span class="keyword">if</span>(vis[a[i]]) <span class="built_in">updata</span>(vis[a[i]],<span class="number">-1</span>);</span><br><span class="line">vis[a[i]]=i;<span class="built_in">updata</span>(i,<span class="number">1</span>); </span><br><span class="line"><span class="keyword">while</span>(ask[now].R==i)&#123;</span><br><span class="line">ans[ask[now].id]=<span class="built_in">sum</span>(ask[now].R)-<span class="built_in">sum</span>(ask[now].L<span class="number">-1</span>);</span><br><span class="line">now++;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++) <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,ans[i]);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>; </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure><hr><h1 id="T4-Rmq-Problem-mex"><a href="#T4-Rmq-Problem-mex" class="headerlink" title="T4.Rmq Problem / mex"></a>T4.Rmq Problem / mex</h1><h2 id="Description-2"><a href="#Description-2" class="headerlink" title="Description"></a>Description</h2><p><img src="https://www.lydsy.com/JudgeOnline/upload/201401/1.jpg" alt="Description"></p><h2 id="Input-2"><a href="#Input-2" class="headerlink" title="Input"></a>Input</h2><p><img src="https://www.lydsy.com/JudgeOnline/upload/201401/2.jpg" alt="input"></p><h2 id="Ouput"><a href="#Ouput" class="headerlink" title="Ouput"></a>Ouput</h2><p><img src="https://www.lydsy.com/JudgeOnline/upload/201401/3.jpg" alt="output"></p><h2 id="Sample-Input-2"><a href="#Sample-Input-2" class="headerlink" title="Sample Input"></a>Sample Input</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">7 5</span><br><span class="line">0 2 1 0 1 3 2</span><br><span class="line">1 3</span><br><span class="line">2 3</span><br><span class="line">1 4</span><br><span class="line">3 6</span><br><span class="line">2 7</span><br></pre></td></tr></table></figure><h2 id="Sample-Output-2"><a href="#Sample-Output-2" class="headerlink" title="Sample Output"></a>Sample Output</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">3</span><br><span class="line">0</span><br><span class="line">3</span><br><span class="line">2</span><br><span class="line">4</span><br></pre></td></tr></table></figure><h2 id="Hint-2"><a href="#Hint-2" class="headerlink" title="Hint"></a>Hint</h2><p><img src="https://www.lydsy.com/JudgeOnline/upload/201401/6.jpg" alt="hint"></p><h2 id="åˆ†æ-2"><a href="#åˆ†æ-2" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><p>é‡‡ç”¨ç¦»çº¿ç®—æ³•ï¼Œå…ˆå°†æ‰€æœ‰è¯¢é—®æŒ‰ç…§å·¦ç«¯ç‚¹å‡åºæ’åºï¼Œç”¨ç±»ä¼¼å‰ç¼€å’Œçš„æ€æƒ³å¯ä»¥æ±‚å‡º $f[i]$ è¡¨ç¤º $[1,i]$ çš„ $mex$ å€¼ï¼Œå’ŒT3ä¸€æ ·ï¼Œç”¨ $next[i]$ è¡¨ç¤º $a[i]$ ä¸‹ä¸€æ¬¡å‡ºç°çš„ä½ç½®</p><p>ç°åœ¨å‡è®¾æœ‰ä¸¤ä¸ªè¯¢é—® $[Lï¼ŒR]$ å’Œ $[L+1ï¼ŒR]$ï¼Œ<strong>å¦‚æœ $R\geq next[L]$ é‚£ä¹ˆä¸¤ä¸ªè¯¢é—®çš„ $mex$ å€¼ç›¸åŒ</strong></p><p><strong>å¦‚æœ $R<next[L]$ ï¼Œé‚£ä¹ˆåœ¨ $[L+1ï¼ŒR]$ åŒºé—´å†…å°†æ‰€æœ‰çš„ $f[i]>a[L]ï¼Œi\in[L+1ï¼ŒR]$ æ”¹ä¸º $a[L]$ ï¼Œç„¶åå•ç‚¹æŸ¥è¯¢ $f[L]$ å³å¯</strong></p><p>æ¶‰åŠåˆ°åŒºé—´ä¿®æ”¹å’Œå•ç‚¹æŸ¥è¯¢ï¼Œç”¨çº¿æ®µæ ‘å®ç°</p><h2 id="Codes-2"><a href="#Codes-2" class="headerlink" title="Codes"></a>Codes</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxn 200001</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> INF 2147483647</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">node</span>&#123;</span><br><span class="line">    <span class="type">int</span> Le,Ri,id;</span><br><span class="line">    <span class="type">bool</span> <span class="keyword">operator</span> &lt;(<span class="type">const</span> node &amp;obj)<span class="type">const</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Le&lt;obj.Le;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;ask[maxn]; <span class="type">int</span> ans[maxn],n,q;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Tnode</span>&#123;</span><br><span class="line">    <span class="type">int</span> LC,RC,V;</span><br><span class="line">    <span class="meta">#<span class="keyword">define</span> lc(x) T[x].LC</span></span><br><span class="line">    <span class="meta">#<span class="keyword">define</span> rc(x) T[x].RC</span></span><br><span class="line">    <span class="meta">#<span class="keyword">define</span> val(x) T[x].V</span></span><br><span class="line">    <span class="meta">#<span class="keyword">define</span> mid ((L+R)&gt;&gt;1)</span></span><br><span class="line">&#125;T[maxn*<span class="number">4</span>]; <span class="comment">// çº¿æ®µæ ‘æ±‚æœ€å°  </span></span><br><span class="line"><span class="type">int</span> a[maxn],newp;</span><br><span class="line"><span class="type">int</span> f[maxn],nxt[maxn],las[maxn];</span><br><span class="line"><span class="comment">// f[n] [1,n]çš„ mex å€¼ nxt[n] å‡ºç° a[n] çš„ä¸‹ä¸€ä¸ªä½ç½®  </span></span><br><span class="line"><span class="type">bool</span> vis[maxn];</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> t&gt;<span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">fcin</span><span class="params">(t &amp;x)</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> sign=<span class="number">1</span>; x=<span class="number">0</span>; <span class="type">char</span> op=<span class="built_in">getchar</span>();</span><br><span class="line">    <span class="keyword">while</span>(op&lt;<span class="string">&#x27;0&#x27;</span>||op&gt;<span class="string">&#x27;9&#x27;</span>)&#123;<span class="keyword">if</span>(op==<span class="string">&#x27;-&#x27;</span>) sign=<span class="number">-1</span>;op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line">    <span class="keyword">while</span>(op&gt;=<span class="string">&#x27;0&#x27;</span>&amp;&amp;op&lt;=<span class="string">&#x27;9&#x27;</span>)&#123;x=x*<span class="number">10</span>+(op<span class="number">-48</span>);op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line">    x*=sign;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">pushdown</span><span class="params">(<span class="type">int</span> k)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">val</span>(k)==INF) <span class="keyword">return</span>;</span><br><span class="line">    <span class="built_in">val</span>(<span class="built_in">lc</span>(k))=<span class="built_in">min</span>(<span class="built_in">val</span>(<span class="built_in">lc</span>(k)),<span class="built_in">val</span>(k));</span><br><span class="line">    <span class="built_in">val</span>(<span class="built_in">rc</span>(k))=<span class="built_in">min</span>(<span class="built_in">val</span>(<span class="built_in">rc</span>(k)),<span class="built_in">val</span>(k));</span><br><span class="line">    <span class="built_in">val</span>(k)=INF;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">build</span><span class="params">(<span class="type">int</span> L,<span class="type">int</span> R)</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> now=++newp;</span><br><span class="line">    <span class="keyword">if</span>(L==R)&#123;</span><br><span class="line">        <span class="built_in">val</span>(now)=f[L];</span><br><span class="line">        <span class="keyword">return</span> now;</span><br><span class="line">    &#125; <span class="built_in">val</span>(now)=INF;</span><br><span class="line">    <span class="built_in">lc</span>(now)=<span class="built_in">build</span>(L,mid);</span><br><span class="line">    <span class="built_in">rc</span>(now)=<span class="built_in">build</span>(mid+<span class="number">1</span>,R);</span><br><span class="line">    <span class="keyword">return</span> now;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">updata</span><span class="params">(<span class="type">int</span> k,<span class="type">int</span> L,<span class="type">int</span> R,<span class="type">int</span> x,<span class="type">int</span> y,<span class="type">int</span> _v)</span></span>&#123;</span><br><span class="line">    <span class="comment">// çº¿æ®µæ ‘ åŒºé—´ä¿®æ”¹  </span></span><br><span class="line">    <span class="keyword">if</span>(L==x &amp;&amp; R==y)&#123;</span><br><span class="line">        <span class="built_in">val</span>(k)=<span class="built_in">min</span>(<span class="built_in">val</span>(k),_v);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125; <span class="built_in">pushdown</span>(k);</span><br><span class="line">    <span class="keyword">if</span>(mid&gt;=y) <span class="built_in">updata</span>(<span class="built_in">lc</span>(k),L,mid,x,y,_v);</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(mid+<span class="number">1</span>&lt;=x) <span class="built_in">updata</span>(<span class="built_in">rc</span>(k),mid+<span class="number">1</span>,R,x,y,_v);</span><br><span class="line">    <span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="built_in">updata</span>(<span class="built_in">lc</span>(k),L,mid,x,mid,_v);</span><br><span class="line">        <span class="built_in">updata</span>(<span class="built_in">rc</span>(k),mid+<span class="number">1</span>,R,mid+<span class="number">1</span>,y,_v);</span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">res</span><span class="params">(<span class="type">int</span> k,<span class="type">int</span> L,<span class="type">int</span> R,<span class="type">int</span> x)</span></span>&#123;</span><br><span class="line">    <span class="comment">// çº¿æ®µæ ‘å•ç‚¹æŸ¥è¯¢  </span></span><br><span class="line">    <span class="keyword">if</span>(L==R) <span class="keyword">return</span> <span class="built_in">val</span>(k);</span><br><span class="line">    <span class="built_in">pushdown</span>(k);</span><br><span class="line">    <span class="keyword">if</span>(x&lt;=mid) <span class="keyword">return</span> <span class="built_in">res</span>(<span class="built_in">lc</span>(k),L,mid,x);</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">return</span> <span class="built_in">res</span>(<span class="built_in">rc</span>(k),mid+<span class="number">1</span>,R,x);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line">    <span class="built_in">freopen</span>(<span class="string">&quot;t4.in&quot;</span>,<span class="string">&quot;r&quot;</span>,stdin);</span><br><span class="line">    <span class="built_in">freopen</span>(<span class="string">&quot;t4.out&quot;</span>,<span class="string">&quot;w&quot;</span>,stdout);</span><br><span class="line">    <span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line">    <span class="built_in">fcin</span>(n);<span class="built_in">fcin</span>(q); <span class="type">int</span> nowmex=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++) <span class="built_in">fcin</span>(a[i]);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123; <span class="comment">// æ±‚è§£ f[i]  </span></span><br><span class="line">        vis[a[i]]=<span class="literal">true</span>; <span class="keyword">while</span>(vis[nowmex]) nowmex++;</span><br><span class="line">        f[i]=nowmex;</span><br><span class="line">    &#125; <span class="built_in">build</span>(<span class="number">1</span>,n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=n;i&gt;=<span class="number">1</span>;i--)&#123; <span class="comment">// nxt[i] éœ€è¦å€’è¿‡æ¥æ±‚è§£  </span></span><br><span class="line">        nxt[i]=las[a[i]]; las[a[i]]=i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=q;i++) <span class="built_in">fcin</span>(ask[i].Le),<span class="built_in">fcin</span>(ask[i].Ri),ask[i].id=i;</span><br><span class="line">    <span class="built_in">sort</span>(ask+<span class="number">1</span>,ask+q+<span class="number">1</span>); <span class="type">int</span> now=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=q;i++)&#123;</span><br><span class="line">        <span class="keyword">while</span>(now&lt;ask[i].Le)&#123;</span><br><span class="line">            <span class="keyword">if</span>(!nxt[now]) nxt[now]=n+<span class="number">1</span>;</span><br><span class="line">            <span class="built_in">updata</span>(<span class="number">1</span>,<span class="number">1</span>,n,now,nxt[now]<span class="number">-1</span>,a[now]);</span><br><span class="line">            now++;</span><br><span class="line">        &#125;</span><br><span class="line">        ans[ask[i].id]=<span class="built_in">res</span>(<span class="number">1</span>,<span class="number">1</span>,n,ask[i].Ri);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=q;i++) <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,ans[i]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å›¾è®º </tag>
            
            <tag> æœ€å°ç”Ÿæˆæ ‘ </tag>
            
            <tag> çº¿æ®µæ ‘ </tag>
            
            <tag> æ•°æ®ç»“æ„ </tag>
            
            <tag> æ ‘çŠ¶æ•°ç»„ </tag>
            
            <tag> LCA </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ•°æ®ç»“æ„ | çº¿æ®µæ ‘ | å¯æŒä¹…åŒ–çº¿  æ®µæ ‘:å­¦ä¹ ç¬”è®°</title>
      <link href="/2019/05/03/2019-05-03-%E5%8F%AF%E6%8C%81%E4%B9%85%E5%8C%96%E7%BA%BF%E6%AE%B5%E6%A0%91/"/>
      <url>/2019/05/03/2019-05-03-%E5%8F%AF%E6%8C%81%E4%B9%85%E5%8C%96%E7%BA%BF%E6%AE%B5%E6%A0%91/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><h2 id="å¯æŒä¹…åŒ–çº¿æ®µæ ‘"><a href="#å¯æŒä¹…åŒ–çº¿æ®µæ ‘" class="headerlink" title="å¯æŒä¹…åŒ–çº¿æ®µæ ‘"></a>å¯æŒä¹…åŒ–çº¿æ®µæ ‘</h2><p>å¯æŒä¹…åŒ–çº¿æ®µæ ‘æ˜¯ä¸€ç§<strong>ç‰¹æ®Šçš„çº¿æ®µæ ‘</strong>ï¼Œä¸åŒäºæ™®é€šçš„çº¿æ®µæ ‘ï¼Œä»–èƒ½å¤Ÿç»´æŠ¤ä¸€äº›ç»è¿‡ä¿®æ”¹ä¹‹åçš„ä¸åŒç‰ˆæœ¬çš„æ ‘ï¼Œå¹¶ä¸”èƒ½åœ¨å½“å‰æ ‘çš„æŸä¸ªå†å²ç‰ˆæœ¬ä¸Šè¿›è¡Œæ“ä½œï¼ŒåŒ…æ‹¬ï¼š</p><ul><li><p>å•ç‚¹æŸ¥è¯¢</p></li><li><p>å•ç‚¹æ›´æ–°</p></li><li><p>åŒºé—´æŸ¥è¯¢</p></li><li><p>åŒºé—´æ›´æ–°</p></li><li><p>åˆ›å»ºæ–°çš„ç‰ˆæœ¬</p></li></ul><p>ç»´æŠ¤ä¸åŒç‰ˆæœ¬çš„æ ‘ï¼Œå¦‚é‡‡ç”¨æœ´ç´ çš„çº¿æ®µæ ‘å»ºæ–°æ ‘ï¼Œæ—¶é—´å’Œç©ºé—´éƒ½ä¼šè¶…å‡ºé™åˆ¶ï¼Œä½†æ˜¯åˆ©ç”¨å½“å‰ç‰ˆæœ¬çš„çº¿æ®µæ ‘å’Œä»¥å‰ç‰ˆæœ¬çš„çº¿æ®µæ ‘çš„å…±åŒç»“ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥èŠ‚çœå¾ˆå¤šé‡å¤çš„ç»“ç‚¹ï¼Œå¯¹æ—§ç‰ˆæœ¬çš„æ ‘è¿›è¡Œæ”¹é€ ï¼Œå°±èƒ½éå†åˆ°æ–°çš„æ ‘</p><h3 id="Code-å¯æŒä¹…åŒ–çº¿æ®µæ ‘"><a href="#Code-å¯æŒä¹…åŒ–çº¿æ®µæ ‘" class="headerlink" title="Code(å¯æŒä¹…åŒ–çº¿æ®µæ ‘)"></a>Code(å¯æŒä¹…åŒ–çº¿æ®µæ ‘)</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">node</span>&#123;</span><br><span class="line"><span class="type">int</span> lc,rc,sumv;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> lc(x) T[x].lc <span class="comment">// x çš„å·¦å„¿å­</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> rc(x) T[x].rc <span class="comment">// x çš„å³å„¿å­</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> s(x) T[x].sumv <span class="comment">// x çš„å€¼</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pushup(x) (T[x].sumv=T[T[x].lc].sumv+T[T[x].rc].sumv) <span class="comment">// ä¸Šä¼  </span></span></span><br><span class="line">&#125;T[MAXN];</span><br></pre></td></tr></table></figure><h2 id="å»ºæ ‘"><a href="#å»ºæ ‘" class="headerlink" title="å»ºæ ‘"></a>å»ºæ ‘</h2><p>å¯æŒä¹…åŒ–çº¿æ®µæ ‘å»ºæ ‘å’Œçº¿æ®µæ ‘å»ºæ ‘æ²¡æœ‰å¤šå¤§åŒºåˆ«ï¼Œä½†æ˜¯ä¸ºäº†åé¢æ“ä½œçš„æ–¹ä¾¿ï¼Œæˆ‘ä»¬ä¸ç”¨ä»¥å‰çš„çº¿æ®µæ ‘è¡¨ç¤ºæ–¹å¼ï¼ˆå³ $K&lt;&lt;1$ è¡¨ç¤º $K$ çš„å·¦å„¿å­ï¼Œ$K&lt;&lt;1+1$ è¡¨ç¤º $K$ çš„å³å„¿å­ï¼‰ï¼Œè€Œç”¨ $LC(K)=K+1$ å’Œ $RC(K)$ æ¥è¡¨ç¤º</p><h3 id="Code-é›†åˆçº¿æ®µæ ‘"><a href="#Code-é›†åˆçº¿æ®µæ ‘" class="headerlink" title="Code(é›†åˆçº¿æ®µæ ‘)"></a>Code(é›†åˆçº¿æ®µæ ‘)</h3><p>æ„å»ºä¸€é¢—ç©ºçš„é›†åˆçº¿æ®µæ ‘ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">build</span><span class="params">(<span class="type">int</span> L,<span class="type">int</span> R)</span></span>&#123;</span><br><span class="line"><span class="type">int</span> now=++newp;</span><br><span class="line"><span class="keyword">if</span>(L==R) <span class="keyword">return</span> now;</span><br><span class="line"><span class="built_in">lc</span>(now)=<span class="built_in">build</span>(L,mid);</span><br><span class="line"><span class="built_in">rc</span>(now)=<span class="built_in">build</span>(mid+<span class="number">1</span>,R);</span><br><span class="line"><span class="keyword">return</span> now; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Code-æ™®é€šçº¿æ®µæ ‘"><a href="#Code-æ™®é€šçº¿æ®µæ ‘" class="headerlink" title="Code(æ™®é€šçº¿æ®µæ ‘)"></a>Code(æ™®é€šçº¿æ®µæ ‘)</h3><p>åˆ©ç”¨ç»™å‡ºçš„ $w$  æ•°ç»„ï¼Œæ„å»ºä¸€é¢—æ™®é€šçº¿æ®µæ ‘</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> now=++newp;</span><br><span class="line"><span class="keyword">if</span>(L==R)&#123;</span><br><span class="line"><span class="built_in">s</span>(now)=w[L];</span><br><span class="line"><span class="keyword">return</span> now;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">lc</span>(now)=<span class="built_in">build</span>(L,mid);</span><br><span class="line"><span class="built_in">rc</span>(now)=<span class="built_in">build</span>(mid+<span class="number">1</span>,R);</span><br><span class="line"><span class="keyword">return</span> now; </span><br></pre></td></tr></table></figure><h2 id="æ›´æ–°ï¼ˆåˆ›å»ºæ–°çš„ç‰ˆæœ¬é“¾ï¼‰"><a href="#æ›´æ–°ï¼ˆåˆ›å»ºæ–°çš„ç‰ˆæœ¬é“¾ï¼‰" class="headerlink" title="æ›´æ–°ï¼ˆåˆ›å»ºæ–°çš„ç‰ˆæœ¬é“¾ï¼‰"></a>æ›´æ–°ï¼ˆåˆ›å»ºæ–°çš„ç‰ˆæœ¬é“¾ï¼‰</h2><p>åœ¨æ›´æ–°çš„åŒæ—¶ï¼Œåˆ›å»ºé¢å¤–çš„ç»“ç‚¹</p><p>å¯¹äºéå¶å­ç»“ç‚¹çš„é¢å¤–ç»“ç‚¹ï¼Œä¸å½“å‰èŠ‚ç‚¹å…±äº«ä¸€ä¸ªå„¿å­ï¼ˆå·¦å„¿å­æˆ–è€…å³å„¿å­ï¼‰ï¼Œä»–çš„å¦ä¸€ä¸ªå„¿å­æ˜¯é€’å½’åˆ›å»ºçš„æ–°ç»“ç‚¹ï¼Œä»–çš„æƒå€¼æ˜¯ç»è¿‡æ›´æ–°ä¹‹åçš„å½“å‰ç»“ç‚¹çš„æƒå€¼ï¼ˆå½“å‰ç»“ç‚¹æƒå€¼ä¿æŒä¸åŠ¨ï¼‰</p><p>å¯¹äºå¶å­èŠ‚ç‚¹çš„é¢å¤–ç»“ç‚¹ï¼Œæ²¡æœ‰å·¦å³å„¿å­ï¼Œä»–çš„æƒå€¼æ˜¯å½“å‰ç»“ç‚¹çš„æ›´æ–°åæƒå€¼</p><p><strong>è¿™é‡Œç”¨é›†åˆçº¿æ®µæ ‘æ¥ä¸¾ä¸€ä¸ªä¾‹å­ï¼š</strong></p><blockquote><p><strong>å¯¹åºåˆ—ï¼š$2\;5\;1\;8\;3\;5\;4\;7$ åˆ›å»ºä¸€é¢—é›†åˆçº¿æ®µæ ‘ï¼š</strong></p><p><strong>æ ‘ä¸­æ¯ä¸ªç»“ç‚¹å­˜äº†æ­¤ç»“ç‚¹è¡¨ç¤ºçš„ $[Lï¼ŒR]$ åŒºé—´å†…å‡ºç°çš„æ•°å­—çš„ä¸ªæ•°</strong></p></blockquote><div class="mermaid-wrap"><pre class="mermaid-src" hidden>  graph TDd1(&quot;[1,8]:8&quot;);d2(&quot;[1,4]:4&quot;);d3(&quot;[1,2]:2&quot;);d4(&quot;[1,1]:1&quot;);d5(&quot;[2,2]:1&quot;);d6(&quot;[3,4]:2&quot;);d7(&quot;[3,3]:1&quot;);d8(&quot;[4,4]:1&quot;);d9(&quot;[5,8]:4&quot;);d10(&quot;[5,6]:2&quot;);d11(&quot;[5,5]:2&quot;);d12(&quot;[6,6]&quot;)d13(&quot;[7,8]:2&quot;);d14(&quot;[7,7]:1&quot;);d15(&quot;[8,8]:1&quot;)d1---d2;d2---d3;d3---d4;d3---d5;d2---d6;d6---d7;d6---d8;d1---d9;d9---d10;d10---d11;d10---d12;d9---d13;d13---d14;d13---d15   </pre></div><blockquote><p><strong>æ“ä½œï¼šå°†æ•°åˆ—ä¸­çš„ 8 åˆ å»ï¼Œä»¥æ­¤åˆ›å»ºæ–°çš„ç‰ˆæœ¬ 1 ï¼ŒåŸæ¥çš„ä½œä¸ºç‰ˆæœ¬ 0 ä¸åŠ¨</strong></p><p><strong>é‚£ä¹ˆæ“ä½œä¹‹åçš„å›¾ï¼š</strong></p></blockquote><div class="mermaid-wrap"><pre class="mermaid-src" hidden>  graph TDd1(&quot;[1,8]:8&quot;);d2(&quot;[1,4]:4&quot;);d3(&quot;[1,2]:2&quot;);d4(&quot;[1,1]:1&quot;);d5(&quot;[2,2]:1&quot;);d6(&quot;[3,4]:2&quot;);d7(&quot;[3,3]:1&quot;);d8(&quot;[4,4]:1&quot;);d9(&quot;[5,8]:4&quot;);d10(&quot;[5,6]:2&quot;);d11(&quot;[5,5]:2&quot;);d12(&quot;[6,6]&quot;)d13(&quot;[7,8]:2&quot;);d14(&quot;[7,7]:1&quot;);d15(&quot;[8,8]:1&quot;)d1---d2;d2---d3;d3---d4;d3---d5;d2---d6;d6---d7;d6---d8;d1---d9;d9---d10;d10---d11;d10---d12;d9---d13;d13---d14;d13---d15   </pre></div><p>æ­¤æ—¶æˆ‘ä»¬æ²¿ç€ç»†çº¿è®¿é—®å°±æ˜¯ç‰ˆæœ¬0ï¼Œæ²¿ç€ç²—çº¿è®¿é—®å°±æ˜¯ç‰ˆæœ¬1</p><p>æ•´ä¸ªæ“ä½œåªæ˜¯æ–°å»ºäº†å³è¾¹ä¸€ä¸²çš„å››ä¸ªç‚¹ï¼ˆæ³¨æ„åˆ°æ ¹ç»“ç‚¹ä¹Ÿè¢«æ–°å»ºäº†ï¼‰ï¼Œ æ¯”æš´åŠ›å»ºæ–°æ ‘è¦èŠ‚çœäº†å·¨å¤šçš„ç©ºé—´ï¼Œç”¨ $Ver[i]$  è¡¨ç¤ºç‰ˆæœ¬ $i$ çš„æ ¹ç»“ç‚¹æ˜¯å“ªä¸ªå°±è¡Œäº†</p><h3 id="Code-æ›´æ–°ç»“ç‚¹-å¤åˆ¶ç‰ˆæœ¬ï¼šé›†åˆçº¿æ®µæ ‘"><a href="#Code-æ›´æ–°ç»“ç‚¹-å¤åˆ¶ç‰ˆæœ¬ï¼šé›†åˆçº¿æ®µæ ‘" class="headerlink" title="Code(æ›´æ–°ç»“ç‚¹+å¤åˆ¶ç‰ˆæœ¬ï¼šé›†åˆçº¿æ®µæ ‘)"></a>Code(æ›´æ–°ç»“ç‚¹+å¤åˆ¶ç‰ˆæœ¬ï¼šé›†åˆçº¿æ®µæ ‘)</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">updata</span><span class="params">(<span class="type">int</span> k,<span class="type">int</span> L,<span class="type">int</span> R,<span class="type">int</span> x,<span class="type">int</span> _v)</span></span>&#123;</span><br><span class="line"><span class="comment">// æ›´æ–°ç»“ç‚¹ + å¤åˆ¶ç‰ˆæœ¬  </span></span><br><span class="line"><span class="built_in">s</span>(k)+=_v;</span><br><span class="line"><span class="keyword">if</span>(L==R) <span class="keyword">return</span>; <span class="comment">// å¶å­èŠ‚ç‚¹ä¸ç”¨å¤åˆ¶ ??  </span></span><br><span class="line"><span class="keyword">if</span>(x&lt;=mid)&#123;</span><br><span class="line">T[++newp]=T[<span class="built_in">lc</span>(k)]; <span class="comment">// è¿™é‡Œç”¨ç»“æ„ä½“ç›´æ¥å¤åˆ¶ä¸€ä»½ k çš„å·¦å­èŠ‚ç‚¹  </span></span><br><span class="line"><span class="built_in">lc</span>(k)=newp;</span><br><span class="line"><span class="built_in">updata</span>(<span class="built_in">lc</span>(k),L,mid,x,_v);</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line">T[++newp]=T[<span class="built_in">rc</span>(k)];</span><br><span class="line"><span class="built_in">rc</span>(k)=newp;</span><br><span class="line"><span class="built_in">updata</span>(<span class="built_in">rc</span>(k),mid+<span class="number">1</span>,R,x,_v);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Code-æ›´æ–°ç»“ç‚¹-å¤åˆ¶ç‰ˆæœ¬ï¼šæ™®é€šçº¿æ®µæ ‘"><a href="#Code-æ›´æ–°ç»“ç‚¹-å¤åˆ¶ç‰ˆæœ¬ï¼šæ™®é€šçº¿æ®µæ ‘" class="headerlink" title="Code(æ›´æ–°ç»“ç‚¹+å¤åˆ¶ç‰ˆæœ¬ï¼šæ™®é€šçº¿æ®µæ ‘)"></a>Code(æ›´æ–°ç»“ç‚¹+å¤åˆ¶ç‰ˆæœ¬ï¼šæ™®é€šçº¿æ®µæ ‘)</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">updata</span><span class="params">(<span class="type">int</span> k,<span class="type">int</span> L,<span class="type">int</span> R,<span class="type">int</span> x,<span class="type">int</span> d)</span></span>&#123;</span><br><span class="line"><span class="comment">// ä¿®æ”¹ x ä½ç½® ä¸º d </span></span><br><span class="line"><span class="comment">// ä¸ºäº†æ–°å»ºçš„ç‰ˆæœ¬èŠ‚ç‚¹ï¼Œéœ€è¦è¿”å› int  </span></span><br><span class="line"><span class="type">int</span> now=++newp;</span><br><span class="line"><span class="keyword">if</span>(L==R)&#123;</span><br><span class="line"><span class="built_in">s</span>(now)=d;</span><br><span class="line"><span class="keyword">return</span> now;</span><br><span class="line">&#125;</span><br><span class="line">T[now]=T[k]; <span class="built_in">s</span>(now)=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">if</span>(x&lt;=mid) <span class="built_in">lc</span>(now)=<span class="built_in">updata</span>(<span class="built_in">lc</span>(k),L,mid,x,d);</span><br><span class="line"><span class="keyword">else</span> <span class="built_in">rc</span>(now)=<span class="built_in">updata</span>(<span class="built_in">rc</span>(k),mid+<span class="number">1</span>,R,x,d);</span><br><span class="line"><span class="keyword">return</span> now;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä»¥æŸä¸ªç‰ˆæœ¬ä¸ºåŸºç¡€è¿›è¡Œä¿®æ”¹"><a href="#ä»¥æŸä¸ªç‰ˆæœ¬ä¸ºåŸºç¡€è¿›è¡Œä¿®æ”¹" class="headerlink" title="ä»¥æŸä¸ªç‰ˆæœ¬ä¸ºåŸºç¡€è¿›è¡Œä¿®æ”¹"></a>ä»¥æŸä¸ªç‰ˆæœ¬ä¸ºåŸºç¡€è¿›è¡Œä¿®æ”¹</h2><p>è¿™ç§æ“ä½œé€šå¸¸éƒ½ä¼´æœ‰è¦ä½ æ–°å»ºä¸€ä¸ªç‰ˆæœ¬ï¼Œè¿™ä¸ªç‰ˆæœ¬å­˜çš„æ˜¯æŸä¸€ä¸ªå†å²ç‰ˆæœ¬ä¸ºåŸºç¡€ï¼Œä¿®æ”¹äº†ä¸Šé¢çš„æŸä¸ªå€¼ä¹‹åçš„ç»“æœï¼ˆå†å²ç‰ˆæœ¬ä¸åŠ¨ï¼‰</p><p>æ³¨æ„åˆ°ä¸Šé¢æˆ‘ä»¬çš„ $updata$ æ˜¯ $int$ ç±»å‹ï¼Œé‚£ä¹ˆä»–è¿”å›çš„å…¶å®å°±æ˜¯æ“ä½œå®Œæˆåçš„æ–°çš„æ ¹ç»“ç‚¹çš„å€¼ï¼Œå› æ­¤ï¼Œåœ¨ä¸»å‡½æ•°é‡Œç›´æ¥æŠŠæ–°çš„ç‰ˆæœ¬æ ¹ç»“ç‚¹èµ‹å€¼å³å¯</p><h3 id="Code-ç‰ˆæœ¬ä¿®æ”¹-åˆ›å»º"><a href="#Code-ç‰ˆæœ¬ä¿®æ”¹-åˆ›å»º" class="headerlink" title="Code(ç‰ˆæœ¬ä¿®æ”¹+åˆ›å»º)"></a>Code(ç‰ˆæœ¬ä¿®æ”¹+åˆ›å»º)</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>,&amp;version,&amp;k,&amp;d)</span><br><span class="line">    <span class="comment">// è¡¨ç¤ºæŠŠ version ç‰ˆæœ¬çš„ k ä½ç½®æ”¹æˆ dï¼Œå¹¶åˆ›å»ºæ–°çš„ç‰ˆæœ¬</span></span><br><span class="line">    Ver[++Ver[<span class="number">0</span>]]=<span class="built_in">updata</span>(Ver[version],<span class="number">1</span>,n,k,d);    </span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="è®¿é—®å†å²ç‰ˆæœ¬çš„æŸä¸€ä¸ªç»“ç‚¹å€¼"><a href="#è®¿é—®å†å²ç‰ˆæœ¬çš„æŸä¸€ä¸ªç»“ç‚¹å€¼" class="headerlink" title="è®¿é—®å†å²ç‰ˆæœ¬çš„æŸä¸€ä¸ªç»“ç‚¹å€¼"></a>è®¿é—®å†å²ç‰ˆæœ¬çš„æŸä¸€ä¸ªç»“ç‚¹å€¼</h2><p>ç”±äºä¹‹å‰æ›´æ–°çš„æ—¶å€™æˆ‘ä»¬å·²ç»æŠŠç‰ˆæœ¬ä¿¡æ¯å­˜ä¸‹æ¥äº†ï¼ˆåœ¨ $Ver$ æ•°ç»„é‡Œé¢ï¼‰</p><p>äºæ˜¯ç°åœ¨ç›´æ¥ä»å¯¹åº”çš„ç‰ˆæœ¬æ ¹ç»“ç‚¹å¼€å§‹éå†å³å¯</p><h3 id="Code-è®¿é—®å†å²ç‰ˆæœ¬"><a href="#Code-è®¿é—®å†å²ç‰ˆæœ¬" class="headerlink" title="Code(è®¿é—®å†å²ç‰ˆæœ¬)"></a>Code(è®¿é—®å†å²ç‰ˆæœ¬)</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">query</span><span class="params">(<span class="type">int</span> k,<span class="type">int</span> L,<span class="type">int</span> R,<span class="type">int</span> x)</span></span>&#123;</span><br><span class="line"><span class="comment">// æŸ¥è¯¢ ä½ç½® x ä¸Šçš„å€¼ </span></span><br><span class="line"><span class="keyword">if</span>(L==R) <span class="keyword">return</span> <span class="built_in">s</span>(k); <span class="comment">// s(k) çš„æ„ä¹‰è§å¯æŒä¹…åŒ–çº¿æ®µæ ‘å®šä¹‰ </span></span><br><span class="line"><span class="keyword">if</span>(x&lt;=mid) <span class="keyword">return</span> <span class="built_in">query</span>(<span class="built_in">lc</span>(k),L,mid,x);</span><br><span class="line"><span class="keyword">return</span> <span class="built_in">query</span>(<span class="built_in">rc</span>(k),mid+<span class="number">1</span>,R,x); </span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;Version,&amp;k); <span class="comment">// è¡¨ç¤ºæŸ¥è¯¢ Version ç‰ˆæœ¬çš„ç¬¬ k ä½ç½® </span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,<span class="built_in">query</span>(Ver[Version],<span class="number">1</span>,n,k)) <span class="comment">// ä» Ver[Version] çš„æ ¹ç»“ç‚¹è¿›æ ‘</span></span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ã€åº”ç”¨ã€‘æ±‚åŒºé—´ç¬¬Kå°"><a href="#ã€åº”ç”¨ã€‘æ±‚åŒºé—´ç¬¬Kå°" class="headerlink" title="ã€åº”ç”¨ã€‘æ±‚åŒºé—´ç¬¬Kå°"></a>ã€åº”ç”¨ã€‘æ±‚åŒºé—´ç¬¬Kå°</h2><p>æˆ‘ä»¬åœ¨ç”¨<strong>é›†åˆçº¿æ®µæ ‘</strong>æ±‚è§£åŒºé—´ç¬¬Kå¤§çš„é—®é¢˜æ—¶ï¼Œæ³¨æ„åˆ°é›†åˆçº¿æ®µæ ‘æ€»æœ‰å·¦å­æ ‘è¡¨ç¤ºçš„æ•°å­—æ€»æ¯”å³å­æ ‘è¡¨ç¤ºçš„æ•°å­—å°ï¼Œæ‰€ä»¥å°†åŒºé—´å†…çš„æ•°å­—ç»Ÿè®¡å‡ºæ¥ä¹‹åï¼Œæˆ‘ä»¬å¯¹äºæŸä¸ªç»“ç‚¹çš„å·¦å³å­æ ‘åˆ¤æ–­ï¼Œè‹¥å·¦å­æ ‘åŒ…å«çš„æ•°å­—ä¸ªæ•°å¤§äºç­‰äºKï¼Œåˆ™ç¬¬Kå°çš„æ ‘ä¸€å®šåœ¨å·¦å­æ ‘ï¼Œå¦åˆ™å°±å»å³å­æ ‘æ‰¾ç¬¬ $K-sumv(lchi)$ å°çš„æ•°ï¼Œå¯ä»¥é€’å½’å®ç°</p><p>å¯¹äºåŒºé—´çš„ç¬¬Kå°ï¼ŒåŸºæœ¬æ€è·¯å’Œä¸Šè¿°ä¸€è‡´ï¼Œåªä¸è¿‡ç”¨åˆ°ç±»ä¼¼åŒºé—´å‰ç¼€å’Œç›¸å‡çš„çŸ¥è¯†ï¼Œå³ï¼šä¸€ä¸ªæ•°åœ¨ $[L_1ï¼ŒR_1]$ ä¸­å‡ºç°çš„æ¬¡æ•°ï¼Œç­‰äºä»–åœ¨ $[L_1ï¼ŒR_2]$ ä¸­å‡ºç°çš„æ¬¡æ•°åŠ ä¸Š $[L_1ï¼ŒR_3]$ ä¸­å‡ºç°çš„æ¬¡æ•°ï¼ˆ$R_1=R_2+R_3$ï¼‰ï¼Œè‹¥åºåˆ—æœ‰ $n$ ä¸ªå…ƒç´ ï¼Œå°±å»º $n$ ä¸ªç‰ˆæœ¬çš„çº¿æ®µæ ‘ï¼Œåˆ†åˆ«ä¿å­˜çš„æ˜¯åºåˆ—åªæœ‰ $1ï¼Œ2ï¼Œ3â€¦â€¦n$ ä¸ªå…ƒç´ æ—¶å€™çš„é›†åˆä¿¡æ¯ï¼Œéœ€è¦åŒºé—´ç›¸å‡çš„æ—¶å€™ï¼Œæˆ‘ä»¬åˆ†åˆ«ä»ä¸¤ä¸ªç‰ˆæœ¬çš„æ ¹ç»“ç‚¹è¿›æ ‘ï¼Œéå†æ—¶åŠ¨æ€ç›¸å‡å°±èƒ½å¾—åˆ°ç›®æ ‡åŒºé—´å†…æ•°å­—å‡ºç°çš„ä¸ªæ•°</p><h3 id="Code-ç¬¬Kå°"><a href="#Code-ç¬¬Kå°" class="headerlink" title="Code(ç¬¬Kå°)"></a>Code(ç¬¬Kå°)</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">kth</span><span class="params">(<span class="type">int</span> L,<span class="type">int</span> R,<span class="type">int</span> r1,<span class="type">int</span> r2,<span class="type">int</span> k)</span></span>&#123;</span><br><span class="line"><span class="comment">// æŸ¥è¯¢åŒºé—´å†…ç¬¬ k å¤§çš„æ•°  </span></span><br><span class="line"><span class="keyword">if</span>(L==R) <span class="keyword">return</span> w[vis[L]];</span><br><span class="line"><span class="type">int</span> chi=<span class="built_in">s</span>(<span class="built_in">lc</span>(r2))-<span class="built_in">s</span>(<span class="built_in">lc</span>(r1));</span><br><span class="line"><span class="keyword">if</span>(chi&gt;=k) <span class="keyword">return</span> <span class="built_in">kth</span>(L,mid,<span class="built_in">lc</span>(r1),<span class="built_in">lc</span>(r2),k);</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">return</span> <span class="built_in">kth</span>(mid+<span class="number">1</span>,R,<span class="built_in">rc</span>(r1),<span class="built_in">rc</span>(r2),k-chi);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>,&amp;l,&amp;r,&amp;k); <span class="comment">// æŸ¥è¯¢ [l,r] å†…ç¬¬kå°çš„æ•°</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,<span class="built_in">kth</span>(<span class="number">1</span>,n,Ver[l<span class="number">-1</span>],Ver[r],k));</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ã€åº”ç”¨ã€‘ç»Ÿè®¡åŒºé—´å†…çš„æ•°å­—ä¸ªæ•°"><a href="#ã€åº”ç”¨ã€‘ç»Ÿè®¡åŒºé—´å†…çš„æ•°å­—ä¸ªæ•°" class="headerlink" title="ã€åº”ç”¨ã€‘ç»Ÿè®¡åŒºé—´å†…çš„æ•°å­—ä¸ªæ•°"></a>ã€åº”ç”¨ã€‘ç»Ÿè®¡åŒºé—´å†…çš„æ•°å­—ä¸ªæ•°</h2><p>è®¾æ•°åˆ— ${a_n}$ï¼Œéœ€è¦ç»Ÿè®¡å‡º $a_x$ åˆ° $a_y$ é—´çš„æ‰€æœ‰æ•°å­—åœ¨åŒºé—´ $[Lï¼ŒR]$ å†…çš„ä¸ªæ•°</p><p>å’Œä¸Šé¢çš„åŒºé—´å‡æ³•æ€è·¯æœ¬è´¨ä¸€æ ·ï¼Œæ¨¡æ¿æ˜¯çº¿æ®µæ ‘åŒºé—´æŸ¥è¯¢</p><h3 id="Code-ç»Ÿè®¡æ•°å­—ä¸ªæ•°"><a href="#Code-ç»Ÿè®¡æ•°å­—ä¸ªæ•°" class="headerlink" title="Code(ç»Ÿè®¡æ•°å­—ä¸ªæ•°)"></a>Code(ç»Ÿè®¡æ•°å­—ä¸ªæ•°)</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">cens</span><span class="params">(<span class="type">int</span> L,<span class="type">int</span> R,<span class="type">int</span> x,<span class="type">int</span> y,<span class="type">int</span> Rx,<span class="type">int</span> Ry)</span></span>&#123;</span><br><span class="line"><span class="comment">// ç»Ÿè®¡ [x,y] ä¸­çš„æ•°åœ¨ [Rx,Ry] ä¸­çš„ä¸ªæ•° </span></span><br><span class="line"><span class="comment">// s(x) = tree[x].sumv </span></span><br><span class="line"><span class="comment">// lc(x) = tree[x].lchild</span></span><br><span class="line"><span class="comment">// rc(x) = tree[x].rchild </span></span><br><span class="line"><span class="keyword">if</span>(L&gt;Ry || R&lt;Rx) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"><span class="keyword">if</span>(Rx&lt;=L &amp;&amp; Ry&gt;=R) <span class="keyword">return</span> <span class="built_in">s</span>(y)-<span class="built_in">s</span>(x);</span><br><span class="line"><span class="keyword">return</span> <span class="built_in">cens</span>(L,mid,<span class="built_in">lc</span>(x),<span class="built_in">lc</span>(y),Rx,Ry)+<span class="built_in">cens</span>(mid+<span class="number">1</span>,R,<span class="built_in">rc</span>(x),<span class="built_in">rc</span>(y),Rx,Ry); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> çº¿æ®µæ ‘ </tag>
            
            <tag> å¯æŒä¹…åŒ–çº¿æ®µæ ‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å›¾è®º | æœ€çŸ­è·¯å¾„ | SPFA | 20190414 è€ƒè¯•(å›¾  è®ºç»¼åˆ1)</title>
      <link href="/2019/04/15/2019-04-15-%E5%9B%BE%E8%AE%BA%E8%80%83%E8%AF%951/"/>
      <url>/2019/04/15/2019-04-15-%E5%9B%BE%E8%AE%BA%E8%80%83%E8%AF%951/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><h1 id="Problem-1-å‡é™æ¢¯-Up-Down"><a href="#Problem-1-å‡é™æ¢¯-Up-Down" class="headerlink" title="Problem 1. å‡é™æ¢¯(Up-Down)"></a>Problem 1. å‡é™æ¢¯(Up-Down)</h1><h2 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h2><p>å¼€å¯äº†å‡é™æ¢¯çš„åŠ¨åŠ›ä¹‹åï¼Œæ¢é™©é˜Ÿå‘˜ä»¬è¿›å…¥äº†å‡é™æ¢¯è¿è¡Œçš„é‚£æ¡ç«–ç›´çš„éš§é“ï¼Œæ˜ å…¥çœ¼å¸˜çš„æ˜¯ä¸€æ¡ç›´é€šå¡”é¡¶çš„è½¨é“ã€ä¸€è¾†åœåœ¨è½¨é“åº•éƒ¨çš„ç”µæ¢¯ã€å’Œç”µæ¢¯å†…ä¸€æ†æ§åˆ¶ç”µæ¢¯å‡é™çš„å·¨å¤§æ‰‹æŸ„ã€‚ </p><p>å¡”ä¸€å…±æœ‰ N å±‚ï¼Œå‡é™æ¢¯åœ¨æ¯å±‚éƒ½æœ‰ä¸€ä¸ªåœé ç‚¹ã€‚æ‰‹æŸ„æœ‰ M ä¸ªæ§åˆ¶æ§½ï¼Œç¬¬ i ä¸ªæ§åˆ¶æ§½æ—è¾¹æ ‡ç€ä¸€ä¸ªæ•° Ciï¼Œæ»¡è¶³ C1<C2<C3<â€¦â€¦<CMã€‚å¦‚æœ Ci>0ï¼Œè¡¨ç¤ºæ‰‹æŸ„æ‰³åŠ¨åˆ°è¯¥æ§½æ—¶ï¼Œç”µæ¢¯å°†ä¸Šå‡ Ci å±‚ï¼›å¦‚æœ Ci&lt;0ï¼Œè¡¨ç¤ºæ‰‹æŸ„æ‰³åŠ¨åˆ°è¯¥æ§½æ—¶ï¼Œç”µæ¢¯å°†ä¸‹é™ -Ci å±‚ï¼›å¹¶ä¸”ä¸€å®šå­˜åœ¨ä¸€ä¸ª Ci=0ï¼Œæ‰‹æŸ„æœ€åˆå°±ä½äºæ­¤æ§½ä¸­ã€‚æ³¨æ„å‡é™æ¢¯åªèƒ½åœ¨ 1~N å±‚é—´ç§»åŠ¨ï¼Œå› æ­¤æ‰³åŠ¨åˆ°ä½¿å‡é™æ¢¯ç§»åŠ¨åˆ° 1 å±‚ä»¥ä¸‹ã€N å±‚ä»¥ä¸Šçš„æ§åˆ¶æ§½æ˜¯ä¸å…è®¸çš„ã€‚ </p><p>ç”µæ¢¯æ¯ç§»åŠ¨ä¸€å±‚ï¼Œéœ€è¦èŠ±è´¹ 2 ç§’é’Ÿæ—¶é—´ï¼Œè€Œæ‰‹æŸ„ä»ä¸€ä¸ªæ§åˆ¶æ§½æ‰³åˆ°ç›¸é‚»çš„æ§½ï¼Œéœ€è¦èŠ±è´¹ 1 ç§’é’Ÿæ—¶é—´ã€‚æ¢é™©é˜Ÿå‘˜ç°åœ¨åœ¨ 1 å±‚ï¼Œå¹¶ä¸”æƒ³å°½å¿«åˆ°è¾¾ N å±‚ï¼Œä»–ä»¬æƒ³çŸ¥é“ä» 1 å±‚åˆ° N å±‚è‡³å°‘éœ€è¦å¤šé•¿æ—¶é—´ï¼Ÿ</p><h2 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h2><p>ç¬¬ä¸€è¡Œä¸¤ä¸ªæ­£æ•´æ•° Nã€Mã€‚ </p><p>ç¬¬äºŒè¡Œ M ä¸ªæ•´æ•° C1ã€C2â€â€CM</p><h2 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h2><p>è¾“å‡ºä¸€ä¸ªæ•´æ•°è¡¨ç¤ºç­”æ¡ˆï¼Œå³è‡³å°‘éœ€è¦å¤šé•¿æ—¶é—´ã€‚è‹¥ä¸å¯èƒ½åˆ°è¾¾è¾“å‡º-1ã€‚</p><h2 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">6 3</span><br><span class="line">-1 0 2</span><br></pre></td></tr></table></figure><h2 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">19</span><br></pre></td></tr></table></figure><h2 id="Hint"><a href="#Hint" class="headerlink" title="Hint"></a>Hint</h2><p>æ‰‹æŸ„ä»ç¬¬äºŒä¸ªæ§½æ‰³åˆ°ç¬¬ä¸‰ä¸ªæ§½ï¼ˆ0 æ‰³åˆ° 2ï¼‰ï¼Œç”¨æ—¶ 1 ç§’ï¼Œç”µæ¢¯ä¸Šå‡åˆ° 3 å±‚ï¼Œç”¨æ—¶ 4 ç§’ã€‚ </p><p>æ‰‹æŸ„åœ¨ç¬¬ä¸‰ä¸ªæ§½ä¸åŠ¨ï¼Œç”µæ¢¯å†ä¸Šå‡åˆ° 5 å±‚ï¼Œç”¨æ—¶ 4 ç§’ã€‚ </p><p>æ‰‹æŸ„æ‰³åŠ¨åˆ°ç¬¬ä¸€ä¸ªæ§½ï¼ˆ2 æ‰³åˆ°-1ï¼‰ï¼Œç”¨æ—¶ 2 ç§’ï¼Œç”µæ¢¯ä¸‹é™åˆ° 4 å±‚ï¼Œç”¨æ—¶ 2 ç§’ã€‚æ‰‹æŸ„æ‰³åŠ¨åˆ°ç¬¬ä¸‰ä¸ªæ§½ï¼ˆ-1 æ‰³å€’ 2ï¼‰ï¼Œç”¨æ—¶ 2 ç§’ï¼Œç”µæ¢¯ä¸Šå‡åˆ° 6 å±‚ï¼Œç”¨æ—¶ 4 ç§’ã€‚ </p><p>æ€»ç”¨æ—¶ä¸º(1+4)+4+(2+2)+(2+4)=19ç§’ã€‚</p><h2 id="Data-Range"><a href="#Data-Range" class="headerlink" title="Data Range"></a>Data Range</h2><p>å¯¹äº 30% çš„æ•°æ®ï¼Œæ»¡è¶³ 1â‰¤Nâ‰¤10ï¼Œ2&lt;=M&lt;=5ã€‚å¯¹äº 100% çš„æ•°æ®ï¼Œæ»¡è¶³ 1â‰¤Nâ‰¤1000ï¼Œ2&lt;=M&lt;=20ï¼Œ-N&lt;C1&lt;C2&lt;â€¦â€¦&lt;CM&lt;Nã€‚</p><h2 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><p>æ€è·¯ï¼šæŠŠæ¯ N å±‚æ¥¼çœ‹ä½œ N ä¸ªç‚¹ï¼ŒæŠŠ M ä¸ªå¯¹åº”æ•°å­—çš„æ§½çœ‹ä½œç‰¹æ®Šçš„è¾¹ï¼Œéå† N å±‚æ¥¼å»ºå›¾åŠ è¾¹</p><p>å…·ä½“æ¥è¯´ï¼š<strong>å¯¹äº $\forall i \in [1\;,\;N]$ï¼Œ$\forall j \in[1\;,\;M]$ï¼Œå¦‚æœæ»¡è¶³ $i+c[j]\geq1\;\;and\;\;i+c[j]\leq N$ï¼Œè¯´æ˜é€šè¿‡æŠŠæ‰‹æŸ„æ¬åˆ° j å·ä½ç½®ï¼Œèƒ½å¤Ÿå°†ç”µæ¢¯ä» i å·æ¥¼å±‚é€åˆ° i+c[j] å·æ¥¼å±‚ï¼ˆè‡³äºæ—¶é—´ç¨åè®¡ç®—ï¼‰ï¼Œé‚£ä¹ˆè¿ä¸€æ¡æœ‰å‘è¾¹ï¼Œè®°å½•ä¸¤ä¸ªä¿¡æ¯(toï¼Œway)ï¼Œto è¡¨ç¤ºå»å¾€çš„æ¥¼å±‚ï¼Œway è¡¨ç¤ºæ‰‹æŸ„åœåœ¨çš„æ§½çš„ç¼–å·</strong></p><p>ç„¶åç”¨è¿™ä¸ªäºŒå…ƒç»„è¿›è¡Œ SPFA å³å¯æ±‚å‡ºæœ€çŸ­è·¯ï¼Œè¾“å‡º dist[n]</p><h2 id="Codes"><a href="#Codes" class="headerlink" title="Codes"></a>Codes</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxn 1001</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxm 21021</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="type">int</span>,<span class="type">int</span>&gt; pr;</span><br><span class="line">vector&lt;pr&gt; g[maxn];</span><br><span class="line"><span class="type">int</span> head[maxn],n,m,c[maxm];</span><br><span class="line"><span class="type">int</span> dist[maxn];<span class="type">int</span> x;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">buildG</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=m;j++)&#123;</span><br><span class="line"><span class="keyword">if</span>(j==x) <span class="keyword">continue</span>;</span><br><span class="line"><span class="keyword">if</span>(i+c[j]&lt;<span class="number">1</span> || i+c[j]&gt;n) <span class="keyword">continue</span>;</span><br><span class="line">g[i].<span class="built_in">push_back</span>(<span class="built_in">make_pair</span>(i+c[j],j));</span><br><span class="line"><span class="comment">// pair&lt;i+c[j],j&gt;</span></span><br><span class="line"><span class="comment">// i åˆ° i+c[j] é€šè¿‡ j å·æ§½å®ç°  </span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">int</span> <span class="title">dists</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> y,<span class="type">int</span> edg1,<span class="type">int</span> edg2)</span></span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="built_in">abs</span>(x-y)*<span class="number">2</span>+<span class="built_in">abs</span>(edg1-edg2);</span><br><span class="line">&#125; </span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">int</span> <span class="title">shortest</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">memset</span>(dist,<span class="number">127</span>,<span class="built_in">sizeof</span>(dist));dist[<span class="number">1</span>]=<span class="number">0</span>;</span><br><span class="line"><span class="comment">// pair &lt; å»å¾€å“ªä¸ªç‚¹ , å½“å‰åœ¨å“ªä¸ªæ§½ &gt;  </span></span><br><span class="line">queue&lt;pr&gt; q; q.<span class="built_in">push</span>(<span class="built_in">make_pair</span>(<span class="number">1</span>,x));pr qhead;</span><br><span class="line">vector&lt;pr&gt;::iterator iter;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> u qhead.first</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pos qhead.second</span></span><br><span class="line"><span class="keyword">while</span>(!q.<span class="built_in">empty</span>())&#123;</span><br><span class="line">qhead=q.<span class="built_in">front</span>(); q.<span class="built_in">pop</span>();</span><br><span class="line"><span class="keyword">for</span>(iter=g[u].<span class="built_in">begin</span>();iter!=g[u].<span class="built_in">end</span>();iter++)&#123;</span><br><span class="line"><span class="keyword">if</span>(dist[u]+<span class="built_in">dists</span>(u,iter-&gt;first,pos,iter-&gt;second)&lt;dist[iter-&gt;first])&#123;</span><br><span class="line">dist[iter-&gt;first]=dist[u]+<span class="built_in">dists</span>(u,iter-&gt;first,pos,iter-&gt;second);</span><br><span class="line">q.<span class="built_in">push</span>(<span class="built_in">make_pair</span>(iter-&gt;first,iter-&gt;second));</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="keyword">undef</span> u</span></span><br><span class="line"><span class="meta">#<span class="keyword">undef</span> pos</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;updown.in&quot;</span>,<span class="string">&quot;r&quot;</span>,stdin);</span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;updown.out&quot;</span>,<span class="string">&quot;w&quot;</span>,stdout);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line">cin&gt;&gt;n&gt;&gt;m;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++)&#123; </span><br><span class="line">cin&gt;&gt;c[i];</span><br><span class="line"><span class="keyword">if</span>(c[i]==<span class="number">0</span>) x=i;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">buildG</span>();<span class="built_in">shortest</span>();</span><br><span class="line">cout&lt;&lt;(dist[n]==<span class="number">2139062143</span>?<span class="number">-1</span>:dist[n]);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1 id="Problem-2-è™«æ´-Holes"><a href="#Problem-2-è™«æ´-Holes" class="headerlink" title="Problem 2. è™«æ´(Holes)"></a>Problem 2. è™«æ´(Holes)</h1><h2 id="Description-1"><a href="#Description-1" class="headerlink" title="Description"></a>Description</h2><p>Nä¸ªè™«æ´ï¼ŒMæ¡å•å‘è·ƒè¿è·¯å¾„ã€‚ä»ä¸€ä¸ªè™«æ´æ²¿è·ƒè¿è·¯å¾„åˆ°å¦ä¸€ä¸ªè™«æ´éœ€è¦æ¶ˆè€—ä¸€å®šé‡çš„ç‡ƒæ–™å’Œ1å•ä½æ—¶é—´ã€‚è™«æ´æœ‰ç™½æ´å’Œé»‘æ´ä¹‹åˆ†ã€‚è®¾ä¸€æ¡è·ƒè¿è·¯å¾„ä¸¤ç«¯çš„è™«æ´è´¨é‡å·®ä¸ºdeltaã€‚</p><ol><li><p>ä»ç™½æ´è·ƒè¿åˆ°é»‘æ´ï¼Œæ¶ˆè€—çš„ç‡ƒæ–™å€¼å‡å°‘deltaï¼Œè‹¥è¯¥æ¡è·¯å¾„æ¶ˆè€—çš„ç‡ƒæ–™å€¼å˜ä¸ºè´Ÿæ•°çš„è¯ï¼Œå–ä¸º0ã€‚</p></li><li><p>ä»é»‘æ´è·ƒè¿åˆ°ç™½æ´ï¼Œæ¶ˆè€—çš„ç‡ƒæ–™å€¼å¢åŠ deltaã€‚</p></li><li><p>è·¯å¾„ä¸¤ç«¯å‡ä¸ºé»‘æ´æˆ–ç™½æ´ï¼Œæ¶ˆè€—çš„ç‡ƒæ–™å€¼ä¸å˜åŒ–ã€‚</p></li></ol><p>ä½œä¸ºå‹è½´é¢˜ï¼Œè‡ªç„¶ä¸ä¼šæ˜¯å¦‚æ­¤ç®€å•çš„æœ€çŸ­è·¯é—®é¢˜ï¼Œæ‰€ä»¥æ¯è¿‡1å•ä½æ—¶é—´é»‘æ´å˜ä¸ºç™½æ´ï¼Œç™½æ´å˜ä¸ºé»‘æ´ã€‚åœ¨é£è¡Œè¿‡ç¨‹ä¸­ï¼Œå¯ä»¥é€‰æ‹©åœ¨ä¸€ä¸ªè™«æ´åœç•™1ä¸ªå•ä½æ—¶é—´ï¼Œå¦‚æœå½“å‰ä¸ºç™½æ´ï¼Œåˆ™ä¸æ¶ˆè€—ç‡ƒæ–™ï¼Œå¦åˆ™æ¶ˆè€—s[i]çš„ç‡ƒæ–™ã€‚ç°åœ¨è¯·ä½ æ±‚å‡ºä»è™«æ´1åˆ°Næœ€å°‘çš„ç‡ƒæ–™æ¶ˆè€—ï¼Œä¿è¯ä¸€å®šå­˜åœ¨1åˆ°Nçš„è·¯çº¿ã€‚</p><h2 id="Input-1"><a href="#Input-1" class="headerlink" title="Input"></a>Input</h2><p>ç¬¬1è¡Œï¼š2ä¸ªæ­£æ•´æ•°N,M</p><p>ç¬¬2è¡Œï¼šNä¸ªæ•´æ•°ï¼Œç¬¬iä¸ªä¸º0è¡¨ç¤ºè™«æ´iå¼€å§‹æ—¶ä¸ºç™½æ´ï¼Œ1è¡¨ç¤ºé»‘æ´ã€‚</p><p>ç¬¬3è¡Œï¼šNä¸ªæ•´æ•°ï¼Œç¬¬iä¸ªæ•°è¡¨ç¤ºè™«æ´içš„è´¨é‡w[i]ã€‚</p><p>ç¬¬4è¡Œï¼šNä¸ªæ•´æ•°ï¼Œç¬¬iä¸ªæ•°è¡¨ç¤ºåœ¨è™«æ´iåœç•™æ¶ˆè€—çš„ç‡ƒæ–™s[i]ã€‚</p><p>ç¬¬5..M+4è¡Œï¼šæ¯è¡Œ3ä¸ªæ•´æ•°ï¼Œu,v,kï¼Œè¡¨ç¤ºåœ¨æ²¡æœ‰å½±å“çš„æƒ…å†µä¸‹ï¼Œä»è™«æ´uåˆ°è™«æ´véœ€è¦æ¶ˆè€—ç‡ƒæ–™kã€‚</p><h2 id="Output-1"><a href="#Output-1" class="headerlink" title="Output"></a>Output</h2><p>ä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæœ€å°‘çš„ç‡ƒæ–™æ¶ˆè€—ã€‚</p><h2 id="Sample-Input-1"><a href="#Sample-Input-1" class="headerlink" title="Sample Input"></a>Sample Input</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">4 5</span><br><span class="line">1 0 1 0</span><br><span class="line">10 10 100 10</span><br><span class="line">5 20 15 10</span><br><span class="line">1 2 30</span><br><span class="line">2 3 40</span><br><span class="line">1 3 20</span><br><span class="line">1 4 200</span><br><span class="line">3 4 200</span><br></pre></td></tr></table></figure><h2 id="Sample-Output-1"><a href="#Sample-Output-1" class="headerlink" title="Sample Output"></a>Sample Output</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">130</span><br></pre></td></tr></table></figure><blockquote><p><strong>è¾“å…¥æ•°æ®å›¾ç¤ºï¼š</strong></p><p><strong>æ‹¬å·å†…æ ‡æ³¨äº†æ´çš„è´¨é‡å’Œ s å€¼ï¼Œæ–¹æ¡†è¡¨ç¤ºå¼€å§‹ä¸ºé»‘æ´ï¼Œåœ†æ¡†è¡¨ç¤ºä¸ºç™½æ´</strong></p></blockquote><div class="mermaid-wrap"><pre class="mermaid-src" hidden>  graph LRd1[&quot;1 (m&#x3D;10,s&#x3D;5)&quot;];d2((&quot;2 (m&#x3D;10,s&#x3D;20)&quot;));d3[&quot;3 (m&#x3D;100,s&#x3D;15)&quot;];d4((&quot;4 (m&#x3D;10,s&#x3D;10)&quot;))d1--30--&gt;d2;d2--40--&gt;d3;d1--20--&gt;d3;d1--200--&gt;d4;d3--200--&gt;d4  </pre></div><h2 id="Hint-1"><a href="#Hint-1" class="headerlink" title="Hint"></a>Hint</h2><blockquote><p><strong>æŒ‰ç…§<code>1-&gt;3-&gt;4</code>çš„è·¯çº¿ï¼Œæ€»æ¶ˆè€—ï¼š20+200-90=130</strong></p></blockquote><div class="mermaid-wrap"><pre class="mermaid-src" hidden>  graph LRd1[&quot;1 (m&#x3D;10,s&#x3D;5)&quot;];d2((&quot;2 (m&#x3D;10,s&#x3D;20)&quot;));d3[&quot;3 (m&#x3D;100,s&#x3D;15)&quot;];d4((&quot;4 (m&#x3D;10,s&#x3D;10)&quot;))d1--30--&gt;d2;d2--40--&gt;d3;d1--20--&gt;d3;d1--200--&gt;d4;d3--200--&gt;d4  </pre></div><h2 id="Data-Range-1"><a href="#Data-Range-1" class="headerlink" title="Data Range"></a>Data Range</h2><div class="table-container"><table><thead><tr><th style="text-align:center">æ•°æ®å æ¯”</th><th style="text-align:center">æ•°æ®èŒƒå›´æˆ–æ•°æ®ç‰¹å¾</th></tr></thead><tbody><tr><td style="text-align:center">30%</td><td style="text-align:center">1&lt;=N&lt;=100ï¼Œ1&lt;=M&lt;=500</td></tr><tr><td style="text-align:center">60%</td><td style="text-align:center">1&lt;=N&lt;=100ï¼Œ1&lt;=M&lt;=500</td></tr><tr><td style="text-align:center">100%</td><td style="text-align:center">1&lt;=N&lt;=5000ï¼Œ1&lt;=M&lt;=30000</td></tr><tr><td style="text-align:center"><strong>20%</strong></td><td style="text-align:center">1&lt;=N&lt;=3000çš„é“¾</td></tr><tr><td style="text-align:center"><strong>100%</strong></td><td style="text-align:center">1&lt;=u,v&lt;=Nï¼Œ1&lt;=kï¼Œw[i]ï¼Œs[i]&lt;=200</td></tr></tbody></table></div><h2 id="åˆ†æ-1"><a href="#åˆ†æ-1" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><p>ç”±äºé¢˜ç›®ä¸­çš„â€œåœç•™â€è¿™ä¸€é™åˆ¶ï¼Œå¯¼è‡´ç›´æ¥å¯¹åŸå›¾ä½¿ç”¨ SPFA æˆ–è€…åœ¨è¿‡ç¨‹ä¸­åŠ¨æ€åˆ¤æ–­å½“å‰ä¸¤ä¸ªæ´çš„é»‘ç™½çŠ¶æ€ä¼šé‡åˆ°å›°éš¾ï¼ˆå¾€è‡ªå·±è¿™ä¸ªç‚¹åŠ è¾¹ä¼šä½¿ SPFA æ­»å¾ªç¯æˆ–è€…æ±‚å‡ºé”™è¯¯ç­”æ¡ˆï¼‰</p><p><strong>é‚£ä¹ˆæˆ‘ä»¬å°±æŠŠä¸€ä¸ªæ´é»‘ç™½ä¸¤ä¸ªçŠ¶æ€åˆ†åˆ«ç”¨ä¸¤ä¸ªç‚¹è®°å½•ï¼Œè®° i ä¸º i å·ç‚¹çš„ç™½æ´çŠ¶æ€ï¼Œi+maxn ä¸º i å·ç‚¹çš„é»‘æ´çŠ¶æ€ï¼Œé‚£ä¹ˆå¯¹äºâ€œåœç•™â€è¿™ä¸ªé€‰æ‹©ï¼Œåªéœ€å°†ç™½ç‚¹å’Œé»‘ç‚¹äº’ç›¸è¿è¾¹å³å¯ï¼Œç„¶åç…§å¸¸ SPFAï¼Œå°±èƒ½å¾—å‡ºæ­£ç¡®ç­”æ¡ˆ</strong></p><h2 id="Codes-1"><a href="#Codes-1" class="headerlink" title="Codes"></a>Codes</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxn 5000</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxm 30000</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="type">int</span>,<span class="type">int</span>&gt; pr;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line">vector&lt;pr&gt; g[maxn*<span class="number">2</span>+<span class="number">1</span>]; <span class="type">int</span> n,m;</span><br><span class="line"><span class="type">int</span> dist[maxn*<span class="number">2</span>+<span class="number">1</span>],dt; <span class="type">bool</span> vis[maxn*<span class="number">2</span>+<span class="number">1</span>];</span><br><span class="line"><span class="type">int</span> s[maxn*<span class="number">2</span>+<span class="number">1</span>],stat[maxn*<span class="number">2</span>+<span class="number">1</span>],qua[maxn*<span class="number">2</span>+<span class="number">1</span>]; <span class="comment">// qua è´¨é‡  </span></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">Eadd</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> v,<span class="type">int</span> stu,<span class="type">int</span> stv,<span class="type">int</span> w)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(stu==<span class="number">1</span>) u+=maxn;</span><br><span class="line"><span class="keyword">if</span>(stv==<span class="number">1</span>) v+=maxn;</span><br><span class="line">g[u].<span class="built_in">push_back</span>(<span class="built_in">make_pair</span>(v,w));</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">Ejump</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> v,<span class="type">int</span> w)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(stat[u]==stat[v])&#123;</span><br><span class="line">g[u].<span class="built_in">push_back</span>(<span class="built_in">make_pair</span>(v+maxn,w)); </span><br><span class="line">g[u+maxn].<span class="built_in">push_back</span>(<span class="built_in">make_pair</span>(v,w));</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">g[u+maxn].<span class="built_in">push_back</span>(<span class="built_in">make_pair</span>(v+maxn,w+<span class="built_in">abs</span>(qua[u]-qua[v])));</span><br><span class="line">g[u].<span class="built_in">push_back</span>(<span class="built_in">make_pair</span>(v,<span class="built_in">max</span>(w-<span class="built_in">abs</span>(qua[u]-qua[v]),<span class="number">0</span>)));</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">buildG</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="comment">// ç”¨ i+maxn è¡¨ç¤º i ç‚¹é»‘æ´  </span></span><br><span class="line"><span class="comment">// ç”¨ i è¡¨ç¤º i ç‚¹ç™½æ´ </span></span><br><span class="line">cin&gt;&gt;n&gt;&gt;m; <span class="type">int</span> x,y,z;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++) cin&gt;&gt;stat[i];</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++) cin&gt;&gt;qua[i];</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++) cin&gt;&gt;s[i];</span><br><span class="line"><span class="comment">// åˆ°å…¶å®ƒç‚¹  </span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++)&#123;</span><br><span class="line">cin&gt;&gt;x&gt;&gt;y&gt;&gt;z;<span class="built_in">Ejump</span>(x,y,z);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// åœç•™ </span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line"><span class="built_in">Eadd</span>(i,i,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>); <span class="comment">// ç™½æ´åœç•™ 1 æ—¶é—´  </span></span><br><span class="line"><span class="built_in">Eadd</span>(i,i,<span class="number">1</span>,<span class="number">0</span>,s[i]); <span class="comment">// é»‘æ´åœç•™ 1 æ—¶é—´ </span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">shortest</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">memset</span>(dist,<span class="number">127</span>,<span class="built_in">sizeof</span>(dist));</span><br><span class="line">queue&lt;<span class="type">int</span>&gt; q; <span class="type">int</span> qhead;</span><br><span class="line"><span class="keyword">if</span>(stat[<span class="number">1</span>]==<span class="number">0</span>)&#123;</span><br><span class="line">dist[<span class="number">1</span>]=<span class="number">0</span>; vis[<span class="number">1</span>]=<span class="literal">true</span>;</span><br><span class="line">q.<span class="built_in">push</span>(<span class="number">1</span>);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">dist[<span class="number">1</span>+maxn]=<span class="number">0</span>; vis[<span class="number">1</span>+maxn]=<span class="literal">true</span>;</span><br><span class="line">q.<span class="built_in">push</span>(<span class="number">1</span>+maxn);</span><br><span class="line">&#125;vector&lt;pr&gt;::iterator iter; </span><br><span class="line"><span class="keyword">while</span>(!q.<span class="built_in">empty</span>())&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> u qhead</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> v iter-&gt;first</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> w iter-&gt;second</span></span><br><span class="line">qhead=q.<span class="built_in">front</span>(); q.<span class="built_in">pop</span>(); vis[u]=<span class="literal">false</span>;</span><br><span class="line"><span class="keyword">for</span>(iter=g[u].<span class="built_in">begin</span>();iter!=g[u].<span class="built_in">end</span>();iter++)&#123;</span><br><span class="line"><span class="keyword">if</span>(dist[v]&gt;dist[u]+w)&#123;</span><br><span class="line">dist[v]=dist[u]+w;</span><br><span class="line"><span class="keyword">if</span>(!vis[v])&#123;vis[v]=<span class="literal">true</span>;q.<span class="built_in">push</span>(v);&#125; </span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="keyword">undef</span> u</span></span><br><span class="line"><span class="meta">#<span class="keyword">undef</span> v</span></span><br><span class="line"><span class="meta">#<span class="keyword">undef</span> w</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;holes.in&quot;</span>,<span class="string">&quot;r&quot;</span>,stdin);</span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;holes.out&quot;</span>,<span class="string">&quot;w&quot;</span>,stdout);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"><span class="built_in">buildG</span>();<span class="built_in">shortest</span>();</span><br><span class="line">cout&lt;&lt;<span class="built_in">min</span>(dist[n],dist[n+maxn]);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å›¾è®º </tag>
            
            <tag> æœ€çŸ­è·¯å¾„ </tag>
            
            <tag> SPFA </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å›¾è®º | æ¬§æ‹‰å›è·¯ | å¤ªé¼“è¾¾äºº</title>
      <link href="/2019/04/13/2019-04-13-%E5%A4%AA%E9%BC%93%E8%BE%BE%E4%BA%BA/"/>
      <url>/2019/04/13/2019-04-13-%E5%A4%AA%E9%BC%93%E8%BE%BE%E4%BA%BA/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><h2 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h2><p>ä¸ƒå¤•ç¥­ä¸Šï¼ŒVaniç‰µç€clçš„æ‰‹ï¼Œåœ¨æ˜äº®çš„ç¯å…‰å’Œæ¬¢ä¹çš„æ°”æ°›ä¸­æ„‰å¿«åœ°ç©¿è¡Œã€‚è¿™æ—¶ï¼Œåœ¨å‰é¢å¿½ç„¶å‡ºç°äº†ä¸€å°å¤ªé¼“è¾¾äººæœºå°ï¼Œè€Œåœ¨æœºå°å‰åç€çš„æ˜¯åˆšåˆšè¢«ç²¾è‹±é˜Ÿä¼æˆå‘˜XLkã€Poet_shyå’Œlydrainbowcatæ‹¯æ•‘å‡ºæ¥çš„çš„applepiã€‚çœ‹åˆ°ä¸¤äººå¯¹å¤ªé¼“è¾¾äººäº§ç”Ÿäº†å…´è¶£ï¼Œapplepiæœæ–­é—ªäººï¼Œäºæ˜¯clæ‹¿èµ·é¼“æ£’å‡†å¤‡æŒ‘æˆ˜ã€‚ç„¶è€Œå³ä½¿æ˜¯åœ¨æ™®é€šéš¾åº¦ä¸‹ï¼Œclçš„è·¯äººæœ¬æ€§ä¹Ÿå……åˆ†åœ°æš´éœ²äº†å‡ºæ¥ã€‚ä¸€æ›²ç»ˆäº†ï¼Œä¸ä½†æ²¡æœ‰è¿‡å…³ï¼Œå°±è¿é¼“éƒ½ä¸çµäº†ã€‚Vaniååˆ†è¿‡æ„ä¸å»ï¼Œå†³å®šå¸®åŠ©å·¥ä½œäººå‘˜ä¿®é¼“ã€‚</p><p>é¼“çš„ä¸»è¦å…ƒä»¶æ˜¯Mä¸ªå›´æˆä¸€åœˆçš„ä¼ æ„Ÿå™¨ã€‚æ¯ä¸ªä¼ æ„Ÿå™¨éƒ½æœ‰å¼€å’Œå…³ä¸¤ç§å·¥ä½œçŠ¶æ€ï¼Œåˆ†åˆ«ç”¨1å’Œ0è¡¨ç¤ºã€‚æ˜¾ç„¶ï¼Œä»ä¸åŒçš„ä½ç½®å‡ºå‘æ²¿é¡ºæ—¶é’ˆæ–¹å‘è¿ç»­æ£€æŸ¥Kä¸ªä¼ æ„Ÿå™¨å¯ä»¥å¾—åˆ°Mä¸ªé•¿åº¦ä¸ºKçš„01ä¸²ã€‚VaniçŸ¥é“è¿™Mä¸ª01ä¸²åº”è¯¥æ˜¯äº’ä¸ç›¸åŒçš„ã€‚è€Œä¸”é¼“çš„è®¾è®¡å¾ˆç²¾å¯†ï¼ŒMä¼šå–åˆ°å¯èƒ½çš„æœ€å¤§å€¼ã€‚ç°åœ¨Vaniå·²ç»äº†è§£åˆ°äº†Kçš„å€¼ï¼Œä»–å¸Œæœ›ä½ æ±‚å‡ºMçš„å€¼ï¼Œå¹¶ç»™å‡ºå­—å…¸åºæœ€å°çš„ä¼ æ„Ÿå™¨æ’å¸ƒæ–¹æ¡ˆã€‚</p><h2 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h2><p>ä¸€ä¸ªæ•´æ•°Kã€‚</p><h2 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h2><p>ä¸€ä¸ªæ•´æ•°Må’Œä¸€ä¸ªäºŒè¿›åˆ¶ä¸²ï¼Œç”±ä¸€ä¸ªç©ºæ ¼åˆ†éš”ã€‚è¡¨ç¤ºå¯èƒ½çš„æœ€å¤§çš„Mï¼Œä»¥åŠå­—å…¸åºæœ€å°çš„æ’å¸ƒæ–¹æ¡ˆï¼Œå­—ç¬¦0è¡¨ç¤ºå…³ï¼Œ1è¡¨ç¤ºå¼€ã€‚ä½ è¾“å‡ºçš„ä¸²çš„ç¬¬ä¸€ä¸ªå­—å’Œæœ€åä¸€ä¸ªå­—æ˜¯ç›¸é‚»çš„ã€‚</p><h2 id="Hint"><a href="#Hint" class="headerlink" title="Hint"></a>Hint</h2><p>å¾—åˆ°çš„8ä¸ª01ä¸²åˆ†åˆ«æ˜¯000ã€001ã€010ã€101ã€011ã€111ã€110å’Œ100ã€‚æ³¨æ„å‰åæ˜¯ç›¸é‚»çš„ã€‚é•¿åº¦ä¸º3çš„äºŒè¿›åˆ¶ä¸²æ€»å…±åªæœ‰8ç§ï¼Œæ‰€ä»¥M = 8ä¸€å®šæ˜¯å¯èƒ½çš„æœ€å¤§å€¼ã€‚</p><p>å¯¹äºå…¨éƒ¨æµ‹è¯•ç‚¹ï¼Œ2â‰¤Kâ‰¤11ã€‚</p><h2 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><p>å¼€å§‹ä¸€çœ‹è¿™ä¸ªé¢˜å¥½åƒè·Ÿæ¬§æ‹‰å›è·¯æ‰¯ä¸ä¸ŠåŠç‚¹å…³ç³»ï¼Œä½†æ˜¯ï¼Œ<del>æ ¹æ®è¾“å…¥è¾“å‡ºæ ·ä¾‹æ¥çŒœæµ‹</del>ï¼Œæˆ‘ä»¬å¯ä»¥çŸ¥é“ç¬¬ä¸€é—®çš„ç­”æ¡ˆæ˜¾ç„¶æ˜¯ï¼š$2^n$</p><p>ç„¶åé¢˜ç›®å¥½åƒæ˜¯è¦æ±‚ç»™å‡ºä¸€ä¸ªæ•° Kï¼Œå°†å°äºç­‰äº K çš„æ‰€æœ‰æ•°å­—è¡¨ç¤ºæˆäºŒè¿›åˆ¶åï¼Œå°†é¦–å°¾ä¸€æ ·çš„äºŒè¿›åˆ¶æ•°é¦–å°¾è¿æ¥èµ·æ¥ï¼ˆè¿æ¥çš„æ—¶å€™ä¿è¯å‰ä¸€ä¸ªæ•°çš„æœ€åä¸€ä½ä¸åä¸€ä¸ªæ•°çš„ç¬¬ä¸€ä½ä¸€æ ·ï¼Œä¸”åœ¨è¿™ä¸¤ä¸ªç›¸åŒçš„æ•°å­—ä¸­åªä¿ç•™ä¸€ä¸ªï¼‰æˆä¸€ä¸ªä¸²ï¼Œè€Œä¸”è¿™äº›æ•°ä¸èƒ½é‡å¤ä½¿ç”¨ï¼Œè¦æ±‚å‡ºä¸€ä¸ªæœ€å°çš„é•¿åº¦ä¸º Mï¼ˆMå°±æ˜¯ç¬¬ä¸€é—®çš„ç­”æ¡ˆï¼‰çš„ä¸²</p><p>ç”¨ <strong>DFS</strong> æ¥åšï¼Œæ€è·¯æ˜¯ï¼š<strong>å…ˆæ„é€ ä¸€ä¸ªåŒ…å« $2^n-1$ ä¸ªç‚¹çš„å›¾ Gï¼Œç„¶åå¯¹äºæ¯ä¸ªç‚¹ Sï¼Œå°† S ä¸ (S&lt;&lt;1)&amp;(M-1) å’Œ (S&lt;&lt;1)&amp;(M-1) +1 å·ç‚¹åˆ†åˆ«è¿å‡ºä¸€æ¡è¾¹ï¼Œä¼šå‘ç°å›¾ G æ˜¯ä¸€ä¸ªæ¬§æ‹‰å›¾ï¼Œç”¨ DFS æ±‚å‡ºè¿™ä¸ªå›¾çš„æ¬§æ‹‰å›è·¯ç„¶åé€†åºè¾“å‡ºï¼ŒåŒæ—¶æ»¡è¶³å­—å…¸åºæœ€å°çš„æ¡ä»¶å³å¯</strong></p><p>ä¸Šé¢è¿ç®—æ—¶ä¸ (M-1) ç›¸ä¸æ˜¯ä¸ºäº†ç”©æ‰å¤šä½™çš„ä½æ•°ä»è€Œå¾—å‡ºä¸‹ä¸€ä¸ªç›®æ ‡ç‚¹çš„ç¼–å·</p><p>å®é™…ç¼–ç¨‹ç”¨ä¸åˆ°è¿™ä¹ˆå¤æ‚ï¼Œå…¶å®å°±ä¸€ä¸ª <strong>DFS+VISæ•°ç»„</strong> åˆ¤æ–­æ˜¯å¦è®¿é—®è¿‡å³å¯</p><h2 id="Codes"><a href="#Codes" class="headerlink" title="Codes"></a>Codes</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxn 10001</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">int</span> res[maxn],n,maxk;</span><br><span class="line"><span class="type">bool</span> vis[maxn];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">euler</span><span class="params">(<span class="type">int</span> k)</span></span>&#123;</span><br><span class="line"><span class="type">int</span> s1=(k&lt;&lt;<span class="number">1</span>) &amp; maxk;</span><br><span class="line"><span class="type">int</span> s2=((k&lt;&lt;<span class="number">1</span>) &amp; maxk) + <span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span>(!vis[s1])&#123;</span><br><span class="line">vis[s1]=<span class="literal">true</span>; <span class="built_in">euler</span>(s1);</span><br><span class="line">res[++res[<span class="number">0</span>]]=<span class="number">0</span>;</span><br><span class="line">&#125;<span class="keyword">if</span>(!vis[s2])&#123;</span><br><span class="line">vis[s2]=<span class="literal">true</span>; <span class="built_in">euler</span>(s2);</span><br><span class="line">res[++res[<span class="number">0</span>]]=<span class="number">1</span>; </span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;testin.txt&quot;</span>,<span class="string">&quot;r&quot;</span>,stdin);</span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;testout.txt&quot;</span>,<span class="string">&quot;w&quot;</span>,stdout);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line">cin&gt;&gt;n; maxk=<span class="number">1</span>&lt;&lt;n; cout&lt;&lt;maxk;</span><br><span class="line">maxk--;</span><br><span class="line"><span class="built_in">putchar</span>(<span class="string">&#x27; &#x27;</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;n;i++) cout&lt;&lt;<span class="number">0</span>;</span><br><span class="line"><span class="built_in">euler</span>(<span class="number">0</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=res[<span class="number">0</span>];i&gt;=n;i--) cout&lt;&lt;res[i];</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°è®º </tag>
            
            <tag> å›¾è®º </tag>
            
            <tag> æ¬§æ‹‰å›è·¯ </tag>
            
            <tag> æ¬§æ‹‰è·¯å¾„ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å›¾è®º | æ¬§æ‹‰å›è·¯ | æ¬§æ‹‰å›è·¯ &amp; æ¬§  æ‹‰è·¯å¾„</title>
      <link href="/2019/04/12/2019-04-12-%E6%AC%A7%E6%8B%89%E9%A2%98/"/>
      <url>/2019/04/12/2019-04-12-%E6%AC%A7%E6%8B%89%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><h1 id="T1ï¼šæ¬§æ‹‰è·¯å¾„"><a href="#T1ï¼šæ¬§æ‹‰è·¯å¾„" class="headerlink" title="T1ï¼šæ¬§æ‹‰è·¯å¾„"></a>T1ï¼šæ¬§æ‹‰è·¯å¾„</h1><h2 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h2><p>18ä¸–çºªè‘—åçš„æ•°å­¦é—®é¢˜ä¹‹ä¸€ï¼šåœ¨å“¥å°¼æ–¯å ¡çš„ä¸€ä¸ªå…¬å›­é‡Œï¼Œæœ‰7åº§æ¡¥å°†æ²³ä¸­ä¸¤ä¸ªå²›åŠæ²³ä¸¤å²¸è¿æ¥èµ·æ¥(å¦‚å›¾a)ã€‚é—®æ˜¯å¦å¯èƒ½ä»è¿™å››å—é™†åœ°ä¸­ä»»ä¸€å—å‡ºå‘ï¼Œæ°å¥½é€šè¿‡æ¯åº§æ¡¥ä¸€æ¬¡ï¼Œå†å›åˆ°èµ·ç‚¹ï¼Ÿã€€ã€€ã€€</p><p>æ¬§æ‹‰äº1736å¹´ç ”ç©¶å¹¶è§£å†³äº†æ­¤é—®é¢˜ã€‚æ¬§æ‹‰æŠŠæ¯ä¸€å—é™†åœ°è€ƒè™‘æˆä¸€ä¸ªç‚¹ï¼Œè¿æ¥ä¸¤å—é™†åœ°çš„æ¡¥ä»¥è¾¹è¡¨ç¤ºï¼Œç”»å‡ºå›¾bçš„å›¾è®ºæ¨¡å‹ï¼Œç”±æ­¤é—®é¢˜å˜æˆï¼šèƒ½å¦ä»æ— å‘å›¾çš„ä¸€ä¸ªç»“ç‚¹å‡ºå‘èµ°å‡ºä¸€æ¡è·¯å¾„ï¼Œæ¯æ¡è¾¹æ°å¥½ç»è¿‡ä¸€æ¬¡ï¼Œæœ€åå›åˆ°å‡ºå‘ç‚¹ã€‚è¿™æ ·çš„è·¯çº¿ç§°ä¸ºæ¬§æ‹‰å›è·¯ï¼Œä¹Ÿå¯ä»¥ç§°ä¸ºä¸€ç¬”ç”»ã€‚</p><p>ä½ çš„ä»»åŠ¡ä¸æ¬§æ‹‰ä¸€æ ·ï¼šç»™å‡ºnä¸ªé¡¶ç‚¹ï¼ˆç¼–å·ä¸º1..nï¼‰ï¼Œmæ¡è¾¹çš„æ— å‘å›¾ã€‚è¯·å¯»æ‰¾ä¸€æ¡æ¬§æ‹‰è·¯å¾„ã€‚</p><h2 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h2><p>ç¬¬1è¡Œä¸ºæ•´æ•°nï¼Œæ¥ä¸‹æ¥çš„ m è¡Œï¼Œæ¯è¡Œä¸¤ä¸ªæ•´æ•°ï¼ši,j(1&lt;=i,j&lt;=n)ï¼Œè¡¨ç¤ºä¸€æ¡æ— å‘è¾¹ã€‚ </p><h2 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h2><p>å¦‚æœä¸å­˜åœ¨æ¬§æ‹‰è·¯å¾„ï¼Œåˆ™è¾“å‡ºNIEã€‚å¦åˆ™è¾“å‡ºåº”å½“åŒ…å« m+1 ä¸ªæ•´æ•°ï¼Œä¾æ¬¡è¡¨ç¤ºæ¬§æ‹‰è·¯å¾„ç»è¿‡çš„é¡¶ç‚¹å·ã€‚å¦‚æœæŠŠæ¬§æ‹‰è·¯å¾„ç»è¿‡çš„ç»“ç‚¹åºåˆ—çœ‹æˆæ˜¯ä¸€ä¸ªnè¿›åˆ¶çš„æ•°ï¼Œé‚£ä¹ˆå½“å­˜åœ¨å¤šç»„è§£çš„æƒ…å†µä¸‹ï¼Œè¾“å‡ºnè¿›åˆ¶è¡¨ç¤ºæ³•ä¸­æœ€å°çš„ä¸€ä¸ªï¼ˆä¹Ÿå°±æ˜¯è¾“å‡ºç¬¬ä¸€ä¸ªæ•°è¾ƒå°çš„ï¼Œå¦‚æœè¿˜æœ‰å¤šè§£ï¼Œè¾“å‡ºç¬¬äºŒä¸ªæ•°è¾ƒå°çš„ï¼Œâ€¦ï¼Œå®è´¨å°±æ˜¯å­—å…¸åºï¼‰ã€‚ </p><h2 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">7 9</span><br><span class="line">1 2</span><br><span class="line">2 3</span><br><span class="line">3 4</span><br><span class="line">4 2</span><br><span class="line">4 5</span><br><span class="line">2 5</span><br><span class="line">5 6</span><br><span class="line">5 7</span><br><span class="line">4 6</span><br></pre></td></tr></table></figure><h2 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1 2 3 4 2 5 4 6 5 7</span><br></pre></td></tr></table></figure><blockquote><p><strong>Sample Input å›¾ç¤ºï¼šï¼ˆæ¬§æ‹‰è·¯ä¸º <code>1 2 3 4 2 5 4 6 5 7</code>ï¼‰</strong></p></blockquote><div class="mermaid-wrap"><pre class="mermaid-src" hidden>  graph LR1---2;2---3;3---4;4---2;4---52---5;5---6;5---7;4---6  </pre></div><h2 id="Hint"><a href="#Hint" class="headerlink" title="Hint"></a>Hint</h2><p>1&lt;=n&lt;=500, 1&lt;=m&lt;=1024</p><h2 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><p>ä¸€é“æ¬§æ‹‰è·¯å¾„çš„æ¨¡æ¿é¢˜ï¼Œå¤§è‡´æ€è·¯å’Œæ±‚è§£æ¬§æ‹‰è·¯çš„æ¨¡æ¿ç®—æ³•ä¸€æ ·ï¼Œåªæ˜¯è¿™ä¸ªé¢˜è¦æ±‚è¾“å‡ºå­—å…¸åºæœ€å°çš„æ¬§æ‹‰è·¯ç»ä¸Šçš„ç‚¹ï¼Œé‚£ä¹ˆå¯ä»¥æƒ³åˆ°å°†è¾¹é›†æ•°ç»„æ”¹å˜ï¼Œå› ä¸ºåŸæœ¬çš„å‰å‘æ˜Ÿä¸èƒ½ä¿è¯å­—å…¸åºæœ€å°</p><p><strong>å¯ä»¥ç”¨ Vector æ¨¡æ‹Ÿè¾¹é›†æ•°ç»„ï¼Œè¿›è¡Œæ’åºä¹‹åå† DFS ï¼Œå°±å¯ä»¥ä¿è¯æ±‚å¾—æ¬§æ‹‰è·¯çš„æ—¶å€™å­—å…¸åºæœ€å°äº†ï¼Œè¿™å¯èƒ½ä¼šä¸¢å¤±ä¿®æ”¹ head æ•°ç»„çš„æ—¶é—´ä¼˜åŒ–ï¼Œä½†æ˜¯è¿™ä¸ªé¢˜æ•°æ®å¤ªæ°´ï¼Œä¹Ÿèƒ½ AC</strong></p><h2 id="Codes"><a href="#Codes" class="headerlink" title="Codes"></a>Codes</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxn 501</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxm 1025</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">edge</span>&#123;</span><br><span class="line"><span class="type">int</span> id,to;</span><br><span class="line"><span class="type">bool</span> <span class="keyword">operator</span> &lt;(<span class="type">const</span> edge &amp;obj)<span class="type">const</span>&#123;</span><br><span class="line"><span class="keyword">return</span> to&lt;obj.to;</span><br><span class="line">&#125;</span><br><span class="line">&#125;; vector&lt;edge&gt; g[maxn];</span><br><span class="line"><span class="type">bool</span> vis[maxm*<span class="number">2</span>]; <span class="type">int</span> res[<span class="number">2</span>*maxm];</span><br><span class="line"><span class="type">int</span> f[maxn];</span><br><span class="line"><span class="type">int</span> n,m,deg[maxn];</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">int</span> <span class="title">Sfind</span><span class="params">(<span class="type">int</span> x)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(f[x]==x) <span class="keyword">return</span> x;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">return</span> f[x]=<span class="built_in">Sfind</span>(f[x]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dfs_euler</span><span class="params">(<span class="type">int</span> u)</span></span>&#123;</span><br><span class="line">vector&lt;edge&gt;::iterator iter=g[u].<span class="built_in">begin</span>();</span><br><span class="line"><span class="keyword">while</span>(iter!=g[u].<span class="built_in">end</span>())&#123;</span><br><span class="line"><span class="keyword">if</span>(!vis[iter-&gt;id])&#123;</span><br><span class="line">vis[iter-&gt;id]=<span class="literal">true</span>;</span><br><span class="line"><span class="built_in">dfs_euler</span>(iter-&gt;to);</span><br><span class="line">&#125;</span><br><span class="line">iter++;</span><br><span class="line">&#125;</span><br><span class="line">res[++res[<span class="number">0</span>]]=u;</span><br><span class="line">&#125; <span class="type">int</span> cnt;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;testin.txt&quot;</span>,<span class="string">&quot;r&quot;</span>,stdin);</span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;testout.txt&quot;</span>,<span class="string">&quot;w&quot;</span>,stdout);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line">cin&gt;&gt;n&gt;&gt;m; <span class="type">int</span> U,V,fu,fv;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++) f[i]=i;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++)&#123;</span><br><span class="line">cin&gt;&gt;U&gt;&gt;V;</span><br><span class="line">g[U].<span class="built_in">push_back</span>((edge)&#123;i,V&#125;);</span><br><span class="line">g[V].<span class="built_in">push_back</span>((edge)&#123;i,U&#125;);</span><br><span class="line">deg[U]++; deg[V]++;</span><br><span class="line">fu=<span class="built_in">Sfind</span>(U); fv=<span class="built_in">Sfind</span>(V);</span><br><span class="line">f[fu]=fv;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++) <span class="built_in">sort</span>(g[i].<span class="built_in">begin</span>(),g[i].<span class="built_in">end</span>());</span><br><span class="line"><span class="type">int</span> st=<span class="number">1</span>;</span><br><span class="line"><span class="comment">// JUDGE 1 </span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line"><span class="keyword">if</span>(deg[i]&amp;<span class="number">1</span>) cnt++;</span><br><span class="line"><span class="keyword">if</span>(cnt&gt;<span class="number">2</span>)&#123;</span><br><span class="line">cout&lt;&lt;<span class="string">&quot;NIE&quot;</span>; <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// JUDGE 2 </span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">2</span>;i&lt;=n;i++) </span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">Sfind</span>(f[i])!=<span class="built_in">Sfind</span>(f[i<span class="number">-1</span>]))&#123;</span><br><span class="line">cout&lt;&lt;<span class="string">&quot;NIE&quot;</span>; <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line"><span class="keyword">if</span>(deg[i]&amp;<span class="number">1</span>)&#123;st=i;<span class="keyword">break</span>;&#125;</span><br><span class="line"><span class="built_in">dfs_euler</span>(st);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=res[<span class="number">0</span>];i&gt;=<span class="number">1</span>;i--) cout&lt;&lt;res[i]&lt;&lt;<span class="string">&#x27; &#x27;</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1 id="T2ï¼šæ¬§æ‹‰å›è·¯"><a href="#T2ï¼šæ¬§æ‹‰å›è·¯" class="headerlink" title="T2ï¼šæ¬§æ‹‰å›è·¯"></a>T2ï¼šæ¬§æ‹‰å›è·¯</h1><h2 id="Description-1"><a href="#Description-1" class="headerlink" title="Description"></a>Description</h2><p>æœ‰ä¸€å¤©ä¸€ä½çµé­‚ç”»å¸ˆç”»äº†ä¸€å¼ å›¾ï¼Œç°åœ¨è¦ä½ æ‰¾å‡ºæ¬§æ‹‰å›è·¯ï¼Œå³åœ¨å›¾ä¸­æ‰¾ä¸€ä¸ªç¯ä½¿å¾—æ¯æ¡è¾¹éƒ½åœ¨ç¯ä¸Šå‡ºç°æ°å¥½ä¸€æ¬¡ã€‚</p><p>ä¸€å…±ä¸¤ä¸ªå­ä»»åŠ¡ï¼š</p><ol><li>è¿™å¼ å›¾æ˜¯æ— å‘å›¾ã€‚ï¼ˆ50åˆ†ï¼‰</li><li>è¿™å¼ å›¾æ˜¯æœ‰å‘å›¾ã€‚ï¼ˆ50åˆ†ï¼‰</li></ol><h2 id="Input-1"><a href="#Input-1" class="headerlink" title="Input"></a>Input</h2><p>ç¬¬ä¸€è¡Œä¸€ä¸ªæ•´æ•° t</p><p>ç¬¬äºŒè¡Œä¸¤ä¸ªæ•´æ•° n,m</p><p>æ¥ä¸‹æ¥ mè¡Œï¼Œæ¯è¡Œä¸¤ä¸ªæ•´æ•°u,v</p><p>å¦‚æœ t=1 è¡¨ç¤ºæ— å‘è¾¹(u,v)ï¼Œå¦‚æœ t=2 è¡¨ç¤ºæœ‰å‘è¾¹<u,v>ï¼Œå›¾ä¸­å¯èƒ½æœ‰é‡è¾¹ä¹Ÿå¯èƒ½æœ‰è‡ªç¯ã€‚</p><h2 id="Output-1"><a href="#Output-1" class="headerlink" title="Output"></a>Output</h2><p>å¦‚æœä¸å¯ä»¥ä¸€ç¬”ç”»ï¼Œè¾“å‡ºä¸€è¡Œ â€œNOâ€ã€‚</p><p>å¦åˆ™ï¼Œè¾“å‡ºä¸€è¡Œ â€œYESâ€ï¼Œæ¥ä¸‹æ¥ä¸€è¡Œè¾“å‡ºä¸€ç»„æ–¹æ¡ˆã€‚</p><p>å¦‚æœ t=1,è¾“å‡ºmä¸ªæ•´æ•°ï¼šp1,p2â€¦mã€‚è¡¨ç¤ºè¾¹çš„ç¼–å·ã€‚è‹¥piä¸ºæ­£ï¼Œè¡¨ç¤ºä»uièµ°åˆ°viï¼Œå¦åˆ™è¡¨ç¤ºä»vièµ°åˆ°uiå¦‚æœ t=2,è¾“å‡ºmä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºè¾¹çš„ç¼–å·ã€‚</p><h2 id="Sample-Input-1"><a href="#Sample-Input-1" class="headerlink" title="Sample Input #1"></a>Sample Input #1</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1</span><br><span class="line">3 3</span><br><span class="line">1 2</span><br><span class="line">2 3</span><br><span class="line">1 3</span><br></pre></td></tr></table></figure><h2 id="Sample-Output-1"><a href="#Sample-Output-1" class="headerlink" title="Sample Output #1"></a>Sample Output #1</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">YES</span><br><span class="line">3 -2 -1</span><br></pre></td></tr></table></figure><h2 id="Sample-Input-2"><a href="#Sample-Input-2" class="headerlink" title="Sample Input #2"></a>Sample Input #2</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">2</span><br><span class="line">5 6</span><br><span class="line">2 3</span><br><span class="line">2 5</span><br><span class="line">3 4</span><br><span class="line">1 2</span><br><span class="line">4 2</span><br><span class="line">5 1</span><br></pre></td></tr></table></figure><h2 id="Sample-Output-2"><a href="#Sample-Output-2" class="headerlink" title="Sample Output #2"></a>Sample Output #2</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">YES</span><br><span class="line">4 1 3 5 2 6</span><br></pre></td></tr></table></figure><blockquote><p><strong>Sample Input #2 å›¾ç¤ºï¼šï¼ˆæ¬§æ‹‰è·¯ä¸º <code>4ï¼Œ1ï¼Œ3ï¼Œ5ï¼Œ2ï¼Œ6</code>ï¼‰</strong></p></blockquote><div class="mermaid-wrap"><pre class="mermaid-src" hidden>  graph LR1---2;2---3;3---4;4---2;4---52---5;5---6;5---7;4---6  </pre></div><h2 id="Hint-1"><a href="#Hint-1" class="headerlink" title="Hint"></a>Hint</h2><p>1â‰¤nâ‰¤10^5ï¼Œ0â‰¤mâ‰¤2Ã—10^5</p><h2 id="åˆ†æ-1"><a href="#åˆ†æ-1" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><p>æ±‚è§£æ¬§æ‹‰è·¯å¾„çš„ä¸€ä¸ªæ¨¡æ¿é¢˜ï¼Œå› ä¸º m çš„èŒƒå›´ä¸å¤§ï¼Œå¯ä»¥ç”¨æ¯”è¾ƒå¥½å†™çš„ DFS æ¥æ±‚è§£ï¼Œå¤§è‡´æ€è·¯å’Œæ±‚è§£æ¬§æ‹‰è·¯å¾„çš„æ¨¡æ¿ä»£ç ä¸€æ ·ï¼Œè¿™é‡Œè¯´è¯´å¦‚ä½•å­˜æ”¾æ¬§æ‹‰è·¯ä¸Šçš„è¾¹çš„ç¼–å·</p><p>å¯¹äºy</p><p>ç”±äºæ— å‘å›¾åŠ è¾¹çš„è¿ç»­æ€§ï¼Œå¦‚æœè¾¹é›†æ•°ç»„çš„ tot ä» 1 å¼€å§‹ï¼Œé‚£ä¹ˆå¯¹äºä¸€å¯¹ç‚¹ (uï¼Œv) æ¥è¯´ï¼Œä» u åˆ° v çš„è¾¹å·å§‹ç»ˆæ˜¯å¥‡æ•°ï¼ˆ1ï¼Œ3ï¼Œ5ï¼Œ7ï¼Œâ€¦â€¦ï¼‰ï¼Œä» v åˆ° u çš„åå‘è¾¹å°±æ˜¯å¶æ•°ï¼Œç”±æ­¤å°±å¯ä»¥åˆ¤æ–­å½“å‰è¾¹çš„æ–¹å‘ï¼Œç„¶åçœ‹æ˜¯å­˜æ­£ç¼–å·è¿˜æ˜¯è´Ÿç¼–å·</p><p><strong>å¯¹äºæ— å‘å›¾ï¼Œåœ¨åˆ¤æ–­æŸæ¡è¾¹æ˜¯å¦è®¿é—®è¿‡æ—¶ï¼ŒæŠŠæ— å‘å›¾æƒ³æˆæœ‰å‘å›¾ï¼Œé‚£ä¹ˆæ¯æ¡è¾¹çš„ç¼–å·å°†ä¼šç¼©å°ä¸€å€ï¼ˆé™¤ä»¥ 2ï¼‰ï¼Œè¿™æ ·èµ°è¿‡ä¹‹åæŠŠ $vis[i\div 2]$ æ ‡è®°å³å¯ï¼Œåˆ¤æ–­ä¹Ÿåªåˆ¤æ–­ $vis[i\div 2]$  ï¼ŒåŠ è¾¹æ—¶ä¹Ÿè¦åŠ  $i\div 2$</strong></p><p>å¯¹äºæœ‰å‘å›¾ï¼Œç›´æ¥å¯¹è¿™æ¡è¾¹çš„ç¼–å·è¿›è¡Œæ“ä½œå³å¯</p><h2 id="Codes-1"><a href="#Codes-1" class="headerlink" title="Codes"></a>Codes</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxn 100001</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxm 5*100001</span></span><br><span class="line"><span class="comment">// for not directed graph </span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">int</span> head[maxn],nxt[maxm],to[maxm];</span><br><span class="line"><span class="type">int</span> res[maxm],tot=<span class="number">1</span>,n,m;</span><br><span class="line"><span class="type">int</span> ind[maxn],oud[maxn]; <span class="comment">// outdegs and indegs </span></span><br><span class="line"><span class="type">bool</span> vis[<span class="number">2</span>*maxn]; <span class="type">int</span> typ;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">Eadd</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> v)</span></span>&#123;</span><br><span class="line">nxt[++tot]=head[u]; to[tot]=v;</span><br><span class="line">head[u]=tot;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">euler</span><span class="params">(<span class="type">int</span> u)</span></span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> &amp;i=head[u];i;i=nxt[i])&#123;</span><br><span class="line"><span class="type">int</span> v=to[i]; <span class="type">int</span> c=(typ==<span class="number">1</span>)?(i/<span class="number">2</span>):(i<span class="number">-1</span>);</span><br><span class="line"><span class="type">int</span> s=i%<span class="number">2</span>;</span><br><span class="line"><span class="keyword">if</span>(vis[c]) <span class="keyword">continue</span>; </span><br><span class="line">vis[c]=<span class="literal">true</span>;</span><br><span class="line"><span class="built_in">euler</span>(v);</span><br><span class="line"><span class="keyword">if</span>(typ==<span class="number">1</span>) res[++res[<span class="number">0</span>]]=(s?(-c):c);</span><br><span class="line"><span class="keyword">else</span> res[++res[<span class="number">0</span>]]=c;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;testin.txt&quot;</span>,<span class="string">&quot;r&quot;</span>,stdin);</span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;testout.txt&quot;</span>,<span class="string">&quot;w&quot;</span>,stdout);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line">cin&gt;&gt;typ;</span><br><span class="line">cin&gt;&gt;n&gt;&gt;m; <span class="type">int</span> x,y;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++)&#123;</span><br><span class="line">cin&gt;&gt;x&gt;&gt;y; <span class="built_in">Eadd</span>(x,y);</span><br><span class="line"><span class="keyword">if</span>(typ==<span class="number">1</span>) <span class="built_in">Eadd</span>(y,x);</span><br><span class="line">oud[x]++; ind[y]++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// JUDGE </span></span><br><span class="line"><span class="keyword">if</span>(typ==<span class="number">2</span>)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line"><span class="keyword">if</span>(ind[i]!=oud[i])&#123;</span><br><span class="line">cout&lt;&lt;<span class="string">&quot;NO&quot;</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line"><span class="keyword">if</span>((ind[i]+oud[i])&amp;<span class="number">1</span>)&#123;</span><br><span class="line">cout&lt;&lt;<span class="string">&quot;NO&quot;</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// SOLVE </span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line"><span class="keyword">if</span>(head[i])&#123;</span><br><span class="line"><span class="built_in">euler</span>(i);<span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(res[<span class="number">0</span>]!=m) &#123; cout&lt;&lt;<span class="string">&quot;NO&quot;</span>; <span class="keyword">return</span> <span class="number">0</span>;&#125;</span><br><span class="line">cout&lt;&lt;<span class="string">&quot;YES\n&quot;</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=res[<span class="number">0</span>];i;i--) cout&lt;&lt;res[i]&lt;&lt;<span class="string">&#x27; &#x27;</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å›¾è®º </tag>
            
            <tag> æ¬§æ‹‰å›è·¯ </tag>
            
            <tag> æ¬§æ‹‰è·¯å¾„ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å›¾è®º | æœ€çŸ­è·¯å¾„ | æ–°å¹´å¥½</title>
      <link href="/2019/04/09/2019-04-09-%E6%96%B0%E5%B9%B4%E5%A5%BD/"/>
      <url>/2019/04/09/2019-04-09-%E6%96%B0%E5%B9%B4%E5%A5%BD/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><h2 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h2><p>é‡åº†åŸé‡Œæœ‰nä¸ªè½¦ç«™ï¼Œmæ¡åŒå‘å…¬è·¯è¿æ¥å…¶ä¸­çš„æŸäº›ç«™ã€‚æ¯ä¸¤ä¸ªè½¦ç«™æœ€å¤šç”¨ä¸€æ¡å…¬è·¯ç›´æ¥ç›¸è¿ï¼Œä»ä»»ä½•ä¸€ä¸ªè½¦ç«™å‡ºå‘éƒ½å¯ä»¥ç»è¿‡ä¸€æ¡æˆ–å¤šæ¡å…¬è·¯åˆ°è¾¾å…¶å®ƒè½¦ç«™ï¼Œä½†ä¸åŒçš„è·¯å¾„éœ€è¦èŠ±è´¹çš„æ—¶é—´å¯èƒ½ä¸åŒã€‚åœ¨ä¸€æ¡è·¯å¾„ä¸ŠèŠ±è´¹çš„æ—¶é—´ç­‰äºè·¯å¾„ä¸Šæ‰€æœ‰å…¬è·¯éœ€è¦çš„æ—¶é—´å’Œã€‚</p><p>ä½³ä½³çš„å®¶åœ¨è½¦ç«™1ï¼Œä»–æœ‰äº”ä¸ªäº²æˆšï¼Œåˆ†åˆ«ä½åœ¨è½¦ç«™aã€bã€cã€dã€eã€‚è¿‡å¹´äº†ï¼Œä»–éœ€è¦ä»è‡ªå·±çš„å®¶å‡ºå‘ï¼Œæ‹œè®¿æ¯ä¸ªäº²æˆšï¼ˆé¡ºåºä»»æ„ï¼‰ï¼Œç»™ä»–ä»¬é€å»èŠ‚æ—¥çš„ç¥ç¦ã€‚æ€æ ·èµ°ï¼Œæ‰éœ€è¦æœ€å°‘çš„æ—¶é—´ï¼Ÿ</p><h2 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h2><p>ç¬¬ä¸€è¡Œï¼šnï¼ˆn&lt;=50,000ï¼‰ï¼Œmï¼ˆm&lt;=100,000ï¼‰ï¼Œä¸ºè½¦ç«™æ•°ç›®å’Œå…¬è·¯çš„æ•°ç›®ã€‚</p><p>ç¬¬äºŒè¡Œï¼šaã€bã€cã€dã€eï¼Œä¸ºäº”ä¸ªäº²æˆšæ‰€åœ¨è½¦ç«™ç¼–å·ï¼ˆ1&lt; aã€bã€cã€dã€e &lt;= nï¼‰</p><p>æ¥ä¸‹æ¥mè¡Œï¼Œæ¯è¡Œä¸‰ä¸ªæ•´æ•°xã€yã€tï¼ˆ 1 &lt;= xã€y &lt;= nï¼Œ1 &lt;= t &lt;= 100ï¼‰ï¼Œä¸ºå…¬è·¯è¿æ¥çš„ä¸¤ä¸ªè½¦ç«™ç¼–å·å’Œæ—¶é—´ã€‚ </p><h2 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h2><p>ä»…ä¸€è¡Œï¼ŒåŒ…å«ä¸€ä¸ªæ•´æ•°Tï¼Œä¸ºæœ€å°‘çš„æ€»æ—¶é—´</p><h2 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">6 6</span><br><span class="line">2 3 4 5 6</span><br><span class="line">1 2 8</span><br><span class="line">2 3 3</span><br><span class="line">3 4 4</span><br><span class="line">4 5 5</span><br><span class="line">5 6 2</span><br><span class="line">1 6 7</span><br></pre></td></tr></table></figure><h2 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">21</span><br></pre></td></tr></table></figure><blockquote><p><strong>Sample Input å›¾ç¤ºï¼š</strong></p></blockquote><div class="mermaid-wrap"><pre class="mermaid-src" hidden>  graph LRd1((&quot;1ï¼ˆä½³ä½³ï¼‰&quot;));d2((äº²æˆš1));d3((äº²æˆš2))d4((äº²æˆš3));d5((äº²æˆš4));d6((äº²æˆš5))d1--8---d2d2--3---d3d3--4---d4d4--5---d5d5--2---d6d1--7---d6  </pre></div><h2 id="Hint"><a href="#Hint" class="headerlink" title="Hint"></a>Hint</h2><p>n&lt;=50,000ï¼Œm&lt;=100,000</p><h2 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><p>è¿™é“é¢˜æ˜¯æ±‚æœ€çŸ­è·¯å¾„çš„ä¸€ä¸ªæ‹“å±•ï¼Œæˆ‘ä»¬å…ˆæ±‚å‡ºä»¥ä½³ä½³ä¸ºèµ·ç‚¹ï¼Œåˆ°è¾¾æ‰€æœ‰ç‚¹çš„å•æºæœ€çŸ­è·¯å¾„ï¼Œå†æ ¹æ®ç»™å‡ºçš„ 5 ä¸ªäº²æˆšï¼Œæ±‚å‡ºä»¥è¿™ 5 ä¸ªäº²æˆšä¸ºèµ·ç‚¹åˆ°æ‰€æœ‰ç‚¹çš„æœ€çŸ­è·¯å¾„ï¼ˆæ³¨æ„è¦ç”¨ä¸åŒçš„ dist æ•°ç»„å­˜ï¼Œä¹Ÿå°±æ˜¯è¦å¼€ 6 ä¸ªdist æ•°ç»„å­˜å‚¨æœ€çŸ­è·¯ï¼‰</p><p>ä½³ä½³è®¿é—® 5 ä¸ªäº²æˆšçš„é¡ºåºæ˜¯ä¸€ä¸ª 5 é€‰ 5 çš„å…¨æ’åˆ—ï¼Œä¸€å…±æœ‰ 120 ç§ä¸åŒçš„è®¿é—®é¡ºåºï¼Œ<strong>å¦‚æœæŒ‰ç…§å½“å‰å·²ç»ç¡®å®šçš„é¡ºåº order æ¥è®¿é—®ï¼Œåˆ™åœ¨ order ä¸‹ä½³ä½³èƒ½å–å¾—çš„æœ€çŸ­è·¯å¾„å°±æ˜¯åœ¨è®¿é—®åˆ°æŸä¸ªäº²æˆšå®¶ï¼ˆæŠŠä½³ä½³è‡ªå·±çœ‹åšç¬¬ 0 ä¸ªäº²æˆšï¼‰è¦å¾€ä¸‹ä¸€ä¸ªäº²æˆšå®¶èµ°çš„æ—¶å€™ï¼Œé€‰æ‹©ä»¥å½“å‰äº²æˆšå®¶ä¸ºèµ·ç‚¹ï¼Œæ±‚å‡ºçš„åˆ°ç›®æ ‡äº²æˆšå®¶çš„æœ€çŸ­è·¯å¾„åŠ ä¸Šå³å¯ï¼Œå†™æˆå¼å­ï¼š</strong></p><script type="math/tex; mode=display">å¯¹äº\;order\{a_0ï¼Œ a_1ï¼Œa_2ï¼Œa_3ï¼Œa_4ï¼Œa_5 \}\;(a_0\;æ˜¯ä½³ä½³çš„å®¶)\\\\Ans=\sum^4_{k=0}dist[a_k][a_{k+1}]</script><p>ç”±äºè¿™é‡Œçš„æšä¸¾ order æ•°ç»„ï¼Œç®—å‡ºæ‰€æœ‰æ’åˆ—ä¸‹çš„ Ans ï¼Œå–æœ€å°å€¼å³å¯</p><h2 id="Codes"><a href="#Codes" class="headerlink" title="Codes"></a>Codes</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> maxn=<span class="number">50005</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> maxm=<span class="number">100005</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> INF=<span class="number">150000000</span>;</span><br><span class="line"><span class="type">int</span> n,m,np=<span class="number">0</span>,last[maxn],rela[<span class="number">6</span>],dist[<span class="number">6</span>][maxn];</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">edge</span>&#123;<span class="type">int</span> to,w,pre;&#125;E[maxm*<span class="number">2</span>];</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">data</span>&#123;</span><br><span class="line"><span class="type">int</span> d,id;</span><br><span class="line"><span class="type">bool</span> <span class="keyword">operator</span> &lt;(<span class="type">const</span> data &amp;obj)<span class="type">const</span>&#123;</span><br><span class="line"><span class="keyword">return</span> d&gt;obj.d;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="type">char</span> c;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">addedge</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> v,<span class="type">int</span> w)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">E[++np]=(edge)&#123;v,w,last[u]&#125;;</span><br><span class="line">last[u]=np;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="type">int</span> done[maxn];</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">Dijkstra</span><span class="params">(<span class="type">int</span> s,<span class="type">int</span> *dis)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">priority_queue&lt;data&gt;pq;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++) dis[i]=INF,done[i]=<span class="number">0</span>;</span><br><span class="line">pq.<span class="built_in">push</span>((data)&#123;<span class="number">0</span>,s&#125;);</span><br><span class="line">dis[s]=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span>(!pq.<span class="built_in">empty</span>())</span><br><span class="line">&#123;</span><br><span class="line">data t=pq.<span class="built_in">top</span>();pq.<span class="built_in">pop</span>();</span><br><span class="line"><span class="type">int</span> i=t.id;</span><br><span class="line"><span class="keyword">if</span>(done[i]) <span class="keyword">continue</span>;</span><br><span class="line">done[i]=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> p=last[i];p;p=E[p].pre)</span><br><span class="line">&#123;</span><br><span class="line"><span class="type">int</span> j=E[p].to,w=E[p].w;</span><br><span class="line"><span class="keyword">if</span>(dis[j]&gt;dis[i]+w)</span><br><span class="line">&#123;</span><br><span class="line">dis[j]=dis[i]+w;</span><br><span class="line">pq.<span class="built_in">push</span>((data)&#123;dis[j],j&#125;);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> order[<span class="number">6</span>];<span class="type">int</span> ans=INF;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">calc</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">int</span> cnt=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">5</span>;i++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="type">int</span> x=order[i],y=rela[order[i+<span class="number">1</span>]];</span><br><span class="line">cnt+=dist[x][y];</span><br><span class="line">&#125;</span><br><span class="line">ans=<span class="built_in">min</span>(ans,cnt);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">res</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">120</span>;i++)&#123;</span><br><span class="line"><span class="built_in">calc</span>();</span><br><span class="line"><span class="built_in">next_permutation</span>(order+<span class="number">1</span>,order+<span class="number">1</span>+<span class="number">5</span>);</span><br><span class="line">        <span class="comment">// next_permutation å½“å‰æ•°ç»„çš„ä¸‹ä¸€ä¸ªå…¨æ’åˆ— </span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;testin.txt&quot;</span>,<span class="string">&quot;r&quot;</span>,stdin);</span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;testout.txt&quot;</span>,<span class="string">&quot;w&quot;</span>,stdout);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line">cin&gt;&gt;n&gt;&gt;m;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">5</span>;i++) cin&gt;&gt;rela[i];</span><br><span class="line"><span class="keyword">register</span> <span class="type">int</span> u,v,w;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++)&#123;</span><br><span class="line">cin&gt;&gt;u&gt;&gt;v&gt;&gt;w;</span><br><span class="line"><span class="built_in">addedge</span>(u,v,w);<span class="built_in">addedge</span>(v,u,w);</span><br><span class="line">&#125;</span><br><span class="line">rela[<span class="number">0</span>]=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;=<span class="number">5</span>;i++) <span class="built_in">Dijkstra</span>(rela[i],dist[i]); </span><br><span class="line">order[<span class="number">0</span>]=<span class="number">0</span>; <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">5</span>;i++) order[i]=i;</span><br><span class="line"><span class="built_in">res</span>(); cout&lt;&lt;ans;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å›¾è®º </tag>
            
            <tag> æœ€çŸ­è·¯å¾„ </tag>
            
            <tag> æ’åˆ— </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å›¾è®º | å¼ºè¿é€šåˆ†é‡ | Tarjan | [SDOI2010]æ‰€é©¼  é—¨ç‹çš„å®è—</title>
      <link href="/2019/04/08/2019-04-08-%E6%89%80%E9%A9%BC%E9%97%A8%E7%8E%8B%E7%9A%84%E5%AE%9D%E8%97%8F/"/>
      <url>/2019/04/08/2019-04-08-%E6%89%80%E9%A9%BC%E9%97%A8%E7%8E%8B%E7%9A%84%E5%AE%9D%E8%97%8F/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><h2 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h2><blockquote><p>åœ¨å®½å¹¿çš„éæ´²è’æ¼ ä¸­ï¼Œç”Ÿæ´»ç€ä¸€ç¾¤å‹¤åŠ³å‹‡æ•¢çš„ç¾Šé©¼å®¶æ—ã€‚è¢«æ—äººæ­ç§°ä¸ºâ€œå…ˆçŸ¥â€çš„ Alpaca L. Sotomon æ˜¯è¿™ä¸ªå®¶æ—çš„é¢†è¢–ï¼Œå¤–äººä¹Ÿç§°å…¶ä¸ºâ€œæ‰€é©¼é—¨ç‹â€ã€‚æ‰€é©¼é—¨ç‹æ¯•ç”Ÿè‡´åŠ›äºç»´æŠ¤å®¶æ—çš„å®‰å®šä¸å’Œè°ï¼Œä»–æ›¾äº²è‡ªç‡å†›ç²‰ç¢æ²³èŸ¹å¸å›½ä¸»ä¹‰çš„é‡è›®ä¾µç•¥ï¼Œä¸ºæ—äººç«‹ä¸‹èµ«èµ«æˆ˜åŠŸã€‚æ‰€é©¼é—¨ç‹ä¸€ç”Ÿè´¢å®æ— æ•°ï¼Œä½†å› å…¶ç”Ÿæ€§èŠ‚ä¿­ä½è°ƒï¼Œä»–å°†è´¢å®åŸ‹è—åœ¨è‡ªå·±è®¾è®¡çš„åœ°ä¸‹å®«æ®¿é‡Œï¼Œè¿™ä¹Ÿæ˜¯ä»Šå¤© Henry Curtis æ•…äº‹çš„èµ·ç‚¹ã€‚Henry æ˜¯ä¸€ä¸ªçˆ±è´¢å¦‚å‘½çš„è´ªå©ªå®¶ä¼™ï¼Œè€Œåˆéå¸¸èªæ˜ï¼Œä»–è´¹å°½å¿ƒæœºè°‹åˆ’äº†è¿™æ¬¡ç›—çªƒè¡ŒåŠ¨ï¼Œç ´è§£é‡é‡æœºå…³åæ¥åˆ°è¿™åº§åœ°ä¸‹å®«æ®¿å‰ã€‚ </p></blockquote><p>æ•´åº§å®«æ®¿å‘ˆçŸ©é˜µçŠ¶ï¼Œç”± RÃ—C é—´çŸ©å½¢å®«å®¤ç»„æˆï¼Œå…¶ä¸­æœ‰ N é—´å®«å®¤é‡ŒåŸ‹è—ç€å®è—ï¼Œç§°ä½œè—å®å®«å®¤ã€‚å®«æ®¿é‡Œå¤–ã€ç›¸é‚»å®«å®¤é—´éƒ½ç”±åšç¡¬çš„å®ä½“å¢™é˜»éš”ï¼Œç”±ä¸€é—´å®«å®¤åˆ°è¾¾å¦ä¸€é—´åªèƒ½é€šè¿‡æ‰€é©¼é—¨ç‹ç‹¬åˆ›çš„ç§»åŠ¨æ–¹å¼â€”â€”ä¼ é€é—¨ã€‚æ‰€é©¼é—¨ç‹ä¸ºè¿™ N é—´è—å®å®«å®¤æ¯é—´éƒ½æ¶è®¾äº†ä¸€æ‰‡ä¼ é€é—¨ï¼Œæ²¡æœ‰å®è—çš„å®«å®¤ä¸è®¾ä¼ é€é—¨ï¼Œæ‰€æœ‰çš„å®«å®¤ä¼ é€é—¨åˆ†ä¸ºä¸‰ç§: </p><ol><li>â€œæ¨ªå¤©é—¨â€ï¼šç”±è¯¥é—¨å¯ä»¥ä¼ é€åˆ°åŒè¡Œçš„ä»»ä¸€å®«å®¤;â€¨</li><li>â€œçºµå¯°é—¨â€ï¼šç”±è¯¥é—¨å¯ä»¥ä¼ é€åˆ°åŒåˆ—çš„ä»»ä¸€å®«å®¤;â€¨</li><li>â€œè‡ªç”±é—¨â€ï¼šç”±è¯¥é—¨å¯ä»¥ä¼ é€åˆ°ä»¥è¯¥é—¨æ‰€åœ¨å®«å®¤ä¸ºä¸­å¿ƒå‘¨å›´8æ ¼ä¸­ä»»ä¸€å®«å®¤(å¦‚æœç›®æ ‡å®«å®¤å­˜åœ¨çš„è¯)ã€‚</li></ol><p>æ·±è°‹è¿œè™‘çš„  Henry  å½“ç„¶äº‹å…ˆå°±æåˆ°äº†æ‰€é©¼é—¨ç‹å½“å¹´çš„å®«æ®¿æ‹›æ ‡å†Œï¼Œä¹¦å†Œä¸Šè¯¦ç»†è®°å½•äº†æ¯æ‰‡ä¼ é€é—¨æ‰€å±å®«å®¤åŠç±»å‹ã€‚è€Œä¸”ï¼Œè™½ç„¶å®«æ®¿å†…å¤–ç›¸éš”ï¼Œä½†ä»–è‡ªè¡Œå‡†å¤‡äº†ä¸€ç§ä¾¿æºå¼ä¼ é€é—¨ï¼Œå¯å°†è‡ªå·±ä¼ é€åˆ°æ®¿å†…ä»»æ„ä¸€é—´å®«å®¤å¼€å§‹å¯»å®ï¼Œå¹¶åœ¨ä»»æ„ä¸€é—´å®«å®¤ç»“æŸåä¼ é€å‡ºå®«ã€‚æ•´åº§å®«æ®¿åªè®¸è¿›å‡ºä¸€æ¬¡ï¼Œä¸”ä¾¿æºé—¨æ— æ³•è¿›è¡Œå®«å®¤ä¹‹é—´çš„ä¼ é€ã€‚ä¸è¿‡å¥½åœ¨å®«å®¤å†…ä¼ é€é—¨çš„ä½¿ç”¨æ²¡æœ‰æ¬¡æ•°é™åˆ¶ï¼Œæ¯é—´å®«å®¤ä¹Ÿå¯ä»¥å¤šæ¬¡å‡ºå…¥ã€‚  ç°åœ¨ Henry å·²ç»æ‰“å¼€äº†ä¾¿æºé—¨ï¼Œå³å°†é€‰æ‹©ä¸€é—´å®«å®¤è¿›å…¥ã€‚ä¸ºå¾—åˆ°å°½å¤šå®è—ï¼Œ ä»–å¸Œæœ›å®‰æ’ä¸€æ¡è·¯çº¿ï¼Œä½¿èµ°è¿‡çš„ä¸åŒè—å®å®«å®¤å°½å¯èƒ½å¤šã€‚è¯·ä½ å‘Šè¯‰  Henry è¿™æ¡è·¯ çº¿æœ€å¤šè¡Œç»ä¸åŒè—å®å®«å®¤çš„æ•°ç›®ã€‚ </p><h2 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h2><p>ç¬¬ä¸€è¡Œç»™å‡ºä¸‰ä¸ªæ­£æ•´æ•° Nï¼Œ Rï¼Œ Cã€‚ ä»¥ä¸‹ N è¡Œï¼Œæ¯è¡Œç»™å‡ºä¸€æ‰‡ä¼ é€é—¨çš„ä¿¡æ¯ï¼ŒåŒ…å«ä¸‰ä¸ªæ­£æ•´æ•° xiï¼Œ yiï¼Œ Tiï¼Œè¡¨ç¤ºè¯¥ ä¼ é€é—¨è®¾åœ¨ä½äºç¬¬ xi è¡Œç¬¬ yi åˆ—çš„è—å®å®«å®¤ï¼Œç±»å‹ä¸º Tiã€‚Ti æ˜¯ä¸€ä¸ª 1~3 é—´çš„æ•´æ•°ï¼Œ 1 è¡¨ç¤ºå¯ä»¥ä¼ é€åˆ°ç¬¬ xi è¡Œä»»æ„ä¸€åˆ—çš„â€œæ¨ªå¤©é—¨â€ï¼Œ2 è¡¨ç¤ºå¯ä»¥ä¼ é€åˆ°ä»»æ„ä¸€è¡Œç¬¬ yi åˆ—çš„â€œçºµå¯°é—¨â€ï¼Œ3 è¡¨ç¤ºå¯ä»¥ä¼ é€åˆ°å‘¨å›´ 8 æ ¼å®«å®¤çš„â€œè‡ªç”±é—¨â€ã€‚ ä¿è¯<br>1â‰¤xiâ‰¤Rï¼Œ1â‰¤yiâ‰¤Cï¼Œæ‰€æœ‰çš„ä¼ é€é—¨ä½ç½®äº’ä¸ç›¸åŒã€‚</p><h2 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h2><p>åªæœ‰ä¸€ä¸ªæ­£æ•´æ•°,è¡¨ç¤ºä½ ç¡®å®šçš„è·¯çº¿æ‰€ç»è¿‡ä¸åŒè—å® å®«å®¤çš„æœ€å¤§æ•°ç›®ã€‚ </p><h2 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">10 7 7 </span><br><span class="line">2 2 1 </span><br><span class="line">2 4 2 </span><br><span class="line">1 7 2 </span><br><span class="line">2 7 3 </span><br><span class="line">4 2 2 </span><br><span class="line">4 4 1 </span><br><span class="line">6 7 3 </span><br><span class="line">7 7 1 </span><br><span class="line">7 5 2 </span><br><span class="line">5 2 1 </span><br></pre></td></tr></table></figure><h2 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">9</span><br></pre></td></tr></table></figure><blockquote><p><strong>Sample Input å›¾ç¤ºï¼š</strong></p></blockquote><div class="table-container"><table><thead><tr><th style="text-align:center">åˆ—/è¡Œ</th><th style="text-align:center">1</th><th style="text-align:center">2</th><th style="text-align:center">3</th><th style="text-align:center">4</th><th style="text-align:center">5</th><th style="text-align:center">6</th><th style="text-align:center">7</th></tr></thead><tbody><tr><td style="text-align:center"><strong>1</strong></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center">2</td></tr><tr><td style="text-align:center"><strong>2</strong></td><td style="text-align:center"></td><td style="text-align:center">1</td><td style="text-align:center"></td><td style="text-align:center">2</td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center">3</td></tr><tr><td style="text-align:center"><strong>3</strong></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td></tr><tr><td style="text-align:center"><strong>4</strong></td><td style="text-align:center"></td><td style="text-align:center">2</td><td style="text-align:center"></td><td style="text-align:center">1</td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td></tr><tr><td style="text-align:center"><strong>5</strong></td><td style="text-align:center"></td><td style="text-align:center">1</td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td></tr><tr><td style="text-align:center"><strong>6</strong></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center">3</td></tr><tr><td style="text-align:center"><strong>7</strong></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center">2</td><td style="text-align:center"></td><td style="text-align:center">1</td></tr></tbody></table></div><h2 id="Hint"><a href="#Hint" class="headerlink" title="Hint"></a>Hint</h2><p><img src="http://newoj.cqyz.cn/public/upload/795b7633e6.png" alt="Data Range"></p><h2 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><p>è¿™é“é¢˜çœ‹ä¼¼ææ€–ï¼Œå®é™…ä¸Šå¦‚æœæˆ‘ä»¬æ ¹æ®é€”ä¸­å®è—é—¨çš„ç‰¹ç‚¹ï¼Œå°†å›¾å»ºå¥½ä¹‹åï¼Œå°±æ˜¯ä¸€é“æœ‰å‘å›¾çš„åŠ¨æ€è§„åˆ’é¢˜ï¼Œå…ˆè¯´å»ºå¥½å›¾åå¦‚ä½•æ±‚å‡ºæœ€å¤§çš„è—å®è·¯çº¿</p><p>å¯¹äºä¸€å¼ å»ºå¥½äº†çš„æœ‰å‘å›¾ $G1$ï¼Œé¦–å…ˆæ±‚å‡ºè¿™ä¸ªå›¾çš„å¼ºè¿é€šåˆ†é‡ï¼Œé‚£ä¹ˆ Henry å¯ä»¥åœ¨è¿™ä¸ªå¼ºè¿é€šåˆ†é‡é‡Œé¢éšæ„ç©¿æ¢­ï¼Œä½†æ˜¯åªèƒ½å¾—åˆ°å¼ºè¿é€šåˆ†é‡æ‰€åŒ…å«çš„ç‚¹çš„æ•°é‡çš„å®è—ï¼Œ<strong>å°†å¼ºè¿é€šåˆ†é‡ç¼©ç‚¹ï¼Œæ ¹æ®æ¯ä¸€ä¸ªå¼ºè¿é€šåˆ†ç‚¹å»ºæ–°å›¾ $G2$ï¼Œæ­¤æ—¶ $G2$ ä¸€å®šæ˜¯ä¸€ä¸ªæœ‰å‘æ— ç¯çš„ DAG å›¾ï¼Œé‚£ä¹ˆæˆ‘ä»¬åªéœ€è¦åœ¨è¿™ä¸ª DAG å›¾ä¸Šè¿›è¡Œ DFS æ¥çœ‹ï¼Œä»¥æ¯ä¸ªç‚¹ä½œä¸ºèµ·ç‚¹ï¼Œèƒ½éå†åˆ°å¤šå°‘ä¸åŒçš„ç‚¹å°±å¯ä»¥äº†ï¼Œæ³¨æ„è¿™ä¸ªå›¾å¯èƒ½æœ¬èº«ä¸è¿é€šï¼Œå› æ­¤è¦ä¸»ç¨‹åºä¸­æšä¸¾æ‰€æœ‰çš„å¼ºè¿é€šåˆ†ç‚¹æ¥ DFSï¼Œæœ€åå–æœ€å¤§å€¼</strong></p><p>é‚£ä¹ˆæ¥ä¸‹æ¥å°±æ˜¯å¦‚ä½•æ„å»ºå›¾ $G1â€‹$ äº†</p><p>æ ¹æ®é¢˜ç›®çš„æé™æ•°æ®æœ‰ $100,000â€‹$ ä¸ªç‚¹ï¼Œå¦‚æœæ¯ä¸¤ä¸ªç‚¹ä¹‹é—´éƒ½è¿ä¸€æ¡è¾¹ï¼Œé‚£ä¹ˆè¾¹æ•°æœ€å¤šå°†ä¼šè¾¾åˆ°$100,000\times (100,000-1)â€‹$ï¼Œæ¯«æ— ç–‘é—®ä¼šé€ æˆ MLEï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å‘ç°ï¼š<strong>å¦‚æœåœ¨ä¸€è¡Œä¸Šæœ‰å¤šä¸ªæ¨ªå¤©é—¨ï¼Œé‚£ä¹ˆåªéœ€è¦å°†å…¶ä¸­çš„ä¸€ä¸ªæ¨ªå¤©é—¨ä¸å‰©ä¸‹çš„ç‚¹è¿è¾¹ï¼Œç„¶åå°†å‰©ä¸‹çš„æ¨ªå¤©é—¨ä¸è¿™ä¸ªæ¨ªå¤©é—¨è¿è¾¹ï¼Œå°±èƒ½ä¿è¯ä¸€è¡Œä¸Šçš„æ‰€æœ‰æ¨ªå¤©é—¨éƒ½èƒ½åˆ°è¾¾è¿™ä¸€è¡Œä¸Šçš„æ‰€æœ‰ç‚¹ï¼Œçºµå¯°é—¨åŒç†</strong></p><p>é‚£ä¹ˆæé™æƒ…å†µä¸‹ï¼ˆå…¨éƒ¨æ˜¯æ¨ªå¤©é—¨ï¼Œæˆ–è€…çºµå¯°é—¨ï¼‰ï¼Œé™¤å»è‡ªç”±é—¨ï¼Œåªéœ€è¦è®°å½• $N\times 2$ æ¡è¾¹å°±å®Œäº‹å„¿äº†ï¼Œæœ€åçš„è‡ªç”±é—¨æ²¡æœ‰ä¼˜åŒ–æŠ€å·§ï¼Œåªèƒ½æŒ‰ç…§å…«ä¸ªæ–¹å‘ä¾æ¬¡åŠ è¾¹ï¼Œå› æ­¤è¾¹é›†æ•°ç»„çš„å¤§å°æ˜¯ï¼š$8\times N$ï¼Œ$N$ è¡¨ç¤ºç‚¹æ•°æé™</p><p>åœ¨å»ºå›¾ $G1â€‹$ çš„æ—¶å€™ï¼ŒæŒ‰ç…§ä¸Šè¿°æ€è·¯ï¼Œéœ€è¦è®°å½•å„ç‚¹çš„åæ ‡ï¼ˆxï¼Œyï¼‰ï¼Œè®°å½•å„è¡Œä¸Šçš„ç‚¹ï¼Œå„åˆ—ä¸Šçš„ç‚¹ï¼ˆç”¨ Vector å®ç°ï¼‰ï¼Œè®°å½•å„ä¸ªç‚¹çš„ä¸€ç»´ç¼–å·ï¼ˆä¸ºè‡ªç”±é—¨åŠ è¾¹åšå‡†å¤‡ï¼‰ï¼Œåªéœ€è¦å–å„è¡Œå„åˆ—çš„ç¬¬ä¸€ä¸ªæ¨ªå¤©é—¨ï¼ˆæˆ–è€…çºµå¯°é—¨ï¼‰æ¥åŠ è¾¹ï¼Œå…¶ä»–é—¨åŠ åˆ°å®ƒä»¬ä¸Šé¢å»å³å¯</p><p>å„ä¸ªç‚¹çš„ä¸€ç»´ç¼–å·æ˜¯ç”¨ x åæ ‡ä¹˜ä¸Š maxrow åŠ ä¸Š y åæ ‡æ¥è¡¨ç¤ºï¼Œè¿™ç§æ–¹æ³•åœ¨ç”¨å›æº¯è§£å†³æ•°ç‹¬é—®é¢˜çš„æ—¶å€™ä¹Ÿç”¨è¿‡ï¼ˆé¢˜ç›®é“¾æ¥ï¼š<a href="http://newoj.cqyz.cn/problem/P1194">P1194 ã€è®­ç»ƒé¢˜ã€‘æ•°ç‹¬</a>ï¼‰</p><h2 id="Codes"><a href="#Codes" class="headerlink" title="Codes"></a>Codes</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">pragma</span> GCC optimize(3)</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxn 100001</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxr 1000001</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">node</span>&#123;</span><br><span class="line"><span class="type">int</span> to,nxt;</span><br><span class="line">&#125;g[maxn*<span class="number">8</span>],g2[maxn*<span class="number">8</span>]; <span class="type">int</span> tot,tot2;</span><br><span class="line"><span class="type">int</span> head[maxn],head2[maxn];</span><br><span class="line"><span class="type">int</span> n,R,C,T[maxn],posx[maxn],posy[maxn];</span><br><span class="line"><span class="type">int</span> low[maxn],dfn[maxn],dt;</span><br><span class="line"><span class="type">int</span> cp[maxn],cpt[maxn]; stack&lt;<span class="type">int</span>&gt; stk;</span><br><span class="line"><span class="type">int</span> f[maxn]; <span class="comment">// dp array </span></span><br><span class="line"><span class="type">bool</span> ins[maxn];</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; rs[maxr],cs[maxr];</span><br><span class="line">map&lt;ll,<span class="type">int</span>&gt; M;</span><br><span class="line"><span class="type">int</span> offsetX[]=&#123;<span class="number">-1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">-1</span>,<span class="number">1</span>,<span class="number">-1</span>,<span class="number">1</span>&#125;;</span><br><span class="line"><span class="type">int</span> offsetY[]=&#123;<span class="number">0</span>,<span class="number">0</span>,<span class="number">-1</span>,<span class="number">1</span>,<span class="number">-1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">-1</span>&#125;;</span><br><span class="line"><span class="function">ll <span class="title">convert</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> y)</span></span>&#123;</span><br><span class="line"><span class="keyword">return</span> (ll)x*maxr+y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">Einsert</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> y)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(x==y) <span class="keyword">return</span>;</span><br><span class="line">g[++tot].nxt=head[x];</span><br><span class="line">g[tot].to=y; head[x]=tot;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">Einsert2</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> y)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(x==y) <span class="keyword">return</span>;</span><br><span class="line">g2[++tot2].nxt=head2[x];</span><br><span class="line">g2[tot2].to=y; head2[x]=tot2;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">inline</span> <span class="type">void</span> _firstbuild()&#123;</span><br><span class="line"><span class="type">int</span> sig=<span class="number">0</span>,vlen;</span><br><span class="line"><span class="comment">// for rows </span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=R;i++)&#123;</span><br><span class="line">sig=<span class="number">0</span>; vlen=rs[i].<span class="built_in">size</span>();</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;vlen;j++)</span><br><span class="line"><span class="keyword">if</span>(T[rs[i][j]]==<span class="number">1</span>)&#123;sig=rs[i][j];<span class="keyword">break</span>;&#125;</span><br><span class="line"><span class="keyword">if</span>(sig)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;vlen;j++)&#123;</span><br><span class="line"><span class="built_in">Einsert</span>(sig,rs[i][j]);</span><br><span class="line"><span class="keyword">if</span>(T[rs[i][j]]==<span class="number">1</span>)<span class="built_in">Einsert</span>(rs[i][j],sig);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// for cols </span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=C;i++)&#123;</span><br><span class="line">sig=<span class="number">0</span>; vlen=cs[i].<span class="built_in">size</span>();</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;vlen;j++)</span><br><span class="line"><span class="keyword">if</span>(T[cs[i][j]]==<span class="number">2</span>)&#123;sig=cs[i][j];<span class="keyword">break</span>;&#125;</span><br><span class="line"><span class="keyword">if</span>(sig)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;vlen;j++)&#123;</span><br><span class="line"><span class="built_in">Einsert</span>(sig,cs[i][j]);</span><br><span class="line"><span class="keyword">if</span>(T[cs[i][j]]==<span class="number">2</span>)<span class="built_in">Einsert</span>(cs[i][j],sig);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// for 9ggs </span></span><br><span class="line"><span class="type">int</span> newx,newy;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line"><span class="keyword">if</span>(T[i]==<span class="number">3</span>)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;<span class="number">8</span>;j++)&#123;</span><br><span class="line">newx=posx[i]+offsetX[j]; </span><br><span class="line">newy=posy[i]+offsetY[j];</span><br><span class="line"><span class="keyword">if</span>(M[<span class="built_in">convert</span>(newx,newy)])&#123;</span><br><span class="line"><span class="built_in">Einsert</span>(M[<span class="built_in">convert</span>(posx[i],posy[i])],M[<span class="built_in">convert</span>(newx,newy)]);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">inline</span> <span class="type">void</span> _secondbuild()&#123;</span><br><span class="line"><span class="type">int</span> k;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> j=head[i];j;j=g[j].nxt)&#123;</span><br><span class="line">k=g[j].to;</span><br><span class="line"><span class="keyword">if</span>(cp[i]!=cp[k])</span><br><span class="line"><span class="built_in">Einsert2</span>(cp[i],cp[k]);</span><br><span class="line">&#125;</span><br><span class="line">&#125; </span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">tarjan</span><span class="params">(<span class="type">int</span> u)</span></span>&#123;</span><br><span class="line">low[u]=dfn[u]=++dt; stk.<span class="built_in">push</span>(u);</span><br><span class="line"><span class="type">int</span> v; ins[u]=<span class="literal">true</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=head[u];i;i=g[i].nxt)&#123;</span><br><span class="line">v=g[i].to;</span><br><span class="line"><span class="keyword">if</span>(!dfn[v])&#123;</span><br><span class="line"><span class="built_in">tarjan</span>(v);</span><br><span class="line">low[u]=<span class="built_in">min</span>(low[u],low[v]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line"><span class="keyword">if</span>(ins[v]) low[u]=<span class="built_in">min</span>(low[u],dfn[v]);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(dfn[u]==low[u])&#123;</span><br><span class="line"><span class="type">int</span> shead; cp[<span class="number">0</span>]++;</span><br><span class="line"><span class="keyword">do</span>&#123;</span><br><span class="line">shead=stk.<span class="built_in">top</span>(); stk.<span class="built_in">pop</span>();</span><br><span class="line">cp[shead]=cp[<span class="number">0</span>];</span><br><span class="line">cpt[cp[<span class="number">0</span>]]++; ins[shead]=<span class="literal">false</span>;</span><br><span class="line">&#125;<span class="keyword">while</span>(shead!=u);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">dfs</span><span class="params">(<span class="type">int</span> u)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(f[u]) <span class="keyword">return</span> f[u]; <span class="type">int</span> v;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=head2[u];i;i=g2[i].nxt)&#123;</span><br><span class="line">v=g2[i].to;</span><br><span class="line">f[u]=<span class="built_in">max</span>(f[u],<span class="built_in">dfs</span>(v));</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> f[u]=f[u]+cpt[u];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;soto.in&quot;</span>,<span class="string">&quot;r&quot;</span>,stdin);</span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;soto.out&quot;</span>,<span class="string">&quot;w&quot;</span>,stdout);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line">cin&gt;&gt;n&gt;&gt;R&gt;&gt;C;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">cin&gt;&gt;posx[i]&gt;&gt;posy[i]&gt;&gt;T[i];</span><br><span class="line">rs[posx[i]].<span class="built_in">push_back</span>(i);</span><br><span class="line">cs[posy[i]].<span class="built_in">push_back</span>(i);</span><br><span class="line">M[<span class="built_in">convert</span>(posx[i],posy[i])]=i;</span><br><span class="line">&#125;</span><br><span class="line">_firstbuild();</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line"><span class="keyword">if</span>(!dfn[i]) <span class="built_in">tarjan</span>(i);</span><br><span class="line">_secondbuild();</span><br><span class="line"><span class="type">int</span> ans=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=cp[<span class="number">0</span>];i++)</span><br><span class="line"><span class="keyword">if</span>(!f[i]) ans=<span class="built_in">max</span>(ans,<span class="built_in">dfs</span>(i));</span><br><span class="line">cout&lt;&lt;ans;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŠ¨æ€è§„åˆ’ </tag>
            
            <tag> å›¾è®º </tag>
            
            <tag> Tarjan </tag>
            
            <tag> å¼ºè¿é€šåˆ†é‡ </tag>
            
            <tag> ç¼©ç‚¹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å›¾è®º | å¼ºè¿é€šåˆ†é‡ | Tarjan | [ä¸­å±±å¸‚  é€‰]æ€äººæ¸¸æˆ</title>
      <link href="/2019/04/07/2019-04-07-%E6%9D%80%E4%BA%BA%E6%B8%B8%E6%88%8F/"/>
      <url>/2019/04/07/2019-04-07-%E6%9D%80%E4%BA%BA%E6%B8%B8%E6%88%8F/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><h2 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h2><p>ä¸€ä½å†·è¡€çš„æ€æ‰‹æ½œå…¥Na-wiatï¼Œå¹¶å‡è£…æˆå¹³æ°‘ã€‚è­¦å¯Ÿå¸Œæœ›èƒ½åœ¨NNNä¸ªäººé‡Œé¢ï¼ŒæŸ¥å‡ºè°æ˜¯æ€æ‰‹ã€‚è­¦å¯Ÿèƒ½å¤Ÿå¯¹æ¯ä¸€ä¸ªäººè¿›è¡ŒæŸ¥è¯ï¼Œå‡å¦‚æŸ¥è¯çš„å¯¹è±¡æ˜¯å¹³æ°‘ï¼Œä»–ä¼šå‘Šè¯‰è­¦å¯Ÿï¼Œä»–è®¤è¯†çš„äººï¼Œè°æ˜¯æ€æ‰‹ï¼Œè°æ˜¯å¹³æ°‘ã€‚å‡å¦‚æŸ¥è¯çš„å¯¹è±¡æ˜¯æ€æ‰‹ï¼Œæ€æ‰‹å°†ä¼šæŠŠè­¦å¯Ÿå¹²æ‰ã€‚ç°åœ¨è­¦å¯ŸæŒæ¡äº†æ¯ä¸€ä¸ªäººè®¤è¯†è°ã€‚æ¯ä¸€ä¸ªäººéƒ½æœ‰å¯èƒ½æ˜¯æ€æ‰‹ï¼Œå¯çœ‹ä½œä»–ä»¬æ˜¯æ€æ‰‹çš„æ¦‚ç‡æ˜¯ç›¸åŒçš„ã€‚</p><p>é—®ï¼šæ ¹æ®æœ€ä¼˜çš„æƒ…å†µï¼Œä¿è¯è­¦å¯Ÿè‡ªèº«å®‰å…¨å¹¶çŸ¥é“è°æ˜¯æ€æ‰‹çš„æ¦‚ç‡æœ€å¤§æ˜¯å¤šå°‘ï¼Ÿ</p><h2 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h2><p>ç¬¬ä¸€è¡Œæœ‰ä¸¤ä¸ªæ•´æ•° N,Mã€‚ æ¥ä¸‹æ¥æœ‰ M è¡Œï¼Œæ¯è¡Œä¸¤ä¸ªæ•´æ•° x,yï¼Œè¡¨ç¤º x è®¤è¯† yï¼ˆy ä¸ä¸€å®šè®¤è¯† x ,ä¾‹å¦‚PresidentåŒå¿—ï¼‰ ã€‚ </p><p>æ³¨ï¼šåŸæ–‡æ•æ„Ÿå†…å®¹å·²æ›¿æ¢</p><h2 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h2><p>ä»…åŒ…å«ä¸€è¡Œä¸€ä¸ªå®æ•°ï¼Œä¿ç•™å°æ•°ç‚¹åé¢ 6 ä½ï¼Œè¡¨ç¤ºæœ€å¤§æ¦‚ç‡ã€‚</p><h2 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">5 4 </span><br><span class="line">1 2 </span><br><span class="line">1 3 </span><br><span class="line">1 4 </span><br><span class="line">1 5 </span><br></pre></td></tr></table></figure><h2 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0.800000</span><br></pre></td></tr></table></figure><blockquote><p><strong>Sample Input å›¾ç¤ºï¼š</strong></p></blockquote><div class="mermaid-wrap"><pre class="mermaid-src" hidden>  graph LRd1((1));d2((2));d3((3));d4((4));d5((5))d1---d2d1---d3d1---d4d1---d5  </pre></div><h2 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><p>è­¦å¯Ÿå¿…é¡»çŸ¥é“æ‰€æœ‰ n ä¸ªäººçš„ä¿¡æ¯æ‰èƒ½æ‰¾åˆ°æ€æ‰‹ï¼Œè€Œå‡è®¾è­¦å¯ŸçŸ¥é“æ‰€æœ‰äººçš„ä¿¡æ¯è‡³å°‘éœ€è¦è¯¢é—®xä¸ªäººçš„è¯ï¼Œé‚£ä¹ˆè¿™x ä¸ªäººä¸­æœ‰æ€æ‰‹çš„å¯èƒ½æ€§å°±æ˜¯ï¼š$\frac{x}{N}$</p><p>æ‰€ä»¥è­¦å¯Ÿä¸ä¼šè¢«æ€æ‰‹å¹²æ‰çš„å¯èƒ½æ€§å°±æ˜¯ï¼š$1-\frac{x}{N}$</p><p>é¦–å…ˆéœ€è¦æ±‚å‡ºåŸå›¾çš„å¼ºè¿é€šåˆ†é‡ï¼Œç„¶åæŠŠæ¯ä¸ª SCC ç¼©ç‚¹å˜ä¸º DAG å›¾ï¼Œæ¥ç€ç»Ÿè®¡å…¥åº¦ä¸º 0 çš„ç‚¹ï¼Œè¿™é‡Œè¦æ³¨æ„ï¼š<strong>å¦‚æœå…¥åº¦ä¸º 0 çš„ç‚¹åªæœ‰ä¸€ä¸ªï¼Œé‚£ä¹ˆ ans å°±æ˜¯ 1 ï¼Œå¦‚æœæœ‰è¶…è¿‡ 1 ä¸ªå…¥åº¦ä¸º 0 çš„ç‚¹ï¼Œåˆ™å½“å…¶ä¸­æœ‰ä¸€ä¸ªç‚¹ï¼ˆå…¶å®æ˜¯å¼ºè¿é€šåˆ†é‡ï¼‰åªåŒ…å«ä¸€ä¸ªç»“ç‚¹æ—¶è­¦å¯Ÿå°±ä¸ç”¨å»é—®äº†</strong></p><p>è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿå› ä¸ºæˆ‘ä»¬èªæ˜çš„è­¦å¯Ÿä¹Ÿä¼šç”¨æ’é™¤æ³•å•Š</p><h2 id="Codes"><a href="#Codes" class="headerlink" title="Codes"></a>Codes</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxn 100001</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxm 300001</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">node</span>&#123;</span><br><span class="line"><span class="type">int</span> neext,tto;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> nxt(x) g[x].neext</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> to(x) g[x].tto</span></span><br><span class="line">&#125;g[maxm]; <span class="type">int</span> head[maxm],tot;</span><br><span class="line"><span class="type">int</span> f[maxn],low[maxn],dfn[maxn];</span><br><span class="line"><span class="type">int</span> cp[maxn],cpt[maxn],dt,n,m;</span><br><span class="line"><span class="type">int</span> indeg[maxn];</span><br><span class="line">stack&lt;<span class="type">int</span>&gt; stk;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">int</span> <span class="title">Sfind</span><span class="params">(<span class="type">int</span> x)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(f[x]==x) <span class="keyword">return</span> x;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">return</span> f[x]=<span class="built_in">Sfind</span>(f[x]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">Einsert</span><span class="params">(<span class="type">int</span> a,<span class="type">int</span> b)</span></span>&#123;</span><br><span class="line"><span class="built_in">nxt</span>(++tot)=head[a];</span><br><span class="line"><span class="built_in">to</span>(tot)=b; head[a]=tot;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">tarjan</span><span class="params">(<span class="type">int</span> u)</span></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> v (to(i))</span></span><br><span class="line">low[u]=dfn[u]=++dt;</span><br><span class="line">stk.<span class="built_in">push</span>(u);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=head[u];i;i=<span class="built_in">nxt</span>(i))&#123;</span><br><span class="line"><span class="keyword">if</span>(!dfn[v])&#123;</span><br><span class="line"><span class="built_in">tarjan</span>(v);</span><br><span class="line">low[u]=<span class="built_in">min</span>(low[u],low[v]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line"><span class="keyword">if</span>(!cp[v]) low[u]=<span class="built_in">min</span>(low[u],dfn[v]);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(low[u]==dfn[u])&#123;</span><br><span class="line">cp[u]=++cp[<span class="number">0</span>];</span><br><span class="line"><span class="keyword">while</span>(stk.<span class="built_in">top</span>()!=u)&#123;</span><br><span class="line">cpt[cp[<span class="number">0</span>]]++;</span><br><span class="line">cp[stk.<span class="built_in">top</span>()]=cp[<span class="number">0</span>];</span><br><span class="line">stk.<span class="built_in">pop</span>();</span><br><span class="line">&#125;</span><br><span class="line">stk.<span class="built_in">pop</span>();</span><br><span class="line">cpt[cp[<span class="number">0</span>]]++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="keyword">undef</span> v</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> ans,indeg0s;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;kill.in&quot;</span>,<span class="string">&quot;r&quot;</span>,stdin);</span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;kill.out&quot;</span>,<span class="string">&quot;w&quot;</span>,stdout);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line">cin&gt;&gt;n&gt;&gt;m; <span class="type">int</span> U,V;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++)&#123;</span><br><span class="line">cin&gt;&gt;U&gt;&gt;V;</span><br><span class="line"><span class="built_in">Einsert</span>(U,V);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line"><span class="keyword">if</span>(!dfn[i])</span><br><span class="line"><span class="built_in">tarjan</span>(i);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> j=head[i];j;j=<span class="built_in">nxt</span>(j))</span><br><span class="line"><span class="keyword">if</span>(cp[i]!=cp[<span class="built_in">to</span>(j)])</span><br><span class="line">indeg[cp[<span class="built_in">to</span>(j)]]++;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=cp[<span class="number">0</span>];i++)</span><br><span class="line"><span class="keyword">if</span>(!indeg[i])</span><br><span class="line">ans=cpt[i], indeg0s++;</span><br><span class="line"><span class="keyword">if</span>(indeg0s&gt;<span class="number">1</span>)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=cp[<span class="number">0</span>];i++)&#123;</span><br><span class="line"><span class="keyword">if</span>(indeg[i]==<span class="number">0</span> &amp;&amp; cpt[i]==<span class="number">1</span>) &#123;indeg0s--;<span class="keyword">break</span>;&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%.6lf&quot;</span>,<span class="number">1</span>-(<span class="type">double</span>)indeg0s/(<span class="type">double</span>)n);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å›¾è®º </tag>
            
            <tag> Tarjan </tag>
            
            <tag> å¼ºè¿é€šåˆ†é‡ </tag>
            
            <tag> ç¼©ç‚¹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å›¾è®º | æœ€çŸ­è·¯å¾„ | SPFA | æœ€å°åœˆ</title>
      <link href="/2019/04/06/2019-04-06-%E6%9C%80%E5%B0%8F%E5%9C%88/"/>
      <url>/2019/04/06/2019-04-06-%E6%9C%80%E5%B0%8F%E5%9C%88/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><h2 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h2><p>å¯¹äºä¸€å¼ æœ‰å‘å›¾ï¼Œè¦ä½ æ±‚å›¾ä¸­æœ€å°åœˆçš„å¹³å‡å€¼æ˜¯å¤šå°‘ï¼Œå³è‹¥ä¸€ä¸ªåœˆç»è¿‡kä¸ªèŠ‚ç‚¹ï¼Œé‚£ä¹ˆä¸€ä¸ªåœˆçš„å¹³å‡å€¼ä¸ºåœˆä¸Škæ¡è¾¹æƒä¹‹å’Œé™¤ä»¥kï¼Œæ±‚å…¶ä¸­çš„æœ€å°å€¼ã€‚</p><h2 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h2><p>ç¬¬ä¸€è¡Œ2ä¸ªæ­£æ•´æ•°ï¼Œåˆ†åˆ«ä¸ºnï¼Œmï¼Œè¡¨ç¤ºæœ‰nä¸ªå®šç‚¹ï¼Œmæ¡è¾¹ä»¥ä¸‹mè¡Œï¼Œæ¯è¡Œ3ä¸ªæ•´ï¼Œåˆ†åˆ«ä»£è¡¨ä¸€æ¡è¾¹çš„èµ·ç‚¹ï¼Œç»ˆç‚¹ï¼Œæƒå€¼ã€‚è¾“å…¥æ•°æ®ä¿è¯è¯¥å›¾æ˜¯è¿é€šçš„ä¸”å­˜åœ¨åœˆã€‚</p><h2 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h2><p>ä¸€è¡Œä¸€ä¸ªæ•°ï¼Œè¡¨ç¤ºæœ€å°åœˆçš„å€¼ï¼Œä¿ç•™8ä½å°æ•°</p><h2 id="Sample-Input-1"><a href="#Sample-Input-1" class="headerlink" title="Sample Input #1"></a>Sample Input #1</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">4 5</span><br><span class="line">1 2 5</span><br><span class="line">2 3 5</span><br><span class="line">3 1 5</span><br><span class="line">2 4 3</span><br><span class="line">4 1 3</span><br></pre></td></tr></table></figure><h2 id="Sample-Output-1"><a href="#Sample-Output-1" class="headerlink" title="Sample Output #1"></a>Sample Output #1</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">3.66666667</span><br></pre></td></tr></table></figure><h2 id="Sample-Input-2"><a href="#Sample-Input-2" class="headerlink" title="Sample Input #2"></a>Sample Input #2</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">2 2</span><br><span class="line">1 2 -2.9</span><br><span class="line">2 1 -3.1</span><br></pre></td></tr></table></figure><h2 id="Sample-Output-2"><a href="#Sample-Output-2" class="headerlink" title="Sample Output #2"></a>Sample Output #2</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-3.00000000</span><br></pre></td></tr></table></figure><blockquote><p><strong>Sample Input #1 å›¾ç¤ºï¼š</strong></p></blockquote><div class="mermaid-wrap"><pre class="mermaid-src" hidden>  graph LRd1((1));d2((2));d3((3));d4((4))d1--5--&gt;d2d2--5--&gt;d3d3--5--&gt;d1d2--3--&gt;d4d4--3--&gt;d1  </pre></div><blockquote><p><strong>æœ€å°åœˆå¦‚å›¾ï¼Œå¹³å‡å€¼ä¸ºï¼š3.66666667</strong></p></blockquote><div class="mermaid-wrap"><pre class="mermaid-src" hidden>  graph LRd1((1));d2((2));d3((3));d4((4))d1--5--&gt;d2d2--5--&gt;d3d3--5--&gt;d1d2--3--&gt;d4d4--3--&gt;d1  </pre></div><h2 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><p>é¢˜ç›®ä¸­çš„æœ€å°åœˆçš„æƒå€¼å¯æ­£å¯è´Ÿï¼Œè€Œæœ€çŸ­è·¯çš„ $SPFA$ ç®—æ³•åªèƒ½åœ¨å›¾ä¸­åˆ¤æ–­è´Ÿç¯ï¼Œ<strong>äºæ˜¯å¯ä»¥äºŒåˆ†è¿™ä¸ªæœ€å°åœˆçš„å¹³å‡æƒå€¼ $mid$ï¼Œç”¨ $SPFA$ åœ¨åŸå›¾ä¸­æ‰¾è´Ÿç¯æ¥ $Check$</strong></p><p><strong>å¦‚æœå½“å‰å›¾ä¸­çš„æ‰€æœ‰è¾¹æƒå‡å»è¿™ä¸ªæƒå€¼åå­˜åœ¨äº†è´Ÿç¯ï¼Œè¯´æ˜åŸå›¾ä¸­çš„æœ€å°åœˆçš„å¹³å‡æƒå€¼å°äºæˆ‘ä»¬å½“å‰çš„ç­”æ¡ˆï¼Œé‚£ä¹ˆ $mid$ éœ€è¦å¾€å°çŒœï¼Œå¦‚æœæ–°å›¾ä¸­ä¸å­˜åœ¨è´Ÿç¯ï¼Œåˆ™æœ€å°åœˆçš„æƒå€¼å¤§äºå½“å‰ç­”æ¡ˆï¼Œ$mid$ ä¹Ÿå°±åº”è¯¥å¢å¤§äº†</strong></p><p>å› ä¸ºå›¾ä¸­ç»™çš„è¾¹æƒæ˜¯ double ç±»å‹ï¼Œæ‰€ä»¥è¦ç”¨åˆ°å®æ•°å‹äºŒåˆ†</p><h2 id="Codes"><a href="#Codes" class="headerlink" title="Codes"></a>Codes</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> cls(Arr,Dst) memset(Arr,Dst,sizeof(Arr))</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxm 10001</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxn 3001</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> INF 1e-10</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> oo 2147483647</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">node</span>&#123;</span><br><span class="line"><span class="type">int</span> u,v;</span><br><span class="line"><span class="type">double</span> vl;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> to(x) g[x].u</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> nxt(x) g[x].v</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> val(x) g[x].vl</span></span><br><span class="line">&#125;g[maxm]; <span class="type">int</span> tot,head[maxm],n,m;</span><br><span class="line"><span class="type">double</span> d[maxn]; <span class="type">bool</span> vis[maxn];</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Einsert</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> y,<span class="type">double</span> _v)</span></span>&#123;</span><br><span class="line"><span class="built_in">nxt</span>(++tot)=head[x];</span><br><span class="line">head[x]=tot; <span class="built_in">to</span>(tot)=y;</span><br><span class="line"><span class="built_in">val</span>(tot)=_v;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">spfa</span><span class="params">(<span class="type">int</span> v0,<span class="type">double</span> del)</span></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> vt to(i)</span></span><br><span class="line">vis[v0]=<span class="literal">true</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=head[v0];i;i=<span class="built_in">nxt</span>(i))&#123;</span><br><span class="line"><span class="keyword">if</span>(d[vt]&gt;d[v0]+<span class="built_in">val</span>(i)-del)&#123;</span><br><span class="line"><span class="keyword">if</span>(vis[vt]) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line">d[vt]=d[v0]+<span class="built_in">val</span>(i)-del;</span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">spfa</span>(vt,del)) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> vis[v0]=<span class="literal">false</span>;</span><br><span class="line"><span class="meta">#<span class="keyword">undef</span> vt</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">bool</span> <span class="title">judge</span><span class="params">(<span class="type">double</span> aver)</span></span>&#123;</span><br><span class="line"><span class="built_in">cls</span>(d,<span class="number">0</span>);<span class="built_in">cls</span>(vis,<span class="number">0</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">spfa</span>(i,aver)) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;testin.txt&quot;</span>,<span class="string">&quot;r&quot;</span>,stdin);</span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;testout.txt&quot;</span>,<span class="string">&quot;w&quot;</span>,stdout);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line">cin&gt;&gt;n&gt;&gt;m; <span class="type">int</span> x,y; <span class="type">double</span> z;</span><br><span class="line"><span class="type">double</span> l,r=oo;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++)&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d%lf&quot;</span>,&amp;x,&amp;y,&amp;z);;</span><br><span class="line"><span class="built_in">Einsert</span>(x,y,z);</span><br><span class="line">&#125;</span><br><span class="line">l=-r; <span class="type">double</span> mid;</span><br><span class="line"><span class="keyword">while</span>(r-l&gt;INF)&#123;</span><br><span class="line">mid=(l+r)/<span class="number">2.0</span>;</span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">judge</span>(mid)) r=mid;</span><br><span class="line"><span class="keyword">else</span> l=mid;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%.8lf&quot;</span>,r);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å›¾è®º </tag>
            
            <tag> æœ€çŸ­è·¯å¾„ </tag>
            
            <tag> SPFA </tag>
            
            <tag> ç¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å›¾è®º | å‰²ç‚¹ | tarjan |ã€€[HAOI2006]å—æ¬¢è¿çš„  ç‰›</title>
      <link href="/2019/03/29/2019-03-29-%5BHAOI2006%5D%E5%8F%97%E6%AC%A2%E8%BF%8E%E7%9A%84%E7%89%9B/"/>
      <url>/2019/03/29/2019-03-29-%5BHAOI2006%5D%E5%8F%97%E6%AC%A2%E8%BF%8E%E7%9A%84%E7%89%9B/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><h2 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h2><p>æ¯ä¸€å¤´ç‰›çš„æ„¿æœ›å°±æ˜¯å˜æˆä¸€å¤´æœ€å—æ¬¢è¿çš„ç‰›ã€‚ç°åœ¨æœ‰Nå¤´ç‰›ï¼Œç»™ä½ Må¯¹æ•´æ•°(A,B)ï¼Œè¡¨ç¤ºç‰›Aè®¤ä¸ºç‰›Bå—æ¬¢è¿ã€‚è¿™ç§å…³ç³»æ˜¯å…·æœ‰ä¼ é€’æ€§çš„ï¼Œå¦‚æœAè®¤ä¸ºBå—æ¬¢è¿ï¼ŒBè®¤ä¸ºCå—æ¬¢è¿ï¼Œé‚£ä¹ˆç‰›Aä¹Ÿè®¤ä¸ºç‰›Cå—æ¬¢è¿ã€‚ä½ çš„ä»»åŠ¡æ˜¯æ±‚å‡ºæœ‰å¤šå°‘å¤´ç‰›è¢«æ‰€æœ‰çš„ç‰›è®¤ä¸ºæ˜¯å—æ¬¢è¿çš„ã€‚</p><h2 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h2><p>ç¬¬ä¸€è¡Œä¸¤ä¸ªæ•°N,Mã€‚</p><p>æ¥ä¸‹æ¥Mè¡Œï¼Œæ¯è¡Œä¸¤ä¸ªæ•°A,Bï¼Œæ„æ€æ˜¯Aè®¤ä¸ºBæ˜¯å—æ¬¢è¿çš„ï¼ˆç»™å‡ºçš„ä¿¡æ¯æœ‰å¯èƒ½é‡å¤ï¼Œå³æœ‰å¯èƒ½å‡ºç°å¤šä¸ªA,Bï¼‰ </p><h2 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h2><p>ä¸€ä¸ªæ•°ï¼Œå³æœ‰å¤šå°‘å¤´ç‰›è¢«æ‰€æœ‰çš„ç‰›è®¤ä¸ºæ˜¯å—æ¬¢è¿çš„ã€‚ </p><h2 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">3 3</span><br><span class="line">1 2</span><br><span class="line">2 1</span><br><span class="line">2 3</span><br></pre></td></tr></table></figure><blockquote><p>ã€€<strong>è¾“å…¥æ ·ä¾‹å›¾ç¤ºï¼š</strong></p></blockquote><div class="mermaid-wrap"><pre class="mermaid-src" hidden>  graph LR1--&gt;22--&gt;12--&gt;3  </pre></div><h2 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1</span><br></pre></td></tr></table></figure><h2 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><p>ç”¨ $Tarjan$ ç¼©ç‚¹æ–¹æ³•è§£å†³è¿™ä¸ªé¢˜ï¼Œå› ä¸ºåœ¨å¥¶ç‰›ç›¸äº’å–œæ¬¢æœ‰å‘å›¾ç½‘ç»œä¸­ï¼Œæ¯ä¸€ä¸ªå¼ºè¿é€šåˆ†é‡é‡Œé¢çš„å¥¶ç‰›æ˜¯æœ€å—æ¬¢è¿çš„ï¼ˆä¸Šå›¾ä¸­çš„ $(1,\;2)â€‹$ å·å¥¶ç‰›ï¼‰</p><p>æ±‚å‡ºæ‰€æœ‰çš„å¼ºè¿é€šåˆ†é‡åï¼ŒåŸå›¾å°†å˜æˆä¸€ä¸ªæœ‰å‘æ— ç¯çš„ $DAG$ å›¾ï¼Œä¹Ÿå°±æ˜¯ï¼š</p><div class="mermaid-wrap"><pre class="mermaid-src" hidden>  graph LR1--&gt;22--&gt;12--&gt;3  </pre></div><p>å‘ç° $3$ å·å¥¶ç‰›æ˜¯æœ€å—æ¬¢è¿çš„ï¼Œä¸” $3$ å·å¥¶ç‰›åœ¨è¿™ä¸ªå›¾é‡Œçš„å…¥åº¦ä¸º $1$ ï¼Œæ‰€ä»¥ç»Ÿè®¡ç¼©ç‚¹åï¼Œå…¥åº¦ä¸º $1$ çš„ç‚¹çš„å¼ºè¿é€šåˆ†é‡ä¸­çš„ç‚¹ä¸ªæ•°ï¼Œå°±æ˜¯ç­”æ¡ˆè¦æ±‚çš„æ•°é‡</p><p><strong>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœç¼©ç‚¹åçš„å›¾å­˜åœ¨ $\geq 2$ ä¸ªå…¥åº¦ä»…ä¸º $1$ çš„ç‚¹ï¼Œé‚£ä¹ˆå°†ä¸ä¼šæœ‰å¥¶ç‰›æ»¡è¶³è¦æ±‚ï¼Œä¾‹å¦‚ï¼š</strong></p><div class="mermaid-wrap"><pre class="mermaid-src" hidden>  graph LR1--&gt;22--&gt;12--&gt;3  </pre></div><p>ç¼©ç‚¹åä¸ºï¼š</p><div class="mermaid-wrap"><pre class="mermaid-src" hidden>  graph LR1--&gt;22--&gt;12--&gt;3  </pre></div><p>$3$ ã€ $6$ã€$\left( 4,\;5 \right)$ éƒ½æ˜¯å…¥åº¦ä»…ä¸º $1$ çš„ç‚¹ï¼Œé‚£ä¹ˆç­”æ¡ˆå°†ä¸º $0$</p><p><strong>å®é™…ç¼–ç¨‹æ—¶ç”±äºå‰å‘æ˜Ÿçš„å…³ç³»ï¼Œç»Ÿè®¡å‡ºåº¦æ›´æ–¹ä¾¿ï¼Œå°†åŸå›¾åè¿‡æ¥å­˜å°±èƒ½è¾¾åˆ°ç»Ÿè®¡å‡ºåº¦çš„ç›®çš„</strong></p><h2 id="Codes"><a href="#Codes" class="headerlink" title="Codes"></a>Codes</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxn 10001</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxm 50001</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">node</span>&#123;</span><br><span class="line"><span class="type">int</span> neext,tto;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> nxt(x) g[x].neext</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> to(x) g[x].tto</span></span><br><span class="line">&#125;g[maxm]; <span class="type">int</span> head[maxm],tot;</span><br><span class="line"><span class="type">int</span> f[maxn],low[maxn],dfn[maxn];</span><br><span class="line"><span class="type">int</span> cp[maxn],cpt[maxn],dt,n,m;</span><br><span class="line"><span class="type">int</span> indeg[maxn];</span><br><span class="line">stack&lt;<span class="type">int</span>&gt; stk;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">int</span> <span class="title">Sfind</span><span class="params">(<span class="type">int</span> x)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(f[x]==x) <span class="keyword">return</span> x;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">return</span> f[x]=<span class="built_in">Sfind</span>(f[x]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">Einsert</span><span class="params">(<span class="type">int</span> a,<span class="type">int</span> b)</span></span>&#123;</span><br><span class="line"><span class="built_in">nxt</span>(++tot)=head[a];</span><br><span class="line"><span class="built_in">to</span>(tot)=b; head[a]=tot;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">tarjan</span><span class="params">(<span class="type">int</span> u)</span></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> v (to(i))</span></span><br><span class="line">low[u]=dfn[u]=++dt;</span><br><span class="line">stk.<span class="built_in">push</span>(u);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=head[u];i;i=<span class="built_in">nxt</span>(i))&#123;</span><br><span class="line"><span class="keyword">if</span>(!dfn[v])&#123;</span><br><span class="line"><span class="built_in">tarjan</span>(v);</span><br><span class="line">low[u]=<span class="built_in">min</span>(low[u],low[v]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line"><span class="keyword">if</span>(!cp[v]) low[u]=<span class="built_in">min</span>(low[u],dfn[v]);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(low[u]==dfn[u])&#123;</span><br><span class="line">cp[u]=++cp[<span class="number">0</span>];</span><br><span class="line"><span class="keyword">while</span>(stk.<span class="built_in">top</span>()!=u)&#123;</span><br><span class="line">cpt[cp[<span class="number">0</span>]]++;</span><br><span class="line">cp[stk.<span class="built_in">top</span>()]=cp[<span class="number">0</span>];</span><br><span class="line">stk.<span class="built_in">pop</span>();</span><br><span class="line">&#125;</span><br><span class="line">stk.<span class="built_in">pop</span>();</span><br><span class="line">cpt[cp[<span class="number">0</span>]]++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="keyword">undef</span> v</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> ans,indeg0s;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;testin.txt&quot;</span>,<span class="string">&quot;r&quot;</span>,stdin);</span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;testout.txt&quot;</span>,<span class="string">&quot;w&quot;</span>,stdout);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line">cin&gt;&gt;n&gt;&gt;m; <span class="type">int</span> U,V;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++)&#123;</span><br><span class="line">cin&gt;&gt;U&gt;&gt;V;</span><br><span class="line"><span class="built_in">Einsert</span>(V,U);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line"><span class="keyword">if</span>(!dfn[i])</span><br><span class="line"><span class="built_in">tarjan</span>(i);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> j=head[i];j;j=<span class="built_in">nxt</span>(j))</span><br><span class="line"><span class="keyword">if</span>(cp[i]!=cp[<span class="built_in">to</span>(j)])</span><br><span class="line">indeg[cp[<span class="built_in">to</span>(j)]]++;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=cp[<span class="number">0</span>];i++)</span><br><span class="line"><span class="keyword">if</span>(!indeg[i])</span><br><span class="line">ans=cpt[i], indeg0s++;</span><br><span class="line"><span class="keyword">if</span>(indeg0s==<span class="number">1</span>) cout&lt;&lt;ans;</span><br><span class="line"><span class="keyword">else</span> cout&lt;&lt;<span class="number">0</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å›¾è®º </tag>
            
            <tag> å‰²ç‚¹ </tag>
            
            <tag> Tarjan </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å›¾è®º | å‰²ç‚¹ | tarjan |ã€€[hnoi2012]çŸ¿åœºæ­å»º</title>
      <link href="/2019/03/29/2019-03-29-%5Bhnoi2012%5D%E7%9F%BF%E5%9C%BA%E6%90%AD%E5%BB%BA/"/>
      <url>/2019/03/29/2019-03-29-%5Bhnoi2012%5D%E7%9F%BF%E5%9C%BA%E6%90%AD%E5%BB%BA/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><h2 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h2><p>ç…¤çŸ¿å·¥åœ°å¯ä»¥çœ‹æˆæ˜¯ç”±éš§é“è¿æ¥æŒ–ç…¤ç‚¹ç»„æˆçš„æ— å‘å›¾ã€‚ä¸ºå®‰å…¨èµ·è§ï¼Œå¸Œæœ›åœ¨å·¥åœ°å‘ç”Ÿäº‹æ•…æ—¶æ‰€æœ‰æŒ–ç…¤ç‚¹çš„å·¥äººéƒ½èƒ½æœ‰ä¸€æ¡å‡ºè·¯é€ƒåˆ°æ•‘æ´å‡ºå£å¤„ã€‚äºæ˜¯çŸ¿ä¸»å†³å®šåœ¨æŸäº›æŒ–ç…¤ç‚¹è®¾ç«‹æ•‘æ´å‡ºå£ï¼Œä½¿å¾—æ— è®ºå“ªä¸€ä¸ªæŒ–ç…¤ç‚¹åå¡Œä¹‹åï¼Œå…¶ä»–æŒ–ç…¤ç‚¹çš„å·¥äººéƒ½æœ‰ä¸€æ¡é“è·¯é€šå‘æ•‘æ´å‡ºå£ã€‚è¯·å†™ä¸€ä¸ªç¨‹åºï¼Œç”¨æ¥è®¡ç®—è‡³å°‘éœ€è¦è®¾ç½®å‡ ä¸ªæ•‘æ´å‡ºå£ï¼Œä»¥åŠä¸åŒæœ€å°‘æ•‘æ´å‡ºå£çš„è®¾ç½®æ–¹æ¡ˆæ€»æ•°ã€‚</p><h2 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h2><p>è¾“å…¥æ–‡ä»¶æœ‰è‹¥å¹²ç»„æ•°æ®ï¼Œæ¯ç»„æ•°æ®çš„ç¬¬ä¸€è¡Œæ˜¯ä¸€ä¸ªæ­£æ•´æ•° Nï¼ˆNâ‰¤500ï¼‰ï¼Œè¡¨ç¤ºå·¥åœ°çš„éš§é“æ•°ï¼Œæ¥ä¸‹æ¥çš„ N è¡Œæ¯è¡Œæ˜¯ç”¨ç©ºæ ¼éš”å¼€çš„ä¸¤ä¸ªæ•´æ•° S å’Œ Tï¼Œè¡¨ç¤ºæŒ–S ä¸æŒ–ç…¤ç‚¹ T ç”±éš§é“ç›´æ¥è¿æ¥ã€‚è¾“å…¥æ•°æ®ä»¥ 0 ç»“å°¾ã€‚</p><h2 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h2><p>è¾“å…¥æ–‡ä»¶ä¸­æœ‰å¤šå°‘ç»„æ•°æ®ï¼Œè¾“å‡ºæ–‡ä»¶ output.txt ä¸­å°±æœ‰å¤šå°‘è¡Œã€‚æ¯è¡Œå¯¹åº”ä¸€ç»„ã€€ã€€è¾“å…¥æ•°æ®çš„ ç»“æœã€‚å…¶ä¸­ç¬¬ i è¡Œä»¥ Case i: å¼€å§‹ï¼ˆæ³¨æ„å¤§å°å†™ï¼ŒCase ä¸ i ä¹‹é—´æœ‰ç©ºæ ¼ï¼Œi ä¸:ä¹‹é—´æ— ç©ºæ ¼ï¼Œ: ä¹‹åæœ‰ç©ºæ ¼ï¼‰ï¼Œå…¶åæ˜¯ç”¨ç©ºæ ¼éš”å¼€çš„ä¸¤ä¸ªæ­£æ•´æ•°ï¼Œç¬¬ä¸€ä¸ªæ­£æ•´æ•°è¡¨ç¤ºå¯¹äºç¬¬ i ç»„è¾“å…¥æ•°æ®è‡³å°‘éœ€ è¦è®¾ç½®å‡ ä¸ªæ•‘æ´å‡ºå£ï¼Œç¬¬äºŒä¸ªæ­£æ•´æ•°è¡¨ç¤ºå¯¹äºç¬¬ i ç»„è¾“å…¥æ•°æ®ä¸åŒæœ€å°‘æ•‘æ´å‡ºå£çš„è®¾ç½®æ–¹æ¡ˆæ€» æ•°ã€‚è¾“å…¥æ•°æ®ä¿è¯ç­”æ¡ˆå°äº 2^64ã€‚è¾“å‡ºæ ¼å¼å‚ç…§ä»¥ä¸‹è¾“å…¥è¾“å‡ºæ ·ä¾‹ã€‚</p><h2 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">9</span><br><span class="line">1 3</span><br><span class="line">4 1</span><br><span class="line">3 5</span><br><span class="line">1 2</span><br><span class="line">2 6</span><br><span class="line">1 5</span><br><span class="line">6 3</span><br><span class="line">1 6</span><br><span class="line">3 2</span><br><span class="line">6</span><br><span class="line">1 2</span><br><span class="line">1 3</span><br><span class="line">2 4</span><br><span class="line">2 5</span><br><span class="line">3 6</span><br><span class="line">3 7</span><br><span class="line">0</span><br></pre></td></tr></table></figure><blockquote><p><strong>è¾“å…¥æ ·ä¾‹å›¾ç¤º1ï¼š</strong></p></blockquote><div class="mermaid-wrap"><pre class="mermaid-src" hidden>  graph LR1---34---13---51---22---61---56---31---63---2  </pre></div><blockquote><p> <strong>è¾“å…¥æ ·ä¾‹å›¾ç¤º2ï¼š</strong></p></blockquote><div class="mermaid-wrap"><pre class="mermaid-src" hidden>  graph LR1---34---13---51---22---61---56---31---63---2  </pre></div><h2 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Case 1: 2 4</span><br><span class="line">Case 2: 4 1</span><br></pre></td></tr></table></figure><h2 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><p>ä¸€é“æ±‚è§£ç‚¹åŒè”é€šå›¾çš„é¢˜ç›®ï¼Œç”¨ $Tarjan$ ç®—æ³•è§£å†³</p><p><strong>ç»™å‡ºçš„åŸå›¾å…·ä½“æ¥è¯´æœ‰ä¸‰ç§æƒ…å†µï¼š</strong></p><ol><li>æ˜¯ä¸€ä¸ªç‚¹åŒè”é€šå›¾ï¼Œæ²¡æœ‰å‰²ç‚¹ï¼Œä»æ‰€æœ‰ç‚¹ä¸­ä»»æ„é€‰å–2ä¸ªç‚¹ä½œä¸ºå‡ºå£</li><li>åªæœ‰ä¸€ä¸ªå‰²ç‚¹ï¼Œé‚£ä¹ˆä»å…¶ä½™çš„ç‚¹ä¸­é€‰å–ä»»æ„ä¸€ä¸ªç‚¹æ¥å»ºç«‹å‡ºå£</li><li>å‰²ç‚¹æ•° $\geq2$ ï¼Œæ­¤æ—¶ä¸éœ€è¦å†å»ºç«‹å‡ºå£ï¼Œå‰²ç‚¹èƒ½ä½œä¸ºå‡ºå£ä½¿ç”¨</li></ol><p>éœ€è¦ç”¨åˆ°ç»„åˆå…¬å¼</p><h2 id="Codes"><a href="#Codes" class="headerlink" title="Codes"></a>Codes</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> clean(x) (memset(x,0,sizeof(x))) </span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxm 100005</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">node</span>&#123;</span><br><span class="line"><span class="type">int</span> neext,tto;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> nxt(x) g[x].neext</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> to(x) g[x].tto</span></span><br><span class="line">&#125;g[maxm*<span class="number">2</span>]; <span class="type">int</span> head[maxm],tot;</span><br><span class="line"><span class="type">int</span> dfn[maxm],low[maxm];</span><br><span class="line"><span class="type">int</span> root,dt; vector&lt;<span class="type">int</span>&gt; vdcc[maxm];</span><br><span class="line"><span class="type">int</span> vdccs; <span class="type">bool</span> cp[maxm];</span><br><span class="line">stack&lt;<span class="type">int</span>&gt; S; <span class="type">int</span> m,n;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">Einsert</span><span class="params">(<span class="type">int</span> a,<span class="type">int</span> b)</span></span>&#123;</span><br><span class="line"><span class="built_in">nxt</span>(++tot)=head[a];</span><br><span class="line"><span class="built_in">to</span>(tot)=b; head[a]=tot;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">tarjan</span><span class="params">(<span class="type">int</span> u)</span></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> v (to(i))</span></span><br><span class="line">low[u]=dfn[u]=++dt; <span class="type">int</span> shead;</span><br><span class="line">S.<span class="built_in">push</span>(u); <span class="type">int</span> chi=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=head[u];i;i=<span class="built_in">nxt</span>(i))&#123;</span><br><span class="line"><span class="keyword">if</span>(!dfn[v])&#123;</span><br><span class="line">chi++;<span class="built_in">tarjan</span>(v);</span><br><span class="line">low[u]=<span class="built_in">min</span>(low[u],low[v]);</span><br><span class="line"><span class="keyword">if</span>((u!=root &amp;&amp; dfn[u]&lt;=low[v])||(u==root &amp;&amp; chi&gt;<span class="number">1</span>))</span><br><span class="line">cp[u]=<span class="literal">true</span>;</span><br><span class="line"><span class="keyword">if</span>(dfn[u]&lt;=low[v])&#123;</span><br><span class="line">vdccs++; vdcc[vdccs].<span class="built_in">clear</span>();</span><br><span class="line"><span class="keyword">do</span>&#123;</span><br><span class="line">shead=S.<span class="built_in">top</span>();S.<span class="built_in">pop</span>();</span><br><span class="line">vdcc[vdccs].<span class="built_in">push_back</span>(shead);</span><br><span class="line">&#125;<span class="keyword">while</span>(shead!=v);</span><br><span class="line">vdcc[vdccs].<span class="built_in">push_back</span>(u);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> low[u]=<span class="built_in">min</span>(low[u],dfn[v]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="keyword">undef</span> v</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">Res</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">clean</span>(dfn);<span class="built_in">clean</span>(low);<span class="built_in">clean</span>(cp);</span><br><span class="line"><span class="keyword">while</span>(!S.<span class="built_in">empty</span>()) S.<span class="built_in">pop</span>();</span><br><span class="line">dt=vdccs=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line"><span class="keyword">if</span>(!dfn[i])&#123;</span><br><span class="line">root=i;</span><br><span class="line"><span class="built_in">tarjan</span>(i);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">ll res=<span class="number">0</span>,num=<span class="number">1</span>; <span class="type">int</span> Vlen,cnum;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=vdccs;i++)&#123;</span><br><span class="line">Vlen=vdcc[i].<span class="built_in">size</span>();</span><br><span class="line">cnum=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;Vlen;j++)</span><br><span class="line"><span class="keyword">if</span>(cp[vdcc[i][j]]) cnum++;</span><br><span class="line"><span class="keyword">if</span>(cnum==<span class="number">0</span>) res+=<span class="number">2</span>, num=num*(Vlen<span class="number">-1</span>)*Vlen/<span class="number">2</span>;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(cnum==<span class="number">1</span>) res++,num=num*(Vlen<span class="number">-1</span>);</span><br><span class="line">&#125;</span><br><span class="line">cout&lt;&lt;res&lt;&lt;<span class="string">&#x27; &#x27;</span>&lt;&lt;num;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;testin.txt&quot;</span>,<span class="string">&quot;r&quot;</span>,stdin);</span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;testout.txt&quot;</span>,<span class="string">&quot;w&quot;</span>,stdout);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line">cin&gt;&gt;m; <span class="type">int</span> U,V,ss=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span>(m)&#123;</span><br><span class="line">n=<span class="number">0</span>; ss++;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++)&#123;</span><br><span class="line">cin&gt;&gt;U&gt;&gt;V;</span><br><span class="line"><span class="built_in">Einsert</span>(U,V);</span><br><span class="line"><span class="built_in">Einsert</span>(V,U);</span><br><span class="line">n=<span class="built_in">max</span>(n,<span class="built_in">max</span>(U,V));</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;Case %d: &quot;</span>,ss); </span><br><span class="line"><span class="built_in">Res</span>();</span><br><span class="line"><span class="built_in">clean</span>(g);<span class="built_in">clean</span>(head);tot=<span class="number">0</span>;</span><br><span class="line"><span class="built_in">putchar</span>(<span class="string">&#x27;\n&#x27;</span>);</span><br><span class="line">cin&gt;&gt;m;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å›¾è®º </tag>
            
            <tag> å‰²ç‚¹ </tag>
            
            <tag> Tarjan </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å›¾è®º | æœ€å°ç”Ÿæˆæ ‘ | æœ€çŸ­è·¯å¾„ |  \ é»‘æš—åŸå ¡ Dark Castle</title>
      <link href="/2019/03/29/2019-03-29-%E9%BB%91%E6%9A%97%E5%9F%8E%E5%A0%A1%20DarkCastle/"/>
      <url>/2019/03/29/2019-03-29-%E9%BB%91%E6%9A%97%E5%9F%8E%E5%A0%A1%20DarkCastle/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><h2 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h2><p>åœ¨é¡ºåˆ©æ”»ç ´ Lord lsp çš„é˜²çº¿ä¹‹åï¼Œlqr ä¸€è¡Œäººæ¥åˆ°äº† Lord lsp çš„åŸå ¡ä¸‹æ–¹ã€‚Lord lsp é»‘åŒ–ä¹‹åè™½ç„¶æ‹¥æœ‰äº†å¼ºå¤§çš„è¶…èƒ½åŠ›ï¼Œèƒ½å¤Ÿç”¨æ„å¿µåŠ›åˆ¶é€ å»ºç­‘ç‰©ï¼Œä½†æ˜¯æ™ºå•†æ°´å¹³å´æ²¡æ€ä¹ˆå¢åŠ ã€‚ç°åœ¨ lqr å·²ç»ææ¸…æ¥šé»‘æš—åŸå ¡æœ‰ N ä¸ªæˆ¿é—´ï¼ŒM æ¡å¯ä»¥åˆ¶é€ çš„åŒå‘é€šé“ï¼Œä»¥åŠæ¯æ¡é€šé“çš„é•¿åº¦ã€‚</p><p>lqr æ·±çŸ¥ Lord lsp çš„æƒ³æ³•ï¼Œ ä¸ºäº†é¿å…æ¯æ¬¡éƒ½è¦ç¢ç£¨ä¸¤ä¸ªæˆ¿é—´ä¹‹é—´çš„æœ€çŸ­è·¯å¾„ï¼ŒLord lspä¸€å®šä¼šæŠŠåŸå ¡ä¿®å»ºæˆæ ‘å½¢çš„ï¼› ä½†æ˜¯ï¼Œä¸ºäº†å°½é‡æé«˜è‡ªå·±çš„ç§»åŠ¨æ•ˆç‡ï¼ŒLord lsp ä¸€å®šä¼šä½¿å¾—åŸå ¡æ»¡è¶³ä¸‹é¢çš„æ¡ä»¶ï¼šè®¾ Di ä¸ºå¦‚æœæ‰€æœ‰çš„é€šé“éƒ½è¢«ä¿®å»ºï¼Œ ç¬¬ i å·æˆ¿é—´ä¸ç¬¬ 1 å·æˆ¿é—´çš„æœ€çŸ­è·¯å¾„é•¿åº¦ï¼›è€Œ Si ä¸ºå®é™…ä¿®å»ºçš„æ ‘å½¢åŸå ¡ä¸­ç¬¬ i å·æˆ¿é—´ä¸ç¬¬1 å·æˆ¿é—´çš„è·¯å¾„é•¿åº¦ï¼Œå¯¹äºæ‰€æœ‰æ»¡è¶³ 1â‰¤iâ‰¤N çš„æ•´æ•° iï¼Œæœ‰ Si = Diã€‚ä¸ºäº†æ‰“è´¥ Lord lspï¼Œlqr æƒ³çŸ¥é“æœ‰å¤šå°‘ç§ä¸åŒçš„åŸå ¡ä¿®å»ºæ–¹æ¡ˆã€‚äºæ˜¯ lqr å‘ applepi æå‡ºäº†è¿™ä¸ªé—®é¢˜ã€‚ç”±äº applepi è¿˜è¦å¿™ç€å‡ºæ¨¡æ‹Ÿèµ›ï¼Œæ‰€ä»¥è¿™ä¸ªä»»åŠ¡å°±äº¤ç»™ä½ äº†ã€‚å½“ç„¶ï¼Œä½ åªéœ€è¦è¾“å‡ºç­”æ¡ˆå¯¹ 2^31 â€“ 1 å–æ¨¡ä¹‹åçš„ç»“æœå°±è¡Œäº†ã€‚</p><h2 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h2><p>ç¬¬ä¸€è¡Œæœ‰ä¸¤ä¸ªæ•´æ•° N å’Œ Mã€‚</p><p>ä¹‹å M è¡Œï¼Œæ¯è¡Œä¸‰ä¸ªæ•´æ•° Xï¼ŒY å’Œ Lï¼Œè¡¨ç¤ºå¯ä»¥ä¿®å»º X å’Œ Y ä¹‹é—´çš„ä¸€æ¡é•¿åº¦ä¸º L çš„é€šé“ã€‚</p><h2 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h2><p>è¾“å‡ºä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºç­”æ¡ˆå¯¹ 2^31 â€“ 1 å–æ¨¡ä¹‹åçš„ç»“æœã€‚</p><h2 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">3 3</span><br><span class="line">1 2 2</span><br><span class="line">1 3 1</span><br><span class="line">2 3 1</span><br></pre></td></tr></table></figure><blockquote><p><strong>è¾“å…¥æ ·ä¾‹å›¾ç¤ºï¼š</strong></p></blockquote><div class="mermaid-wrap"><pre class="mermaid-src" hidden>  graph LR1--2---21--1---32--1---3  </pre></div><h2 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2</span><br></pre></td></tr></table></figure><h2 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><p>é¦–å…ˆå°±æ˜¯å¯¹åŸå›¾è·‘ä¸€ä¸ªæœ€çŸ­è·¯å¾„ï¼ˆè¿™é‡Œç”¨çš„æ˜¯ $Dijkstkra$ + å †ä¼˜åŒ–ï¼‰ï¼Œç„¶åæš´åŠ›ç»Ÿè®¡</p><p>æ ¹æ®é¢˜ç›®è¦æ±‚ï¼Œ<strong>è‹¥ $father[y]=x$ï¼Œä¸” $z=val(edge(x,y))$ï¼Œå°±åº”è¯¥æœ‰ $dist[y]=dist[x]+z$ï¼ˆ$y$ çš„å±‚æ¬¡æ¯” $x$ æ·±ï¼‰</strong>ï¼Œå…ˆæŠŠæ‰€æœ‰èŠ‚ç‚¹æŒ‰ç…§ $Dist$ å€¼æ’åº</p><p><strong>ä¾æ¬¡è€ƒè™‘æŠŠæ¯ä¸ªèŠ‚ç‚¹ $p\in G$ åŠ å…¥æ ‘å½¢åŸå ¡æœ‰å¤šå°‘ç§æ–¹æ³•ï¼Œé‚£ä¹ˆåªè¦å­˜åœ¨èŠ‚ç‚¹ $x$ ï¼Œä½¿å¾— $x$ å’Œ $p$ æ»¡è¶³ä¸Šè¿°å¼å­ï¼Œé‚£ä¹ˆ $p$ ä¸ä»»æ„ $x$ ç›¸è¿éƒ½å¯ä»¥ï¼Œåœ¨ $p$ ç‚¹è¿™ä¸€æ­¥å°±æœ‰ $cnt$ ç§é€‰æ‹©ï¼Œå…¶ä¸­ $cnt$ è¡¨ç¤ºæ»¡è¶³æ¡ä»¶çš„ $x$ ä¸ªæ•°</strong></p><p>ç”±äºæ ‘çš„å±‚æ¬¡å…³ç³»ï¼Œåªéœ€è€ƒè™‘ $pâ€‹$ ä¸å±‚æ¬¡æµ…äº $pâ€‹$ çš„ç‚¹ç›¸è¿ï¼Œä¹Ÿå°±æ˜¯ $Distâ€‹$ å€¼å°äº $pâ€‹$ çš„ç‚¹å³å¯</p><p>ç¬¬ä¸€ä¸ªç‚¹ï¼ˆ$Dist$ å€¼æœ€å°çš„ï¼‰æ— éœ€è€ƒè™‘ï¼Œä¹˜æ³•åŸç†ï¼Œå°†æ¯ä¸€æ­¥å¾—å‡ºçš„ $cnt$ ä¹˜èµ·æ¥å°±æ˜¯ç»“æœï¼ˆè¿‡ç¨‹ä¸­å–æ¨¡ï¼‰</p><h2 id="Codes"><a href="#Codes" class="headerlink" title="Codes"></a>Codes</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span> </span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxm 500001</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxn 100001</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> Smaxn 1001</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> oo 1999999999</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> oo2 127</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MOD 2147483647</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="type">int</span>,<span class="type">int</span>&gt; pr;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">node</span>&#123;</span><br><span class="line"><span class="type">int</span> tto,nxxt,vval;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> to(x) g[x].tto</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> nxt(x) g[x].nxxt</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> val(x) g[x].vval</span></span><br><span class="line">&#125;g[maxm*<span class="number">2</span>]; <span class="type">int</span> fir[maxm*<span class="number">2</span>];</span><br><span class="line"><span class="type">int</span> dist[maxn],tot,n,m;</span><br><span class="line"><span class="type">bool</span> vis[maxn]; <span class="type">int</span> r[Smaxn][Smaxn];</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">Einsert</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> y,<span class="type">int</span> _val)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(x==y) <span class="keyword">return</span>;</span><br><span class="line"><span class="built_in">nxt</span>(++tot)=fir[x];</span><br><span class="line">fir[x]=tot;</span><br><span class="line"><span class="built_in">to</span>(tot)=y;</span><br><span class="line"><span class="built_in">val</span>(tot)=_val;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dijkstkra</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++) dist[i]=oo;</span><br><span class="line">dist[<span class="number">1</span>]=<span class="number">0</span>; vis[<span class="number">1</span>]=<span class="literal">true</span>;</span><br><span class="line">priority_queue&lt;pr&gt; q;</span><br><span class="line"><span class="function">pr <span class="title">head</span><span class="params">(<span class="number">0</span>,<span class="number">0</span>)</span></span>; <span class="type">int</span> _next,_val,_begin;</span><br><span class="line">q.<span class="built_in">push</span>(<span class="built_in">make_pair</span>(<span class="number">0</span>,<span class="number">1</span>));</span><br><span class="line"><span class="keyword">while</span>(!q.<span class="built_in">empty</span>())&#123;</span><br><span class="line">head=q.<span class="built_in">top</span>(); q.<span class="built_in">pop</span>();</span><br><span class="line"><span class="keyword">if</span>(dist[head.second]!=-head.first) <span class="keyword">continue</span>;</span><br><span class="line">vis[head.second]=<span class="literal">true</span>;</span><br><span class="line">_begin=fir[head.second];</span><br><span class="line"><span class="keyword">while</span>(_begin!=<span class="number">0</span>)&#123;</span><br><span class="line"><span class="keyword">if</span>(dist[<span class="built_in">to</span>(_begin)]&gt;dist[head.second]+<span class="built_in">val</span>(_begin))</span><br><span class="line"><span class="keyword">if</span>(!vis[<span class="built_in">to</span>(_begin)])</span><br><span class="line">dist[<span class="built_in">to</span>(_begin)]=dist[head.second]+<span class="built_in">val</span>(_begin),</span><br><span class="line">q.<span class="built_in">push</span>(<span class="built_in">make_pair</span>(-dist[<span class="built_in">to</span>(_begin)],<span class="built_in">to</span>(_begin)));</span><br><span class="line">_begin=<span class="built_in">nxt</span>(_begin);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">MyCmp</span><span class="params">(<span class="type">int</span> a,<span class="type">int</span> b)</span></span>&#123;</span><br><span class="line"><span class="keyword">return</span> dist[a]&lt;dist[b];</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> id[maxn];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;testin.txt&quot;</span>,<span class="string">&quot;r&quot;</span>,stdin);</span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;testout.txt&quot;</span>,<span class="string">&quot;w&quot;</span>,stdout);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;m); <span class="type">int</span> a,b,c;</span><br><span class="line"><span class="built_in">memset</span>(r,oo2,<span class="built_in">sizeof</span>(r));</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++)&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>,&amp;a,&amp;b,&amp;c);</span><br><span class="line"><span class="built_in">Einsert</span>(a,b,c);</span><br><span class="line"><span class="built_in">Einsert</span>(b,a,c);</span><br><span class="line">r[a][b]=r[b][a]=<span class="built_in">min</span>(r[a][b],c);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">dijkstkra</span>();</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++) id[i]=i;</span><br><span class="line"><span class="built_in">sort</span>(id+<span class="number">1</span>,id+n+<span class="number">1</span>,MyCmp);</span><br><span class="line"><span class="type">int</span> cnt=<span class="number">0</span>; <span class="type">long</span> <span class="type">long</span> ans=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">2</span>;i&lt;=n;i++)&#123;</span><br><span class="line">cnt=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=i<span class="number">-1</span>;j++)</span><br><span class="line"><span class="keyword">if</span>(dist[id[j]]+r[id[i]][id[j]]==dist[id[i]])</span><br><span class="line">cnt++;</span><br><span class="line">ans=(ans*cnt)%MOD;</span><br><span class="line">&#125;</span><br><span class="line">cout&lt;&lt;ans;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å›¾è®º </tag>
            
            <tag> æœ€å°ç”Ÿæˆæ ‘ </tag>
            
            <tag> æœ€çŸ­è·¯å¾„ </tag>
            
            <tag> Dijkstkra </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ•°è®º | åŒä½™ | ä¸€ä¸­OJ_P1133ã€åŸ¹è®­é¢˜  ã€‘Hanksonçš„è¶£å‘³é¢˜</title>
      <link href="/2019/03/28/2019-03-28-MathJax%E6%B5%8B%E8%AF%95/"/>
      <url>/2019/03/28/2019-03-28-MathJax%E6%B5%8B%E8%AF%95/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><p><a href="http://newoj.cqyz.cn/problem/P1133"><font color=orange size=5><strong>è·³è½¬åˆ°åœ¨çº¿é¡µé¢</strong></font></a></p><h2 id="Description"><a href="#Description" class="headerlink" title=" Description"></a><font color=#3199DF > <strong>Description</strong></font></h2><p>Hanksåšå£«æ˜¯BTï¼ˆBio-Techï¼Œç”Ÿç‰©æŠ€æœ¯ï¼‰é¢†åŸŸçš„çŸ¥åä¸“å®¶ï¼Œä»–çš„å„¿å­åå«Hanksonã€‚ç°åœ¨ï¼Œåˆšåˆšæ”¾å­¦å›å®¶çš„Hanksonæ­£åœ¨æ€è€ƒä¸€ä¸ªæœ‰è¶£çš„é—®é¢˜ã€‚</p><p>ã€€ã€€ä»Šå¤©åœ¨è¯¾å ‚ä¸Šï¼Œè€å¸ˆè®²è§£äº†å¦‚ä½•æ±‚ä¸¤ä¸ªæ­£æ•´æ•°c1å’Œc2çš„æœ€å¤§å…¬çº¦æ•°å’Œæœ€å°å…¬å€æ•°ã€‚ç°åœ¨ Hanksonè®¤ä¸ºè‡ªå·±å·²ç»ç†Ÿç»ƒåœ°æŒæ¡äº†è¿™äº›çŸ¥è¯†ï¼Œä»–å¼€å§‹æ€è€ƒä¸€ä¸ªâ€œæ±‚å…¬çº¦æ•°â€å’Œâ€œæ±‚å…¬å€æ•°â€ä¹‹ç±»é—®é¢˜çš„â€œé€†é—®é¢˜â€ï¼Œè¿™ä¸ªé—®é¢˜æ˜¯è¿™æ ·çš„ï¼šå·²çŸ¥æ­£æ•´æ•° a0,a1,b0,b1ï¼Œè®¾æŸæœªçŸ¥æ­£æ•´æ•°xæ»¡è¶³ï¼š</p><p>ã€€ã€€1ã€xå’Œa0çš„æœ€å¤§å…¬çº¦æ•°æ˜¯a1ï¼›</p><p>ã€€ã€€2ã€xå’Œb0çš„æœ€å°å…¬å€æ•°æ˜¯b1ã€‚</p><p>ã€€ã€€Hanksonçš„â€œé€†é—®é¢˜â€å°±æ˜¯æ±‚å‡ºæ»¡è¶³æ¡ä»¶çš„æ­£æ•´æ•°xã€‚ä½†ç¨åŠ æ€ç´¢ä¹‹åï¼Œä»–å‘ç°è¿™æ ·çš„xå¹¶ä¸å”¯ä¸€ï¼Œç”šè‡³å¯èƒ½ä¸å­˜åœ¨ã€‚å› æ­¤ä»–è½¬è€Œå¼€å§‹è€ƒè™‘å¦‚ä½•æ±‚è§£æ»¡è¶³æ¡ä»¶çš„xçš„ä¸ªæ•°ã€‚è¯·ä½ å¸®åŠ©ä»–ç¼–ç¨‹æ±‚è§£è¿™ä¸ªé—®é¢˜ã€‚</p><h2 id="Input"><a href="#Input" class="headerlink" title=" Input"></a><font color=#3199DF > <strong>Input</strong></font></h2><p>ç¬¬ä¸€è¡Œä¸ºä¸€ä¸ªæ­£æ•´æ•°nï¼Œè¡¨ç¤ºæœ‰nç»„è¾“å…¥æ•°æ®ã€‚æ¥ä¸‹æ¥çš„nè¡Œæ¯è¡Œä¸€ç»„è¾“å…¥æ•°æ®ï¼Œä¸ºå››ä¸ªæ­£æ•´æ•°a0ï¼Œa1ï¼Œb0ï¼Œb1ï¼Œæ¯ä¸¤ä¸ªæ•´æ•°ä¹‹é—´ç”¨ä¸€ä¸ªç©ºæ ¼éš”å¼€ã€‚è¾“å…¥æ•°æ®ä¿è¯a0èƒ½è¢«a1æ•´é™¤ï¼Œb1èƒ½è¢«b0æ•´é™¤ã€‚</p><h2 id="Output"><a href="#Output" class="headerlink" title=" Output"></a><font color=#3199DF > <strong>Output</strong></font></h2><p>å…±nè¡Œã€‚æ¯ç»„è¾“å…¥æ•°æ®çš„è¾“å‡ºç»“æœå ä¸€è¡Œï¼Œä¸ºä¸€ä¸ªæ•´æ•°ã€‚ã€€ã€€å¯¹äºæ¯ç»„æ•°æ®ï¼šè‹¥ä¸å­˜åœ¨è¿™æ ·çš„xï¼Œè¯·è¾“å‡º0ï¼›ã€€ã€€è‹¥å­˜åœ¨è¿™æ ·çš„xï¼Œè¯·è¾“å‡ºæ»¡è¶³æ¡ä»¶çš„xçš„ä¸ªæ•°ï¼›</p><h2 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title=" Sample Input"></a><font color=#3199DF > <strong>Sample Input</strong></font></h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">2</span><br><span class="line">41 1 96 288</span><br><span class="line">95 1 37 1776</span><br></pre></td></tr></table></figure><h2 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title=" Sample Output"></a><font color=#3199DF > <strong>Sample Output</strong></font></h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">6</span><br><span class="line">2</span><br></pre></td></tr></table></figure><h2 id="Hint"><a href="#Hint" class="headerlink" title=" Hint"></a><font color=#3199DF > <strong>Hint</strong></font></h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">å¯¹äº50%çš„æ•°æ®ï¼Œä¿è¯æœ‰1â‰¤a0ï¼Œb1ï¼Œb0ï¼Œb1â‰¤10000ä¸”nâ‰¤100ã€‚å¯¹äº100%çš„æ•°æ®ï¼Œä¿è¯æœ‰1â‰¤a0ï¼Œb1ï¼Œb0ï¼Œb1â‰¤2,000,000,000ä¸”nâ‰¤2000ã€‚</span><br></pre></td></tr></table></figure><h1 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title=" åˆ†æ"></a><font color=purple > <strong>åˆ†æ</strong></font></h1><blockquote><p><strong>ä¸¤ä¸ªæ•°çš„ä¹˜ç§¯ç­‰äºè¿™ä¸¤ä¸ªæ•°çš„æœ€å¤§å…¬çº¦æ•°ä¸æœ€å°å…¬å€æ•°çš„ä¹˜ç§¯</strong></p></blockquote><p>â€”â€”ç™¾åº¦çƒ­å¿ƒç½‘å‹</p><p>é¦–å…ˆç”±ï¼š</p><script type="math/tex; mode=display">\begin{cases}lcm(xï¼Œb_0)=b_1 \\\\gcd(xï¼Œa_0)=a_1\end{cases}\Rightarrow\begin{cases}x=k_1a_1 \\\\b_1=k_2x\end{cases}(k_1ï¼Œk_2\in Z)</script><p>å¯çŸ¥<strong>xæ˜¯b1çš„ä¸€ä¸ªå› å­ä¸”ä¸ºa1å€æ•°</strong>ï¼Œå› è€Œ<strong>ä»1åˆ°sqrt(b1)æšä¸¾æ¯ä¸ªæ•´é™¤b1çš„æ•°å­—</strong>ï¼Œè‹¥å…¶æ˜¯a1çš„æ•´æ•°å€ï¼Œä¸”æ»¡è¶³ä¸Šè¿°äºŒå¼åˆ™ans+1<br>æš´åŠ›æšä¸¾åœ¨ä¸€ä¸­OJä¸Šå¯ä»¥å¾—90åˆ†â€¦</p><p>100åˆ†è§£æ³•è¿˜è¦æ¨å‡ºæ›´æ·±çš„ç»“è®ºï¼š</p><script type="math/tex; mode=display">gcd(xï¼Œa_0)=a_1 \\\\ \Rightarrow\begin{cases}x=k_1a_1 \\\\ a_0=k_2a_1\end{cases}(k_1ï¼Œk_2\in Z)\\\\ \Rightarrow gcd(k_1,k_2)=1</script><p>åˆ™ï¼š</p><script type="math/tex; mode=display">gcd(aï¼Œb)=k \\\\ \Rightarrow gcd(\frac{a}{k}ï¼Œ\frac{b}{k})=1</script><p>è¿›ä¸€æ­¥çš„æˆ‘ä»¬æœ‰ï¼š</p><script type="math/tex; mode=display">lcm(x,b_0)=b_1 \\\\ \Rightarrowgcd(xï¼Œb_0)=\frac{x\times b_0}{lcm(xï¼Œb0)}=\frac{x\times b_0}{b_1} \\\\ \Rightarrowgcd\left(\frac{xb_1}{xb_0}ï¼Œ\frac{b_0b_1}{xb_0}\right)=gcd\left(\frac{b_1}{b_0}ï¼Œ\frac{b_1}{x}\right)=1</script><p>è®¾ç½®å‡ ä¸ªè¾…åŠ©å˜é‡ï¼š</p><script type="math/tex; mode=display">m=\frac{a_0}{a_1}ï¼Œn=\frac{b_1}{b_0}ï¼Œp=\frac{b_1}{x}ï¼Œs=\frac{b_1}{a_1} \\\\ \Rightarrow\begin{cases} gcd(pï¼Œm)=1\\gcd\left( \frac{s}{p}ï¼Œn \right)=1 \end{cases}</script><p><strong>è€ƒè™‘gcd(s/p,n)=1</strong>è¦æ»¡è¶³s/pä¸næ²¡æœ‰å…¬å…±è´¨å› æ•°ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦å°†s/pä¸nçš„å…¬å…±è´¨å› æ•°ç­›å»ï¼Œå¾—åˆ°æ»¡è¶³æ¡ä»¶çš„æ•°Tï¼ŒTæ˜¯s/pçš„æŸä¸ªå› æ•°</p><p>åˆå› ä¸ºgcd(p,m)=1ï¼Œ<strong>è€Œs/p=Tr(rä¸ºæ•´æ•°)</strong>ï¼Œé‚£ä¹ˆp=s/(T*r)ï¼Œåˆ™gcd(s/(T*r),n)=1ï¼Œåˆ©ç”¨åˆšæ‰æ–¹æ³•å°†ä¸¤è€…çš„å…¬å…±è´¨å› æ•°ç­›å»å¾—åˆ°Sï¼Œé‚£ä¹ˆSçš„å› æ•°ä¸ªæ•°å°±æ˜¯ç­”æ¡ˆ</p><h1 id="Codes"><a href="#Codes" class="headerlink" title=" Codes"></a><font color=green > <strong>Codes</strong></font></h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// hankson è¶£å‘³é¢˜ </span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> LL;</span><br><span class="line">LL a0,a1,b0,b1,ans;</span><br><span class="line"><span class="function">LL <span class="title">gcd</span><span class="params">(LL a,LL b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(a&lt;b) <span class="built_in">swap</span>(a,b);</span><br><span class="line"><span class="keyword">return</span> b==<span class="number">0</span>?a:<span class="built_in">gcd</span>(b,a%b);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> LL <span class="title">lcm</span><span class="params">(LL a,LL b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> a*b/<span class="built_in">gcd</span>(a,b);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> LL <span class="title">seprate</span><span class="params">(LL a,LL b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">LL S=<span class="built_in">sqrt</span>(b);</span><br><span class="line"><span class="keyword">for</span>(LL i=<span class="number">2</span>;i&lt;=S;i++)&#123;</span><br><span class="line"><span class="keyword">if</span>(b%i==<span class="number">0</span>)</span><br><span class="line"><span class="keyword">while</span>(a%i==<span class="number">0</span>) a/=i;</span><br><span class="line"><span class="keyword">while</span>(b%i==<span class="number">0</span>) b/=i;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(b!=<span class="number">1</span>) <span class="keyword">while</span>(a%b==<span class="number">0</span>) a/=b;</span><br><span class="line"><span class="keyword">return</span> a;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;testin.txt&quot;</span>,<span class="string">&quot;r&quot;</span>,stdin);</span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;testout.txt&quot;</span>,<span class="string">&quot;w&quot;</span>,stdout);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"><span class="type">int</span> T;</span><br><span class="line">cin&gt;&gt;T;</span><br><span class="line"><span class="keyword">while</span>(T--)&#123;</span><br><span class="line">cin&gt;&gt;a0&gt;&gt;a1&gt;&gt;b0&gt;&gt;b1;</span><br><span class="line">ans=<span class="number">0</span>;</span><br><span class="line">LL m=a0/a1,n=b1/b0,s=b1/a1;</span><br><span class="line">LL tmp1=<span class="built_in">seprate</span>(s,n);</span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">gcd</span>(s/tmp1,m)!=<span class="number">1</span>) cout&lt;&lt;<span class="number">0</span>&lt;&lt;<span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line">LL tmp2=<span class="built_in">seprate</span>(tmp1,m);</span><br><span class="line">LL S=<span class="built_in">sqrt</span>(tmp2);</span><br><span class="line"><span class="keyword">for</span>(LL i=<span class="number">1</span>;i&lt;=S;i++)</span><br><span class="line"><span class="keyword">if</span>(tmp2%i==<span class="number">0</span>)</span><br><span class="line">ans+=(tmp2/i==i)?<span class="number">1</span>:<span class="number">2</span>;</span><br><span class="line">cout&lt;&lt;ans&lt;&lt;<span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°è®º </tag>
            
            <tag> åŒä½™ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å›¾è®º | æœ€å°ç”Ÿæˆæ ‘ | æ¬¡å°ç”Ÿæˆæ ‘  \ | ç§˜å¯†çš„ç‰›å¥¶è¿è¾“</title>
      <link href="/2019/03/26/2019-03-26-%E7%A7%98%E5%AF%86%E7%9A%84%E7%89%9B%E5%A5%B6%E8%BF%90%E8%BE%93/"/>
      <url>/2019/03/26/2019-03-26-%E7%A7%98%E5%AF%86%E7%9A%84%E7%89%9B%E5%A5%B6%E8%BF%90%E8%BE%93/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><h2 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h2><p>çº¦ç¿°å”å”å¸Œæœ›èƒ½å¤Ÿå»‰ä»·è¿æ¥ä»–çš„ä¾›æ°´ç³»ç»Ÿï¼Œä½†æ˜¯ä»–ä¸å¸Œæœ›ä»–çš„ç«äº‰å¯¹æ‰‹çŸ¥é“ä»–é€‰æ‹©çš„è·¯çº¿ã€‚ä¸€èˆ¬è¿™æ ·çš„é—®é¢˜éœ€è¦é€‰æ‹©æœ€ä¾¿å®œçš„æ–¹å¼ï¼Œæ‰€ä»¥ä»–å†³å®šé¿å…è¿™ç§æƒ…å†µè€Œé‡‡ç”¨ç¬¬äºŒä¾¿å®œçš„æ–¹å¼ã€‚ ç°åœ¨æœ‰W(3 &lt;= W &lt;= 2000)ä¸ªä¾›æ°´ç«™ï¼Œå…¶ä¸­æœ€å¤šæœ‰P(P &lt;=20,000)&lt; span=â€â€œ&gt;æ¡ç®¡é“ï¼Œæ¯ä¸€æ¡ç®¡é“è¿æ¥äº†ä¸¤ä¸ªæ°´ç«™ï¼Œå¹¶ä¸”ä¸å­˜åœ¨ä¸€æ¡ç®¡é“è¿æ¥åŒä¸€ä¸ªæ°´ç«™ï¼Œä¸¤ä¸ªæ°´ç«™ä¹‹é—´æœ€å¤šåªæœ‰ä¸€æ¡ç®¡é“ã€‚æ¯æ¡ç®¡é“æœ‰ä¸€å®šçš„è´¹ç”¨ã€‚è¯·å¯»æ‰¾ç¬¬äºŒä¾¿å®œçš„è¿æ¥æ–¹å¼ï¼Œä½¿æ‰€æœ‰çš„æ°´ç«™ç›¸è¿ã€‚ å‡è®¾æœ€ä¾¿å®œçš„æ–¹æ¡ˆæœ‰ä¸”åªæœ‰ä¸€ç§ï¼Œå¹¶ä¸”è‡³å°‘æœ‰ä¸¤ç§å¯è¡Œçš„è¿æ¥æ–¹æ¡ˆã€‚æ‰€æœ‰çš„è´¹ç”¨éƒ½ä¸è¶…è¿‡16ä½æœ‰ç¬¦å·æ•´æ•°ã€‚æ°´ç«™ç”¨1åˆ°Wçš„è‡ªç„¶æ•°è¡¨ç¤º</p><h2 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h2><p>ç¬¬ä¸€è¡Œï¼šä¸¤ä¸ªæ•°Wå’ŒP ç¬¬2ï½P+1è¡Œï¼šæ¯è¡Œæè¿°äº†ä¸€æ¡ç®¡é“ï¼Œæœ‰3ä¸ªç”¨ç©ºæ ¼åˆ†å¼€çš„æ•´æ•°ï¼Œå‰ä¸¤ä¸ªæ•°è¡¨ç¤ºç®¡é“è¿æ¥çš„ä¸¤ä¸ªç«¯ç‚¹ã€‚ç¬¬3ä¸ªæ•°æ˜¯ç®¡é“çš„è´¹ç”¨</p><h2 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h2><p>ä»…ä¸€è¡Œï¼Œç¬¬äºŒä¾¿å®œçš„ç®¡é“é“ºè®¾è´¹ç”¨</p><h2 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">5 7 </span><br><span class="line">1 2 3 </span><br><span class="line">2 3 4 </span><br><span class="line">1 4 7 </span><br><span class="line">2 4 11 </span><br><span class="line">2 5 9 </span><br><span class="line">5 4 5 </span><br><span class="line">3 5 8</span><br></pre></td></tr></table></figure><blockquote><p><strong>è¾“å…¥æ•°æ®å›¾ç¤ºï¼š</strong></p></blockquote><div class="mermaid-wrap"><pre class="mermaid-src" hidden>  graph LR1--3---22--4---31--7---42--11---42--9---55--5---43--8---5  </pre></div><h2 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">20</span><br></pre></td></tr></table></figure><h2 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><p>ä¸€é“æ¬¡å°ç”Ÿæˆæ ‘çš„é¢˜ç›®ï¼Œåœ¨çŸ¥é“ $Kruskal$ ç®—æ³•æ±‚è§£æœ€å°ç”Ÿæˆæ ‘ä¹‹åï¼Œå®¹æ˜“æƒ³åˆ°ä¸€ç§æš´åŠ›è§£æ³•ï¼š</p><p><strong>åˆ©ç”¨ $Kruskal$ æ±‚å‡ºæœ€å°ç”Ÿæˆæ ‘ä¹‹åï¼Œåœ¨åŸå›¾ä¸­ä¾æ¬¡åˆ é™¤æ ‘è¾¹ï¼Œå†æ¬¡æ„å»ºæœ€å°ç”Ÿæˆæ ‘ï¼Œå–æ–°çš„ç”Ÿæˆæ ‘çš„æœ€å°å’Œæƒå°±æ˜¯æ¬¡å°ç”Ÿæˆæ ‘</strong><br>{:.info}</p><p>è¿™ç§æ–¹æ³•ä¸ä½†å¯ä»¥æ±‚æ¬¡å°ç”Ÿæˆæ ‘ï¼Œä¹Ÿå¯ä»¥æ±‚ä¸¥æ ¼æ¬¡å°ç”Ÿæˆæ ‘ï¼Œä½†æ˜¯æ˜æ˜¾ä¼šè¶…æ—¶ï¼ˆåœ¨<a href="https://www.luogu.org/problemnew/show/P4180">P4180 ã€æ¨¡æ¿ã€‘ä¸¥æ ¼æ¬¡å°ç”Ÿæˆæ ‘(BJWC2010)</a>ä¸­åªèƒ½å¾—åˆ°50åˆ†ï¼‰</p><p><strong>ä»ä¹¦ä¸Šæ‘˜å–çš„ä¼˜åŒ–ç®—æ³•ï¼š</strong></p><p>é¢„å¤„ç†å‡º $Max[i][j]â€‹$ è¡¨ç¤ºå½“å‰æ±‚å‡ºçš„æœ€å°ç”Ÿæˆæ ‘ä¸­ï¼Œç‚¹ $iâ€‹$ å’Œç‚¹ $jâ€‹$ çš„å”¯ä¸€è·¯å¾„ä¸Šçš„æœ€é•¿è¾¹çš„æƒå€¼ï¼Œæ±‚è§£æ—¶é—´ï¼š$O(n^2)â€‹$ï¼Œç„¶åï¼Œä¸Šè¿°ç®—æ³•çš„æ¢è¾¹æ“ä½œæ”¹å†™ä¸ºï¼šå¯¹äºä¸åœ¨æ ‘ä¸­çš„è¾¹ï¼Œè€ƒè™‘åŠ å…¥è¿™æ¡è¾¹ $(u,v)â€‹$ï¼Œæ›¿æ¢æƒå€¼ä¸º $Max(u,v)â€‹$ çš„æ ‘è¾¹ï¼Œæ­¤æ—¶çš„æƒå€¼å’Œä¸ºï¼š$Ans=Ans+G[u][v]-Max[u][v]â€‹$<br>{:.success}<br>åœ¨æ‰€æœ‰çš„$Ans$ ä¸­å–æœ€å°å€¼ï¼Œå°±æ˜¯æ¬¡å°ç”Ÿæˆæ ‘çš„æƒå€¼ï¼Œæ—¶é—´å¤æ‚åº¦ï¼š$O(n^2+m)$<br>{:.success}</p><p><strong>ä¸‹é¢è¯´ $Maxâ€‹$ æ•°ç»„çš„æ±‚æ³•ï¼š</strong></p><p>æŒ‰ç…§è¾¹çš„æƒå€¼å¯¹è¾¹é›†æ•°ç»„æ’åºåï¼Œæ¯æ¬¡åŠ å…¥çš„è¾¹æƒé€’å¢ï¼Œæ‰€ä»¥æœ‰ $Max[u][v]=G[E[i].u][E[i].v]â€‹$</p><p>ä½†æ˜¯æˆ‘ä»¬ä¸ä»…è¦æ›´æ–° $Max[u][v]â€‹$ çš„å€¼ï¼Œç”±äº $Kruskalâ€‹$ æ±‚è§£æœ€å°ç”Ÿæˆæ ‘æ˜¯ä¸€ä¸ªé€æ¸è”é€šçš„è¿‡ç¨‹ï¼Œå®šä¹‰å˜é•¿æ•°ç»„$V[i]â€‹$ è¡¨ç¤ºä¸ $iâ€‹$ è”é€šçš„ç‚¹ï¼Œåˆå§‹æ—¶ $V[i].push_\ back(i),i\in [1,n]â€‹$ï¼Œè¡¨ç¤ºæœ€å¼€å§‹çš„æ—¶å€™ï¼Œæ¯ä¸ªç‚¹æ˜¯ç‹¬ç«‹è”é€šçš„</p><p>æ¯æ¬¡åŠ å…¥ä¸€æ¡è¾¹ï¼Œå°† $E[i]$ çš„ $u$ ç«¯ç‚¹çš„è”é€šç‚¹é›†åŠ å…¥åˆ° $v$ çš„è”é€šç‚¹é›†ä¸­å»ï¼Œæ›´æ–° $Max$ æ—¶ï¼Œå¯¹äºä»»æ„çš„ $p_1\;p_2,\;p_1\;\in V[u]ï¼Œ\;p_2\in V[v]$ éƒ½æœ‰ $Max[p_1][p_2]=Max[p_2][p_1]=E[i].value$</p><p>è¿™ä¸ªä¸éš¾ç†è§£ï¼Œå› ä¸º$p_1\;p_2â€‹$ å·²ç»è”é€šï¼Œé‚£ä¹ˆä»–ä»¬çš„å”¯ä¸€è·¯å¾„ä¸Šçš„æœ€å¤§è¾¹æƒå°±æ˜¯ä»–ä»¬çš„è”é€šç‚¹é›†çš„æ–°åŠ å…¥çš„è¾¹æƒï¼Œä¸ºä»€ä¹ˆè¿™ä¸ªæ–°åŠ å…¥çš„è¾¹æ˜¯æœ€é•¿çš„å‘¢ï¼Ÿå› ä¸ºæˆ‘ä»¬æ˜¯æŒ‰ç…§è¾¹æƒé€’å¢æ¥æ’åºçš„</p><h2 id="Codes"><a href="#Codes" class="headerlink" title="Codes"></a>Codes</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxn 2001</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxm 20001</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">int</span> maax[maxn][maxn];</span><br><span class="line"><span class="type">int</span> f[maxn],n,m; <span class="type">bool</span> mst[maxm];</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; E[maxn];</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">node</span>&#123;</span><br><span class="line"><span class="type">int</span> u,v,val;</span><br><span class="line"><span class="type">bool</span> <span class="keyword">operator</span> &lt;(<span class="type">const</span> node &amp;obj)<span class="type">const</span>&#123;</span><br><span class="line"><span class="keyword">return</span> val&lt;obj.val;</span><br><span class="line">&#125;</span><br><span class="line">&#125;g[maxm];</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">int</span> <span class="title">Sfind</span><span class="params">(<span class="type">int</span> x)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(f[x]==x) <span class="keyword">return</span> x;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">return</span> f[x]=<span class="built_in">Sfind</span>(f[x]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> Sunion(u1,u2) (f[Sfind(u1)]=Sfind(u2))</span></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">int</span> <span class="title">kruskal</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> u g[i].u</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> v g[i].v</span></span><br><span class="line"><span class="built_in">sort</span>(g+<span class="number">1</span>,g+m+<span class="number">1</span>); <span class="type">int</span> sumT=<span class="number">0</span>,k=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">f[i]=i,</span><br><span class="line">E[i].<span class="built_in">push_back</span>(i);</span><br><span class="line"><span class="type">int</span> FU,FV;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++)&#123;</span><br><span class="line"><span class="keyword">if</span>(k==n<span class="number">-1</span>) <span class="keyword">break</span>;</span><br><span class="line">FU=<span class="built_in">Sfind</span>(u);FV=<span class="built_in">Sfind</span>(v);</span><br><span class="line"><span class="keyword">if</span>(FU!=FV)&#123;</span><br><span class="line">mst[i]=<span class="literal">true</span>; k++;</span><br><span class="line">sumT+=g[i].val; f[FU]=FV;</span><br><span class="line"><span class="type">int</span> lenu=E[FU].<span class="built_in">size</span>(),lenv=E[FV].<span class="built_in">size</span>();</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> r=<span class="number">0</span>;r&lt;lenu;r++)</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> h=<span class="number">0</span>;h&lt;lenv;h++)</span><br><span class="line">maax[E[FU][r]][E[FV][h]]=maax[E[FV][h]][E[FU][r]]=g[i].val;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> r=<span class="number">0</span>;r&lt;lenu;r++)</span><br><span class="line">E[FV].<span class="built_in">push_back</span>(E[FU][r]);</span><br><span class="line">&#125;</span><br><span class="line">&#125; <span class="type">int</span> tar=<span class="number">99999999</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++)</span><br><span class="line"><span class="keyword">if</span>(!mst[i])</span><br><span class="line">tar=<span class="built_in">min</span>(tar,sumT+g[i].val-maax[u][v]);</span><br><span class="line"><span class="keyword">return</span> tar;</span><br><span class="line">    <span class="meta">#<span class="keyword">undef</span> u</span></span><br><span class="line">    <span class="meta">#<span class="keyword">undef</span> v</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;testin.txt&quot;</span>,<span class="string">&quot;r&quot;</span>,stdin);</span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;testout.txt&quot;</span>,<span class="string">&quot;w&quot;</span>,stdout);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line">cin&gt;&gt;n&gt;&gt;m;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++)</span><br><span class="line">cin&gt;&gt;g[i].u&gt;&gt;g[i].v&gt;&gt;g[i].val;</span><br><span class="line">cout&lt;&lt;<span class="built_in">kruskal</span>();</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å›¾è®º </tag>
            
            <tag> æœ€å°ç”Ÿæˆæ ‘ </tag>
            
            <tag> æ¬¡å°ç”Ÿæˆæ ‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å›¾è®º | äºŒåˆ† | æœ€å°ç”Ÿæˆæ ‘ | [å›½å®¶  é›†è®­é˜Ÿ2]Tree I</title>
      <link href="/2019/03/25/2019-03-25-NationalTeamI_Tree/"/>
      <url>/2019/03/25/2019-03-25-NationalTeamI_Tree/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><h2 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h2><p>ç»™ä½ ä¸€ä¸ªæ— å‘å¸¦æƒè¿é€šå›¾ï¼Œæ¯æ¡è¾¹æ˜¯é»‘è‰²æˆ–ç™½è‰²ã€‚è®©ä½ æ±‚ä¸€æ£µæœ€å°æƒçš„æ°å¥½æœ‰needæ¡ç™½è‰²è¾¹çš„ç”Ÿæˆæ ‘ã€‚é¢˜ç›®ä¿è¯æœ‰è§£ã€‚</p><h2 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h2><p>ç¬¬ä¸€è¡ŒV,E,needåˆ†åˆ«è¡¨ç¤ºç‚¹æ•°ï¼Œè¾¹æ•°å’Œéœ€è¦çš„ç™½è‰²è¾¹æ•°ã€‚æ¥ä¸‹æ¥Eè¡Œæ¯è¡Œs,t,c,colè¡¨ç¤ºè¿™è¾¹çš„ç«¯ç‚¹(ç‚¹ä»0å¼€å§‹æ ‡å·)ï¼Œè¾¹æƒï¼Œé¢œè‰²(0ç™½è‰²1é»‘è‰²)ã€‚</p><h2 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h2><p>ä¸€è¡Œè¡¨ç¤ºæ‰€æ±‚ç”Ÿæˆæ ‘çš„è¾¹æƒå’Œã€‚</p><h2 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">2 2 1</span><br><span class="line">0 1 1 1</span><br><span class="line">0 1 2 0</span><br></pre></td></tr></table></figure><blockquote><p>å›¾ç¤ºï¼š</p></blockquote><div class="mermaid-wrap"><pre class="mermaid-src" hidden>  graph LR0--&quot;1(black)&quot;---10--&quot;2(white)&quot;---1  </pre></div><h2 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2</span><br></pre></td></tr></table></figure><h2 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><p>è¿™é“é¢˜è¦ç”¨åˆ°äºŒåˆ†æ³•ï¼Œå¯¹ $Kruskal$ ç®—æ³•è¿›è¡Œå˜å½¢ï¼Œé¦–å…ˆæˆ‘ä»¬åœ¨å¯¹è¾¹é›†æ’åºæ—¶ï¼Œè¦è®©å€¼ç›¸ç­‰çš„æƒ…å†µä¸‹ç™½è‰²è¾¹åœ¨å‰ï¼ˆä¸ºäº†é€‰è¾¹åšå‡†å¤‡ï¼‰ï¼Œç„¶åä¸ºäº†å½±å“ $Kruskal$ çš„é€‰è¾¹è¿‡ç¨‹ï¼Œå¯¹æ‰€æœ‰çš„ç™½è‰²è¾¹åŠ ä¸Šä¸€ä¸ªæƒå€¼ï¼Œè¿™ä¸ªæƒå€¼å¯æ­£å¯è´Ÿï¼Œè¿™æ˜¯å› ä¸ºå°†ç¼–è¾¹é›†æ•°ç»„æ’åºæ—¶ï¼š</p><ol><li><strong>é™„åŠ æƒä¸ºæ­£æ—¶ï¼Œè¡¨ç¤ºå½“å‰çš„ç™½è‰²è¾¹è¿‡å¤šï¼Œæˆ‘ä»¬è®©æƒå€¼è¾ƒå¤§çš„ç™½è‰²è¾¹å†å¤§ä¸€ç‚¹ï¼Œå°±å¯ä»¥è¢«$Kruskal$ ç®—æ³•æ’é™¤åœ¨æœ€å°ç”Ÿæˆæ ‘å¤–é¢ï¼Œè¾¾åˆ°å°‘é€‰çš„ç›®çš„</strong></li><li><strong>é™„åŠ æƒä¸ºè´Ÿæ—¶ï¼Œè¡¨ç¤ºå½“å‰çš„ç™½è‰²è¾¹è¿‡å°‘ï¼Œè®©æ‰€æœ‰ç™½è‰²è¾¹æƒå€¼å˜å°ã€å‰ç§»å°±å¯ä»¥å¤šé€‰ç™½è‰²è¾¹</strong></li></ol><p>å‘ç°è¿™æ ·åšå®é™…ä¸Šåªå½±å“äº†ç™½è‰²è¾¹å’Œé»‘è‰²è¾¹çš„é¡ºåºï¼Œæ²¡æœ‰å½±å“ç™½è‰²è¾¹ä¹‹é—´çš„ç›¸å¯¹é¡ºåºï¼Œå› æ­¤ $Kruskal$ é€‰å‡ºæ¥çš„è¾¹å°±è¿˜ä¼šæ˜¯æ»¡è¶³éœ€è¦çš„æ¡ä»¶ä¸‹çš„æœ€å°ç”Ÿæˆæ ‘</p><p>è¦äºŒåˆ†çš„å°±æ˜¯é™„åŠ æƒçš„æƒå€¼ï¼ŒäºŒåˆ†ç›´åˆ°æœ€å°ç”Ÿæˆæ ‘ä¸­åˆšå¥½æœ‰ $need$ æ¡ç™½è‰²è¾¹ï¼Œæ¯æ¬¡è®© $Kruskal$ è¿”å›ä¸€ä¸ªå€¼ $cntâ€‹$ ï¼Œè¡¨ç¤ºé€‰äº†å¤šå°‘æ¡ç™½è‰²è¾¹ï¼Œç„¶åï¼š</p><div class="table-container"><table><thead><tr><th style="text-align:center">$cnt\geq need$</th><th style="text-align:center">$cnt&lt;need$</th></tr></thead><tbody><tr><td style="text-align:center">è¯´æ˜ç™½è‰²è¾¹è¾ƒå¤šï¼Œéœ€è¦è°ƒå°æƒå€¼</td><td style="text-align:center">è¯´æ˜ç™½è‰²å˜è¾ƒå°‘ï¼Œéœ€è¦è°ƒå¤§æƒå€¼</td></tr></tbody></table></div><p>äºŒåˆ†å®Œï¼Œæ­¤æ—¶çš„ç›®æ ‡æƒå€¼å’Œä¸º $Sum-need\times add$ï¼Œ$add$ æ˜¯äºŒåˆ†çš„æƒå€¼ï¼Œæ¯æ¬¡äºŒåˆ†å®Œåè®°å¾—æ¢å¤åŸæ¥çš„è¾¹æƒ</p><h2 id="Codes"><a href="#Codes" class="headerlink" title="Codes"></a>Codes</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxV 50001</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxE 100001</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">node</span>&#123;</span><br><span class="line"><span class="type">int</span> u,v,val;</span><br><span class="line"><span class="type">int</span> c;</span><br><span class="line"><span class="type">bool</span> <span class="keyword">operator</span> &lt;(<span class="type">const</span> node &amp;obj)<span class="type">const</span>&#123;</span><br><span class="line"><span class="keyword">if</span>(val==obj.val) <span class="keyword">return</span> c&lt;obj.c;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">return</span> val&lt;obj.val;</span><br><span class="line">&#125;</span><br><span class="line">&#125;g[maxE]; <span class="type">int</span> f[maxV],V,E,need;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">int</span> <span class="title">Sfind</span><span class="params">(<span class="type">int</span> x)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(f[x]==x) <span class="keyword">return</span> x;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">return</span> f[x]=<span class="built_in">Sfind</span>(f[x]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> Sunion(u1,u2) (f[Sfind(u1)]=Sfind(u2))</span></span><br><span class="line"><span class="function">pair&lt;<span class="type">int</span>,<span class="type">int</span>&gt; <span class="title">kruskal</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">sort</span>(g+<span class="number">1</span>,g+E+<span class="number">1</span>);</span><br><span class="line"><span class="type">int</span> cnt=<span class="number">0</span>,ans=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;=V;i++) f[i]=i;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=E;i++)&#123;</span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">Sfind</span>(g[i].u)!=<span class="built_in">Sfind</span>(g[i].v))&#123;</span><br><span class="line"><span class="built_in">Sunion</span>(g[i].u,g[i].v);</span><br><span class="line">ans+=g[i].val;</span><br><span class="line"><span class="keyword">if</span>(g[i].c==<span class="number">0</span>) cnt++;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="built_in">make_pair</span>(cnt,ans);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;testin.txt&quot;</span>,<span class="string">&quot;r&quot;</span>,stdin);</span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;testout.txt&quot;</span>,<span class="string">&quot;w&quot;</span>,stdout);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line">cin&gt;&gt;V&gt;&gt;E&gt;&gt;need; <span class="type">int</span> l,r=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=E;i++)&#123;</span><br><span class="line">cin&gt;&gt;g[i].u&gt;&gt;g[i].v&gt;&gt;g[i].val&gt;&gt;g[i].c;</span><br><span class="line">g[i].u++; g[i].v++;</span><br><span class="line">r=<span class="built_in">max</span>(r,g[i].val);</span><br><span class="line">&#125;</span><br><span class="line">l=r*<span class="number">-1</span>; <span class="type">int</span> mid; pair&lt;<span class="type">int</span>,<span class="type">int</span>&gt; res;</span><br><span class="line"><span class="type">int</span> ret=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span>(l&lt;=r)&#123;</span><br><span class="line">mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=E;i++)</span><br><span class="line"><span class="keyword">if</span>(g[i].c==<span class="number">0</span>) g[i].val+=mid;</span><br><span class="line">res=<span class="built_in">kruskal</span>();</span><br><span class="line"><span class="keyword">if</span>(res.first&gt;=need)</span><br><span class="line">ret=res.second-need*mid,</span><br><span class="line">l=mid+<span class="number">1</span>;</span><br><span class="line"><span class="keyword">else</span> r=mid<span class="number">-1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=E;i++)</span><br><span class="line"><span class="keyword">if</span>(g[i].c==<span class="number">0</span>) g[i].val-=mid;</span><br><span class="line">&#125;</span><br><span class="line">cout&lt;&lt;ret;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åˆ†æ²» </tag>
            
            <tag> äºŒåˆ† </tag>
            
            <tag> å›¾è®º </tag>
            
            <tag> æœ€å°ç”Ÿæˆæ ‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å›¾è®º | æœ€å°ç”Ÿæˆæ ‘ | [HAOI2006]èˆ’é€‚çš„  è·¯çº¿</title>
      <link href="/2019/03/24/2019-03-24-%E6%97%85%E8%A1%8C/"/>
      <url>/2019/03/24/2019-03-24-%E6%97%85%E8%A1%8C/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><h2 id="Descripiton"><a href="#Descripiton" class="headerlink" title="Descripiton"></a>Descripiton</h2><p>Zå°é•‡æ˜¯ä¸€ä¸ªæ™¯è‰²å®œäººçš„åœ°æ–¹ï¼Œå¸å¼•æ¥è‡ªå„åœ°çš„è§‚å…‰å®¢æ¥æ­¤æ—…æ¸¸è§‚å…‰ã€‚</p><p>Zå°é•‡é™„è¿‘å…±æœ‰N(1&lt;Nâ‰¤500)ä¸ªæ™¯ç‚¹ï¼ˆç¼–å·ä¸º1,2,3,â€¦,Nï¼‰ï¼Œè¿™äº›æ™¯ç‚¹è¢«Mï¼ˆ0&lt;Mâ‰¤5000ï¼‰æ¡é“è·¯è¿æ¥ç€ï¼Œæ‰€æœ‰é“è·¯éƒ½æ˜¯åŒå‘çš„ï¼Œä¸¤ä¸ªæ™¯ç‚¹ä¹‹é—´å¯èƒ½æœ‰å¤šæ¡é“è·¯ã€‚ä¹Ÿè®¸æ˜¯ä¸ºäº†ä¿æŠ¤è¯¥åœ°çš„æ—…æ¸¸èµ„æºï¼ŒZå°é•‡æœ‰ä¸ªå¥‡æ€ªçš„è§„å®šï¼Œå°±æ˜¯å¯¹äºä¸€æ¡ç»™å®šçš„å…¬è·¯Riï¼Œä»»ä½•åœ¨è¯¥å…¬è·¯ä¸Šè¡Œé©¶çš„è½¦è¾†é€Ÿåº¦å¿…é¡»ä¸ºViã€‚</p><p>é¢‘ç¹çš„æ”¹å˜é€Ÿåº¦ä½¿å¾—æ¸¸å®¢ä»¬å¾ˆä¸èˆ’æœï¼Œå› æ­¤å¤§å®¶ä»ä¸€ä¸ªæ™¯ç‚¹å‰å¾€å¦ä¸€ä¸ªæ™¯ç‚¹çš„æ—¶å€™ï¼Œéƒ½å¸Œæœ›é€‰æ‹©è¡Œä½¿è¿‡ç¨‹ä¸­æœ€å¤§é€Ÿåº¦å’Œæœ€å°é€Ÿåº¦çš„æ¯”å°½å¯èƒ½å°çš„è·¯çº¿ï¼Œä¹Ÿå°±æ˜¯æ‰€è°“æœ€èˆ’é€‚çš„è·¯çº¿ã€‚</p><h2 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h2><p>ç¬¬ä¸€è¡ŒåŒ…å«ä¸¤ä¸ªæ­£æ•´æ•°ï¼ŒNå’ŒMã€‚</p><p>æ¥ä¸‹æ¥çš„Mè¡Œæ¯è¡ŒåŒ…å«ä¸‰ä¸ªæ­£æ•´æ•°ï¼šxï¼Œyå’Œvï¼ˆ1â‰¤x,yâ‰¤Nï¼Œ0 æœ€åä¸€è¡ŒåŒ…å«ä¸¤ä¸ªæ­£æ•´æ•°sï¼Œtï¼Œè¡¨ç¤ºæƒ³çŸ¥é“ä»æ™¯ç‚¹såˆ°æ™¯ç‚¹tæœ€å¤§æœ€å°é€Ÿåº¦æ¯”æœ€å°çš„è·¯å¾„ã€‚så’Œtä¸å¯èƒ½ç›¸åŒã€‚</p><h2 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h2><p>ç¬¬ä¸€è¡ŒåŒ…å«ä¸¤ä¸ªæ­£æ•´æ•°ï¼ŒNå’ŒMã€‚</p><p>æ¥ä¸‹æ¥çš„Mè¡Œæ¯è¡ŒåŒ…å«ä¸‰ä¸ªæ­£æ•´æ•°ï¼šxï¼Œyå’Œvï¼ˆ1â‰¤x,yâ‰¤Nï¼Œ0 æœ€åä¸€è¡ŒåŒ…å«ä¸¤ä¸ªæ­£æ•´æ•°sï¼Œtï¼Œè¡¨ç¤ºæƒ³çŸ¥é“ä»æ™¯ç‚¹såˆ°æ™¯ç‚¹tæœ€å¤§æœ€å°é€Ÿåº¦æ¯”æœ€å°çš„è·¯å¾„ã€‚så’Œtä¸å¯èƒ½ç›¸åŒã€‚</p><h2 id="Samples"><a href="#Samples" class="headerlink" title="Samples"></a>Samples</h2><div class="table-container"><table><thead><tr><th style="text-align:center">#</th><th style="text-align:center">Input</th><th style="text-align:center">Output</th></tr></thead><tbody><tr><td style="text-align:center">1</td><td style="text-align:center">$4\;2\\1\;2\;1\\3\;4\;2\\1\;4$</td><td style="text-align:center">$IMPOSSIBLE$</td></tr><tr><td style="text-align:center">2</td><td style="text-align:center">$3\;3\\1\;2\;10\\1\;2\;5\\2\;3\;8\\1\;3$</td><td style="text-align:center">$5/4$</td></tr><tr><td style="text-align:center">3</td><td style="text-align:center">$3\;2\\1\;2\;2\\2\;3\;4\\1\;3$</td><td style="text-align:center">$2$</td></tr></tbody></table></div><blockquote><p><strong>Sample 2å›¾ç¤ºï¼š</strong></p></blockquote><div class="mermaid-wrap"><pre class="mermaid-src" hidden>  graph LR1--10---21--5---22--8---3  </pre></div><h2 id="Hint"><a href="#Hint" class="headerlink" title="Hint"></a>Hint</h2><p>N(1&lt;Nâ‰¤500)</p><p>Mï¼ˆ0&lt;Mâ‰¤5000ï¼‰</p><p>Viåœ¨intèŒƒå›´å†…</p><h2 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><p>æœ€å°ç”Ÿæˆæ ‘+æšä¸¾ï¼š<br>{:.success}</p><p>æŠŠè¾¹æƒå‡åºæ’åºï¼Œç„¶åé€‰å–ä»»æ„ä¸€æ¡è¾¹ä½œä¸ºèµ·ç‚¹ï¼Œè€ƒè™‘æ¯”å®ƒå¤§çš„è¾¹åŠ å…¥é›†åˆï¼Œç›´åˆ° $s$ å’Œ $t$ è”é€šã€‚æ­¤æ—¶çš„æ¯”å€¼ä¸º</p><script type="math/tex; mode=display">\frac{maxV}{minV}=\frac{g[j].val}{g[i].val}</script><p>ç„¶åå°†è¿™äº›æ¯”å€¼æ±‚ä¸€ä¸ªæœ€å°å€¼å°±å¯ä»¥äº†ï¼Œå‡ ç‚¹ä¼˜åŒ–ï¼š</p><ol><li><strong>åˆ¤æ–­å›¾æ˜¯å¦è”é€šï¼Œåœ¨ $i=1â€‹$ æ—¶åˆ¤æ–­</strong></li><li><strong>å¦‚æœå°†æ¯” $i$ å¤§çš„è¾¹å…¨éƒ¨åŠ å…¥é›†åˆä»ç„¶ä¸èƒ½ä½¿å¾— $s$ å’Œ $t$ è”é€šï¼Œåˆ™é€€å‡ºå¾ªç¯ï¼ˆå†åšæ— æ„ä¹‰ï¼‰</strong></li><li><strong>å½“ $s$ å’Œ  $t$  è”é€šåï¼Œå½“å‰å¾ªç¯ä¹Ÿå¯ä»¥é€€å‡º</strong></li></ol><h2 id="Codes"><a href="#Codes" class="headerlink" title="Codes"></a>Codes</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">pragma</span> GCC optimize(3)</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;utility&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxn 501</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxm 5001</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> rint register int</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">node</span>&#123;</span><br><span class="line"><span class="type">int</span> u,v;</span><br><span class="line"><span class="type">double</span> val;</span><br><span class="line"><span class="type">bool</span> <span class="keyword">operator</span> &lt;(<span class="type">const</span> node &amp;obj)<span class="type">const</span>&#123;</span><br><span class="line"><span class="keyword">return</span> val&lt;obj.val;</span><br><span class="line">&#125;</span><br><span class="line">&#125;g[maxm]; <span class="type">int</span> f[maxn]; <span class="type">int</span> n,m;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">int</span> <span class="title">gcd</span><span class="params">(<span class="type">int</span> a,<span class="type">int</span> b)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(b==<span class="number">0</span>) <span class="keyword">return</span> a;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">return</span> <span class="built_in">gcd</span>(b,a%b);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">Sfind</span><span class="params">(<span class="type">int</span> x)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(f[x]==x) <span class="keyword">return</span> x;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">return</span> f[x]=<span class="built_in">Sfind</span>(f[x]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> Sunion(u1,u2) (f[Sfind(u1)]=Sfind(u2))</span></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">bool</span> <span class="title">judge</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> y)</span></span>&#123;</span><br><span class="line"><span class="keyword">for</span>(rint i=<span class="number">0</span>;i&lt;=n;i++) f[i]=i;</span><br><span class="line"><span class="keyword">for</span>(rint i=<span class="number">1</span>;i&lt;=m;i++)</span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">Sfind</span>(g[i].u)!=<span class="built_in">Sfind</span>(g[i].v))</span><br><span class="line"><span class="built_in">Sunion</span>(g[i].u,g[i].v);</span><br><span class="line"><span class="keyword">return</span> <span class="built_in">Sfind</span>(x)==<span class="built_in">Sfind</span>(y); </span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Advanced_kruskal</span><span class="params">(<span class="type">int</span> u1,<span class="type">int</span> u2)</span></span>&#123;</span><br><span class="line"><span class="built_in">sort</span>(g+<span class="number">1</span>,g+m+<span class="number">1</span>);</span><br><span class="line"><span class="type">double</span> minE=<span class="number">9999999.0</span>,maxE=<span class="number">0.0</span>;</span><br><span class="line"><span class="type">double</span> ratio=minE;</span><br><span class="line"><span class="type">double</span> tarMin,tarMax; <span class="type">bool</span> sign;</span><br><span class="line"><span class="keyword">for</span>(rint i=<span class="number">1</span>;i&lt;=m;i++)&#123;</span><br><span class="line">minE=g[i].val;</span><br><span class="line">sign=<span class="literal">false</span>;</span><br><span class="line"><span class="keyword">for</span>(rint k=<span class="number">0</span>;k&lt;=n;k++) f[k]=k;</span><br><span class="line"><span class="keyword">for</span>(rint j=i;j&lt;=m;j++)&#123;</span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">Sfind</span>(g[j].u)!=<span class="built_in">Sfind</span>(g[j].v))</span><br><span class="line"><span class="built_in">Sunion</span>(g[j].u,g[j].v);</span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">Sfind</span>(u1)==<span class="built_in">Sfind</span>(u2))&#123;</span><br><span class="line">sign=<span class="literal">true</span>;</span><br><span class="line">maxE=g[j].val;</span><br><span class="line"><span class="keyword">if</span>(maxE/minE&lt;ratio)&#123;</span><br><span class="line">tarMin=minE; tarMax=maxE;</span><br><span class="line">ratio=maxE/minE;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(ratio==<span class="number">1.0</span>) <span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">if</span>(!sign) <span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> tarminE=tarMin;</span><br><span class="line"><span class="type">int</span> tarmaxE=tarMax;</span><br><span class="line"><span class="keyword">if</span>(tarmaxE%tarminE==<span class="number">0</span>) cout&lt;&lt;tarmaxE/tarminE;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line"><span class="type">int</span> Egcd=<span class="built_in">gcd</span>(tarminE,tarmaxE);</span><br><span class="line">tarminE/=Egcd;tarmaxE/=Egcd;</span><br><span class="line">cout&lt;&lt;tarmaxE&lt;&lt;<span class="string">&#x27;/&#x27;</span>&lt;&lt;tarminE;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">makeEdge</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">for</span>(rint i=<span class="number">1</span>;i&lt;=m;i++)&#123;</span><br><span class="line">cin&gt;&gt;g[i].u&gt;&gt;g[i].v;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%lf&quot;</span>,&amp;g[i].val);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;way.in&quot;</span>,<span class="string">&quot;r&quot;</span>,stdin);</span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;way.out&quot;</span>,<span class="string">&quot;w&quot;</span>,stdout);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line">cin&gt;&gt;n&gt;&gt;m;</span><br><span class="line"><span class="built_in">makeEdge</span>(); <span class="type">int</span> x,y;</span><br><span class="line">cin&gt;&gt;x&gt;&gt;y;</span><br><span class="line"><span class="keyword">if</span>(!<span class="built_in">judge</span>(x,y)) cout&lt;&lt;<span class="string">&quot;IMPOSSIBLE&quot;</span>;</span><br><span class="line"><span class="keyword">else</span> <span class="built_in">Advanced_kruskal</span>(x,y);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å›¾è®º </tag>
            
            <tag> æœ€å°ç”Ÿæˆæ ‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å›¾è®º | æœ€å°ç”Ÿæˆæ ‘ | æœ€å°ç”Ÿæˆæ ‘  è®¡æ•°</title>
      <link href="/2019/03/24/2019-03-24-%E6%9C%80%E5%B0%8F%E7%94%9F%E6%88%90%E6%A0%91%E8%AE%A1%E6%95%B0/"/>
      <url>/2019/03/24/2019-03-24-%E6%9C%80%E5%B0%8F%E7%94%9F%E6%88%90%E6%A0%91%E8%AE%A1%E6%95%B0/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><h2 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h2><p>ç°åœ¨ç»™å‡ºäº†ä¸€ä¸ªç®€å•æ— å‘åŠ æƒå›¾ã€‚ä½ ä¸æ»¡è¶³äºæ±‚å‡ºè¿™ä¸ªå›¾çš„æœ€å°ç”Ÿæˆæ ‘ï¼Œè€Œå¸Œæœ›çŸ¥é“è¿™ä¸ªå›¾ä¸­æœ‰å¤šå°‘ä¸ªä¸åŒçš„æœ€å°ç”Ÿæˆæ ‘ã€‚ï¼ˆå¦‚æœä¸¤é¢—æœ€å°ç”Ÿæˆæ ‘ä¸­è‡³å°‘æœ‰ä¸€æ¡è¾¹ä¸åŒï¼Œåˆ™è¿™ä¸¤ä¸ªæœ€å°ç”Ÿæˆæ ‘å°±æ˜¯ä¸åŒçš„ï¼‰ã€‚ç”±äºä¸åŒçš„æœ€å°ç”Ÿæˆæ ‘å¯èƒ½å¾ˆå¤šï¼Œæ‰€ä»¥ä½ åªéœ€è¦è¾“å‡ºæ–¹æ¡ˆæ•°å¯¹31011çš„æ¨¡å°±å¯ä»¥äº†ã€‚</p><h2 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h2><p>ç¬¬ä¸€è¡ŒåŒ…å«ä¸¤ä¸ªæ•°ï¼Œnå’Œmï¼Œå…¶ä¸­1&lt;=n&lt;=100; 1&lt;=m&lt;=1000; è¡¨ç¤ºè¯¥æ— å‘å›¾çš„èŠ‚ç‚¹æ•°å’Œè¾¹æ•°ã€‚æ¯ä¸ªèŠ‚ç‚¹ç”¨1~nçš„æ•´æ•°ç¼–å·ã€‚ã€€ã€€</p><p>æ¥ä¸‹æ¥çš„mè¡Œï¼Œæ¯è¡ŒåŒ…å«ä¸¤ä¸ªæ•´æ•°ï¼ša, b, cï¼Œè¡¨ç¤ºèŠ‚ç‚¹a, bä¹‹é—´çš„è¾¹çš„æƒå€¼ä¸ºcï¼Œå…¶ä¸­1&lt;=c&lt;=1,000,000,000ã€‚æ•°æ®ä¿è¯ä¸ä¼šå‡ºç°è‡ªå›è¾¹å’Œé‡è¾¹ã€‚ã€€ã€€</p><p>æ³¨æ„ï¼šå…·æœ‰ç›¸åŒæƒå€¼çš„è¾¹ä¸ä¼šè¶…è¿‡10æ¡ã€‚</p><h2 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h2><p>è¾“å‡ºä¸åŒçš„æœ€å°ç”Ÿæˆæ ‘æœ‰å¤šå°‘ä¸ªã€‚ä½ åªéœ€è¦è¾“å‡ºæ•°é‡å¯¹31011çš„æ¨¡å°±å¯ä»¥äº†ã€‚</p><h2 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">4 6</span><br><span class="line">1 2 1</span><br><span class="line">1 3 1</span><br><span class="line">1 4 1</span><br><span class="line">2 3 2</span><br><span class="line">2 4 1</span><br><span class="line">3 4 1</span><br></pre></td></tr></table></figure><h2 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">8</span><br></pre></td></tr></table></figure><blockquote><p>Sample Input å›¾ç¤ºï¼š</p></blockquote><div class="mermaid-wrap"><pre class="mermaid-src" hidden>  graph LR1--1---21--1---31--1---42--2---32--1---43--1---4  </pre></div><h2 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><p>å¯¹è¾¹é›†æŒ‰è¾¹æƒæ’åºè¿‡åï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ $kruskal$ ç®—æ³•æ±‚è§£æœ€å°ç”Ÿæˆæ ‘ï¼Œå› ä¸º $kruksal$ ç®—æ³•æ˜¯æŒ‰ç…§è¾¹çš„æƒå€¼ç”Ÿæˆæ ‘çš„ï¼Œæ‰€ä»¥ï¼š</p><p>åœ¨è¾¹æƒå’Œç›¸åŒçš„æœ€å°ç”Ÿæˆæ ‘ä¸­ï¼ŒæŸæƒå€¼çš„è¾¹çš„æ•°é‡æ˜¯ä¸€å®šçš„<br>{:.info}</p><p>æˆ‘ä»¬å¯ä»¥ç”¨ $dfs$ å»æœç´¢æ»¡è¶³æœ€å°ç”Ÿæˆæ ‘çš„è¾¹çš„é›†åˆçš„æƒ…å†µï¼Œåˆ©ç”¨ä¹˜æ³•åŸç†å¾—åˆ°æ–¹æ¡ˆæ•°</p><p>ä»£ç ä¸­ï¼š</p><ol><li>dæ•°ç»„ç”¨äºå­˜æ”¾ç›¸åŒè¾¹çš„ä¿¡æ¯ï¼ˆèµ·å§‹ä½ç½®ï¼Œç»ˆæ­¢ä½ç½®ï¼Œæ„æˆçš„ç”Ÿæˆæ ‘æ•°é‡ï¼‰ï¼Œdæ•°ç»„æ˜¯åœ¨gæ•°ç»„ï¼ˆè¾¹é›†æ•°ç»„æ’åºä¹‹åï¼Œåœ¨ $kruskal$ ç®—æ³•è¿‡ç¨‹ä¸­æ±‚å¾—ï¼Œæ‰€ä»¥ä¸ä¼šå‡ºç°æ¼è®°æˆ–é‡å¤</li><li>æ¯æ¬¡dfsæ±‚è§£ç­”æ¡ˆä¹‹åï¼ŒæŠŠå½“å‰èŒƒå›´å†…çš„è¾¹ï¼ˆä» $d[i].st$ ä½ç½®åˆ° $d[i].ed$ ä½ç½®çš„è¾¹ï¼‰éƒ½è¿æ¥é˜²æ­¢ä¸‹ä¸€æ¬¡dfså‡ºé”™</li><li>ä¸èƒ½å¯¹å¹¶æŸ¥é›†æ•°ç»„ $f$ ä½¿ç”¨è·¯å¾„å‹ç¼©ï¼Œä¾‹å¦‚ $return\;f[x]=Sfind(f[x])$</li></ol><h2 id="Codes"><a href="#Codes" class="headerlink" title="Codes"></a>Codes</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxn 1001</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxm 1001</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> _mod 31011</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">node</span>&#123;</span><br><span class="line"><span class="type">int</span> u,v,val;</span><br><span class="line"><span class="type">bool</span> <span class="keyword">operator</span> &lt;(<span class="type">const</span> node &amp;obj)<span class="type">const</span>&#123;</span><br><span class="line"><span class="keyword">return</span> val&lt;obj.val;</span><br><span class="line">&#125;</span><br><span class="line">&#125;g[maxm]; <span class="type">int</span> n,m;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">SuperNode</span>&#123;</span><br><span class="line"><span class="type">int</span> st,ed,tree;</span><br><span class="line">&#125;d[maxm]; <span class="type">int</span> f[maxn],stats;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">Sfind</span><span class="params">(<span class="type">int</span> x)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(f[x]==x) <span class="keyword">return</span> x;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">return</span> <span class="built_in">Sfind</span>(f[x]);</span><br><span class="line">    <span class="comment">// else return f[x]=Sfind(f[x])</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> Sunion(u1,u2) (f[Sfind(u1)]=Sfind(u2))</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">dfs</span><span class="params">(<span class="type">int</span> id,<span class="type">int</span> pos,<span class="type">int</span> k)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(pos==d[id].ed+<span class="number">1</span>)&#123;</span><br><span class="line"><span class="keyword">if</span>(k==d[id].tree) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125; <span class="type">int</span> ans=<span class="number">0</span>;</span><br><span class="line"><span class="type">int</span> fu=<span class="built_in">Sfind</span>(g[pos].u);</span><br><span class="line"><span class="type">int</span> fv=<span class="built_in">Sfind</span>(g[pos].v);</span><br><span class="line"><span class="keyword">if</span>(fu!=fv)&#123;</span><br><span class="line">f[fu]=fv;</span><br><span class="line">ans+=<span class="built_in">dfs</span>(id,pos+<span class="number">1</span>,k+<span class="number">1</span>);</span><br><span class="line">f[fu]=fu; f[fv]=fv;</span><br><span class="line">&#125;</span><br><span class="line">ans+=<span class="built_in">dfs</span>(id,pos+<span class="number">1</span>,k);</span><br><span class="line"><span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">bool</span> <span class="title">kruskal</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="type">int</span> SumTree=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++) f[i]=i;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++)&#123;</span><br><span class="line"><span class="keyword">if</span>(g[i].val!=g[i<span class="number">-1</span>].val)&#123;</span><br><span class="line">stats++; d[stats].st=i;</span><br><span class="line">d[stats<span class="number">-1</span>].ed=i<span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">Sfind</span>(g[i].u)!=<span class="built_in">Sfind</span>(g[i].v))&#123;</span><br><span class="line">SumTree++; <span class="built_in">Sunion</span>(g[i].u,g[i].v);</span><br><span class="line">d[stats].tree++;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">d[stats].ed=m;</span><br><span class="line"><span class="keyword">if</span>(SumTree!=(n<span class="number">-1</span>)) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">int</span> <span class="title">res</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)f[i]=i;</span><br><span class="line"><span class="type">int</span> ans=<span class="number">1</span>,tmp=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=stats;i++)&#123;</span><br><span class="line">tmp=<span class="built_in">dfs</span>(i,d[i].st,<span class="number">0</span>);</span><br><span class="line">ans=(ans*tmp)%_mod;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> j=d[i].st;j&lt;=d[i].ed;j++)</span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">Sfind</span>(g[j].u)!=<span class="built_in">Sfind</span>(g[j].v))</span><br><span class="line"><span class="built_in">Sunion</span>(g[j].u,g[j].v);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;cnt.in&quot;</span>,<span class="string">&quot;r&quot;</span>,stdin);</span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;cnt.out&quot;</span>,<span class="string">&quot;w&quot;</span>,stdout);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line">cin&gt;&gt;n&gt;&gt;m;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++)</span><br><span class="line">cin&gt;&gt;g[i].u&gt;&gt;g[i].v&gt;&gt;g[i].val;</span><br><span class="line"><span class="built_in">sort</span>(g+<span class="number">1</span>,g+m+<span class="number">1</span>);</span><br><span class="line"><span class="keyword">if</span>(!<span class="built_in">kruskal</span>()) cout&lt;&lt;<span class="number">0</span>;</span><br><span class="line"><span class="keyword">else</span> cout&lt;&lt;<span class="built_in">res</span>();</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å›¾è®º </tag>
            
            <tag> æœ€å°ç”Ÿæˆæ ‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å›¾è®º | æœ€å°ç”Ÿæˆæ ‘ | åŒ—æé€šè®¯ç½‘  ç»œ</title>
      <link href="/2019/03/22/2019-03-22-%E5%8C%97%E6%9E%81%E9%80%9A%E8%AE%AF%E7%BD%91%E7%BB%9C/"/>
      <url>/2019/03/22/2019-03-22-%E5%8C%97%E6%9E%81%E9%80%9A%E8%AE%AF%E7%BD%91%E7%BB%9C/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><h2 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h2><p>åŒ—æåœ°åŒºå…±æœ‰Påº§æ‘åº„ï¼Œæ¯åº§æ‘åº„å‡æœ‰è‡ªå·±çš„åæ ‡ã€‚ç°åœ¨å†³å®šåœ¨æ‘åº„ä¹‹é—´å»ºç«‹é€šä¿¡ç½‘ç»œï¼Œå…¶ä¸­é€šè®¯å·¥å…·å¯ä»¥æ˜¯æ— çº¿ç”µæ”¶å‘æœºï¼Œä¹Ÿå¯ä»¥æ˜¯å«æ˜Ÿè®¾å¤‡ã€‚ä½ çš„ä»»åŠ¡æ˜¯è®©ä»»æ„ä¸¤åº§æ‘åº„ä¹‹é—´éƒ½å¯ä»¥ç›´æ¥æˆ–é—´æ¥åœ°é€šä¿¡ã€‚<br>å«æ˜Ÿè®¾å¤‡ä¸€å…±æœ‰Så°ï¼Œæ‹¥æœ‰å«æ˜Ÿè®¾å¤‡çš„ä¸¤åº§æ‘åº„ä¹‹é—´æ— è®ºç›¸è·å¤šè¿œéƒ½å¯ä»¥ç›´æ¥é€šä¿¡ï¼›å…¶ä»–æ¯ä¸ªæ‘åº„éƒ½å¯ä»¥é…å¤‡ä¸€å°æ— çº¿æ”¶å‘æœºï¼Œä½†å¿…é¡»å…·æœ‰ç›¸åŒçš„å‚æ•°dã€‚åªæœ‰æ¬§åŸºé‡Œå¾·ä¸æ˜¯è¶…è¿‡dçš„æ‘åº„æ‰èƒ½ç”¨æ— çº¿æ”¶å‘æœºç›´æ¥é€šè®¯ã€‚ç”±äºdè¶Šå¤§çš„æ— çº¿ç”µæ”¶å‘æœºè¶Šè´µï¼Œä½ éœ€è¦åˆç†åˆ†é…è¿™Så°å«æ˜Ÿè®¾å¤‡ï¼Œæ‰èƒ½è®©å…¶ä»–æ‘åº„çš„æ— çº¿ç”µæ”¶å‘æœºçš„dæœ€å°ã€‚    </p><h2 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h2><p>ç¬¬ä¸€è¡Œä¸ºæ•´æ•°S,Pï¼Œè¡¨ç¤ºå«æ˜Ÿé€šä¿¡è®¾å¤‡æ•°ç›®å’Œæ‘åº„æ•°ç›®ã€‚æ¥ä¸‹æ¥çš„Pè¡Œï¼Œæ¯è¡Œè¡¨ç¤ºä¸€ä¸ªæ‘åº„çš„åæ ‡(x,y)ã€‚   </p><h2 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h2><p>è¾“å‡ºä¸€ä¸ªä¿ç•™2ä½å°æ•°çš„å®æ•°ï¼Œè¡¨ç¤ºæœ€å°çš„æ— çº¿ç”µæ”¶å‘å™¨åŠå¾„ã€‚   </p><h2 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line">2 4 </span><br><span class="line">0 100 </span><br><span class="line">0 300 </span><br><span class="line">0 600 </span><br><span class="line">150 750 </span><br><span class="line">```   </span><br><span class="line">## Sample Output   </span><br><span class="line">```text </span><br><span class="line">2 4 </span><br><span class="line">0 100 </span><br><span class="line">0 300 </span><br><span class="line">0 600 </span><br><span class="line">150 750 </span><br><span class="line">```   </span><br><span class="line">## åˆ†æ  </span><br><span class="line">å½“æ­£å‘æ€è€ƒå—é˜»æ—¶ï¼Œé€†å‘æ€ç»´å¯èƒ½æœ‰å¥‡æ•ˆã€‚æœ¬é¢˜å°±æ˜¯è¿™æ ·ã€‚çŸ¥é“å«æ˜Ÿè®¾å¤‡çš„æ•°é‡ï¼Œæ±‚æœ€å°çš„æ”¶å‘è·ç¦»ï¼Œå¯èƒ½æ¯”è¾ƒå›°éš¾ï¼›å¦‚æœçŸ¥é“è·ç¦»æ±‚æ•°é‡ï¼Œå°±å¾ˆç®€å•äº†ã€‚æŠŠæ‰€æœ‰å¯ä»¥äº’ç›¸é€šè®¯çš„æ‘åº„è¿æ¥èµ·æ¥ï¼Œæ„æˆä¸€ä¸ªå›¾ã€‚å«æ˜Ÿè®¾å¤‡çš„å°æ•°å°±æ˜¯å›¾çš„è¿é€šæ”¯çš„ä¸ªæ•°ã€‚   </span><br><span class="line">é—®é¢˜è½¬åŒ–ä¸ºï¼šæ‰¾åˆ°ä¸€ä¸ªæœ€å°çš„dï¼Œä½¿å¾—æŠŠæ‰€æœ‰æƒå€¼å¤§äºdçš„è¾¹å»æ‰ä¹‹åï¼Œè¿é€šæ”¯çš„ä¸ªæ•°å°äºç­‰äºkã€‚</span><br><span class="line"></span><br><span class="line">å®šç†ï¼šå¦‚æœå»æ‰æ‰€æœ‰æƒå€¼å¤§äºdçš„è¾¹åï¼Œæœ€å°ç”Ÿæˆæ ‘è¢«åˆ†å‰²æˆä¸ºkä¸ªè¿é€šæ”¯ï¼Œå›¾ä¹Ÿè¢«åˆ†å‰²æˆä¸ºkä¸ªè¿é€šæ”¯ã€‚   </span><br><span class="line">&#123;:.success&#125;</span><br><span class="line"></span><br><span class="line">è¯æ˜ï¼šç”¨åè¯æ³•ã€‚å‡è®¾åŸå›¾è¢«åˆ†å‰²æˆkâ€™ (k&#x27;â‰ k)ä¸ªè¿é€šæ”¯ï¼Œæ˜¾ç„¶ä¸å¯èƒ½kâ€™&gt;kï¼Œæ‰€ä»¥kâ€™&lt;kã€‚å› æ­¤åœ¨æŸä¸€å›¾çš„è¿é€šæ”¯ä¸­ï¼Œæœ€å°ç”Ÿæˆæ ‘è¢«åˆ†æˆäº†è‡³å°‘ä¸¤éƒ¨åˆ†ï¼Œä¸å¦¨è®¾å…¶ä¸ºT1,T2ã€‚å› ä¸ºT1å’ŒT2åŒå±äºä¸€ä¸ªè¿é€šæ”¯ï¼Œæ‰€ä»¥ä¸€å®šå­˜åœ¨xâˆˆT1ï¼ŒyâˆˆT2ï¼Œw(x,y)â‰¤dã€‚åˆå› ä¸ºåœ¨æ•´ä¸ªæœ€å°ç”Ÿæˆæ ‘ä¸­ï¼Œæ‰€ä»¥xåˆ°yçš„è·¯å¾„ä¸­ä¸€å®šå­˜åœ¨ä¸€æ¡æƒå€¼å¤§äºdçš„è¾¹(u,v)ï¼ˆå¦åˆ™xå’Œyå°±ä¸ä¼šåˆ†å±äºT1å’ŒT2äº†ï¼‰ï¼Œw(x,y)â‰¤d&lt;w(u,v)ï¼Œæ‰€ä»¥æŠŠ(x,y)åŠ å…¥ï¼ŒæŠŠ(u,v)å»æ‰ï¼Œå°†å¾—åˆ°ä¸€æ£µæ€»æƒå€¼æ¯”æœ€å°ç”Ÿæˆæ ‘è¿˜å°çš„ç”Ÿæˆæ ‘ã€‚è¿™æ˜¾ç„¶æ˜¯ä¸å¯èƒ½çš„ã€‚æ‰€ä»¥ï¼ŒåŸå‘½é¢˜æˆç«‹ã€‚ï¼ˆè¯æ¯•ï¼‰   </span><br><span class="line">æœ‰äº†è¿™ä¸ªå®šç†ï¼Œå¾ˆå®¹æ˜“å¾—åˆ°ä¸€ä¸ªæ„é€ ç®—æ³•ï¼šæœ€å°ç”Ÿæˆæ ‘çš„ç¬¬ké•¿è¾¹å°±æ˜¯é—®é¢˜çš„è§£ã€‚   </span><br><span class="line">***â€”â€”From ä¿¡æ¯å­¦å¥¥èµ›ä¸€æœ¬é€šæé«˜ç‰ˆ***   </span><br><span class="line">## Codes   </span><br><span class="line">```cpp </span><br><span class="line">#include &lt;cstdio&gt;</span><br><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;algorithm&gt;</span><br><span class="line">#include &lt;cstring&gt;</span><br><span class="line">#include &lt;utility&gt;</span><br><span class="line">#include &lt;vector&gt;</span><br><span class="line">#include &lt;cmath&gt;</span><br><span class="line">#define maxn 1001</span><br><span class="line">#define pf(x) (x*x)</span><br><span class="line">using namespace std;</span><br><span class="line">typedef long long ll;</span><br><span class="line">struct node&#123;</span><br><span class="line">int a,b;</span><br><span class="line">double val;</span><br><span class="line">bool operator &lt;(const node &amp;obj)const&#123;</span><br><span class="line">return val&lt;obj.val;</span><br><span class="line">&#125;</span><br><span class="line">&#125;g[maxn*maxn];</span><br><span class="line">int tot,f[maxn];</span><br><span class="line">double res[maxn];</span><br><span class="line">pair&lt;ll,ll&gt; d[maxn]; int s,p;</span><br><span class="line">inline double getdis(ll x1,ll x2,ll y1,ll y2)&#123;</span><br><span class="line">return sqrt(pf(abs(x1-x2))+pf(abs(y1-y2)));</span><br><span class="line">&#125;</span><br><span class="line">int Sfind(int x)&#123;</span><br><span class="line">if(f[x]==x) return x;</span><br><span class="line">else return f[x]=Sfind(f[x]);</span><br><span class="line">&#125;</span><br><span class="line">inline void Sunion(int u1,int u2)&#123;</span><br><span class="line">int fa=Sfind(u1);</span><br><span class="line">int fb=Sfind(u2);</span><br><span class="line">f[fa]=fb;</span><br><span class="line">&#125;</span><br><span class="line">inline void makeEdge()&#123;</span><br><span class="line">for(int i=1;i&lt;=p;i++)</span><br><span class="line">for(int j=i+1;j&lt;=p;j++)</span><br><span class="line">g[++tot]=(node)&#123;i,j,</span><br><span class="line">getdis(d[i].first,d[j].first,d[i].second,d[j].second)</span><br><span class="line">&#125;;</span><br><span class="line">&#125;</span><br><span class="line">double kruskal()&#123;</span><br><span class="line">int cnt=0;</span><br><span class="line">sort(g+1,g+tot+1);</span><br><span class="line">for(int i=1;i&lt;=tot;i++)&#123;</span><br><span class="line">if(Sfind(g[i].a)!=Sfind(g[i].b))</span><br><span class="line">res[++cnt]=g[i].val,</span><br><span class="line">Sunion(g[i].a,g[i].b);</span><br><span class="line">&#125;</span><br><span class="line">return res[cnt-s+1];</span><br><span class="line">&#125;</span><br><span class="line">int main()&#123;</span><br><span class="line">#ifndef ONLINE_JUDGE</span><br><span class="line">freopen(&quot;testin.txt&quot;,&quot;r&quot;,stdin);</span><br><span class="line">freopen(&quot;testout.txt&quot;,&quot;w&quot;,stdout);</span><br><span class="line">#endif</span><br><span class="line">cin&gt;&gt;s&gt;&gt;p;</span><br><span class="line">if(s&gt;=p)&#123;</span><br><span class="line">cout&lt;&lt;&quot;0.00&quot;;</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br><span class="line">for(int i=1;i&lt;=p;i++)</span><br><span class="line">cin&gt;&gt;d[i].first&gt;&gt;d[i].second;</span><br><span class="line">makeEdge(); for(int i=0;i&lt;=p;i++) f[i]=i;</span><br><span class="line">printf(&quot;%.2lf&quot;,kruskal());</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å›¾è®º </tag>
            
            <tag> æœ€å°ç”Ÿæˆæ ‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ACè‡ªåŠ¨æœºï¼ˆç®€å•ç‰ˆï¼‰</title>
      <link href="/2019/03/18/2019-03-18-AC%E8%87%AA%E5%8A%A8%E6%9C%BA%E3%80%90%E7%AE%80%E5%8D%95%E7%89%88%E3%80%91/"/>
      <url>/2019/03/18/2019-03-18-AC%E8%87%AA%E5%8A%A8%E6%9C%BA%E3%80%90%E7%AE%80%E5%8D%95%E7%89%88%E3%80%91/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><h2 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h2><p>ç»™å®šnä¸ªæ¨¡å¼ä¸²å’Œ1ä¸ªæ–‡æœ¬ä¸²ï¼Œæ±‚æœ‰å¤šå°‘ä¸ªæ¨¡å¼ä¸²åœ¨æ–‡æœ¬ä¸²é‡Œå‡ºç°è¿‡ã€‚</p><h2 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h2><p>ç¬¬ä¸€è¡Œä¸€ä¸ªnï¼Œè¡¨ç¤ºæ¨¡å¼ä¸²ä¸ªæ•°ï¼›</p><p>ä¸‹é¢nè¡Œæ¯è¡Œä¸€ä¸ªæ¨¡å¼ä¸²ï¼›</p><p>ä¸‹é¢ä¸€è¡Œä¸€ä¸ªæ–‡æœ¬ä¸²ã€‚</p><h2 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h2><p>ä¸€ä¸ªæ•°è¡¨ç¤ºç­”æ¡ˆ</p><h2 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h2><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">2</span><br><span class="line">a</span><br><span class="line">aa</span><br><span class="line">aa</span><br></pre></td></tr></table></figure><h2 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2</span><br></pre></td></tr></table></figure><h2 id="Hint"><a href="#Hint" class="headerlink" title="Hint"></a>Hint</h2><div class="table-container"><table><thead><tr><th style="text-align:center">#</th><th style="text-align:center">Data Range</th></tr></thead><tbody><tr><td style="text-align:center">SubTask1(50)</td><td style="text-align:center">$\sum len(æ¨¡å¼ä¸²ï¼Œæ–‡æœ¬ä¸²)\leq10^6\;n=1$</td></tr><tr><td style="text-align:center">SubTask2(50)</td><td style="text-align:center">$\sum len(æ¨¡å¼ä¸²ï¼Œæ–‡æœ¬ä¸²)\leq10^6$</td></tr></tbody></table></div><h2 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><p>çœ‹é¢˜ç›®åå­—å°±çŸ¥é“è¿™æ˜¯ä¸€é“<strong>ACè‡ªåŠ¨æœºè£¸é¢˜</strong></p><p>å›é¡¾ä¸€ä¸‹ACè‡ªåŠ¨æœºçš„ç®—æ³•æµç¨‹ï¼š</p><ol><li>æ‰€æœ‰æ¨¡å¼ä¸²å»ºç«‹Trieæ ‘ï¼š$Tinsert$</li><li>å»ºç«‹ lose æ•°ç»„ï¼ˆfailæŒ‡é’ˆï¼‰ï¼š$Tinit$</li><li>åŒ¹é…ï¼š$Tmatch$</li></ol><p><strong>åœ¨åŒ¹é…è¿‡ç¨‹ä¸­ï¼Œç”±äºè¦é˜²æ­¢åç¼€é‡å¤å‡ºç°çš„é—®é¢˜ï¼Œæ¯èµ°è¿‡ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå°†ä»–çš„ $isend$ å€¼è®¾ç½®ä¸º $false$ ï¼Œä¸ºäº†é˜²æ­¢å‰ç¼€ç›¸åŒè€Œæ¼æ‰ï¼Œéœ€è¦æ¯æ¬¡ $k=lose[k]$ ç»§ç»­åŒ¹é…</strong><br>{:.info}</p><h2 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxc 26</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxn 1000001</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">node</span>&#123;</span><br><span class="line"><span class="type">int</span> to[maxc];</span><br><span class="line"><span class="type">int</span> isend;</span><br><span class="line">&#125;g[maxn];</span><br><span class="line"><span class="type">int</span> lose[maxn]; <span class="type">int</span> tot=<span class="number">1</span>;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">Tinsert</span><span class="params">(<span class="type">char</span> *t)</span></span>&#123;</span><br><span class="line"><span class="type">int</span> lent=<span class="built_in">strlen</span>(t); <span class="type">char</span> c;</span><br><span class="line"><span class="type">int</span> u=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;lent;i++)&#123;</span><br><span class="line">c=t[i]-<span class="string">&#x27;a&#x27;</span>;</span><br><span class="line"><span class="keyword">if</span>(!g[u].to[c])</span><br><span class="line">g[u].to[c]=++tot;</span><br><span class="line">u=g[u].to[c];</span><br><span class="line">&#125;</span><br><span class="line">g[u].isend++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">Tinit</span><span class="params">()</span></span>&#123;</span><br><span class="line">queue&lt;<span class="type">int</span>&gt; q;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">26</span>;i++) g[<span class="number">0</span>].to[i]=<span class="number">1</span>;</span><br><span class="line">q.<span class="built_in">push</span>(<span class="number">1</span>); lose[<span class="number">1</span>]=<span class="number">0</span>; <span class="type">int</span> head;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> head2 lose[head]</span></span><br><span class="line"><span class="keyword">while</span>(!q.<span class="built_in">empty</span>())&#123;</span><br><span class="line">head=q.<span class="built_in">front</span>(); q.<span class="built_in">pop</span>();</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">26</span>;i++)&#123;</span><br><span class="line"><span class="keyword">if</span>(!g[head].to[i])</span><br><span class="line">g[head].to[i]=g[lose[head]].to[i];</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line">q.<span class="built_in">push</span>(g[head].to[i]);</span><br><span class="line">lose[g[head].to[i]]=g[head2].to[i];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="keyword">undef</span> head2</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">int</span> <span class="title">Tmatch</span><span class="params">(<span class="type">char</span> *s)</span></span>&#123;</span><br><span class="line"><span class="type">int</span> lens=<span class="built_in">strlen</span>(s);</span><br><span class="line"><span class="type">int</span> u=<span class="number">1</span>; <span class="type">int</span> c,k; <span class="type">int</span> ans=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;lens;i++)&#123;</span><br><span class="line">c=s[i]-<span class="string">&#x27;a&#x27;</span>;</span><br><span class="line">u=g[u].to[c];</span><br><span class="line"><span class="keyword">for</span>(k=u;k!=<span class="number">0</span> &amp;&amp; g[k].isend!=<span class="number">-1</span>;k=lose[k])&#123;</span><br><span class="line">ans+=g[k].isend;</span><br><span class="line">g[k].isend=<span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">char</span> A[maxn],R[maxn];</span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;testin.txt&quot;</span>,<span class="string">&quot;r&quot;</span>,stdin);</span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;testout.txt&quot;</span>,<span class="string">&quot;w&quot;</span>,stdout);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line">cin&gt;&gt;n;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,A),<span class="built_in">Tinsert</span>(A);</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,R);</span><br><span class="line"><span class="built_in">Tinit</span>();</span><br><span class="line">cout&lt;&lt;<span class="built_in">Tmatch</span>(R);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­—ç¬¦ä¸² </tag>
            
            <tag> ACè‡ªåŠ¨æœº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hash | æŸ¥è¯¢</title>
      <link href="/2019/03/12/2019-03-12-Hash_%E6%9F%A5%E8%AF%A2/"/>
      <url>/2019/03/12/2019-03-12-Hash_%E6%9F%A5%E8%AF%A2/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><h2 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h2><p> ç»™å®šä¸€ä¸ªé•¿åº¦ä¸ºnçš„æ•´æ•°æ•°ç»„A[1]ã€A[2]ã€â€¦ã€A<a href="-10^9&lt;=A[i]&lt;=10^9">N</a>ï¼Œå’Œmä¸ªæ“ä½œï¼š</p><p><strong>æ“ä½œ1ï¼š</strong>1  i  x æŠŠA[i]çš„å€¼å¢åŠ  x ï¼ˆ-10^3&lt;=x&lt;=10^3ï¼‰; </p><p><strong>æ“ä½œ2ï¼š</strong>2 x  æŸ¥è¯¢æ•´æ•° x åœ¨A[1]..A[N]ä¸­å‡ºç°çš„æ¬¡æ•°  </p><h2 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h2><p>ç¬¬ä¸€è¡ŒåŒ…å«ä¸¤ä¸ªæ•´æ•°nå’Œmï¼Œè¡¨ç¤ºæ•°ç»„æœ‰nä¸ªå…ƒç´ ï¼Œmè¡¨ç¤ºæœ‰mä¸ªæŸ¥è¯¢æ“ä½œï¼›ã€€ã€€æ¥ä¸‹æ¥çš„ä¸€è¡ŒåŒ…å«nä¸ªæ•´æ•°ï¼Œç¬¬iä¸ªæ•´æ•°è¡¨ç¤ºA[i]ï¼›ã€€ã€€å†æ¥ä¸‹æ¥çš„mè¡Œï¼Œæ¯è¡Œè¡¨ç¤ºä¸€ä¸ªæ“ä½œ.</p><h2 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h2><p>æŒ‰è¾“å…¥é¡ºåºè¾“å‡ºæ“ä½œ2çš„ç»“æœã€‚</p><h2 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h2><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">10 9</span><br><span class="line">3 5 8 17 14 21 7 6 31 5</span><br><span class="line">2 9</span><br><span class="line">1 2 -1</span><br><span class="line">1 1 1</span><br><span class="line">2 4</span><br><span class="line">1 5 2</span><br><span class="line">2 5</span><br><span class="line">1 8 -1</span><br><span class="line">1 2 1</span><br><span class="line">2 5</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h2><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">0</span><br><span class="line">2</span><br><span class="line">1</span><br><span class="line">3</span><br></pre></td></tr></table></figure><h2 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><p>ç”¨ $Hash$ æ¥å‹ç¼©æ ‡è®°æ•°ç»„çš„ç©ºé—´å¤§å°ï¼Œé€‰å– $Hash$ çš„å–ä½™æ•°ä¸ºï¼š$1226959$ï¼ˆç½‘ä¸Šæœçš„ï¼‰<br>{:.success}</p><p>å¯¹äºæ¯ä¸ªæ•° $x$ï¼Œ$x\mod 1226959$ çš„å€¼ä¸å®¹æ˜“å‡ºç°é‡å¤ï¼Œå› æ­¤æ ‡è®°æ•°ç»„å¼€åˆ° $1226959$ å°±è¡Œäº†</p><p>å¦‚æœå‡ºç°é‡å¤å…ƒç´ ï¼Œç”¨ $Vetcor$ æŒ‚é‚»æ¥è¡¨æ¥å¾ªç¯æŸ¥æ‰¾å³å¯</p><h2 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> haha 1226959</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxn 1000001</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> gethash(x) (abs(x%haha))</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; h[haha];</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; g[haha];</span><br><span class="line"><span class="type">int</span> a[maxn];</span><br><span class="line"><span class="type">int</span> n,m;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">int</span> <span class="title">res</span><span class="params">(<span class="type">int</span> x)</span></span>&#123;</span><br><span class="line"><span class="type">int</span> tar=<span class="built_in">gethash</span>(x);</span><br><span class="line">vector&lt;<span class="type">int</span>&gt;::iterator iterh=h[tar].<span class="built_in">begin</span>(); </span><br><span class="line">vector&lt;<span class="type">int</span>&gt;::iterator iterg=g[tar].<span class="built_in">begin</span>();</span><br><span class="line"><span class="keyword">while</span>(iterh!=h[tar].<span class="built_in">end</span>())&#123;</span><br><span class="line"><span class="keyword">if</span>(*iterh==x)</span><br><span class="line"><span class="keyword">return</span> *iterg;</span><br><span class="line">iterh++; iterg++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">addhash</span><span class="params">(<span class="type">int</span> x)</span></span>&#123;</span><br><span class="line"><span class="type">int</span> tar=<span class="built_in">gethash</span>(x);</span><br><span class="line">vector&lt;<span class="type">int</span>&gt;::iterator iterh=h[tar].<span class="built_in">begin</span>(); </span><br><span class="line">vector&lt;<span class="type">int</span>&gt;::iterator iterg=g[tar].<span class="built_in">begin</span>();</span><br><span class="line"><span class="type">bool</span> exis=<span class="literal">false</span>;</span><br><span class="line"><span class="keyword">while</span>(iterh!=h[tar].<span class="built_in">end</span>())&#123;</span><br><span class="line"><span class="keyword">if</span>(*iterh==x)&#123;</span><br><span class="line">exis=<span class="literal">true</span>;</span><br><span class="line">(*iterg)++;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">iterh++; iterg++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(!exis)&#123;</span><br><span class="line">h[tar].<span class="built_in">push_back</span>(x);</span><br><span class="line">g[tar].<span class="built_in">push_back</span>(<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">edithash</span><span class="params">(<span class="type">int</span> p,<span class="type">int</span> v)</span></span>&#123;</span><br><span class="line"><span class="type">int</span> tar=<span class="built_in">gethash</span>(p);</span><br><span class="line">vector&lt;<span class="type">int</span>&gt;::iterator iterh=h[tar].<span class="built_in">begin</span>(); </span><br><span class="line">vector&lt;<span class="type">int</span>&gt;::iterator iterg=g[tar].<span class="built_in">begin</span>();</span><br><span class="line"><span class="keyword">while</span>(iterh!=h[tar].<span class="built_in">end</span>())&#123;</span><br><span class="line"><span class="keyword">if</span>(*iterh==p)&#123;</span><br><span class="line">(*iterg)+=v;<span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">iterh++; iterg++;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;testin.txt&quot;</span>,<span class="string">&quot;r&quot;</span>,stdin);</span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;testout.txt&quot;</span>,<span class="string">&quot;w&quot;</span>,stdout);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line">cin&gt;&gt;n&gt;&gt;m; <span class="type">int</span> t,d,o;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">cin&gt;&gt;a[i]; <span class="built_in">addhash</span>(a[i]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">while</span>(m--)&#123;</span><br><span class="line">cin&gt;&gt;o;</span><br><span class="line"><span class="keyword">if</span>(o==<span class="number">1</span>)&#123;</span><br><span class="line">cin&gt;&gt;t&gt;&gt;d; <span class="built_in">edithash</span>(a[t],<span class="number">-1</span>);</span><br><span class="line">a[t]+=d; <span class="built_in">addhash</span>(a[t]);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">cin&gt;&gt;t;</span><br><span class="line">cout&lt;&lt;<span class="built_in">res</span>(t)&lt;&lt;<span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hash </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åˆ†æ²» | [USACO06JAN]æŠŠç‰›Corral the Cows</title>
      <link href="/2019/03/11/2019-03-11-USACO06JAN%E6%8A%8A%E7%89%9BCorraltheCow/"/>
      <url>/2019/03/11/2019-03-11-USACO06JAN%E6%8A%8A%E7%89%9BCorraltheCow/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><h2 id="Desciption"><a href="#Desciption" class="headerlink" title="Desciption"></a>Desciption</h2><p>Farmer John wishes to build a corral for his cows. Being finicky beasts, they demand that the corral be square and that the corral contain at least C (1 &lt;= C &lt;= 500) clover fields for afternoon treats. The corralâ€™s edges must be parallel to the X,Y axes.</p><p>FJâ€™s land contains a total of N (C &lt;= N &lt;= 500) clover fields, each a block of size 1 x 1 and located at with its lower left corner at integer X and Y coordinates each in the range 1..10,000. Sometimes more than one clover field grows at the same location; such a field would have its location appear twice (or more) in the input. A corral surrounds a clover field if the field is entirely located inside the corralâ€™s borders.</p><p>Help FJ by telling him the side length of the smallest square containing C clover fields.</p><p>çº¦ç¿°æ‰“ç®—å»ºä¸€ä¸ªå›´æ æ¥åœˆå…»ä»–çš„å¥¶ç‰›.ä½œä¸ºæœ€æŒ‘å‰”çš„å…½ç±»ï¼Œå¥¶ç‰›ä»¬è¦æ±‚è¿™ä¸ªå›´æ å¿…é¡»æ˜¯æ­£æ–¹ å½¢çš„ï¼Œè€Œä¸”å›´æ é‡Œè‡³å°‘è¦æœ‰C&lt; 500)ä¸ªè‰åœºï¼Œæ¥ä¾›åº”å¥¹ä»¬çš„åˆé¤.</p><p>çº¦ç¿°çš„åœŸåœ°ä¸Šå…±æœ‰C&lt;=N&lt;=500)ä¸ªè‰åœºï¼Œæ¯ä¸ªè‰åœºåœ¨ä¸€å—1x1çš„æ–¹æ ¼å†…ï¼Œè€Œä¸”è¿™ä¸ªæ–¹æ ¼çš„ åæ ‡ä¸ä¼šè¶…è¿‡10000.æœ‰æ—¶å€™ï¼Œä¼šæœ‰å¤šä¸ªè‰åœºåœ¨åŒä¸€ä¸ªæ–¹æ ¼å†…ï¼Œé‚£ä»–ä»¬çš„åæ ‡å°±ä¼šç›¸åŒ.</p><p>å‘Šè¯‰çº¦ç¿°ï¼Œæœ€å°çš„å›´æ çš„è¾¹é•¿æ˜¯å¤šå°‘ï¼Ÿ</p><h2 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h2><p>Line 1: Two space-separated integers: C and N</p><p>Lines 2..N+1: Each line contains two space-separated integers that are the X,Y coordinates of a clover field.</p><h2 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h2><p>Line 1: A single line with a single integer that is length of one edge of the minimum size square that contains at least C clover fields.</p><h2 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h2><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">3 4</span><br><span class="line">1 2</span><br><span class="line">2 1</span><br><span class="line">4 1</span><br><span class="line">5 2</span><br></pre></td></tr></table></figure><h2 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h2><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">4</span><br></pre></td></tr></table></figure><h2 id="Hint"><a href="#Hint" class="headerlink" title="Hint"></a>Hint</h2><p>Explanation of the sample:</p><p>|<em> </em></p><p>| <em> </em></p><p>+â€”â€”â€”Below is one 4x4 solution (Câ€™s show most of the corralâ€™s area); many others exist.</p><p>|CCCC</p><p>|CCCC</p><p>|<em>CCC</em></p><p>|C<em>C</em></p><p>+â€”â€”â€”</p><h2 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><p><strong>äºŒåˆ†æœç´¢æ …æ çš„è¾¹é•¿</strong>ï¼Œæ¯æ¬¡å°†è¾¹é•¿å¸¦å…¥åˆ°å›¾ä¸­ï¼Œè®¡ç®—å‡ºæœ€å¤šèƒ½è¦†ç›–åˆ°çš„è‰åœºçš„æ•°é‡å³å¯<br>{:.success}</p><p>è¦è®¡ç®—è¦†ç›–è‰åœºçš„æ•°é‡ï¼Œé€‰å®šä¸€å—è‰åœº $i$ ï¼Œå°† $x[i]$ è®¾ä¸ºè¦†ç›–çš„ä¸Šè¾¹ç•Œï¼Œå¾—å‡ºä¸‹è¾¹ç•Œï¼Œåœ¨ä¸Šè¾¹ç•Œå’Œä¸‹è¾¹ç•Œä¸­äºŒåˆ†æŸ¥æ‰¾ï¼ˆä½¿ç”¨ $ lower_\;bound $ï¼‰æ‰¾åˆ°å·¦å³è¾¹ç•Œçš„è‰åœºç¼–å·èŒƒå›´ï¼ˆå½“ç„¶è¿™éœ€è¦æå‰å¯¹è‰åœºä½ç½®æ’åºï¼‰</p><h2 id="Codes"><a href="#Codes" class="headerlink" title="Codes"></a>Codes</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxn 10001</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> fr(na,st,ed) for(int na=st;na&lt;=ed;na++)</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">int</span> x[maxn],y[maxn];</span><br><span class="line"><span class="type">int</span> id1[maxn],id2[maxn];</span><br><span class="line"><span class="type">int</span> n,c; <span class="type">int</span> l=<span class="number">1</span>,r,mid;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">bool</span> <span class="title">cmp1</span><span class="params">(<span class="type">int</span> q,<span class="type">int</span> w)</span></span>&#123;</span><br><span class="line"><span class="keyword">return</span> x[q]&lt;x[w];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">bool</span> <span class="title">cmp2</span><span class="params">(<span class="type">int</span> q,<span class="type">int</span> w)</span></span>&#123;</span><br><span class="line"><span class="keyword">return</span> y[q]&lt;y[w];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">bool</span> <span class="title">check</span><span class="params">(<span class="type">int</span> size)</span></span>&#123;</span><br><span class="line"><span class="type">int</span> st,ed,k,sum;</span><br><span class="line"><span class="built_in">fr</span>(i,<span class="number">1</span>,n)&#123;</span><br><span class="line">k=<span class="number">1</span>; sum=<span class="number">0</span>;</span><br><span class="line">st=x[id1[i]]; ed=st+size<span class="number">-1</span>;</span><br><span class="line"><span class="built_in">fr</span>(j,<span class="number">1</span>,n)&#123;</span><br><span class="line"><span class="keyword">while</span>(y[id2[k]]-y[id2[j]]+<span class="number">1</span>&lt;=size &amp;&amp; k&lt;=n)&#123;</span><br><span class="line"><span class="keyword">if</span>(st&lt;=x[id2[k]] &amp;&amp; x[id2[k]]&lt;=ed) sum++;</span><br><span class="line">k++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(sum&gt;=c) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">if</span>(st&lt;=x[id2[j]] &amp;&amp; x[id2[j]]&lt;=ed) sum--;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;t3.in&quot;</span>,<span class="string">&quot;r&quot;</span>,stdin);</span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;t3.out&quot;</span>,<span class="string">&quot;w&quot;</span>,stdout);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line">cin&gt;&gt;c&gt;&gt;n;</span><br><span class="line"><span class="built_in">fr</span>(i,<span class="number">1</span>,n)&#123;</span><br><span class="line">cin&gt;&gt;x[i]&gt;&gt;y[i];</span><br><span class="line">r=<span class="built_in">max</span>(r,<span class="built_in">max</span>(x[i],y[i]));</span><br><span class="line">id1[i]=id2[i]=i;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">sort</span>(id1+<span class="number">1</span>,id1+n+<span class="number">1</span>,cmp1);</span><br><span class="line"><span class="built_in">sort</span>(id2+<span class="number">1</span>,id2+n+<span class="number">1</span>,cmp2);</span><br><span class="line"><span class="keyword">while</span>(l&lt;=r)&#123;</span><br><span class="line">mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">check</span>(mid)) r=mid<span class="number">-1</span>;</span><br><span class="line"><span class="keyword">else</span> l=mid+<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout&lt;&lt;l;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åˆ†æ²» </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åˆ†æ²» | [USACO06JAN]æŠŠç‰›Corral the Cows</title>
      <link href="/2019/03/11/2019-03-11-%E6%8A%8A%E7%89%9B/"/>
      <url>/2019/03/11/2019-03-11-%E6%8A%8A%E7%89%9B/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><h2 id="Desciption"><a href="#Desciption" class="headerlink" title="Desciption"></a>Desciption</h2><p>Farmer John wishes to build a corral for his cows. Being finicky beasts, they demand that the corral be square and that the corral contain at least C (1 &lt;= C &lt;= 500) clover fields for afternoon treats. The corralâ€™s edges must be parallel to the X,Y axes.</p><p>FJâ€™s land contains a total of N (C &lt;= N &lt;= 500) clover fields, each a block of size 1 x 1 and located at with its lower left corner at integer X and Y coordinates each in the range 1..10,000. Sometimes more than one clover field grows at the same location; such a field would have its location appear twice (or more) in the input. A corral surrounds a clover field if the field is entirely located inside the corralâ€™s borders.</p><p>Help FJ by telling him the side length of the smallest square containing C clover fields.</p><p>çº¦ç¿°æ‰“ç®—å»ºä¸€ä¸ªå›´æ æ¥åœˆå…»ä»–çš„å¥¶ç‰›.ä½œä¸ºæœ€æŒ‘å‰”çš„å…½ç±»ï¼Œå¥¶ç‰›ä»¬è¦æ±‚è¿™ä¸ªå›´æ å¿…é¡»æ˜¯æ­£æ–¹ å½¢çš„ï¼Œè€Œä¸”å›´æ é‡Œè‡³å°‘è¦æœ‰C&lt; 500)ä¸ªè‰åœºï¼Œæ¥ä¾›åº”å¥¹ä»¬çš„åˆé¤.</p><p>çº¦ç¿°çš„åœŸåœ°ä¸Šå…±æœ‰C&lt;=N&lt;=500)ä¸ªè‰åœºï¼Œæ¯ä¸ªè‰åœºåœ¨ä¸€å—1x1çš„æ–¹æ ¼å†…ï¼Œè€Œä¸”è¿™ä¸ªæ–¹æ ¼çš„ åæ ‡ä¸ä¼šè¶…è¿‡10000.æœ‰æ—¶å€™ï¼Œä¼šæœ‰å¤šä¸ªè‰åœºåœ¨åŒä¸€ä¸ªæ–¹æ ¼å†…ï¼Œé‚£ä»–ä»¬çš„åæ ‡å°±ä¼šç›¸åŒ.</p><p>å‘Šè¯‰çº¦ç¿°ï¼Œæœ€å°çš„å›´æ çš„è¾¹é•¿æ˜¯å¤šå°‘ï¼Ÿ</p><h2 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h2><p>Line 1: Two space-separated integers: C and N</p><p>Lines 2..N+1: Each line contains two space-separated integers that are the X,Y coordinates of a clover field.</p><h2 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h2><p>Line 1: A single line with a single integer that is length of one edge of the minimum size square that contains at least C clover fields.</p><h2 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h2><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">3 4</span><br><span class="line">1 2</span><br><span class="line">2 1</span><br><span class="line">4 1</span><br><span class="line">5 2</span><br></pre></td></tr></table></figure><h2 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h2><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">4</span><br></pre></td></tr></table></figure><h2 id="Hint"><a href="#Hint" class="headerlink" title="Hint"></a>Hint</h2><p>Explanation of the sample:</p><p>|<em> </em></p><p>| <em> </em></p><p>+â€”â€”â€”Below is one 4x4 solution (Câ€™s show most of the corralâ€™s area); many others exist.</p><p>|CCCC</p><p>|CCCC</p><p>|<em>CCC</em></p><p>|C<em>C</em></p><p>+â€”â€”â€”</p><h2 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><p><strong>äºŒåˆ†æœç´¢æ …æ çš„è¾¹é•¿</strong>ï¼Œæ¯æ¬¡å°†è¾¹é•¿å¸¦å…¥åˆ°å›¾ä¸­ï¼Œè®¡ç®—å‡ºæœ€å¤šèƒ½è¦†ç›–åˆ°çš„è‰åœºçš„æ•°é‡å³å¯</p><p>è¦è®¡ç®—è¦†ç›–è‰åœºçš„æ•°é‡ï¼Œé€‰å®šä¸€å—è‰åœº $i$ ï¼Œå°† $x[i]$ è®¾ä¸ºè¦†ç›–çš„ä¸Šè¾¹ç•Œï¼Œå¾—å‡ºä¸‹è¾¹ç•Œï¼Œåœ¨ä¸Šè¾¹ç•Œå’Œä¸‹è¾¹ç•Œä¸­äºŒåˆ†æŸ¥æ‰¾ï¼ˆä½¿ç”¨ $ lower_\;bound $ï¼‰æ‰¾åˆ°å·¦å³è¾¹ç•Œçš„è‰åœºç¼–å·èŒƒå›´ï¼ˆå½“ç„¶è¿™éœ€è¦æå‰å¯¹è‰åœºä½ç½®æ’åºï¼‰</p><h2 id="Codes"><a href="#Codes" class="headerlink" title="Codes"></a>Codes</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxn 10001</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> fr(na,st,ed) for(int na=st;na&lt;=ed;na++)</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">int</span> x[maxn],y[maxn];</span><br><span class="line"><span class="type">int</span> id1[maxn],id2[maxn];</span><br><span class="line"><span class="type">int</span> n,c; <span class="type">int</span> l=<span class="number">1</span>,r,mid;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">bool</span> <span class="title">cmp1</span><span class="params">(<span class="type">int</span> q,<span class="type">int</span> w)</span></span>&#123;</span><br><span class="line"><span class="keyword">return</span> x[q]&lt;x[w];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">bool</span> <span class="title">cmp2</span><span class="params">(<span class="type">int</span> q,<span class="type">int</span> w)</span></span>&#123;</span><br><span class="line"><span class="keyword">return</span> y[q]&lt;y[w];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">bool</span> <span class="title">check</span><span class="params">(<span class="type">int</span> size)</span></span>&#123;</span><br><span class="line"><span class="type">int</span> st,ed,k,sum;</span><br><span class="line"><span class="built_in">fr</span>(i,<span class="number">1</span>,n)&#123;</span><br><span class="line">k=<span class="number">1</span>; sum=<span class="number">0</span>;</span><br><span class="line">st=x[id1[i]]; ed=st+size<span class="number">-1</span>;</span><br><span class="line"><span class="built_in">fr</span>(j,<span class="number">1</span>,n)&#123;</span><br><span class="line"><span class="keyword">while</span>(y[id2[k]]-y[id2[j]]+<span class="number">1</span>&lt;=size &amp;&amp; k&lt;=n)&#123;</span><br><span class="line"><span class="keyword">if</span>(st&lt;=x[id2[k]] &amp;&amp; x[id2[k]]&lt;=ed) sum++;</span><br><span class="line">k++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(sum&gt;=c) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">if</span>(st&lt;=x[id2[j]] &amp;&amp; x[id2[j]]&lt;=ed) sum--;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;t3.in&quot;</span>,<span class="string">&quot;r&quot;</span>,stdin);</span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;t3.out&quot;</span>,<span class="string">&quot;w&quot;</span>,stdout);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line">cin&gt;&gt;c&gt;&gt;n;</span><br><span class="line"><span class="built_in">fr</span>(i,<span class="number">1</span>,n)&#123;</span><br><span class="line">cin&gt;&gt;x[i]&gt;&gt;y[i];</span><br><span class="line">r=<span class="built_in">max</span>(r,<span class="built_in">max</span>(x[i],y[i]));</span><br><span class="line">id1[i]=id2[i]=i;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">sort</span>(id1+<span class="number">1</span>,id1+n+<span class="number">1</span>,cmp1);</span><br><span class="line"><span class="built_in">sort</span>(id2+<span class="number">1</span>,id2+n+<span class="number">1</span>,cmp2);</span><br><span class="line"><span class="keyword">while</span>(l&lt;=r)&#123;</span><br><span class="line">mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">check</span>(mid)) r=mid<span class="number">-1</span>;</span><br><span class="line"><span class="keyword">else</span> l=mid+<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout&lt;&lt;l;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åˆ†æ²» </tag>
            
            <tag> äºŒåˆ† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åˆ†æ²» | Best Cow Fences</title>
      <link href="/2019/03/10/2019-03-10-BESTCOWFENCES/"/>
      <url>/2019/03/10/2019-03-10-BESTCOWFENCES/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><h2 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h2><p>Farmer Johnâ€™s farm consists of a long row of N (1 &lt;= N &lt;= 100,000)fields. Each field contains a certain number of cows, 1 &lt;= ncows &lt;= 2000.</p><p>FJ wants to build a fence around a contiguous group of these fields in order to maximize the average number of cows per field within that block. The block must contain at least F(1 &lt;= F &lt;= N) fields, where F given as input.</p><p>Calculate the fence placement that maximizes the average, given the constraint. </p><h2 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h2><ul><li><p>Line 1: Two space-separated integers, N and F.</p></li><li><p>Lines 2..N+1: Each line contains a single integer, the number of cows in a field. Line 2 gives the number of cows in field 1,line 3 gives the number in field 2, and so on.</p></li></ul><h2 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h2><ul><li>Line 1: A single integer that is 1000 times the maximal average.Do not perform rounding, just print the integer that is 1000*ncows/nfields.</li></ul><h2 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h2><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">10 6</span><br><span class="line">6</span><br><span class="line">4</span><br><span class="line">2</span><br><span class="line">10</span><br><span class="line">3</span><br><span class="line">8</span><br><span class="line">5</span><br><span class="line">9</span><br><span class="line">4</span><br><span class="line">1</span><br></pre></td></tr></table></figure><h2 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h2><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">6500</span><br></pre></td></tr></table></figure><h2 id="Hint"><a href="#Hint" class="headerlink" title="Hint"></a>Hint</h2><p>USACO 2003 March Green</p><h2 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><p><strong>äºŒåˆ†é¢˜ç›®æ‰€æ±‚çš„è¿ç»­åºåˆ—å¹³å‡æ•°</strong>ï¼Œéœ€è¦ç”¨åˆ°å‰ç¼€å’Œï¼Œé€’æ¨å¼ï¼š</p><script type="math/tex; mode=display">f[i]=max(\sum_{k=1}^iv[i]-\sum_{i=1}^jv[j]ï¼Œj\in [1,i-f])</script><p>å‘ç° $\sum_{k=1}^iv[i]$ æ˜¯å®šå€¼ï¼Œå¯ä»¥ç”¨å‰ç¼€å’Œå¤„ç†å‡ºæ¥ï¼Œäºæ˜¯ï¼š</p><script type="math/tex; mode=display">f[i]=sum(i)-min(sum(j)ï¼Œj\in [1,i-f])</script><p>è€Œ $i$ å˜åˆ° $i+1$ æ—¶ï¼Œ$j$ çš„é€‰æ‹©èŒƒå›´æ‰©å¤§äº† $1$ ï¼Œäºæ˜¯ï¼š</p><script type="math/tex; mode=display">min(sum(j+1))=min(min(sum(j)ï¼Œsum(j+1))</script><p><strong>é¢„å¤„ç† + äºŒåˆ†çŒœç­”æ¡ˆæ¥åš</strong></p><h2 id="Codes"><a href="#Codes" class="headerlink" title="Codes"></a>Codes</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxn 100001</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> INF 1e-6</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">double</span> v[maxn]; <span class="type">int</span> n,f;</span><br><span class="line"><span class="type">double</span> prefix[maxn];</span><br><span class="line"><span class="type">double</span> minu[maxn];</span><br><span class="line"><span class="type">double</span> maxar,minar;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">check</span><span class="params">(<span class="type">double</span> avar)</span></span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">prefix[i]=prefix[i<span class="number">-1</span>]+v[i]-avar;</span><br><span class="line">minu[i]=<span class="built_in">min</span>(minu[i<span class="number">-1</span>],prefix[i]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">double</span> ans=<span class="number">-99999.0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=f;i&lt;=n;i++)</span><br><span class="line">ans=<span class="built_in">max</span>(ans,prefix[i]-minu[i-f]);</span><br><span class="line"><span class="keyword">return</span> ans&gt;=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;t1.in&quot;</span>,<span class="string">&quot;r&quot;</span>,stdin);</span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;t1.out&quot;</span>,<span class="string">&quot;w&quot;</span>,stdout);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line">cin&gt;&gt;n&gt;&gt;f;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%lf&quot;</span>,&amp;v[i]);</span><br><span class="line">v[i]*<span class="number">1.0</span>; minar+=v[i];</span><br><span class="line">maxar+=v[i];</span><br><span class="line">&#125;</span><br><span class="line">minar=minar/(<span class="type">double</span>)(n);</span><br><span class="line"><span class="type">double</span> mid;</span><br><span class="line"><span class="keyword">while</span>(<span class="built_in">abs</span>(minar-maxar)&gt;=INF)&#123;</span><br><span class="line">mid=(minar+maxar)/<span class="number">2.0</span>;</span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">check</span>(mid)) minar=mid;</span><br><span class="line"><span class="keyword">else</span> maxar=mid;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,(<span class="type">int</span>)(maxar*<span class="number">1000</span>));</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åˆ†æ²» </tag>
            
            <tag> äºŒåˆ† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åˆ†æ²» | äºŒåˆ† | é˜²çº¿</title>
      <link href="/2019/03/10/2019-03-10-%E9%98%B2%E7%BA%BF/"/>
      <url>/2019/03/10/2019-03-10-%E9%98%B2%E7%BA%BF/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><h2 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h2><p>lspå­¦ä¹ æ•°å­¦ç«èµ›çš„æ—¶å€™å—å°½äº†åŒä»ä»¬çš„é„™è§†ï¼Œç»ˆäºæœ‰ä¸€å¤©â€¦â€¦å—å°½å±ˆè¾±çš„lsp é»‘åŒ–æˆä¸ºäº†é»‘æš—è‹±é›„ Lord lspã€‚å°±å¦‚äºŒæ¼«ç”»çš„æƒ…èŠ‚ä¸€æ ·ï¼Œ Lord lsp æ‰“ç®—æ¯æ‰è¿™ä¸ªä¸–ç•Œã€‚æ•°å­¦ç«èµ›ç•Œçš„ç²¾è‹± lqr æ‰“ç®—é˜»æ­¢ Lord lsp çš„é˜´è°‹ï¼Œäºæ˜¯å¥¹é›†åˆäº†ä¸€æ”¯ç”±æ•°å­¦</p><p>ç«èµ›é€‰æ‰‹ç»„æˆçš„è¶…çº§è¡ŒåŠ¨é˜Ÿã€‚ç”±äºé˜Ÿå‘˜ä»¬ä¸ªä¸ªéƒ½æ™ºå•†è¶…ç¾¤ï¼Œå¾ˆå¿«ï¼Œè¡ŒåŠ¨é˜Ÿä¾¿æ¥åˆ°äº† Lord lsp çš„é»‘æš—åŸå ¡çš„ä¸‹æ–¹ã€‚</p><p>ä½†æ˜¯ï¼ŒåŒæ ·å¼ºå¤§çš„ Lord lsp åœ¨åŸå ¡å‘¨å›´å¸ƒç½®äº†ä¸€æ¡â€œä¸å¯è¶Šè¿‡â€çš„åšå›ºé˜²çº¿ã€‚é˜²çº¿ç”±å¾ˆå¤šé˜²å…·ç»„æˆï¼Œè¿™äº›é˜²å…·åˆ†æˆäº† N ç»„ã€‚æˆ‘ä»¬å¯ä»¥è®¤ä¸ºé˜²çº¿æ˜¯ä¸€ç»´çš„ï¼Œé‚£ä¹ˆæ¯ä¸€ç»„é˜²å…·éƒ½åˆ†å¸ƒåœ¨é˜²çº¿çš„æŸä¸€æ®µä¸Šï¼Œå¹¶ä¸”åŒä¸€ç»„é˜²å…·æ˜¯ç­‰è·ç¦»æ’åˆ—çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸‰ä¸ªæ•´æ•° Sï¼Œ E å’Œ D æ¥æè¿°ä¸€ç»„é˜²å…·ï¼Œå³è¿™ä¸€ç»„é˜²å…·å¸ƒç½®åœ¨é˜²çº¿çš„ Sï¼ŒS + Dï¼ŒS + 2Dï¼Œâ€¦ï¼ŒS + KDï¼ˆKâˆˆZï¼ŒS + KDâ‰¤Eï¼ŒS + (K + 1)Dï¼Eï¼‰ä½ç½®ä¸Šã€‚</p><p>é»‘åŒ–çš„ Lord lsp è®¾è®¡çš„é˜²çº¿æå…¶ç²¾è‰¯ã€‚å¦‚æœé˜²çº¿çš„æŸä¸ªä½ç½®æœ‰å¶æ•°ä¸ªé˜²å…·ï¼Œé‚£ä¹ˆè¿™ä¸ªä½ç½®å°±æ˜¯æ¯«æ— ç ´ç»½çš„ï¼ˆåŒ…æ‹¬è¿™ä¸ªä½ç½®ä¸€ä¸ªé˜²å…·ä¹Ÿæ²¡æœ‰çš„æƒ…å†µï¼Œå› ä¸º 0 ä¹Ÿæ˜¯å¶æ•°ï¼‰ã€‚åªæœ‰æœ‰å¥‡æ•°ä¸ªé˜²å…·çš„ä½ç½®æœ‰ç ´ç»½ï¼Œä½†æ˜¯æ•´æ¡é˜²çº¿ä¸Šä¹Ÿæœ€å¤šåªæœ‰ä¸€ä¸ªä½ç½®æœ‰å¥‡æ•°ä¸ªé˜²å…·ã€‚ä½œä¸ºè¡ŒåŠ¨é˜Ÿçš„é˜Ÿé•¿ï¼Œlqr è¦æ‰¾åˆ°é˜²çº¿çš„ç ´ç»½ä»¥ç­–åˆ’ä¸‹ä¸€æ­¥çš„è¡ŒåŠ¨ã€‚ä½†æ˜¯ï¼Œç”±äºé˜²å…·çš„æ•°é‡å¤ªå¤šï¼Œå¥¹å®åœ¨æ˜¯ä¸èƒ½çœ‹å‡ºå“ªé‡Œæœ‰ç ´ç»½ã€‚ä½œä¸º lqr å¯ä»¥ä¿¡ä»»çš„å­¦å¼Ÿå­¦å¦¹ä»¬ï¼Œä½ ä»¬è¦å¸®åŠ©å¥¹è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p><h2 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h2><p>è¾“å…¥æ–‡ä»¶çš„ç¬¬ä¸€è¡Œæ˜¯ä¸€ä¸ªæ•´æ•° Tï¼Œè¡¨ç¤ºæœ‰ T ç»„äº’ç›¸ç‹¬ç«‹çš„æµ‹è¯•æ•°æ®ã€‚</p><p>æ¯ç»„æ•°æ®çš„ç¬¬ä¸€è¡Œæ˜¯ä¸€ä¸ªæ•´æ•° Nã€‚</p><p>ä¹‹å N è¡Œï¼Œæ¯è¡Œä¸‰ä¸ªæ•´æ•° Siï¼ŒEiï¼ŒDiï¼Œä»£è¡¨ç¬¬ i ç»„é˜²å…·çš„ä¸‰ä¸ªå‚æ•°ã€‚</p><h2 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h2><p>å¯¹äºæ¯ç»„æµ‹è¯•æ•°æ®ï¼Œå¦‚æœé˜²çº¿æ²¡æœ‰ç ´ç»½ï¼Œå³æ‰€æœ‰çš„ä½ç½®éƒ½æœ‰å¶æ•°ä¸ªé˜²å…·ï¼Œè¾“å‡ºä¸€è¡Œâ€œThereâ€™s no weakness.â€ï¼ˆä¸åŒ…å«å¼•å·ï¼‰ å¦åˆ™åœ¨ä¸€è¡Œå†…è¾“å‡ºä¸¤ä¸ªç©ºæ ¼åˆ†éš”çš„æ•´æ•° P å’Œ Cï¼Œè¡¨ç¤ºåœ¨ä½ç½® P æœ‰ C ä¸ªé˜²å…·ã€‚å½“ç„¶ C åº”è¯¥æ˜¯ä¸€ä¸ªå¥‡æ•°ã€‚</p><h2 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h2><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">3</span><br><span class="line">2 </span><br><span class="line">1 10 1 </span><br><span class="line">2 10 1 </span><br><span class="line">2 </span><br><span class="line">1 10 1 </span><br><span class="line">1 10 1</span><br><span class="line">4 </span><br><span class="line">1 10 1 </span><br><span class="line">4 4 1 </span><br><span class="line">1 5 1 </span><br><span class="line">6 10 1</span><br></pre></td></tr></table></figure><h2 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h2><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1 1 </span><br><span class="line">Thereâ€™s no weakness.</span><br><span class="line">4 3</span><br></pre></td></tr></table></figure><h2 id="xxxxxxxxxx66-1-include-2-include-3-include-4-include-5-include-6-include-7-include-8-define-maxn-10019-define-pf-x-xx-10using-namespace-std-11typedef-long-long-ll-12struct-node-13-int-a-b-14-double-val-15-bool-operator-lt-const-node-amp-obj-const-16-return-val-lt-obj-val-17-18-g-maxnmaxn-19int-tot-f-maxn-20double-res-maxn-21pair-d-maxn-int-s-p-22inline-double-getdis-ll-x1-ll-x2-ll-y1-ll-y2-23-return-sqrt-pf-abs-x1-x2-pf-abs-y1-y2-24-25int-Sfind-int-x-26-if-f-x-x-return-x-27-else-return-f-x-Sfind-f-x-28-29inline-void-Sunion-int-u1-int-u2-30-int-fa-Sfind-u1-31-int-fb-Sfind-u2-32-f-fa-fb-33-34inline-void-makeEdge-35-for-int-i-1-i-lt-p-i-36-for-int-j-i-1-j-lt-p-j-37-g-tot-node-i-j-38-getdis-d-i-first-d-j-first-d-i-second-d-j-second-39-40-41double-kruskal-42-int-cnt-0-43-sort-g-1-g-tot-1-44-for-int-i-1-i-lt-tot-i-45-if-Sfind-g-i-a-Sfind-g-i-b-46-res-cnt-g-i-val-47-Sunion-g-i-a-g-i-b-48-49-return-res-cnt-s-1-50-51int-main-52-ifndef-ONLINE-JUDGE53-freopen-â€œtestin-txtâ€-â€râ€-stdin-54-freopen-â€œtestout-txtâ€-â€wâ€-stdout-55-endif56-cin-gt-gt-s-gt-gt-p-57-if-s-gt-p-58-cout-lt-lt-â€0-00â€-59-return-0-60-61-for-int-i-1-i-lt-p-i-62-cin-gt-gt-d-i-first-gt-gt-d-i-second-63-makeEdge-for-int-i-0-i-lt-p-i-f-i-i-64-printf-â€œ-2lfâ€-kruskal-65-return-0-66-cpp"><a href="#xxxxxxxxxx66-1-include-2-include-3-include-4-include-5-include-6-include-7-include-8-define-maxn-10019-define-pf-x-xx-10using-namespace-std-11typedef-long-long-ll-12struct-node-13-int-a-b-14-double-val-15-bool-operator-lt-const-node-amp-obj-const-16-return-val-lt-obj-val-17-18-g-maxnmaxn-19int-tot-f-maxn-20double-res-maxn-21pair-d-maxn-int-s-p-22inline-double-getdis-ll-x1-ll-x2-ll-y1-ll-y2-23-return-sqrt-pf-abs-x1-x2-pf-abs-y1-y2-24-25int-Sfind-int-x-26-if-f-x-x-return-x-27-else-return-f-x-Sfind-f-x-28-29inline-void-Sunion-int-u1-int-u2-30-int-fa-Sfind-u1-31-int-fb-Sfind-u2-32-f-fa-fb-33-34inline-void-makeEdge-35-for-int-i-1-i-lt-p-i-36-for-int-j-i-1-j-lt-p-j-37-g-tot-node-i-j-38-getdis-d-i-first-d-j-first-d-i-second-d-j-second-39-40-41double-kruskal-42-int-cnt-0-43-sort-g-1-g-tot-1-44-for-int-i-1-i-lt-tot-i-45-if-Sfind-g-i-a-Sfind-g-i-b-46-res-cnt-g-i-val-47-Sunion-g-i-a-g-i-b-48-49-return-res-cnt-s-1-50-51int-main-52-ifndef-ONLINE-JUDGE53-freopen-â€œtestin-txtâ€-â€râ€-stdin-54-freopen-â€œtestout-txtâ€-â€wâ€-stdout-55-endif56-cin-gt-gt-s-gt-gt-p-57-if-s-gt-p-58-cout-lt-lt-â€0-00â€-59-return-0-60-61-for-int-i-1-i-lt-p-i-62-cin-gt-gt-d-i-first-gt-gt-d-i-second-63-makeEdge-for-int-i-0-i-lt-p-i-f-i-i-64-printf-â€œ-2lfâ€-kruskal-65-return-0-66-cpp" class="headerlink" title="xxxxxxxxxx66 1#include 2#include 3#include 4#include 5#include 6#include 7#include 8#define maxn 10019#define pf(x) (xx)10using namespace std;11typedef long long ll;12struct node{13    int a,b;14    double val;15    bool operator &lt;(const node &amp;obj)const{16        return val&lt;obj.val;17    }18}g[maxnmaxn];19int tot,f[maxn];20double res[maxn];21pair d[maxn]; int s,p;22inline double getdis(ll x1,ll x2,ll y1,ll y2){23    return sqrt(pf(abs(x1-x2))+pf(abs(y1-y2)));24}25int Sfind(int x){26    if(f[x]==x) return x;27    else return f[x]=Sfind(f[x]);28}29inline void Sunion(int u1,int u2){30    int fa=Sfind(u1);31    int fb=Sfind(u2);32    f[fa]=fb;33}34inline void makeEdge(){35    for(int i=1;i&lt;=p;i++)36        for(int j=i+1;j&lt;=p;j++)37            g[++tot]=(node){i,j,38                getdis(d[i].first,d[j].first,d[i].second,d[j].second)39            };40}41double kruskal(){42    int cnt=0;43    sort(g+1,g+tot+1);44    for(int i=1;i&lt;=tot;i++){45        if(Sfind(g[i].a)!=Sfind(g[i].b))46            res[++cnt]=g[i].val,47            Sunion(g[i].a,g[i].b);48    }49    return res[cnt-s+1];50}51int main(){52    #ifndef ONLINE_JUDGE53    freopen(â€œtestin.txtâ€,â€râ€,stdin);54    freopen(â€œtestout.txtâ€,â€wâ€,stdout);55    #endif56    cin&gt;&gt;s&gt;&gt;p;57    if(s&gt;=p){58        cout&lt;&lt;â€0.00â€;59        return 0;60    }61    for(int i=1;i&lt;=p;i++)62        cin&gt;&gt;d[i].first&gt;&gt;d[i].second;63    makeEdge(); for(int i=0;i&lt;=p;i++) f[i]=i;64    printf(â€œ%.2lfâ€,kruskal());65    return 0;66}cpp"></a>xxxxxxxxxx66 1#include <cstdio>2#include <iostream>3#include <algorithm>4#include <cstring>5#include <utility>6#include <vector>7#include <cmath>8#define maxn 10019#define pf(x) (x<em>x)10using namespace std;11typedef long long ll;12struct node{13    int a,b;14    double val;15    bool operator &lt;(const node &amp;obj)const{16        return val&lt;obj.val;17    }18}g[maxn</em>maxn];19int tot,f[maxn];20double res[maxn];21pair<ll,ll> d[maxn]; int s,p;22inline double getdis(ll x1,ll x2,ll y1,ll y2){23    return sqrt(pf(abs(x1-x2))+pf(abs(y1-y2)));24}25int Sfind(int x){26    if(f[x]==x) return x;27    else return f[x]=Sfind(f[x]);28}29inline void Sunion(int u1,int u2){30    int fa=Sfind(u1);31    int fb=Sfind(u2);32    f[fa]=fb;33}34inline void makeEdge(){35    for(int i=1;i&lt;=p;i++)36        for(int j=i+1;j&lt;=p;j++)37            g[++tot]=(node){i,j,38                getdis(d[i].first,d[j].first,d[i].second,d[j].second)39            };40}41double kruskal(){42    int cnt=0;43    sort(g+1,g+tot+1);44    for(int i=1;i&lt;=tot;i++){45        if(Sfind(g[i].a)!=Sfind(g[i].b))46            res[++cnt]=g[i].val,47            Sunion(g[i].a,g[i].b);48    }49    return res[cnt-s+1];50}51int main(){52    #ifndef ONLINE_JUDGE53    freopen(â€œtestin.txtâ€,â€râ€,stdin);54    freopen(â€œtestout.txtâ€,â€wâ€,stdout);55    #endif56    cin&gt;&gt;s&gt;&gt;p;57    if(s&gt;=p){58        cout&lt;&lt;â€0.00â€;59        return 0;60    }61    for(int i=1;i&lt;=p;i++)62        cin&gt;&gt;d[i].first&gt;&gt;d[i].second;63    makeEdge(); for(int i=0;i&lt;=p;i++) f[i]=i;64    printf(â€œ%.2lfâ€,kruskal());65    return 0;66}cpp</h2><p>å¯¹äº 30% çš„æ•°æ®ï¼Œæ»¡è¶³é˜²å…·æ€»æ•°ä¸å¤šäº 10^7ã€‚</p><p>å¯¹äº 100% çš„æ•°æ®ï¼Œæ»¡è¶³é˜²å…·æ€»æ•°ä¸å¤šäº 10^8ï¼ŒSiâ‰¤Eiï¼Œ1â‰¤Tâ‰¤5ï¼ŒNâ‰¤200000ï¼Œ0â‰¤Siï¼ŒEiï¼ŒDiâ‰¤2^31-1ã€‚</p><h2 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><p>ç”±äºé¢˜ç›®ä¸­ç»™å‡ºï¼Œæ‰€æœ‰ä½ç½®ä¸­ï¼Œåªæœ‰ä¸€ä¸ªä½ç½®æœ‰å¥‡æ•°ä¸ªé˜²å…·</p><p>é‚£ä¹ˆå¾ˆå®¹æ˜“åˆ¤æ–­æ— è§£æ¡ä»¶ï¼šå³æ‰€æœ‰ä½ç½®é˜²å…·æ€»æ•°ä¹‹å’Œä¸ºå¶æ•°</p><p>ä¸åŒæ¡ä»¶ä¸‹ï¼Œç›®æ ‡ä½ç½®çš„å¥‡æ•°ä¸ªé˜²å…·ä¼šä½¿å¾—ï¼šåœ¨å®ƒå‰é¢çš„ä½ç½®çš„é˜²å…·æ€»æ•°ä¸ºå¶æ•°ï¼Œåœ¨å®ƒä¹‹åçš„ä½ç½®çš„é˜²å…·æ€»æ•°æ˜¯å¥‡æ•°ï¼ˆè¿™é‡Œæ˜¯å‰ç¼€å’Œï¼‰ï¼Œæ•´ä½“äºŒåˆ†å³å¯</p><p>æŠŠæ¯æ¡å‘½ä»¤ææˆç»“æ„ä½“ï¼Œé‚£ä¹ˆæ¯æ¡å‘½ä»¤æ”¾ä¸‹çš„é˜²å…·æ€»æ•°å°±æ˜¯ï¼š</p><script type="math/tex; mode=display">(End-Start)\div Delta +1</script><h2 id="Codes"><a href="#Codes" class="headerlink" title="Codes"></a>Codes</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxn 200001</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="type">int</span> n,T;</span><br><span class="line">ll l,r,mid;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">node</span>&#123;</span><br><span class="line"><span class="type">int</span> S,E,D;</span><br><span class="line"><span class="type">bool</span> <span class="keyword">operator</span> &lt;(<span class="type">const</span> node &amp;obj)<span class="type">const</span>&#123;</span><br><span class="line"><span class="keyword">if</span>(S!=obj.S) <span class="keyword">return</span> S&lt;obj.S;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">return</span> E&lt;obj.E;</span><br><span class="line">&#125;</span><br><span class="line">&#125;g[maxn];</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">check</span><span class="params">(ll pos)</span></span>&#123;</span><br><span class="line">ll ans=<span class="number">0</span>; <span class="type">int</span> i;</span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line"><span class="keyword">if</span>(g[i].E&lt;l) <span class="keyword">continue</span>;</span><br><span class="line"><span class="keyword">if</span>(g[i].S&gt;pos) <span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">if</span>(pos&gt;g[i].E) ans+=(g[i].E-g[i].S)/g[i].D+<span class="number">1</span>;</span><br><span class="line"><span class="keyword">else</span> ans+=(pos-g[i].S)/g[i].D+<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> ans&amp;<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">bool</span> <span class="title">nosol</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="type">int</span> ans=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">ans+=(g[i].E-g[i].S)/g[i].D+<span class="number">1</span>;</span><br><span class="line">ans%=<span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> (ans==<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">int</span> <span class="title">res</span><span class="params">(<span class="type">int</span> pos)</span></span>&#123;</span><br><span class="line"><span class="type">int</span> ret=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line"><span class="keyword">if</span>(g[i].E&lt;pos) <span class="keyword">continue</span>;</span><br><span class="line"><span class="keyword">if</span>(g[i].S&gt;pos) <span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">if</span>((pos-g[i].S)%g[i].D==<span class="number">0</span>) ret++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;t2.in&quot;</span>,<span class="string">&quot;r&quot;</span>,stdin);</span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;t2.out&quot;</span>,<span class="string">&quot;w&quot;</span>,stdout);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line">cin&gt;&gt;T;</span><br><span class="line"><span class="keyword">while</span>(T--)&#123;</span><br><span class="line">cin&gt;&gt;n;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">cin&gt;&gt;g[i].S&gt;&gt;g[i].E&gt;&gt;g[i].D;</span><br><span class="line"><span class="built_in">sort</span>(g+<span class="number">1</span>,g+n+<span class="number">1</span>);</span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">nosol</span>()) cout&lt;&lt;<span class="string">&quot;There&#x27;s no weakness.&quot;</span>&lt;&lt;<span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line">l=g[<span class="number">1</span>].S;</span><br><span class="line">r=g[n].E;</span><br><span class="line"><span class="keyword">while</span>(l&lt;r)&#123;</span><br><span class="line">mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">check</span>(mid)) r=mid;</span><br><span class="line"><span class="keyword">else</span> l=mid+<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout&lt;&lt;l&lt;&lt;<span class="string">&#x27; &#x27;</span>&lt;&lt;<span class="built_in">res</span>(l)&lt;&lt;<span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åˆ†æ²» </tag>
            
            <tag> äºŒåˆ† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>VB.NETå°ç¨‹åº</title>
      <link href="/2019/03/09/2019-03-09-LRCEDITOR/"/>
      <url>/2019/03/09/2019-03-09-LRCEDITOR/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><blockquote><p><strong>åˆ†äº«ä¸€ä¸ªæœ€è¿‘å†™çš„æ­Œè¯ç¼–è¾‘å°ç¨‹åºï¼š$LrcEditor$</strong></p></blockquote><p><a href="https://share.weiyun.com/5iM2eQm">ä¸‹è½½åœ°å€ï¼ˆè…¾è®¯å¾®äº‘ï¼‰</a></p><p><strong>ç›®å‰å¯ä»¥å®ç°çš„åŠŸèƒ½ï¼š</strong></p><ul><li>å¯¹æ­Œè¯è¿›è¡Œç¼–è¾‘ï¼ŒæŒ‰æ—¶é—´é¡ºåºæ’åºå¹¶å±•ç¤º</li><li>æŒ‰ç…§LRCâ€‹æ–‡ä»¶çš„æ ¼å¼è¾“å‡ºæ­Œè¯æ–‡ä»¶</li></ul><p><strong>$BUG$ å’Œ å¾…å®Œå–„çš„åŠŸèƒ½ï¼š</strong></p><ul><li>æ·»åŠ æ­Œæ›²åŒæ­¥å½•åˆ¶åŠŸèƒ½</li><li>å¼‚å¸¸å¡æ­»ï¼ˆæœ‰æ—¶ï¼‰</li></ul><p><strong>ç¨‹åºä¿¡æ¯ï¼š</strong></p><ul><li>exeæ–‡ä»¶è·¯å¾„ï¼š\lrceditor\lrceditor\bin\Debug</li><li>è§£å†³æ–¹æ¡ˆï¼ˆåœ¨VS2017ä¸‹ç¼–è¾‘ï¼‰ï¼š\lrceditor\lrceditor.sln</li></ul><p>æ¬¢è¿å‘è¡¨è¯„è®ºï¼ˆæŒ‡ç‚¹ $or$ è®¨è®ºéƒ½å¯ä»¥ï¼‰ï¼</p>]]></content>
      
      
      <categories>
          
          <category> VB.NET </category>
          
      </categories>
      
      
        <tags>
            
            <tag> VB.NET </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŠ¨æ€è§„åˆ’ | æ•°ä½ | Round Numbers</title>
      <link href="/2019/03/09/2019-03-09-RoundNumbers/"/>
      <url>/2019/03/09/2019-03-09-RoundNumbers/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><h2 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h2><p>The cows, as you know, have no  fingers or thumbs and thus are unable to play Scissors, Paper, Stoneâ€™  (also known as â€˜Rock, Paper, Scissorsâ€™, â€˜Ro, Sham, Boâ€™,and a host of  other names) in order to make arbitrary decisions such as who gets to be  milked first. They canâ€™t even flip a coin because itâ€™s so hard to  tossusing hooves.</p><p>Theyhave thus resorted to â€œround numberâ€  matching. The first cow picks aninteger less than two billion. The  second cow does the same. If the numbers areboth â€œround numbersâ€, the  first cow wins, otherwise the second cowwins.</p><p>A positive integer  N is said to be a â€œround numberâ€ if the binary representation of N has as  many or more zero es than it has ones. For example,the integer 9, when  written in binary form, is 1001. 1001 has two zero es and two ones; thus, 9  is a round number. The integer 26 is 11010 in binary; since it has two  zero es and three ones, it is not a round number.</p><p>Obviously,it  takes cows a while to convert numbers to binary, so the winner takes a  while to determine. Bessie wants to cheat and thinks she can do that if  she knows how many â€œround numbersâ€ are in a given range.</p><p>Helpher by  writing a program that tells how many round numbers appear in  theinclusive range given by the input (1 &lt; Start &lt; Finish  &lt;2,000,000,000).</p><h2 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h2><p>Line 1: Two space-separated integers, respectively Start and Finish.</p><h2 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h2><p>Line 1: A single integer that is the count of round numbers in the inclusive range Start..Finish</p><h2 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h2><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2 12</span><br></pre></td></tr></table></figure><h2 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h2><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">6</span><br></pre></td></tr></table></figure><h2 id="Hint"><a href="#Hint" class="headerlink" title="Hint"></a>Hint</h2><p>No Hint</p><h2 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><p>ä¸€é“æ•°ä½ $DP$ é¢˜ï¼Œæ ¹æ®é¢˜ç›®è¦æ±‚ï¼Œè¦åœ¨ $[Lï¼ŒR]$ åŒºé—´å†…æ±‚å‡ºè½¬åŒ–ä¸ºäºŒè¿›åˆ¶ä¹‹å $0$ çš„ä¸ªæ•°ä¸å°‘äº $1 $ çš„ä¸ªæ•°çš„æ•°å­—ä¸ªæ•°ï¼Œç”¨<strong>è¯•å¡«æ³• + $DFS$ çš„è®°å¿†åŒ–å®ç°</strong></p><p>æ³¨æ„å‰å¯¼0çš„é—®é¢˜ï¼Œä»£ç ä¸­ç”¨ $lead$ læ¥æŒ‡ç¤ºå‰å¯¼0</p><h2 id="Codes"><a href="#Codes" class="headerlink" title="Codes"></a>Codes</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxn 41</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> LL;</span><br><span class="line">LL dp[maxn][maxn][maxn];</span><br><span class="line"><span class="type">int</span> spr[maxn];</span><br><span class="line"><span class="function">LL <span class="title">dfs</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> c1,<span class="type">int</span> c0,<span class="type">bool</span> lead,<span class="type">bool</span> lim)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(x==<span class="number">0</span>) <span class="keyword">return</span> c0&gt;=c1;</span><br><span class="line"><span class="keyword">if</span>(!lim &amp;&amp; dp[x][c1][c0]!=<span class="number">-1</span>) <span class="keyword">return</span> dp[x][c1][c0];</span><br><span class="line">LL ans=<span class="number">0</span>; <span class="type">int</span> imax=lim?spr[x]:<span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;=imax;i++)&#123;</span><br><span class="line"><span class="keyword">if</span>(i==<span class="number">1</span>)</span><br><span class="line">ans+=<span class="built_in">dfs</span>(x<span class="number">-1</span>,c1+<span class="number">1</span>,c0,lead &amp;&amp; i==<span class="number">0</span>,lim &amp;&amp; i==imax);</span><br><span class="line"><span class="keyword">if</span>(i==<span class="number">0</span> &amp;&amp; lead)</span><br><span class="line">ans+=<span class="built_in">dfs</span>(x<span class="number">-1</span>,c1,c0,lead &amp;&amp; i==<span class="number">0</span>,lim &amp;&amp; i==imax);</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(i==<span class="number">0</span>)</span><br><span class="line">ans+=<span class="built_in">dfs</span>(x<span class="number">-1</span>,c1,c0+<span class="number">1</span>,lead &amp;&amp; i==<span class="number">0</span>,lim &amp;&amp; i==imax);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(dp[x][c1][c0]==<span class="number">-1</span>) dp[x][c1][c0]=ans;</span><br><span class="line"><span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> LL <span class="title">res</span><span class="params">(<span class="type">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="built_in">memset</span>(spr,<span class="number">0</span>,<span class="built_in">sizeof</span>(spr));</span><br><span class="line"><span class="type">int</span> cnt=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span>(x&gt;<span class="number">0</span>)&#123;</span><br><span class="line">spr[++cnt]=x&amp;<span class="number">1</span>;</span><br><span class="line">x&gt;&gt;=<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="built_in">dfs</span>(cnt,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;t2.in&quot;</span>,<span class="string">&quot;r&quot;</span>,stdin);</span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;t2.out&quot;</span>,<span class="string">&quot;w&quot;</span>,stdout);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"><span class="built_in">memset</span>(dp,<span class="number">-1</span>,<span class="built_in">sizeof</span>(dp));</span><br><span class="line">LL a,b;</span><br><span class="line">cin&gt;&gt;a&gt;&gt;b;</span><br><span class="line">cout&lt;&lt;<span class="built_in">res</span>(b)-<span class="built_in">res</span>(a<span class="number">-1</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŠ¨æ€è§„åˆ’ </tag>
            
            <tag> æ•°è®º </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŠ¨æ€è§„åˆ’ | æ•°è®º | Scoi2009 Windyæ•°</title>
      <link href="/2019/03/04/2019-03-04-%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92-%E6%95%B0%E4%BD%8D-scoi2009-windy%E6%95%B0/"/>
      <url>/2019/03/04/2019-03-04-%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92-%E6%95%B0%E4%BD%8D-scoi2009-windy%E6%95%B0/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><p><font color=green> Description </font><br>windyå®šä¹‰äº†ä¸€ç§windyæ•°ã€‚ç›¸é‚»ä¸¤ä¸ªæ•°å­—ä¹‹å·®è‡³å°‘ä¸º2çš„æ­£æ•´æ•°è¢«ç§°ä¸ºwindyæ•°ã€‚windyæƒ³çŸ¥é“ï¼Œåœ¨Aå’ŒBä¹‹é—´ï¼ŒåŒ…æ‹¬Aå’ŒBï¼Œæ€»å…±æœ‰å¤šå°‘ä¸ªwindyæ•°ï¼Ÿ</p><h1 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h1><p>åŒ…å«ä¸¤ä¸ªæ•´æ•°ï¼ŒA Bã€‚</p><h1 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h1><p>åŒ…å«ä¸€ä¸ªæ•´æ•°ã€‚</p><h1 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1 10</span><br></pre></td></tr></table></figure><h1 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">9</span><br></pre></td></tr></table></figure><h1 id="Hint"><a href="#Hint" class="headerlink" title="Hint"></a>Hint</h1><p>20%çš„æ•°æ®ï¼Œæ»¡è¶³ 1 &lt;= A &lt;= B &lt;= 1000000 ã€‚100%çš„æ•°æ®ï¼Œæ»¡è¶³ 1 &lt;= A &lt;= B &lt;= 2000000000 ã€‚</p><h1 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h1><p>Success Text.<br>{:.success}</p><h1 id="Codes"><a href="#Codes" class="headerlink" title="Codes"></a>Codes</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxn 66</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> LL;</span><br><span class="line"><span class="type">int</span> spr[maxn];</span><br><span class="line">LL f[maxn][maxn];</span><br><span class="line"><span class="function">LL <span class="title">dfs</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> p,<span class="type">bool</span> lim)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(!x) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span>(!lim &amp;&amp; f[x][p]!=<span class="number">-1</span>) <span class="keyword">return</span> f[x][p];</span><br><span class="line">LL ans=<span class="number">0</span>;</span><br><span class="line"><span class="type">int</span> imax=lim?spr[x]:<span class="number">9</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;=imax;i++)&#123;</span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">abs</span>(i-p)&lt;<span class="number">2</span>) <span class="keyword">continue</span>;</span><br><span class="line"><span class="keyword">if</span>(i==<span class="number">0</span> &amp;&amp; p==<span class="number">11</span>) ans+=<span class="built_in">dfs</span>(x<span class="number">-1</span>,<span class="number">11</span>,lim &amp;&amp; i==imax);</span><br><span class="line"><span class="keyword">else</span> ans+=<span class="built_in">dfs</span>(x<span class="number">-1</span>,i,lim &amp;&amp; i==imax);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(!lim) f[x][p]=ans;</span><br><span class="line"><span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">LL <span class="title">res</span><span class="params">(<span class="type">int</span> x)</span></span>&#123;</span><br><span class="line"><span class="comment">// spr[0] å­˜ä½æ•° </span></span><br><span class="line"><span class="built_in">memset</span>(spr,<span class="number">0</span>,<span class="built_in">sizeof</span>(spr));</span><br><span class="line"><span class="keyword">while</span>(x&gt;<span class="number">0</span>)&#123;</span><br><span class="line">spr[++spr[<span class="number">0</span>]]=x%<span class="number">10</span>;</span><br><span class="line">x/=<span class="number">10</span>;</span><br><span class="line">&#125; spr[spr[<span class="number">0</span>]+<span class="number">1</span>]=<span class="number">-1</span>;</span><br><span class="line"><span class="built_in">memset</span>(f,<span class="number">-1</span>,<span class="built_in">sizeof</span>(f));</span><br><span class="line"><span class="keyword">return</span> <span class="built_in">dfs</span>(spr[<span class="number">0</span>],<span class="number">11</span>,<span class="literal">true</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;testin.txt&quot;</span>,<span class="string">&quot;r&quot;</span>,stdin);</span><br><span class="line"><span class="built_in">freopen</span>(<span class="string">&quot;testout.txt&quot;</span>,<span class="string">&quot;w&quot;</span>,stdout);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"><span class="type">int</span> a,b; cin&gt;&gt;a&gt;&gt;b;</span><br><span class="line">cout&lt;&lt;<span class="built_in">res</span>(b)-<span class="built_in">res</span>(a<span class="number">-1</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŠ¨æ€è§„åˆ’ </tag>
            
            <tag> æ•°è®º </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
