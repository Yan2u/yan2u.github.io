<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>图论 | SPFA | 20190623考试：解题报告 | Yan2u's Blog</title><meta name="keywords" content="图论,SPFA"><meta name="author" content="Yan2u"><meta name="copyright" content="Yan2u"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Problem.#1：虫洞(wormhole.cpp&#x2F;c&#x2F;pas) While exploring his many farms, Farmer John has discovered a number of amazing wormholes. A wormhole is very peculiar because it is a one-way path that delivers you">
<meta property="og:type" content="article">
<meta property="og:title" content="图论 | SPFA | 20190623考试：解题报告">
<meta property="og:url" content="http://example.com/2019/06/24/2019-06-24-%E8%80%83%E8%AF%95%E8%A7%A3%E9%A2%98%E6%8A%A5%E5%91%8A/">
<meta property="og:site_name" content="Yan2u&#39;s Blog">
<meta property="og:description" content="Problem.#1：虫洞(wormhole.cpp&#x2F;c&#x2F;pas) While exploring his many farms, Farmer John has discovered a number of amazing wormholes. A wormhole is very peculiar because it is a one-way path that delivers you">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://s1.ax1x.com/2022/08/11/v8u55Q.jpg">
<meta property="article:published_time" content="2019-06-23T16:00:00.000Z">
<meta property="article:modified_time" content="2022-08-11T05:42:23.362Z">
<meta property="article:author" content="Yan2u">
<meta property="article:tag" content="图论">
<meta property="article:tag" content="SPFA">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://s1.ax1x.com/2022/08/11/v8u55Q.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://example.com/2019/06/24/2019-06-24-%E8%80%83%E8%AF%95%E8%A7%A3%E9%A2%98%E6%8A%A5%E5%91%8A/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":300},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '图论 | SPFA | 20190623考试：解题报告',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-08-11 13:42:23'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/custom.css" media="defer" onload="this.media='all'"><meta name="generator" content="Hexo 6.2.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://s1.ax1x.com/2022/06/20/XjjdfK.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">55</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">47</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">2</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="not-top-img" id="page-header"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Yan2u's Blog</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav></header><main class="layout" id="content-inner"><div id="post"><div id="post-info"><h1 class="post-title">图论 | SPFA | 20190623考试：解题报告</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2019-06-23T16:00:00.000Z" title="发表于 2019-06-24 00:00:00">2019-06-24</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-08-11T05:42:23.362Z" title="更新于 2022-08-11 13:42:23">2022-08-11</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/OI/">OI</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">2.7k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>13分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="图论 | SPFA | 20190623考试：解题报告"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div><article class="post-content" id="article-container"><span id="more"></span>
<h2 id="Problem-1：虫洞-wormhole-cpp-c-pas"><a href="#Problem-1：虫洞-wormhole-cpp-c-pas" class="headerlink" title="Problem.#1：虫洞(wormhole.cpp/c/pas)"></a>Problem.#1：虫洞(wormhole.cpp/c/pas)</h2><blockquote>
<p>While exploring his many farms, Farmer John has discovered a number of amazing wormholes. A wormhole is very peculiar because it is a one-way path that delivers you to its destination at a time that is BEFORE you entered the wormhole! Each of FJ’s farms comprises N (1 ≤ N ≤ 500) fields conveniently numbered 1..N, M (1 ≤ M ≤ 2500) paths, and W (1 ≤ W ≤ 200) wormholes.</p>
<p>As FJ is an avid time-traveling fan, he wants to do the following: start at some field, travel through some paths and wormholes, and return to the starting field a time before his initial departure. Perhaps he will be able to meet himself :) .</p>
<p>To help FJ find out whether this is possible or not, he will supply you with complete maps to F (1 ≤ F ≤ 5) of his farms. No paths will take longer than 10,000 seconds to travel and no wormhole can bring FJ back in time by more than 10,000 seconds.</p>
</blockquote>
<p>John在他的农场中闲逛时发现了许多虫洞。虫洞可以看作一条十分奇特的有向边，并可以使你返回到过去的一个时刻（相对你进入虫洞之前）。John的每个农场有M条小路（无向边）连接着N （从1..N标号）块地，并有W个虫洞（有向边）。其中1&lt;=N&lt;=500,1&lt;=M&lt;=2500,1&lt;=W&lt;=200。 现在John想借助这些虫洞来回到过去（出发时刻之前），也就是说，John可以从任何一块地开始，但是最终要通过虫洞回到这块地，且时间要处在开始之前，请你告诉John他能办到吗。</p>
<p> John将向你提供F(1&lt;=F&lt;=5)个农场的地图。没有小路会耗费你超过10000秒的时间，当然也没有虫洞回帮你回到超过10000秒以前。</p>
<h2 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h2><ul>
<li><p>Line 1: 一个整数 F, 表示农场个数。</p>
</li>
<li><p>Line 1 of each farm: 三个整数 N, M, W。</p>
</li>
<li><p>Lines 2..M+1 of each farm: 三个数（S, E, T）。表示在标号为S的地与标号为E的地中间有一条用时T秒的小路。</p>
</li>
<li><p>Lines M+2..M+W+1 of each farm: 三个数（S, E, T）。表示在标号为S的地与标号为E的地中间有一条可以使John到达T秒前的虫洞。</p>
</li>
</ul>
<h2 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h2><ul>
<li>Lines 1..F: 如果John能在这个农场实现他的目标，输出”YES”,否则输出”NO”。</li>
</ul>
<h2 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">2</span><br><span class="line">3 3 1</span><br><span class="line">1 2 2</span><br><span class="line">1 3 4</span><br><span class="line">2 3 1</span><br><span class="line">3 1 3</span><br><span class="line">3 2 1</span><br><span class="line">1 2 3</span><br><span class="line">2 3 4</span><br><span class="line">3 1 8</span><br></pre></td></tr></table></figure>
<h2 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">NO</span><br><span class="line">YES</span><br></pre></td></tr></table></figure>
<h2 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h2><p>图论基础题，理解一下题目大意，就是：<strong>给你一张含有 M 条无向边的和 W 条有向边的混合图，问你图中是否存在负环（因为通过虫洞回到原点时时间在开始之前，那么路上权值之和一定为负值）</strong></p>
<p>判断负环用的是 SPFA 算法</p>
<h2 id="Codes"><a href="#Codes" class="headerlink" title="Codes"></a>Codes</h2><h2 id=""><a href="#" class="headerlink" title=""></a><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxn 1003</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxm 100005</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="type">int</span>,<span class="type">int</span>&gt; pr;</span><br><span class="line"><span class="type">const</span> ll INF=<span class="number">1e15</span>;</span><br><span class="line"><span class="type">int</span> n,m,s,addcnt[maxn];</span><br><span class="line">ll dist[maxn];</span><br><span class="line"><span class="type">bool</span> vis[maxn];</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">node</span>&#123;</span><br><span class="line">	vector&lt;pr&gt; linkto;</span><br><span class="line">&#125;e[maxn];</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">init</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="type">int</span> x,y,z;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>,&amp;n,&amp;m,&amp;s);</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++)&#123;</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>,&amp;x,&amp;y,&amp;z);</span><br><span class="line">		<span class="keyword">if</span>(x==y) <span class="keyword">continue</span>;</span><br><span class="line">		e[x].linkto.<span class="built_in">push_back</span>(<span class="built_in">make_pair</span>(y,z));</span><br><span class="line">		e[y].linkto.<span class="built_in">push_back</span>(<span class="built_in">make_pair</span>(x,z));</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=s;i++)&#123;</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>,&amp;x,&amp;y,&amp;z);</span><br><span class="line">		e[x].linkto.<span class="built_in">push_back</span>(<span class="built_in">make_pair</span>(y,-z));</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">spfa</span><span class="params">(<span class="type">int</span> st,<span class="type">int</span> mode)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	vector&lt;pr&gt;::iterator iterid;</span><br><span class="line">	<span class="type">int</span> head,next,val;</span><br><span class="line">	queue&lt;<span class="type">int</span>&gt; wait;</span><br><span class="line">	<span class="built_in">memset</span>(vis,<span class="literal">false</span>,<span class="built_in">sizeof</span>(vis));</span><br><span class="line">	<span class="keyword">if</span>(mode==<span class="number">1</span>)&#123; <span class="comment">// 判断负环  </span></span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">			dist[i]=<span class="number">0</span>;</span><br><span class="line">			vis[i]=<span class="literal">true</span>;</span><br><span class="line">			wait.<span class="built_in">push</span>(i);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span>&#123;</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++) dist[i]=INF;</span><br><span class="line">		dist[st]=<span class="number">0</span>;</span><br><span class="line">		vis[st]=<span class="literal">true</span>;</span><br><span class="line">		wait.<span class="built_in">push</span>(st);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">while</span>(!wait.<span class="built_in">empty</span>())&#123;</span><br><span class="line">		head=wait.<span class="built_in">front</span>();</span><br><span class="line">		wait.<span class="built_in">pop</span>();</span><br><span class="line">		vis[head]=<span class="literal">false</span>;</span><br><span class="line">		iterid=e[head].linkto.<span class="built_in">begin</span>();</span><br><span class="line">		<span class="keyword">while</span>(iterid!=e[head].linkto.<span class="built_in">end</span>())&#123;</span><br><span class="line">			next=iterid-&gt;first;</span><br><span class="line">			val=iterid-&gt;second;</span><br><span class="line">			<span class="keyword">if</span>(dist[next]&gt;dist[head]+val)&#123;</span><br><span class="line">				dist[next]=dist[head]+val;</span><br><span class="line">				<span class="keyword">if</span>(!vis[next])&#123;</span><br><span class="line">					vis[next]=<span class="literal">true</span>;</span><br><span class="line">					wait.<span class="built_in">push</span>(next);</span><br><span class="line">					addcnt[next]++;</span><br><span class="line">					<span class="keyword">if</span>(mode==<span class="number">1</span>) <span class="keyword">if</span>(addcnt[next]&gt;=n<span class="number">-1</span>) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			iterid++;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line">	<span class="built_in">freopen</span>(<span class="string">&quot;wormhole.in&quot;</span>,<span class="string">&quot;r&quot;</span>,stdin);</span><br><span class="line">	<span class="built_in">freopen</span>(<span class="string">&quot;wormhole.out&quot;</span>,<span class="string">&quot;w&quot;</span>,stdout);</span><br><span class="line">	<span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line">	<span class="type">int</span> T; <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;T);</span><br><span class="line">	<span class="keyword">while</span>(T--)&#123;</span><br><span class="line">		<span class="built_in">init</span>();</span><br><span class="line">		<span class="keyword">if</span>(<span class="built_in">spfa</span>(<span class="number">0</span>,<span class="number">1</span>)) <span class="built_in">printf</span>(<span class="string">&quot;YES\n&quot;</span>);</span><br><span class="line">		<span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">&quot;NO\n&quot;</span>);</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++) e[i].linkto.<span class="built_in">clear</span>();</span><br><span class="line">		<span class="built_in">memset</span>(addcnt,<span class="number">0</span>,<span class="built_in">sizeof</span>(addcnt));</span><br><span class="line">	&#125; </span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></h2><h2 id="Problem-2：数列问题"><a href="#Problem-2：数列问题" class="headerlink" title="Problem.#2：数列问题"></a>Problem.#2：数列问题</h2><p>给定一个数列，从中找到3个无交集的连续子数列使其和最大。</p>
<h2 id="Input-1"><a href="#Input-1" class="headerlink" title="Input"></a>Input</h2><p>第一行一个数n，表示数列长度。</p>
<p>接下来有n行，每行一个数，第i行为第i个数。</p>
<h2 id="Output-1"><a href="#Output-1" class="headerlink" title="Output"></a>Output</h2><p>仅有一个数，表示最大和。</p>
<h2 id="Sample-Input-1"><a href="#Sample-Input-1" class="headerlink" title="Sample Input"></a>Sample Input</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">10</span><br><span class="line">-1 2 3 -4 0 1 -6 -1 1 -2</span><br></pre></td></tr></table></figure>
<h2 id="Sample-Output-1"><a href="#Sample-Output-1" class="headerlink" title="Sample Output"></a>Sample Output</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1</span><br></pre></td></tr></table></figure>
<h2 id="分析-1"><a href="#分析-1" class="headerlink" title="分析"></a>分析</h2><p>考试时想到的是所有的正数和 + 如果正数不够 3 个就加上最大的负数，愉快的 WA 了大样例（因为两个区间的正数和他们之间的负数的整体和很有可能大于原来的任何一个正数区间和）</p>
<p>于是自然而然地想到了 DP，设 $f[i][j][k]$ 表示当前考虑到第 $i$ 个数，要形成 $j$ 组（$j\leq 3$）并且选不选这个数（$k=0$ 表示不选，反之则选），下面来讨论：</p>
<ol>
<li><p>如果选这个数，那么要形成 $j$ 组，可以根第 $i-1$ 个数凑到一起，需要 $f[i-1][j][1]$ ，或者也可以另起一组那么第 $i-1$ 个数就无所谓了，需要 $f[i-1][j-1][0]$ 或 $f[i-1][j-1][1]$ 皆可</p>
</li>
<li><p>如果不选这个数，那么要形成 $j$ 组，显然第 $i-1$ 个数必须已经形成 $j$ 组才行，所以就是 $f[i-1][j][0]$ 和 $f[i-1][j][1]$ </p>
</li>
</ol>
<h2 id="Codes-1"><a href="#Codes-1" class="headerlink" title="Codes"></a>Codes</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxn 1000001</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line">ll a[maxn];ll n;</span><br><span class="line">ll f[maxn][<span class="number">4</span>][<span class="number">2</span>];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line">	<span class="built_in">freopen</span>(<span class="string">&quot;array.in&quot;</span>,<span class="string">&quot;r&quot;</span>,stdin);</span><br><span class="line">	<span class="built_in">freopen</span>(<span class="string">&quot;array.out&quot;</span>,<span class="string">&quot;w&quot;</span>,stdout);</span><br><span class="line">	<span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%lld&quot;</span>,&amp;n);</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++) </span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%lld&quot;</span>,&amp;a[i]);</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=<span class="number">3</span>;j++)&#123;</span><br><span class="line">			f[i][j][<span class="number">0</span>]=<span class="built_in">max</span>(f[i<span class="number">-1</span>][j][<span class="number">0</span>],f[i<span class="number">-1</span>][j][<span class="number">1</span>]);</span><br><span class="line">			f[i][j][<span class="number">1</span>]=<span class="built_in">max</span>(f[i<span class="number">-1</span>][j<span class="number">-1</span>][<span class="number">0</span>],<span class="built_in">max</span>(f[i<span class="number">-1</span>][j<span class="number">-1</span>][<span class="number">1</span>],f[i<span class="number">-1</span>][j][<span class="number">1</span>]))+a[i];</span><br><span class="line">		&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%lld&quot;</span>,<span class="built_in">max</span>(f[n][<span class="number">3</span>][<span class="number">0</span>],f[n][<span class="number">3</span>][<span class="number">1</span>]));</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="Problem-3：Dueling-GPS-gps-cpp"><a href="#Problem-3：Dueling-GPS-gps-cpp" class="headerlink" title="Problem.#3：Dueling GPS (gps.cpp)"></a>Problem.#3：Dueling GPS (gps.cpp)</h2><blockquote>
<p>Farmer John has recently purchased a new car online, but in his haste he accidentally clicked the “Submit” button twice when selecting extra features for the car, and as a result the car ended up equipped with two GPS navigation systems! Even worse, the two systems often make conflicting decisions about the route that FJ should take. The map of the region in which FJ lives consists of N intersections (2 &lt;= N &lt;= 10,000) and M directional roads (1 &lt;= M &lt;= 50,000). Road i connects intersections A_i (1 &lt;= A_i &lt;= N) and B_i (1 &lt;= B_i &lt;= N). Multiple roads could connect the same pair of intersections, and a bi-directional road (one permitting two-way travel) is represented by two separate directional roads in opposite orientations. FJ’s house is located at intersection 1, and his farm is located at intersection N. It is possible to reach the farm from his house by traveling along a series of directional roads. Both GPS units are using the same underlying map as described above; however, they have different notions for the travel time along each road. Road i takes P_i units of time to traverse according to the first GPS unit, and Q_i units of time to traverse according to the second unit (each travel time is an integer in the range 1..100,000). FJ wants to travel from his house to the farm. However, each GPS unit complains loudly any time FJ follows a road (say, from intersection X to intersection Y) that the GPS unit believes not to be part of a shortest route from X to the farm (it is even possible that both GPS units can complain, if FJ takes a road that neither unit likes). Please help FJ determine the minimum possible number of total complaints he can receive if he chooses his route appropriately. If both GPS units complain when FJ follows a road, this counts as +2 towards the total.</p>
</blockquote>
<p>John最近新买了辆车，但是他在为车订购GPS时，脑子进水点了两下”Submit”，导致新车装了两套GPS系统，更糟的是，两套GPS系统存储的路径信息不同，当John没有按照GPS的预定最短路径走的时候，GPS就会报警一次，如果John同时不在两套GPS的预定路径上行驶，他们甚至会同时报警，John现在把这个难题交给了你，他给了你一张有向图有 N 个结点和 M 条边，两套GPS存储的从 i 到 j 的路径长度分别用 A_i 和 B_i 表示，John希望你帮他设计一条从 1 到 N的路线，使得他能听到最少的GPS报警次数</p>
<h2 id="Input-2"><a href="#Input-2" class="headerlink" title="Input"></a>Input</h2><ul>
<li>Line 1: The integers N and M. Line i describes road i with four integers: A_i B_i P_i Q_i.</li>
</ul>
<h2 id="Output-2"><a href="#Output-2" class="headerlink" title="Output"></a>Output</h2><ul>
<li>Line 1: The minimum total number of complaints FJ can receive if he routes himself from his house to the farm optimally.</li>
</ul>
<h2 id="Sample-Input-2"><a href="#Sample-Input-2" class="headerlink" title="Sample Input"></a>Sample Input</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">5 7</span><br><span class="line">3 4 7 1</span><br><span class="line">1 3 2 20</span><br><span class="line">1 4 17 18</span><br><span class="line">4 5 25 3</span><br><span class="line">1 2 10 1</span><br><span class="line">3 5 4 14</span><br><span class="line">2 4 6 5</span><br></pre></td></tr></table></figure>
<h2 id="Sample-Output-2"><a href="#Sample-Output-2" class="headerlink" title="Sample Output"></a>Sample Output</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1</span><br></pre></td></tr></table></figure>
<h2 id="分析-2"><a href="#分析-2" class="headerlink" title="分析"></a>分析</h2><p><strong>建三个图，分别存储 GPS1  的路径信息，GPS2的路径信息，以及报警次数</strong></p>
<p>先对 1，2 图进行 SPFA ，记录下最短路经过的边，一开始把 3 图的边权全部改成 2，代表两个 GPS 都为报警，然后对于每个 GPS 认为的最短路径的边，在 3 图中边权减去 1 即可</p>
<p><strong>需要注意的是，GPS 对于路径的选择是实时更新的，每次 GPS 都会选择当前点 k 到点 N 的最短路径而不是当前点 k 到点 1 的最短路径，因此 1，2 图要存逆图再 SPFA</strong></p>
<p>最后在图3上 SPFA 求最短路就可以了</p>
<h2 id="Codes-2"><a href="#Codes-2" class="headerlink" title="Codes"></a>Codes</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxn 10001</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxm 50001</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="comment">// mixed graphs </span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">node</span>&#123;</span><br><span class="line">	<span class="type">int</span> TO,NXT,VAL;</span><br><span class="line">	<span class="meta">#<span class="keyword">define</span> to(x,y) g[x][y].TO </span></span><br><span class="line">	<span class="meta">#<span class="keyword">define</span> nxt(x,y) g[x][y].NXT</span></span><br><span class="line">	<span class="meta">#<span class="keyword">define</span> val(x,y) g[x][y].VAL </span></span><br><span class="line">&#125;g[<span class="number">4</span>][maxm]; <span class="type">int</span> tot[<span class="number">4</span>],head[<span class="number">4</span>][maxm];</span><br><span class="line"><span class="type">int</span> n,m,vis[maxn];</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> t&gt;<span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">fcin</span><span class="params">(t &amp;x)</span></span>&#123;</span><br><span class="line">	<span class="type">int</span> sign=<span class="number">1</span>; x=<span class="number">0</span>; <span class="type">char</span> op=<span class="built_in">getchar</span>();</span><br><span class="line">	<span class="keyword">while</span>(op&lt;<span class="string">&#x27;0&#x27;</span>||op&gt;<span class="string">&#x27;9&#x27;</span>)&#123;<span class="keyword">if</span>(op==<span class="string">&#x27;-&#x27;</span>) sign=<span class="number">-1</span>;op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line">	<span class="keyword">while</span>(op&gt;=<span class="string">&#x27;0&#x27;</span>&amp;&amp;op&lt;=<span class="string">&#x27;9&#x27;</span>)&#123;x=x*<span class="number">10</span>+(op<span class="number">-48</span>);op=<span class="built_in">getchar</span>();&#125;</span><br><span class="line">	x*=sign;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">Eadd</span><span class="params">(<span class="type">int</span> cnt,<span class="type">int</span> u,<span class="type">int</span> v,<span class="type">int</span> x)</span></span>&#123;</span><br><span class="line">	<span class="built_in">nxt</span>(cnt,++tot[cnt])=head[cnt][u];</span><br><span class="line">	<span class="built_in">to</span>(cnt,tot[cnt])=v; <span class="built_in">val</span>(cnt,tot[cnt])=x;</span><br><span class="line">	head[cnt][u]=tot[cnt];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">SPFA</span><span class="params">(<span class="type">int</span> cnt,<span class="type">int</span> st)</span></span>&#123;</span><br><span class="line">	<span class="type">int</span> dist[maxn];<span class="function">pair&lt;<span class="type">int</span>,<span class="type">int</span>&gt; <span class="title">qhead</span><span class="params">(<span class="number">0</span>,<span class="number">0</span>)</span></span>;</span><br><span class="line">	priority_queue&lt;pair&lt;<span class="type">int</span>,<span class="type">int</span>&gt; &gt; q;</span><br><span class="line">	<span class="built_in">memset</span>(dist,<span class="number">127</span>,<span class="built_in">sizeof</span>(dist));</span><br><span class="line">	<span class="built_in">memset</span>(vis,<span class="literal">false</span>,<span class="built_in">sizeof</span>(vis));</span><br><span class="line">	q.<span class="built_in">push</span>(<span class="built_in">make_pair</span>(<span class="number">0</span>,st));vis[st]=<span class="literal">true</span>;dist[st]=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span>(!q.<span class="built_in">empty</span>())&#123;</span><br><span class="line">		qhead=q.<span class="built_in">top</span>();q.<span class="built_in">pop</span>();</span><br><span class="line">		<span class="keyword">if</span>(dist[qhead.second]!=-qhead.first) <span class="keyword">continue</span>;</span><br><span class="line">		vis[qhead.second]=<span class="literal">true</span>;</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> i=head[cnt][qhead.second];i;i=<span class="built_in">nxt</span>(cnt,i))</span><br><span class="line">			<span class="keyword">if</span>(!vis[<span class="built_in">to</span>(cnt,i)])</span><br><span class="line">				<span class="keyword">if</span>(dist[<span class="built_in">to</span>(cnt,i)]&gt;dist[qhead.second]+<span class="built_in">val</span>(cnt,i))</span><br><span class="line">					dist[<span class="built_in">to</span>(cnt,i)]=dist[qhead.second]+<span class="built_in">val</span>(cnt,i),</span><br><span class="line">					q.<span class="built_in">push</span>(<span class="built_in">make_pair</span>(-dist[<span class="built_in">to</span>(cnt,i)],<span class="built_in">to</span>(cnt,i)));</span><br><span class="line">	&#125; </span><br><span class="line">	<span class="keyword">if</span>(cnt==<span class="number">3</span>) <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,dist[n]);</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">			<span class="keyword">for</span>(<span class="type">int</span> j=head[cnt][i];j;j=<span class="built_in">nxt</span>(cnt,j))</span><br><span class="line">				<span class="keyword">if</span>(dist[i]+<span class="built_in">val</span>(cnt,j)==dist[<span class="built_in">to</span>(cnt,j)])</span><br><span class="line">					<span class="built_in">val</span>(<span class="number">3</span>,j)--;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line">	<span class="built_in">freopen</span>(<span class="string">&quot;gps.in&quot;</span>,<span class="string">&quot;r&quot;</span>,stdin);</span><br><span class="line">	<span class="built_in">freopen</span>(<span class="string">&quot;gps.out&quot;</span>,<span class="string">&quot;w&quot;</span>,stdout);</span><br><span class="line">	<span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line">	<span class="built_in">fcin</span>(n);<span class="built_in">fcin</span>(m); <span class="type">int</span> x,y,z,w;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++)&#123;</span><br><span class="line">		<span class="built_in">fcin</span>(x);<span class="built_in">fcin</span>(y);<span class="built_in">fcin</span>(z);<span class="built_in">fcin</span>(w);</span><br><span class="line">		<span class="built_in">Eadd</span>(<span class="number">1</span>,y,x,z);<span class="built_in">Eadd</span>(<span class="number">2</span>,y,x,w);</span><br><span class="line">		<span class="built_in">Eadd</span>(<span class="number">3</span>,x,y,<span class="number">2</span>); </span><br><span class="line">	&#125; <span class="built_in">SPFA</span>(<span class="number">1</span>,n);<span class="built_in">SPFA</span>(<span class="number">2</span>,n);</span><br><span class="line">	<span class="built_in">SPFA</span>(<span class="number">3</span>,<span class="number">1</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="http://example.com">Yan2u</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://example.com/2019/06/24/2019-06-24-%E8%80%83%E8%AF%95%E8%A7%A3%E9%A2%98%E6%8A%A5%E5%91%8A/">http://example.com/2019/06/24/2019-06-24-%E8%80%83%E8%AF%95%E8%A7%A3%E9%A2%98%E6%8A%A5%E5%91%8A/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://example.com" target="_blank">Yan2u's Blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E5%9B%BE%E8%AE%BA/">图论</a><a class="post-meta__tags" href="/tags/SPFA/">SPFA</a></div><div class="post_share"><div class="social-share" data-image="https://s1.ax1x.com/2022/08/11/v8u55Q.jpg" data-sites="wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2019/06/28/2019-06-28-twoSAT/"><img class="prev-cover" src="https://s1.ax1x.com/2022/08/11/v8u55Q.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">图论 | 2-SAT | 2-SAT问题：学习笔记</div></div></a></div><div class="next-post pull-right"><a href="/2019/06/11/2019-06-11-%E6%B7%B7%E4%B9%B1%E7%9A%84%E5%A5%B6%E7%89%9B/"><img class="next-cover" src="https://s1.ax1x.com/2022/08/11/v8u55Q.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">动态规划 | [USACO08NOV]奶牛混合起来  Mixed Up Cows</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2019/04/06/2019-04-06-%E6%9C%80%E5%B0%8F%E5%9C%88/" title="图论 | 最短路径 | SPFA | 最小圈"><img class="cover" src="https://s1.ax1x.com/2022/08/11/v8u55Q.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2019-04-06</div><div class="title">图论 | 最短路径 | SPFA | 最小圈</div></div></a></div><div><a href="/2019/04/15/2019-04-15-%E5%9B%BE%E8%AE%BA%E8%80%83%E8%AF%951/" title="图论 | 最短路径 | SPFA | 20190414 考试(图  论综合1)"><img class="cover" src="https://s1.ax1x.com/2022/08/11/v8u55Q.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2019-04-15</div><div class="title">图论 | 最短路径 | SPFA | 20190414 考试(图  论综合1)</div></div></a></div><div><a href="/2019/08/20/2019-08-20-0820%E8%80%83%E8%AF%95/" title="数论| SPFA | 图论 | 分治 | 20190820考试解  题报告"><img class="cover" src="https://s1.ax1x.com/2022/08/11/v8u55Q.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2019-08-20</div><div class="title">数论| SPFA | 图论 | 分治 | 20190820考试解  题报告</div></div></a></div><div><a href="/2019/03/22/2019-03-22-%E5%8C%97%E6%9E%81%E9%80%9A%E8%AE%AF%E7%BD%91%E7%BB%9C/" title="图论 | 最小生成树 | 北极通讯网  络"><img class="cover" src="https://s1.ax1x.com/2022/08/11/v8u55Q.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2019-03-22</div><div class="title">图论 | 最小生成树 | 北极通讯网  络</div></div></a></div><div><a href="/2019/03/24/2019-03-24-%E6%97%85%E8%A1%8C/" title="图论 | 最小生成树 | [HAOI2006]舒适的  路线"><img class="cover" src="https://s1.ax1x.com/2022/08/11/v8u55Q.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2019-03-24</div><div class="title">图论 | 最小生成树 | [HAOI2006]舒适的  路线</div></div></a></div><div><a href="/2019/03/24/2019-03-24-%E6%9C%80%E5%B0%8F%E7%94%9F%E6%88%90%E6%A0%91%E8%AE%A1%E6%95%B0/" title="图论 | 最小生成树 | 最小生成树  计数"><img class="cover" src="https://s1.ax1x.com/2022/08/11/v8u55Q.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2019-03-24</div><div class="title">图论 | 最小生成树 | 最小生成树  计数</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://s1.ax1x.com/2022/06/20/XjjdfK.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Yan2u</div><div class="author-info__description">A LOOOSER</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">55</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">47</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">2</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Yan2u"><i class="fab fa-github"></i><span>Yan2u - Github</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/Yan2u" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:1955997092@qq.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Problem-1%EF%BC%9A%E8%99%AB%E6%B4%9E-wormhole-cpp-c-pas"><span class="toc-number">1.</span> <span class="toc-text">Problem.#1：虫洞(wormhole.cpp&#x2F;c&#x2F;pas)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Input"><span class="toc-number">2.</span> <span class="toc-text">Input</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Output"><span class="toc-number">3.</span> <span class="toc-text">Output</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Sample-Input"><span class="toc-number">4.</span> <span class="toc-text">Sample Input</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Sample-Output"><span class="toc-number">5.</span> <span class="toc-text">Sample Output</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%86%E6%9E%90"><span class="toc-number">6.</span> <span class="toc-text">分析</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Codes"><span class="toc-number">7.</span> <span class="toc-text">Codes</span></a></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">8.</span> <span class="toc-text">1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889#include &lt;cstdio&gt;#include &lt;queue&gt;#include &lt;vector&gt;#include &lt;algorithm&gt;#include &lt;cstring&gt;#define maxn 1003#define maxm 100005using namespace std;typedef long long ll;typedef pair&lt;int,int&gt; pr;const ll INF&#x3D;1e15;int n,m,s,addcnt[maxn];ll dist[maxn];bool vis[maxn];struct node{	vector&lt;pr&gt; linkto;}e[maxn];inline void init(){	int x,y,z;	scanf(&quot;%d%d%d&quot;,&amp;n,&amp;m,&amp;s);	for(int i&#x3D;1;i&lt;&#x3D;m;i++){		scanf(&quot;%d%d%d&quot;,&amp;x,&amp;y,&amp;z);		if(x&#x3D;&#x3D;y) continue;		e[x].linkto.push_back(make_pair(y,z));		e[y].linkto.push_back(make_pair(x,z));	}	for(int i&#x3D;1;i&lt;&#x3D;s;i++){		scanf(&quot;%d%d%d&quot;,&amp;x,&amp;y,&amp;z);		e[x].linkto.push_back(make_pair(y,-z));	}}bool spfa(int st,int mode){	vector&lt;pr&gt;::iterator iterid;	int head,next,val;	queue&lt;int&gt; wait;	memset(vis,false,sizeof(vis));	if(mode&#x3D;&#x3D;1){ &#x2F;&#x2F; 判断负环  		for(int i&#x3D;1;i&lt;&#x3D;n;i++){			dist[i]&#x3D;0;			vis[i]&#x3D;true;			wait.push(i);		}	}	else{		for(int i&#x3D;1;i&lt;&#x3D;n;i++) dist[i]&#x3D;INF;		dist[st]&#x3D;0;		vis[st]&#x3D;true;		wait.push(st);	}	while(!wait.empty()){		head&#x3D;wait.front();		wait.pop();		vis[head]&#x3D;false;		iterid&#x3D;e[head].linkto.begin();		while(iterid!&#x3D;e[head].linkto.end()){			next&#x3D;iterid-&gt;first;			val&#x3D;iterid-&gt;second;			if(dist[next]&gt;dist[head]+val){				dist[next]&#x3D;dist[head]+val;				if(!vis[next]){					vis[next]&#x3D;true;					wait.push(next);					addcnt[next]++;					if(mode&#x3D;&#x3D;1) if(addcnt[next]&gt;&#x3D;n-1) return true;				}			}			iterid++;		}	}	return false;}int main(){	#ifndef ONLINE_JUDGE	freopen(&quot;wormhole.in&quot;,&quot;r&quot;,stdin);	freopen(&quot;wormhole.out&quot;,&quot;w&quot;,stdout);	#endif	int T; scanf(&quot;%d&quot;,&amp;T);	while(T--){		init();		if(spfa(0,1)) printf(&quot;YES\n&quot;);		else printf(&quot;NO\n&quot;);		for(int i&#x3D;1;i&lt;&#x3D;n;i++) e[i].linkto.clear();		memset(addcnt,0,sizeof(addcnt));	} 	return 0;}</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Problem-2%EF%BC%9A%E6%95%B0%E5%88%97%E9%97%AE%E9%A2%98"><span class="toc-number">9.</span> <span class="toc-text">Problem.#2：数列问题</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Input-1"><span class="toc-number">10.</span> <span class="toc-text">Input</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Output-1"><span class="toc-number">11.</span> <span class="toc-text">Output</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Sample-Input-1"><span class="toc-number">12.</span> <span class="toc-text">Sample Input</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Sample-Output-1"><span class="toc-number">13.</span> <span class="toc-text">Sample Output</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%86%E6%9E%90-1"><span class="toc-number">14.</span> <span class="toc-text">分析</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Codes-1"><span class="toc-number">15.</span> <span class="toc-text">Codes</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Problem-3%EF%BC%9ADueling-GPS-gps-cpp"><span class="toc-number">16.</span> <span class="toc-text">Problem.#3：Dueling GPS (gps.cpp)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Input-2"><span class="toc-number">17.</span> <span class="toc-text">Input</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Output-2"><span class="toc-number">18.</span> <span class="toc-text">Output</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Sample-Input-2"><span class="toc-number">19.</span> <span class="toc-text">Sample Input</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Sample-Output-2"><span class="toc-number">20.</span> <span class="toc-text">Sample Output</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%86%E6%9E%90-2"><span class="toc-number">21.</span> <span class="toc-text">分析</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Codes-2"><span class="toc-number">22.</span> <span class="toc-text">Codes</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2020/03/19/2020-03-19-Deepin/" title="Deepin 初体验">Deepin 初体验</a><time datetime="2020-03-18T16:00:00.000Z" title="发表于 2020-03-19 00:00:00">2020-03-19</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2020/03/17/2020-03-17-Neumorphic/" title="Neumorphism UI： 新拟态设计">Neumorphism UI： 新拟态设计</a><time datetime="2020-03-16T16:00:00.000Z" title="发表于 2020-03-17 00:00:00">2020-03-17</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2020/02/02/2020-02-02-LRCEditor01/" title="LrcEditor开发记（一）api接口">LrcEditor开发记（一）api接口</a><time datetime="2020-02-01T16:00:00.000Z" title="发表于 2020-02-02 00:00:00">2020-02-02</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2019/10/31/2019-10-31-exam/" title="动态规划 | 线段树 | 0/1分数规划  \ | 图论  | 201901031考试：解题报告">动态规划 | 线段树 | 0/1分数规划  \ | 图论  | 201901031考试：解题报告</a><time datetime="2019-10-30T16:00:00.000Z" title="发表于 2019-10-31 00:00:00">2019-10-31</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2019/10/25/2019-10-25-exam/" title="动态规划 | 贪心 | 图论 | 201901025考试  ：解题报告">动态规划 | 贪心 | 图论 | 201901025考试  ：解题报告</a><time datetime="2019-10-24T16:00:00.000Z" title="发表于 2019-10-25 00:00:00">2019-10-25</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2022 By Yan2u</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>if (!window.MathJax) {
  window.MathJax = {
    tex: {
      inlineMath: [ ['$','$'], ["\\(","\\)"]],
      tags: 'ams'
    },
    chtml: {
      scale: 1.2
    },
    options: {
      renderActions: {
        findScript: [10, doc => {
          for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
            const display = !!node.type.match(/; *mode=display/)
            const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
            const text = document.createTextNode('')
            node.parentNode.replaceChild(text, node)
            math.start = {node: text, delim: '', n: 0}
            math.end = {node: text, delim: '', n: 0}
            doc.math.push(math)
          }
        }, ''],
        insertScript: [200, () => {
          document.querySelectorAll('mjx-container:not\([display]\)').forEach(node => {
            const target = node.parentNode
            if (target.nodeName.toLowerCase() === 'li') {
              target.parentNode.classList.add('has-jax')
            } else {
              target.classList.add('has-jax')
            }
          });
        }, '', false]
      }
    }
  }
  
  const script = document.createElement('script')
  script.src = 'https://cdn.jsdelivr.net/npm/mathjax/es5/tex-mml-chtml.min.js'
  script.id = 'MathJax-script'
  script.async = true
  document.head.appendChild(script)
} else {
  MathJax.startup.document.state(0)
  MathJax.texReset()
  MathJax.typeset()
}</script><script>(() => {
  const $mermaidWrap = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaidWrap.length) {
    window.runMermaid = () => {
      window.loadMermaid = true
      const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

      Array.from($mermaidWrap).forEach((item, index) => {
        const mermaidSrc = item.firstElementChild
        const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
        const mermaidID = 'mermaid-' + index
        const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent
        mermaid.mermaidAPI.render(mermaidID, mermaidDefinition, (svgCode) => {
          mermaidSrc.insertAdjacentHTML('afterend', svgCode)
        })
      })
    }

    const loadMermaid = () => {
      window.loadMermaid ? runMermaid() : getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaid)
    }

    window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
  }
})()</script></div><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-fluttering-ribbon.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><!-- hexo injector body_end start -->
  <script data-pjax src="https://cdn.jsdelivr.net/gh/Zfour/hexo-github-calendar@1.16/hexo_githubcalendar.js"></script>
  <script data-pjax>
        function GithubCalendarConfig(){
            var git_githubapiurl ="https://python-github-calendar-api.vercel.app/api?yan2u";
            var git_color =['#ebedf0', '#f0fff4', '#dcffe4', '#bef5cb', '#85e89d', '#34d058', '#28a745', '#22863a', '#176f2c', '#165c26', '#144620'];
            var git_user ="yan2u";
            var parent_div_git = document.getElementById('recent-posts');
            var git_div_html = '<div class="recent-post-item" style="width:100%;height:auto;padding:10px;"><div id="github_loading" style="width:10%;height:100%;margin:0 auto;display: block"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"  viewBox="0 0 50 50" style="enable-background:new 0 0 50 50" xml:space="preserve"><path fill="#d0d0d0" d="M25.251,6.461c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615V6.461z" transform="rotate(275.098 25 25)"><animateTransform attributeType="xml" attributeName="transform" type="rotate" from="0 25 25" to="360 25 25" dur="0.6s" repeatCount="indefinite"></animateTransform></path></svg></div><div id="github_container"></div></div>';
            if(parent_div_git && location.pathname =='/'){
                console.log('已挂载github calendar')
                // parent_div_git.innerHTML=git_div_html+parent_div_git.innerHTML // 无报错，但不影响使用(支持pjax跳转)
                parent_div_git.insertAdjacentHTML("afterbegin",git_div_html) // 有报错，但不影响使用(支持pjax跳转)
            };
            GithubCalendar(git_githubapiurl,git_color,git_user)
        }
        if(document.getElementById('recent-posts')){
            GithubCalendarConfig()
        }
    </script>
    <style>#github_container{min-height:280px}@media screen and (max-width:650px) {#github_container{background-image:;min-height:0px}}</style>
    <style>undefined</style><!-- hexo injector body_end end --></body></html>